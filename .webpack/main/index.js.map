{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wallcrunch/./node_modules/@oozcitak/util/lib/CompareCache.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Byte.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/bool.js","webpack://wallcrunch/./node_modules/@oozcitak/util/lib/StringWalker.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/TextImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Namespace.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/StaticRangeImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/TreeAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/WindowImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/DocumentAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/loader.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Base64.js","webpack://wallcrunch/external node-commonjs \"os\"","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/builder/XMLBuilderCBImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/JSON.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/schema/default_full.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Queue.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/serializer/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/AbortControllerImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/url/lib/URLAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/util/lib/Lazy.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NamedNodeMapImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/TextAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/set.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/readers/JSONReader.js","webpack://wallcrunch/./node_modules/electron-squirrel-startup/node_modules/debug/src/browser.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/HTMLCollectionImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/BaseCBWriter.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/builder/XMLBuilderImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/CharacterDataAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/NodeIteratorAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/float.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/JSONCBWriter.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/MutationRecordImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/TraversalAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/schema.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/List.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/builder/dom.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/AbstractRangeImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/index.js","webpack://wallcrunch/external node-commonjs \"fs/promises\"","webpack://wallcrunch/./node_modules/@oozcitak/util/lib/ObjectCache.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/XMLWriter.js","webpack://wallcrunch/external node-commonjs \"tty\"","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NodeImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/EventTargetAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/AttrAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DOMTokenListImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/AbortSignalImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DOMImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/serializer/NamespacePrefixMap.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/omap.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/ParentNodeAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/parser/interfaces.js","webpack://wallcrunch/./node_modules/electron-squirrel-startup/index.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/JSONWriter.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/SelectorsAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/parser/DOMParserImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/ElementAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/RangeImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/EventAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Map.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/schema/core.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/AttrImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/readers/ObjectReader.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/interfaces.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NodeListImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/DOMTokenListAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/parser/XMLParserImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/util/Guard.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/OrderedSetAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/XMLAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/ShadowTreeAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NonDocumentTypeChildNodeImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DOMException.js","webpack://wallcrunch/external node-commonjs \"electron\"","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/constants.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/TraverserImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/index.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/readers/BaseReader.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/util/Cast.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/null.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NodeIteratorImpl.js","webpack://wallcrunch/external node-commonjs \"events\"","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/EventTargetImpl.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/pairs.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/ByteSequence.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/MutationAlgorithm.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/MapWriter.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/ParentNodeImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/ObjectWriter.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/NodeAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/XMLCBWriter.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NodeListStaticImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/ProcessingInstructionImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/CustomElementAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/TreeWalkerImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/index.js","webpack://wallcrunch/external node-commonjs \"child_process\"","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/CommentImpl.js","webpack://wallcrunch/./src/index.ts","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/timestamp.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/builder/BuilderFunctions.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/BaseWriter.js","webpack://wallcrunch/./node_modules/electron-squirrel-startup/node_modules/ms/index.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/js/function.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/CustomEventImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/MutationObserverImpl.js","webpack://wallcrunch/./node_modules/electron-squirrel-startup/node_modules/debug/src/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/WebIDLAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/ChildNodeImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/util/EmptySet.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/XMLDocumentImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/util/lib/FixedSizeSet.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/str.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/seq.js","webpack://wallcrunch/./node_modules/@oozcitak/url/lib/interfaces.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/MutationObserverAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/CodePoints.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/parser/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/AbortAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/util/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/TreeWalkerAlgorithm.js","webpack://wallcrunch/external node-commonjs \"path\"","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/readers/XMLReader.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/ElementImpl.js","webpack://wallcrunch/external node-commonjs \"url\"","webpack://wallcrunch/./node_modules/js-yaml/index.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/YAMLWriter.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/map.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/RangeAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/js/regexp.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/CDATASectionImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/builder/BuilderFunctionsCB.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/SlotableImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DocumentImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Set.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NonElementParentNodeImpl.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/binary.js","webpack://wallcrunch/./node_modules/electron-squirrel-startup/node_modules/debug/src/node.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/mark.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/schema/default_safe.js","webpack://wallcrunch/./node_modules/electron-squirrel-startup/node_modules/debug/src/debug.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/String.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/parser/XMLStringLexer.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/BoundaryPointAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DocumentFragmentImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DocumentOrShadowRootImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/serializer/LocalNameSet.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/dumper.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/builder/index.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DOMImplementationImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/serializer/XMLSerializerImpl.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/writers/YAMLCBWriter.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/DOMAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/CreateAlgorithm.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/schema/failsafe.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/int.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/NodeFilterImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/CharacterDataImpl.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/exception.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/NamespaceAlgorithm.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/algorithm/index.js","webpack://wallcrunch/external node-commonjs \"util\"","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/common.js","webpack://wallcrunch/./node_modules/@oozcitak/infra/lib/Stack.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/readers/index.js","webpack://wallcrunch/external node-commonjs \"net\"","webpack://wallcrunch/./node_modules/@oozcitak/util/lib/index.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/js/undefined.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/EventImpl.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/ShadowRootImpl.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/schema/json.js","webpack://wallcrunch/./node_modules/js-yaml/lib/js-yaml/type/merge.js","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/readers/YAMLReader.js","webpack://wallcrunch/./node_modules/@oozcitak/dom/lib/dom/DocumentTypeImpl.js","webpack://wallcrunch/external node-commonjs \"fs\"","webpack://wallcrunch/./node_modules/xmlbuilder2/lib/interfaces.js","webpack://wallcrunch/webpack/bootstrap","webpack://wallcrunch/webpack/runtime/compat","webpack://wallcrunch/webpack/startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents a cache for storing order between equal objects.\n *\n * This cache is used when an algorithm compares two objects and finds them to\n * be equal but still needs to establish an order between those two objects.\n * When two such objects `a` and `b` are passed to the `check` method, a random\n * number is generated with `Math.random()`. If the random number is less than\n * `0.5` it is assumed that `a < b` otherwise `a > b`. The random number along\n * with `a` and `b` is stored in the cache, so that subsequent checks result\n * in the same consistent result.\n *\n * The cache has a size limit which is defined on initialization.\n */\nvar CompareCache = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `CompareCache`.\n     *\n     * @param limit - maximum number of items to keep in the cache. When the limit\n     * is exceeded the first item is removed from the cache.\n     */\n    function CompareCache(limit) {\n        if (limit === void 0) { limit = 1000; }\n        this._items = new Map();\n        this._limit = limit;\n    }\n    /**\n     * Compares and caches the given objects. Returns `true` if `objA < objB` and\n     * `false` otherwise.\n     *\n     * @param objA - an item to compare\n     * @param objB - an item to compare\n     */\n    CompareCache.prototype.check = function (objA, objB) {\n        if (this._items.get(objA) === objB)\n            return true;\n        else if (this._items.get(objB) === objA)\n            return false;\n        var result = (Math.random() < 0.5);\n        if (result) {\n            this._items.set(objA, objB);\n        }\n        else {\n            this._items.set(objB, objA);\n        }\n        if (this._items.size > this._limit) {\n            var it_1 = this._items.keys().next();\n            /* istanbul ignore else */\n            if (!it_1.done) {\n                this._items.delete(it_1.value);\n            }\n        }\n        return result;\n    };\n    return CompareCache;\n}());\nexports.CompareCache = CompareCache;\n//# sourceMappingURL=CompareCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Determines if the given number is an ASCII byte.\n *\n * @param byte - a byte\n */\nfunction isASCIIByte(byte) {\n    /**\n     * An ASCII byte is a byte in the range 0x00 (NUL) to 0x7F (DEL), inclusive.\n     */\n    return byte >= 0x00 && byte <= 0x7F;\n}\nexports.isASCIIByte = isASCIIByte;\n//# sourceMappingURL=Byte.js.map","'use strict';\n\nvar Type = require('../type');\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Walks through the code points of a string.\n */\nvar StringWalker = /** @class */ (function () {\n    /**\n     * Initializes a new `StringWalker`.\n     *\n     * @param input - input string\n     */\n    function StringWalker(input) {\n        this._pointer = 0;\n        this._chars = Array.from(input);\n        this._length = this._chars.length;\n    }\n    Object.defineProperty(StringWalker.prototype, \"eof\", {\n        /**\n         * Determines if the current position is beyond the end of string.\n         */\n        get: function () { return this._pointer >= this._length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StringWalker.prototype, \"length\", {\n        /**\n         * Returns the number of code points in the input string.\n         */\n        get: function () { return this._length; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns the current code point. Returns `-1` if the position is beyond\n     * the end of string.\n     */\n    StringWalker.prototype.codePoint = function () {\n        if (this._codePoint === undefined) {\n            if (this.eof) {\n                this._codePoint = -1;\n            }\n            else {\n                var cp = this._chars[this._pointer].codePointAt(0);\n                /* istanbul ignore else */\n                if (cp !== undefined) {\n                    this._codePoint = cp;\n                }\n                else {\n                    this._codePoint = -1;\n                }\n            }\n        }\n        return this._codePoint;\n    };\n    /**\n     * Returns the current character. Returns an empty string if the position is\n     * beyond the end of string.\n     */\n    StringWalker.prototype.c = function () {\n        if (this._c === undefined) {\n            this._c = (this.eof ? \"\" : this._chars[this._pointer]);\n        }\n        return this._c;\n    };\n    /**\n     * Returns the remaining string.\n     */\n    StringWalker.prototype.remaining = function () {\n        if (this._remaining === undefined) {\n            this._remaining = (this.eof ?\n                \"\" : this._chars.slice(this._pointer + 1).join(''));\n        }\n        return this._remaining;\n    };\n    /**\n     * Returns the substring from the current character to the end of string.\n     */\n    StringWalker.prototype.substring = function () {\n        if (this._substring === undefined) {\n            this._substring = (this.eof ?\n                \"\" : this._chars.slice(this._pointer).join(''));\n        }\n        return this._substring;\n    };\n    Object.defineProperty(StringWalker.prototype, \"pointer\", {\n        /**\n         * Gets or sets the current position.\n         */\n        get: function () { return this._pointer; },\n        set: function (val) {\n            if (val === this._pointer)\n                return;\n            this._pointer = val;\n            this._codePoint = undefined;\n            this._c = undefined;\n            this._remaining = undefined;\n            this._substring = undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return StringWalker;\n}());\nexports.StringWalker = StringWalker;\n//# sourceMappingURL=StringWalker.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar CharacterDataImpl_1 = require(\"./CharacterDataImpl\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a text node.\n */\nvar TextImpl = /** @class */ (function (_super) {\n    __extends(TextImpl, _super);\n    /**\n     * Initializes a new instance of `Text`.\n     *\n     * @param data - the text content\n     */\n    function TextImpl(data) {\n        if (data === void 0) { data = ''; }\n        var _this = _super.call(this, data) || this;\n        _this._name = '';\n        _this._assignedSlot = null;\n        return _this;\n    }\n    Object.defineProperty(TextImpl.prototype, \"wholeText\", {\n        /** @inheritdoc */\n        get: function () {\n            var e_1, _a;\n            /**\n             * The wholeText attribute’s getter must return the concatenation of the\n             * data of the contiguous Text nodes of the context object, in tree order.\n             */\n            var text = '';\n            try {\n                for (var _b = __values(algorithm_1.text_contiguousTextNodes(this, true)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var node = _c.value;\n                    text = text + node._data;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return text;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    TextImpl.prototype.splitText = function (offset) {\n        /**\n         * The splitText(offset) method, when invoked, must split context object\n         * with offset offset.\n         */\n        return algorithm_1.text_split(this, offset);\n    };\n    Object.defineProperty(TextImpl.prototype, \"assignedSlot\", {\n        // MIXIN: Slotable\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: Slotable not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a `Text`.\n     *\n     * @param document - owner document\n     * @param data - the text content\n     */\n    TextImpl._create = function (document, data) {\n        if (data === void 0) { data = ''; }\n        var node = new TextImpl(data);\n        node._nodeDocument = document;\n        return node;\n    };\n    return TextImpl;\n}(CharacterDataImpl_1.CharacterDataImpl));\nexports.TextImpl = TextImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(TextImpl.prototype, \"_nodeType\", interfaces_1.NodeType.Text);\n//# sourceMappingURL=TextImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HTML = \"http://www.w3.org/1999/xhtml\";\nexports.XML = \"http://www.w3.org/XML/1998/namespace\";\nexports.XMLNS = \"http://www.w3.org/2000/xmlns/\";\nexports.MathML = \"http://www.w3.org/1998/Math/MathML\";\nexports.SVG = \"http://www.w3.org/2000/svg\";\nexports.XLink = \"http://www.w3.org/1999/xlink\";\n//# sourceMappingURL=Namespace.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AbstractRangeImpl_1 = require(\"./AbstractRangeImpl\");\nvar DOMException_1 = require(\"./DOMException\");\nvar util_1 = require(\"../util\");\n/**\n * Represents a static range.\n */\nvar StaticRangeImpl = /** @class */ (function (_super) {\n    __extends(StaticRangeImpl, _super);\n    /**\n     * Initializes a new instance of `StaticRange`.\n     */\n    function StaticRangeImpl(init) {\n        var _this = _super.call(this) || this;\n        /**\n         * 1. If init’s startContainer or endContainer is a DocumentType or Attr\n         * node, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 2. Let staticRange be a new StaticRange object.\n         * 3. Set staticRange’s start to (init’s startContainer, init’s startOffset)\n         * and end to (init’s endContainer, init’s endOffset).\n         * 4. Return staticRange.\n         */\n        if (util_1.Guard.isDocumentTypeNode(init.startContainer) || util_1.Guard.isAttrNode(init.startContainer) ||\n            util_1.Guard.isDocumentTypeNode(init.endContainer) || util_1.Guard.isAttrNode(init.endContainer)) {\n            throw new DOMException_1.InvalidNodeTypeError();\n        }\n        _this._start = [init.startContainer, init.startOffset];\n        _this._end = [init.endContainer, init.endOffset];\n        return _this;\n    }\n    return StaticRangeImpl;\n}(AbstractRangeImpl_1.AbstractRangeImpl));\nexports.StaticRangeImpl = StaticRangeImpl;\n//# sourceMappingURL=StaticRangeImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nvar interfaces_1 = require(\"../dom/interfaces\");\n/**\n * Gets the next descendant of the given node of the tree rooted at `root`\n * in depth-first pre-order.\n *\n * @param root - root node of the tree\n * @param node - a node\n * @param shadow - whether to visit shadow tree nodes\n */\nfunction _getNextDescendantNode(root, node, shadow) {\n    if (shadow === void 0) { shadow = false; }\n    // traverse shadow tree\n    if (shadow && util_1.Guard.isElementNode(node) && util_1.Guard.isShadowRoot(node.shadowRoot)) {\n        if (node.shadowRoot._firstChild)\n            return node.shadowRoot._firstChild;\n    }\n    // traverse child nodes\n    if (node._firstChild)\n        return node._firstChild;\n    if (node === root)\n        return null;\n    // traverse siblings\n    if (node._nextSibling)\n        return node._nextSibling;\n    // traverse parent's next sibling\n    var parent = node._parent;\n    while (parent && parent !== root) {\n        if (parent._nextSibling)\n            return parent._nextSibling;\n        parent = parent._parent;\n    }\n    return null;\n}\nfunction _emptyIterator() {\n    var _a;\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            return {\n                next: function () {\n                    return { done: true, value: null };\n                }\n            };\n        },\n        _a;\n}\n/**\n * Returns the first descendant node of the tree rooted at `node` in\n * depth-first pre-order.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param shadow - whether to visit shadow tree nodes\n * @param filter - a function to filter nodes\n */\nfunction tree_getFirstDescendantNode(node, self, shadow, filter) {\n    if (self === void 0) { self = false; }\n    if (shadow === void 0) { shadow = false; }\n    var firstNode = (self ? node : _getNextDescendantNode(node, node, shadow));\n    while (firstNode && filter && !filter(firstNode)) {\n        firstNode = _getNextDescendantNode(node, firstNode, shadow);\n    }\n    return firstNode;\n}\nexports.tree_getFirstDescendantNode = tree_getFirstDescendantNode;\n/**\n * Returns the next descendant node of the tree rooted at `node` in\n * depth-first pre-order.\n *\n * @param node - root node of the tree\n * @param currentNode - current descendant node\n * @param self - whether to include `node` in traversal\n * @param shadow - whether to visit shadow tree nodes\n * @param filter - a function to filter nodes\n */\nfunction tree_getNextDescendantNode(node, currentNode, self, shadow, filter) {\n    if (self === void 0) { self = false; }\n    if (shadow === void 0) { shadow = false; }\n    var nextNode = _getNextDescendantNode(node, currentNode, shadow);\n    while (nextNode && filter && !filter(nextNode)) {\n        nextNode = _getNextDescendantNode(node, nextNode, shadow);\n    }\n    return nextNode;\n}\nexports.tree_getNextDescendantNode = tree_getNextDescendantNode;\n/**\n * Traverses through all descendant nodes of the tree rooted at\n * `node` in depth-first pre-order.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param shadow - whether to visit shadow tree nodes\n * @param filter - a function to filter nodes\n */\nfunction tree_getDescendantNodes(node, self, shadow, filter) {\n    var _a;\n    if (self === void 0) { self = false; }\n    if (shadow === void 0) { shadow = false; }\n    if (!self && node._children.size === 0) {\n        return _emptyIterator();\n    }\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var currentNode = (self ? node : _getNextDescendantNode(node, node, shadow));\n            return {\n                next: function () {\n                    while (currentNode && filter && !filter(currentNode)) {\n                        currentNode = _getNextDescendantNode(node, currentNode, shadow);\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        currentNode = _getNextDescendantNode(node, currentNode, shadow);\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.tree_getDescendantNodes = tree_getDescendantNodes;\n/**\n * Traverses through all descendant element nodes of the tree rooted at\n * `node` in depth-first preorder.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param shadow - whether to visit shadow tree nodes\n * @param filter - a function to filter nodes\n */\nfunction tree_getDescendantElements(node, self, shadow, filter) {\n    var _a;\n    if (self === void 0) { self = false; }\n    if (shadow === void 0) { shadow = false; }\n    if (!self && node._children.size === 0) {\n        return _emptyIterator();\n    }\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var it = tree_getDescendantNodes(node, self, shadow, function (e) { return util_1.Guard.isElementNode(e); })[Symbol.iterator]();\n            var currentNode = it.next().value;\n            return {\n                next: function () {\n                    while (currentNode && filter && !filter(currentNode)) {\n                        currentNode = it.next().value;\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        currentNode = it.next().value;\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.tree_getDescendantElements = tree_getDescendantElements;\n/**\n * Traverses through all sibling nodes of `node`.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param filter - a function to filter nodes\n */\nfunction tree_getSiblingNodes(node, self, filter) {\n    var _a;\n    if (self === void 0) { self = false; }\n    if (!node._parent || node._parent._children.size === 0) {\n        return _emptyIterator();\n    }\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var currentNode = node._parent ? node._parent._firstChild : null;\n            return {\n                next: function () {\n                    while (currentNode && (filter && !filter(currentNode) || (!self && currentNode === node))) {\n                        currentNode = currentNode._nextSibling;\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        currentNode = currentNode._nextSibling;\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.tree_getSiblingNodes = tree_getSiblingNodes;\n/**\n * Gets the first ancestor of `node` in reverse tree order.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param filter - a function to filter nodes\n */\nfunction tree_getFirstAncestorNode(node, self, filter) {\n    if (self === void 0) { self = false; }\n    var firstNode = self ? node : node._parent;\n    while (firstNode && filter && !filter(firstNode)) {\n        firstNode = firstNode._parent;\n    }\n    return firstNode;\n}\nexports.tree_getFirstAncestorNode = tree_getFirstAncestorNode;\n/**\n * Gets the first ancestor of `node` in reverse tree order.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param filter - a function to filter nodes\n */\nfunction tree_getNextAncestorNode(node, currentNode, self, filter) {\n    if (self === void 0) { self = false; }\n    var nextNode = currentNode._parent;\n    while (nextNode && filter && !filter(nextNode)) {\n        nextNode = nextNode._parent;\n    }\n    return nextNode;\n}\nexports.tree_getNextAncestorNode = tree_getNextAncestorNode;\n/**\n * Traverses through all ancestor nodes `node` in reverse tree order.\n *\n * @param node - root node of the tree\n * @param self - whether to include `node` in traversal\n * @param filter - a function to filter nodes\n */\nfunction tree_getAncestorNodes(node, self, filter) {\n    var _a;\n    if (self === void 0) { self = false; }\n    if (!self && !node._parent) {\n        return _emptyIterator();\n    }\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var currentNode = tree_getFirstAncestorNode(node, self, filter);\n            return {\n                next: function () {\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        currentNode = tree_getNextAncestorNode(node, currentNode, self, filter);\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.tree_getAncestorNodes = tree_getAncestorNodes;\n/**\n * Returns the common ancestor of the given nodes.\n *\n * @param nodeA - a node\n * @param nodeB - a node\n */\nfunction tree_getCommonAncestor(nodeA, nodeB) {\n    if (nodeA === nodeB) {\n        return nodeA._parent;\n    }\n    // lists of parent nodes\n    var parentsA = [];\n    var parentsB = [];\n    var pA = tree_getFirstAncestorNode(nodeA, true);\n    while (pA !== null) {\n        parentsA.push(pA);\n        pA = tree_getNextAncestorNode(nodeA, pA, true);\n    }\n    var pB = tree_getFirstAncestorNode(nodeB, true);\n    while (pB !== null) {\n        parentsB.push(pB);\n        pB = tree_getNextAncestorNode(nodeB, pB, true);\n    }\n    // walk through parents backwards until they differ\n    var pos1 = parentsA.length;\n    var pos2 = parentsB.length;\n    var parent = null;\n    for (var i = Math.min(pos1, pos2); i > 0; i--) {\n        var parent1 = parentsA[--pos1];\n        var parent2 = parentsB[--pos2];\n        if (parent1 !== parent2) {\n            break;\n        }\n        parent = parent1;\n    }\n    return parent;\n}\nexports.tree_getCommonAncestor = tree_getCommonAncestor;\n/**\n * Returns the node following `node` in depth-first preorder.\n *\n * @param root - root of the subtree\n * @param node - a node\n */\nfunction tree_getFollowingNode(root, node) {\n    if (node._firstChild) {\n        return node._firstChild;\n    }\n    else if (node._nextSibling) {\n        return node._nextSibling;\n    }\n    else {\n        while (true) {\n            var parent = node._parent;\n            if (parent === null || parent === root) {\n                return null;\n            }\n            else if (parent._nextSibling) {\n                return parent._nextSibling;\n            }\n            else {\n                node = parent;\n            }\n        }\n    }\n}\nexports.tree_getFollowingNode = tree_getFollowingNode;\n/**\n * Returns the node preceding `node` in depth-first preorder.\n *\n * @param root - root of the subtree\n * @param node - a node\n */\nfunction tree_getPrecedingNode(root, node) {\n    if (node === root) {\n        return null;\n    }\n    if (node._previousSibling) {\n        node = node._previousSibling;\n        if (node._lastChild) {\n            return node._lastChild;\n        }\n        else {\n            return node;\n        }\n    }\n    else {\n        return node._parent;\n    }\n}\nexports.tree_getPrecedingNode = tree_getPrecedingNode;\n/**\n * Determines if the node tree is constrained. A node tree is\n * constrained as follows, expressed as a relationship between the\n * type of node and its allowed children:\n *  - Document (In tree order)\n *    * Zero or more nodes each of which is ProcessingInstruction\n *      or Comment.\n *    * Optionally one DocumentType node.\n *    * Zero or more nodes each of which is ProcessingInstruction\n *      or Comment.\n *    * Optionally one Element node.\n *    * Zero or more nodes each of which is ProcessingInstruction\n *      or Comment.\n *  - DocumentFragment, Element\n *    * Zero or more nodes each of which is Element, Text,\n *      ProcessingInstruction, or Comment.\n *  - DocumentType, Text, ProcessingInstruction, Comment\n *    * None.\n *\n * @param node - the root of the tree\n */\nfunction tree_isConstrained(node) {\n    var e_1, _a, e_2, _b, e_3, _c;\n    switch (node._nodeType) {\n        case interfaces_1.NodeType.Document:\n            var hasDocType = false;\n            var hasElement = false;\n            try {\n                for (var _d = __values(node._children), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var childNode = _e.value;\n                    switch (childNode._nodeType) {\n                        case interfaces_1.NodeType.ProcessingInstruction:\n                        case interfaces_1.NodeType.Comment:\n                            break;\n                        case interfaces_1.NodeType.DocumentType:\n                            if (hasDocType || hasElement)\n                                return false;\n                            hasDocType = true;\n                            break;\n                        case interfaces_1.NodeType.Element:\n                            if (hasElement)\n                                return false;\n                            hasElement = true;\n                            break;\n                        default:\n                            return false;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            break;\n        case interfaces_1.NodeType.DocumentFragment:\n        case interfaces_1.NodeType.Element:\n            try {\n                for (var _f = __values(node._children), _g = _f.next(); !_g.done; _g = _f.next()) {\n                    var childNode = _g.value;\n                    switch (childNode._nodeType) {\n                        case interfaces_1.NodeType.Element:\n                        case interfaces_1.NodeType.Text:\n                        case interfaces_1.NodeType.ProcessingInstruction:\n                        case interfaces_1.NodeType.CData:\n                        case interfaces_1.NodeType.Comment:\n                            break;\n                        default:\n                            return false;\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            break;\n        case interfaces_1.NodeType.DocumentType:\n        case interfaces_1.NodeType.Text:\n        case interfaces_1.NodeType.ProcessingInstruction:\n        case interfaces_1.NodeType.CData:\n        case interfaces_1.NodeType.Comment:\n            return (!node.hasChildNodes());\n    }\n    try {\n        for (var _h = __values(node._children), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var childNode = _j.value;\n            // recursively check child nodes\n            if (!tree_isConstrained(childNode))\n                return false;\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return true;\n}\nexports.tree_isConstrained = tree_isConstrained;\n/**\n * Returns the length of a node.\n *\n * @param node - a node to check\n */\nfunction tree_nodeLength(node) {\n    /**\n        * To determine the length of a node node, switch on node:\n        * - DocumentType\n        * Zero.\n        * - Text\n        * - ProcessingInstruction\n        * - Comment\n        * Its data’s length.\n        * - Any other node\n        * Its number of children.\n        */\n    if (util_1.Guard.isDocumentTypeNode(node)) {\n        return 0;\n    }\n    else if (util_1.Guard.isCharacterDataNode(node)) {\n        return node._data.length;\n    }\n    else {\n        return node._children.size;\n    }\n}\nexports.tree_nodeLength = tree_nodeLength;\n/**\n * Determines if a node is empty.\n *\n * @param node - a node to check\n */\nfunction tree_isEmpty(node) {\n    /**\n        * A node is considered empty if its length is zero.\n        */\n    return (tree_nodeLength(node) === 0);\n}\nexports.tree_isEmpty = tree_isEmpty;\n/**\n * Returns the root node of a tree. The root of an object is itself,\n * if its parent is `null`, or else it is the root of its parent.\n * The root of a tree is any object participating in that tree\n * whose parent is `null`.\n *\n * @param node - a node of the tree\n * @param shadow - `true` to return shadow-including root, otherwise\n * `false`\n */\nfunction tree_rootNode(node, shadow) {\n    if (shadow === void 0) { shadow = false; }\n    /**\n        * The root of an object is itself, if its parent is null, or else it is the\n        * root of its parent. The root of a tree is any object participating in\n        * that tree whose parent is null.\n        */\n    if (shadow) {\n        var root = tree_rootNode(node, false);\n        if (util_1.Guard.isShadowRoot(root))\n            return tree_rootNode(root._host, true);\n        else\n            return root;\n    }\n    else {\n        if (!node._parent)\n            return node;\n        else\n            return tree_rootNode(node._parent);\n    }\n}\nexports.tree_rootNode = tree_rootNode;\n/**\n * Determines whether `other` is a descendant of `node`. An object\n * A is called a descendant of an object B, if either A is a child\n * of B or A is a child of an object C that is a descendant of B.\n *\n * @param node - a node\n * @param other - the node to check\n * @param self - if `true`, traversal includes `node` itself\n * @param shadow - if `true`, traversal includes the\n * node's and its descendant's shadow trees as well.\n */\nfunction tree_isDescendantOf(node, other, self, shadow) {\n    if (self === void 0) { self = false; }\n    if (shadow === void 0) { shadow = false; }\n    /**\n        * An object A is called a descendant of an object B, if either A is a\n        * child of B or A is a child of an object C that is a descendant of B.\n        *\n        * An inclusive descendant is an object or one of its descendants.\n    */\n    var child = tree_getFirstDescendantNode(node, self, shadow);\n    while (child !== null) {\n        if (child === other) {\n            return true;\n        }\n        child = tree_getNextDescendantNode(node, child, self, shadow);\n    }\n    return false;\n}\nexports.tree_isDescendantOf = tree_isDescendantOf;\n/**\n * Determines whether `other` is an ancestor of `node`. An object A\n * is called an ancestor of an object B if and only if B is a\n * descendant of A.\n *\n * @param node - a node\n * @param other - the node to check\n * @param self - if `true`, traversal includes `node` itself\n * @param shadow - if `true`, traversal includes the\n * node's and its descendant's shadow trees as well.\n */\nfunction tree_isAncestorOf(node, other, self, shadow) {\n    if (self === void 0) { self = false; }\n    if (shadow === void 0) { shadow = false; }\n    var ancestor = self ? node : shadow && util_1.Guard.isShadowRoot(node) ?\n        node._host : node._parent;\n    while (ancestor !== null) {\n        if (ancestor === other)\n            return true;\n        ancestor = shadow && util_1.Guard.isShadowRoot(ancestor) ?\n            ancestor._host : ancestor._parent;\n    }\n    return false;\n}\nexports.tree_isAncestorOf = tree_isAncestorOf;\n/**\n * Determines whether `other` is a host-including ancestor of `node`. An\n * object A is a host-including inclusive ancestor of an object B, if either\n * A is an inclusive ancestor of B, or if B’s root has a non-null host and\n * A is a host-including inclusive ancestor of B’s root’s host.\n *\n * @param node - a node\n * @param other - the node to check\n * @param self - if `true`, traversal includes `node` itself\n */\nfunction tree_isHostIncludingAncestorOf(node, other, self) {\n    if (self === void 0) { self = false; }\n    if (tree_isAncestorOf(node, other, self))\n        return true;\n    var root = tree_rootNode(node);\n    if (util_1.Guard.isDocumentFragmentNode(root) && root._host !== null &&\n        tree_isHostIncludingAncestorOf(root._host, other, self))\n        return true;\n    return false;\n}\nexports.tree_isHostIncludingAncestorOf = tree_isHostIncludingAncestorOf;\n/**\n * Determines whether `other` is a sibling of `node`. An object A is\n * called a sibling of an object B, if and only if B and A share\n * the same non-null parent.\n *\n * @param node - a node\n * @param other - the node to check\n * @param self - if `true`, traversal includes `node` itself\n */\nfunction tree_isSiblingOf(node, other, self) {\n    if (self === void 0) { self = false; }\n    /**\n        * An object A is called a sibling of an object B, if and only if B and A\n        * share the same non-null parent.\n        *\n        * An inclusive sibling is an object or one of its siblings.\n        */\n    if (node === other) {\n        if (self)\n            return true;\n    }\n    else {\n        return (node._parent !== null && node._parent === other._parent);\n    }\n    return false;\n}\nexports.tree_isSiblingOf = tree_isSiblingOf;\n/**\n * Determines whether `other` is preceding `node`. An object A is\n * preceding an object B if A and B are in the same tree and A comes\n * before B in tree order.\n *\n * @param node - a node\n * @param other - the node to check\n */\nfunction tree_isPreceding(node, other) {\n    /**\n        * An object A is preceding an object B if A and B are in the same tree and\n        * A comes before B in tree order.\n        */\n    var nodePos = tree_treePosition(node);\n    var otherPos = tree_treePosition(other);\n    if (nodePos === -1 || otherPos === -1)\n        return false;\n    else if (tree_rootNode(node) !== tree_rootNode(other))\n        return false;\n    else\n        return otherPos < nodePos;\n}\nexports.tree_isPreceding = tree_isPreceding;\n/**\n * Determines whether `other` is following `node`. An object A is\n * following an object B if A and B are in the same tree and A comes\n * after B in tree order.\n *\n * @param node - a node\n * @param other - the node to check\n */\nfunction tree_isFollowing(node, other) {\n    /**\n        * An object A is following an object B if A and B are in the same tree and\n        * A comes after B in tree order.\n        */\n    var nodePos = tree_treePosition(node);\n    var otherPos = tree_treePosition(other);\n    if (nodePos === -1 || otherPos === -1)\n        return false;\n    else if (tree_rootNode(node) !== tree_rootNode(other))\n        return false;\n    else\n        return otherPos > nodePos;\n}\nexports.tree_isFollowing = tree_isFollowing;\n/**\n * Determines whether `other` is the parent node of `node`.\n *\n * @param node - a node\n * @param other - the node to check\n */\nfunction tree_isParentOf(node, other) {\n    /**\n        * An object that participates in a tree has a parent, which is either\n        * null or an object, and has children, which is an ordered set of objects.\n        * An object A whose parent is object B is a child of B.\n        */\n    return (node._parent === other);\n}\nexports.tree_isParentOf = tree_isParentOf;\n/**\n * Determines whether `other` is a child node of `node`.\n *\n * @param node - a node\n * @param other - the node to check\n */\nfunction tree_isChildOf(node, other) {\n    /**\n        * An object that participates in a tree has a parent, which is either\n        * null or an object, and has children, which is an ordered set of objects.\n        * An object A whose parent is object B is a child of B.\n        */\n    return (other._parent === node);\n}\nexports.tree_isChildOf = tree_isChildOf;\n/**\n * Returns the previous sibling node of `node` or null if it has no\n * preceding sibling.\n *\n * @param node\n */\nfunction tree_previousSibling(node) {\n    /**\n        * The previous sibling of an object is its first preceding sibling or null\n        * if it has no preceding sibling.\n        */\n    return node._previousSibling;\n}\nexports.tree_previousSibling = tree_previousSibling;\n/**\n * Returns the next sibling node of `node` or null if it has no\n * following sibling.\n *\n * @param node\n */\nfunction tree_nextSibling(node) {\n    /**\n        * The next sibling of an object is its first following sibling or null\n        * if it has no following sibling.\n        */\n    return node._nextSibling;\n}\nexports.tree_nextSibling = tree_nextSibling;\n/**\n * Returns the first child node of `node` or null if it has no\n * children.\n *\n * @param node\n */\nfunction tree_firstChild(node) {\n    /**\n        * The first child of an object is its first child or null if it has no\n        * children.\n        */\n    return node._firstChild;\n}\nexports.tree_firstChild = tree_firstChild;\n/**\n * Returns the last child node of `node` or null if it has no\n * children.\n *\n * @param node\n */\nfunction tree_lastChild(node) {\n    /**\n        * The last child of an object is its last child or null if it has no\n        * children.\n        */\n    return node._lastChild;\n}\nexports.tree_lastChild = tree_lastChild;\n/**\n * Returns the zero-based index of `node` when counted preorder in\n * the tree rooted at `root`. Returns `-1` if `node` is not in\n * the tree.\n *\n * @param node - the node to get the index of\n */\nfunction tree_treePosition(node) {\n    var root = tree_rootNode(node);\n    var pos = 0;\n    var childNode = tree_getFirstDescendantNode(root);\n    while (childNode !== null) {\n        pos++;\n        if (childNode === node)\n            return pos;\n        childNode = tree_getNextDescendantNode(root, childNode);\n    }\n    return -1;\n}\nexports.tree_treePosition = tree_treePosition;\n/**\n * Determines the index of `node`. The index of an object is its number of\n * preceding siblings, or 0 if it has none.\n *\n * @param node - a node\n * @param other - the node to check\n */\nfunction tree_index(node) {\n    /**\n        * The index of an object is its number of preceding siblings, or 0 if it\n        * has none.\n        */\n    var n = 0;\n    while (node._previousSibling !== null) {\n        n++;\n        node = node._previousSibling;\n    }\n    return n;\n}\nexports.tree_index = tree_index;\n/**\n * Retargets an object against another object.\n *\n * @param a - an object to retarget\n * @param b - an object to retarget against\n */\nfunction tree_retarget(a, b) {\n    /**\n        * To retarget an object A against an object B, repeat these steps until\n        * they return an object:\n        * 1. If one of the following is true\n        * - A is not a node\n        * - A's root is not a shadow root\n        * - B is a node and A's root is a shadow-including inclusive ancestor\n        * of B\n        * then return A.\n        * 2. Set A to A's root's host.\n        */\n    while (true) {\n        if (!a || !util_1.Guard.isNode(a)) {\n            return a;\n        }\n        var rootOfA = tree_rootNode(a);\n        if (!util_1.Guard.isShadowRoot(rootOfA)) {\n            return a;\n        }\n        if (b && util_1.Guard.isNode(b) && tree_isAncestorOf(rootOfA, b, true, true)) {\n            return a;\n        }\n        a = rootOfA.host;\n    }\n}\nexports.tree_retarget = tree_retarget;\n//# sourceMappingURL=TreeAlgorithm.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventTargetImpl_1 = require(\"./EventTargetImpl\");\nvar util_1 = require(\"@oozcitak/util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a window containing a DOM document.\n */\nvar WindowImpl = /** @class */ (function (_super) {\n    __extends(WindowImpl, _super);\n    /**\n     * Initializes a new instance of `Window`.\n     */\n    function WindowImpl() {\n        var _this = _super.call(this) || this;\n        _this._signalSlots = new Set();\n        _this._mutationObserverMicrotaskQueued = false;\n        _this._mutationObservers = new Set();\n        _this._iteratorList = new util_1.FixedSizeSet();\n        _this._associatedDocument = algorithm_1.create_document();\n        return _this;\n    }\n    Object.defineProperty(WindowImpl.prototype, \"document\", {\n        /** @inheritdoc */\n        get: function () { return this._associatedDocument; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WindowImpl.prototype, \"event\", {\n        /** @inheritdoc */\n        get: function () { return this._currentEvent; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new window with a blank document.\n     */\n    WindowImpl._create = function () {\n        return new WindowImpl();\n    };\n    return WindowImpl;\n}(EventTargetImpl_1.EventTargetImpl));\nexports.WindowImpl = WindowImpl;\n//# sourceMappingURL=WindowImpl.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar util_1 = require(\"../util\");\nvar util_2 = require(\"@oozcitak/util\");\nvar ElementImpl_1 = require(\"../dom/ElementImpl\");\nvar CustomElementAlgorithm_1 = require(\"./CustomElementAlgorithm\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar NamespaceAlgorithm_1 = require(\"./NamespaceAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\nvar ElementAlgorithm_1 = require(\"./ElementAlgorithm\");\nvar MutationAlgorithm_1 = require(\"./MutationAlgorithm\");\n/**\n * Returns an element interface for the given name and namespace.\n *\n * @param name - element name\n * @param namespace - namespace\n */\nfunction document_elementInterface(name, namespace) {\n    return ElementImpl_1.ElementImpl;\n}\nexports.document_elementInterface = document_elementInterface;\n/**\n * Creates a new element node.\n * See: https://dom.spec.whatwg.org/#internal-createelementns-steps\n *\n * @param document - owner document\n * @param namespace - element namespace\n * @param qualifiedName - qualified name\n * @param options - element options\n */\nfunction document_internalCreateElementNS(document, namespace, qualifiedName, options) {\n    /**\n     * 1. Let namespace, prefix, and localName be the result of passing\n     * namespace and qualifiedName to validate and extract.\n     * 2. Let is be null.\n     * 3. If options is a dictionary and options’s is is present, then set\n     * is to it.\n     * 4. Return the result of creating an element given document, localName,\n     * namespace, prefix, is, and with the synchronous custom elements flag set.\n     */\n    var _a = __read(NamespaceAlgorithm_1.namespace_validateAndExtract(namespace, qualifiedName), 3), ns = _a[0], prefix = _a[1], localName = _a[2];\n    var is = null;\n    if (options !== undefined) {\n        if (util_2.isString(options)) {\n            is = options;\n        }\n        else {\n            is = options.is;\n        }\n    }\n    return ElementAlgorithm_1.element_createAnElement(document, localName, ns, prefix, is, true);\n}\nexports.document_internalCreateElementNS = document_internalCreateElementNS;\n/**\n * Removes `node` and its subtree from its document and changes\n * its owner document to `document` so that it can be inserted\n * into `document`.\n *\n * @param node - the node to move\n * @param document - document to receive the node and its subtree\n */\nfunction document_adopt(node, document) {\n    var e_1, _a;\n    // Optimize for common case of inserting a fresh node\n    if (node._nodeDocument === document && node._parent === null) {\n        return;\n    }\n    /**\n     * 1. Let oldDocument be node’s node document.\n     * 2. If node’s parent is not null, remove node from its parent.\n     */\n    var oldDocument = node._nodeDocument;\n    if (node._parent)\n        MutationAlgorithm_1.mutation_remove(node, node._parent);\n    /**\n     * 3. If document is not oldDocument, then:\n     */\n    if (document !== oldDocument) {\n        /**\n         * 3.1. For each inclusiveDescendant in node’s shadow-including inclusive\n         * descendants:\n         */\n        var inclusiveDescendant = TreeAlgorithm_1.tree_getFirstDescendantNode(node, true, true);\n        while (inclusiveDescendant !== null) {\n            /**\n             * 3.1.1. Set inclusiveDescendant’s node document to document.\n             * 3.1.2. If inclusiveDescendant is an element, then set the node\n             * document of each attribute in inclusiveDescendant’s attribute list\n             * to document.\n             */\n            inclusiveDescendant._nodeDocument = document;\n            if (util_1.Guard.isElementNode(inclusiveDescendant)) {\n                try {\n                    for (var _b = (e_1 = void 0, __values(inclusiveDescendant._attributeList._asArray())), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var attr = _c.value;\n                        attr._nodeDocument = document;\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n            /**\n             * 3.2. For each inclusiveDescendant in node's shadow-including\n             * inclusive descendants that is custom, enqueue a custom\n             * element callback reaction with inclusiveDescendant,\n             * callback name \"adoptedCallback\", and an argument list\n             * containing oldDocument and document.\n             */\n            if (DOMImpl_1.dom.features.customElements) {\n                if (util_1.Guard.isElementNode(inclusiveDescendant) &&\n                    inclusiveDescendant._customElementState === \"custom\") {\n                    CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(inclusiveDescendant, \"adoptedCallback\", [oldDocument, document]);\n                }\n            }\n            /**\n             * 3.3. For each inclusiveDescendant in node’s shadow-including\n             * inclusive descendants, in shadow-including tree order, run the\n             * adopting steps with inclusiveDescendant and oldDocument.\n             */\n            if (DOMImpl_1.dom.features.steps) {\n                DOMAlgorithm_1.dom_runAdoptingSteps(inclusiveDescendant, oldDocument);\n            }\n            inclusiveDescendant = TreeAlgorithm_1.tree_getNextDescendantNode(node, inclusiveDescendant, true, true);\n        }\n    }\n}\nexports.document_adopt = document_adopt;\n//# sourceMappingURL=DocumentAlgorithm.js.map","'use strict';\n\n/*eslint-disable max-len,no-use-before-define*/\n\nvar common              = require('./common');\nvar YAMLException       = require('./exception');\nvar Mark                = require('./mark');\nvar DEFAULT_SAFE_SCHEMA = require('./schema/default_safe');\nvar DEFAULT_FULL_SCHEMA = require('./schema/default_full');\n\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || DEFAULT_FULL_SCHEMA;\n  this.onWarning = options['onWarning'] || null;\n  this.legacy    = options['legacy']    || false;\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  return new YAMLException(\n    message,\n    new Mark(state.filename, state.input, state.position, state.line, (state.position - state.lineStart)));\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startPos) {\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty.call(overridableKeys, keyNode) &&\n        _hasOwnProperty.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n    _result[keyNode] = valueNode;\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = {},\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _pos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = {},\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n    _pos = state.position;\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else if (composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n\n    } else {\n      break; // Reading is done. Go to the epilogue.\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _pos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if (state.lineIndent > nodeIndent && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag !== null && state.tag !== '!') {\n    if (state.tag === '?') {\n      // Implicit resolving is not allowed for non-scalar types, and '?'\n      // non-specific tag is only automatically assigned to plain scalars.\n      //\n      // We only need to check kind conformity in case user explicitly assigns '?'\n      // tag, for example like this: \"!<?> [0]\"\n      //\n      if (state.result !== null && state.kind !== 'scalar') {\n        throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n      }\n\n      for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n        type = state.implicitTypes[typeIndex];\n\n        if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n          state.result = type.construct(state.result);\n          state.tag = type.tag;\n          if (state.anchor !== null) {\n            state.anchorMap[state.anchor] = state.result;\n          }\n          break;\n        }\n      }\n    } else if (_hasOwnProperty.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n\n      if (state.result !== null && type.kind !== state.kind) {\n        throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n      }\n\n      if (!type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n      } else {\n        state.result = type.construct(state.result);\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = {};\n  state.anchorMap = {};\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new YAMLException('expected a single document in the stream, but found more');\n}\n\n\nfunction safeLoadAll(input, iterator, options) {\n  if (typeof iterator === 'object' && iterator !== null && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  return loadAll(input, iterator, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options));\n}\n\n\nfunction safeLoad(input, options) {\n  return load(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options));\n}\n\n\nmodule.exports.loadAll     = loadAll;\nmodule.exports.load        = load;\nmodule.exports.safeLoadAll = safeLoadAll;\nmodule.exports.safeLoad    = safeLoad;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CodePoints_1 = require(\"./CodePoints\");\n/**\n * Base-64 encodes the given string.\n *\n * @param input - a string\n */\nfunction forgivingBase64Encode(input) {\n    /**\n     * To forgiving-base64 encode given a byte sequence data, apply the base64\n     * algorithm defined in section 4 of RFC 4648 to data and return the result.\n     * [RFC4648]\n     */\n    return Buffer.from(input).toString('base64');\n}\nexports.forgivingBase64Encode = forgivingBase64Encode;\n/**\n * Decodes a base-64 string.\n *\n * @param input - a string\n */\nfunction forgivingBase64Decode(input) {\n    if (input === \"\")\n        return \"\";\n    /**\n     * 1. Remove all ASCII whitespace from data.\n     */\n    input = input.replace(CodePoints_1.ASCIIWhiteSpace, '');\n    /**\n     * 2. If data’s length divides by 4 leaving no remainder, then:\n     * 2.1. If data ends with one or two U+003D (=) code points, then remove them from data.\n     */\n    if (input.length % 4 === 0) {\n        if (input.endsWith(\"==\")) {\n            input = input.substr(0, input.length - 2);\n        }\n        else if (input.endsWith(\"=\")) {\n            input = input.substr(0, input.length - 1);\n        }\n    }\n    /**\n     * 3. If data’s length divides by 4 leaving a remainder of 1, then return failure.\n     */\n    if (input.length % 4 === 1)\n        return null;\n    /**\n     * 4. If data contains a code point that is not one of\n     * - U+002B (+)\n     * - U+002F (/)\n     * - ASCII alphanumeric\n     * then return failure.\n     */\n    if (!/[0-9A-Za-z+/]/.test(input))\n        return null;\n    /**\n     * 5. Let output be an empty byte sequence.\n     * 6. Let buffer be an empty buffer that can have bits appended to it.\n     * 7. Let position be a position variable for data, initially pointing at the\n     * start of data.\n     * 8. While position does not point past the end of data:\n     * 8.1. Find the code point pointed to by position in the second column of\n     * Table 1: The Base 64 Alphabet of RFC 4648. Let n be the number given in the\n     * first cell of the same row. [RFC4648]\n     * 8.2. Append the six bits corresponding to n, most significant bit first,\n     * to buffer.\n     * 8.3. If buffer has accumulated 24 bits, interpret them as three 8-bit\n     * big-endian numbers. Append three bytes with values equal to those numbers\n     * to output, in the same order, and then empty buffer.\n     * 8.4. Advance position by 1.\n     * 9. If buffer is not empty, it contains either 12 or 18 bits. If it contains\n     * 12 bits, then discard the last four and interpret the remaining eight as an\n     * 8-bit big-endian number. If it contains 18 bits, then discard the last two\n     * and interpret the remaining 16 as two 8-bit big-endian numbers. Append the\n     * one or two bytes with values equal to those one or two numbers to output,\n     * in the same order.\n     * 10. Return output.\n     */\n    return Buffer.from(input, 'base64').toString('utf8');\n}\nexports.forgivingBase64Decode = forgivingBase64Decode;\n//# sourceMappingURL=Base64.js.map","module.exports = require(\"os\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../interfaces\");\nvar util_1 = require(\"@oozcitak/util\");\nvar BuilderFunctions_1 = require(\"./BuilderFunctions\");\nvar algorithm_1 = require(\"@oozcitak/dom/lib/algorithm\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar NamespacePrefixMap_1 = require(\"@oozcitak/dom/lib/serializer/NamespacePrefixMap\");\nvar LocalNameSet_1 = require(\"@oozcitak/dom/lib/serializer/LocalNameSet\");\nvar util_2 = require(\"@oozcitak/dom/lib/util\");\nvar XMLCBWriter_1 = require(\"../writers/XMLCBWriter\");\nvar JSONCBWriter_1 = require(\"../writers/JSONCBWriter\");\nvar YAMLCBWriter_1 = require(\"../writers/YAMLCBWriter\");\nvar events_1 = require(\"events\");\n/**\n * Represents a readable XML document stream.\n */\nvar XMLBuilderCBImpl = /** @class */ (function (_super) {\n    __extends(XMLBuilderCBImpl, _super);\n    /**\n     * Initializes a new instance of `XMLStream`.\n     *\n     * @param options - stream writer options\n     * @param fragment - whether to create fragment stream or a document stream\n     *\n     * @returns XML stream\n     */\n    function XMLBuilderCBImpl(options, fragment) {\n        if (fragment === void 0) { fragment = false; }\n        var _this = _super.call(this) || this;\n        _this._hasDeclaration = false;\n        _this._docTypeName = \"\";\n        _this._hasDocumentElement = false;\n        _this._currentElementSerialized = false;\n        _this._openTags = [];\n        _this._ended = false;\n        _this._fragment = fragment;\n        // provide default options\n        _this._options = util_1.applyDefaults(options || {}, interfaces_1.DefaultXMLBuilderCBOptions);\n        _this._builderOptions = {\n            defaultNamespace: _this._options.defaultNamespace,\n            namespaceAlias: _this._options.namespaceAlias\n        };\n        if (_this._options.format === \"json\") {\n            _this._writer = new JSONCBWriter_1.JSONCBWriter(_this._options);\n        }\n        else if (_this._options.format === \"yaml\") {\n            _this._writer = new YAMLCBWriter_1.YAMLCBWriter(_this._options);\n        }\n        else {\n            _this._writer = new XMLCBWriter_1.XMLCBWriter(_this._options);\n        }\n        // automatically create listeners for callbacks passed via options\n        if (_this._options.data !== undefined) {\n            _this.on(\"data\", _this._options.data);\n        }\n        if (_this._options.end !== undefined) {\n            _this.on(\"end\", _this._options.end);\n        }\n        if (_this._options.error !== undefined) {\n            _this.on(\"error\", _this._options.error);\n        }\n        _this._prefixMap = new NamespacePrefixMap_1.NamespacePrefixMap();\n        _this._prefixMap.set(\"xml\", infra_1.namespace.XML);\n        _this._prefixIndex = { value: 1 };\n        _this._push(_this._writer.frontMatter());\n        return _this;\n    }\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.ele = function (p1, p2, p3) {\n        var e_1, _a;\n        // parse if JS object or XML or JSON string\n        if (util_1.isObject(p1) || (util_1.isString(p1) && (/^\\s*</.test(p1) || /^\\s*[\\{\\[]/.test(p1) || /^(\\s*|(#.*)|(%.*))*---/.test(p1)))) {\n            var frag = BuilderFunctions_1.fragment().set(this._options);\n            try {\n                frag.ele(p1);\n            }\n            catch (err) {\n                this.emit(\"error\", err);\n                return this;\n            }\n            try {\n                for (var _b = __values(frag.node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var node = _c.value;\n                    this._fromNode(node);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return this;\n        }\n        this._serializeOpenTag(true);\n        if (!this._fragment && this._hasDocumentElement && this._writer.level === 0) {\n            this.emit(\"error\", new Error(\"Document cannot have multiple document element nodes.\"));\n            return this;\n        }\n        try {\n            this._currentElement = BuilderFunctions_1.fragment(this._builderOptions).ele(p1, p2, p3);\n        }\n        catch (err) {\n            this.emit(\"error\", err);\n            return this;\n        }\n        if (!this._fragment && !this._hasDocumentElement && this._docTypeName !== \"\"\n            && this._currentElement.node._qualifiedName !== this._docTypeName) {\n            this.emit(\"error\", new Error(\"Document element name does not match DocType declaration name.\"));\n            return this;\n        }\n        this._currentElementSerialized = false;\n        if (!this._fragment) {\n            this._hasDocumentElement = true;\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.att = function (p1, p2, p3) {\n        if (this._currentElement === undefined) {\n            this.emit(\"error\", new Error(\"Cannot insert an attribute node as child of a document node.\"));\n            return this;\n        }\n        try {\n            this._currentElement.att(p1, p2, p3);\n        }\n        catch (err) {\n            this.emit(\"error\", err);\n            return this;\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.com = function (content) {\n        this._serializeOpenTag(true);\n        var node;\n        try {\n            node = BuilderFunctions_1.fragment(this._builderOptions).com(content).first().node;\n        }\n        catch (err) {\n            /* istanbul ignore next */\n            this.emit(\"error\", err);\n            /* istanbul ignore next */\n            return this;\n        }\n        if (this._options.wellFormed && (!algorithm_1.xml_isLegalChar(node.data) ||\n            node.data.indexOf(\"--\") !== -1 || node.data.endsWith(\"-\"))) {\n            this.emit(\"error\", new Error(\"Comment data contains invalid characters (well-formed required).\"));\n            return this;\n        }\n        this._push(this._writer.comment(node.data));\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.txt = function (content) {\n        if (!this._fragment && this._currentElement === undefined) {\n            this.emit(\"error\", new Error(\"Cannot insert a text node as child of a document node.\"));\n            return this;\n        }\n        this._serializeOpenTag(true);\n        var node;\n        try {\n            node = BuilderFunctions_1.fragment(this._builderOptions).txt(content).first().node;\n        }\n        catch (err) {\n            /* istanbul ignore next */\n            this.emit(\"error\", err);\n            /* istanbul ignore next */\n            return this;\n        }\n        if (this._options.wellFormed && !algorithm_1.xml_isLegalChar(node.data)) {\n            this.emit(\"error\", new Error(\"Text data contains invalid characters (well-formed required).\"));\n            return this;\n        }\n        var markup = node.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;');\n        this._push(this._writer.text(markup));\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.ins = function (target, content) {\n        if (content === void 0) { content = ''; }\n        this._serializeOpenTag(true);\n        var node;\n        try {\n            node = BuilderFunctions_1.fragment(this._builderOptions).ins(target, content).first().node;\n        }\n        catch (err) {\n            /* istanbul ignore next */\n            this.emit(\"error\", err);\n            /* istanbul ignore next */\n            return this;\n        }\n        if (this._options.wellFormed && (node.target.indexOf(\":\") !== -1 || (/^xml$/i).test(node.target))) {\n            this.emit(\"error\", new Error(\"Processing instruction target contains invalid characters (well-formed required).\"));\n            return this;\n        }\n        if (this._options.wellFormed && !algorithm_1.xml_isLegalChar(node.data)) {\n            this.emit(\"error\", Error(\"Processing instruction data contains invalid characters (well-formed required).\"));\n            return this;\n        }\n        this._push(this._writer.instruction(node.target, node.data));\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.dat = function (content) {\n        this._serializeOpenTag(true);\n        var node;\n        try {\n            node = BuilderFunctions_1.fragment(this._builderOptions).dat(content).first().node;\n        }\n        catch (err) {\n            this.emit(\"error\", err);\n            return this;\n        }\n        this._push(this._writer.cdata(node.data));\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.dec = function (options) {\n        if (options === void 0) { options = { version: \"1.0\" }; }\n        if (this._fragment) {\n            this.emit(\"error\", Error(\"Cannot insert an XML declaration into a document fragment.\"));\n            return this;\n        }\n        if (this._hasDeclaration) {\n            this.emit(\"error\", Error(\"XML declaration is already inserted.\"));\n            return this;\n        }\n        this._push(this._writer.declaration(options.version || \"1.0\", options.encoding, options.standalone));\n        this._hasDeclaration = true;\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.dtd = function (options) {\n        if (this._fragment) {\n            this.emit(\"error\", Error(\"Cannot insert a DocType declaration into a document fragment.\"));\n            return this;\n        }\n        if (this._docTypeName !== \"\") {\n            this.emit(\"error\", new Error(\"DocType declaration is already inserted.\"));\n            return this;\n        }\n        if (this._hasDocumentElement) {\n            this.emit(\"error\", new Error(\"Cannot insert DocType declaration after document element.\"));\n            return this;\n        }\n        var node;\n        try {\n            node = BuilderFunctions_1.create().dtd(options).first().node;\n        }\n        catch (err) {\n            this.emit(\"error\", err);\n            return this;\n        }\n        if (this._options.wellFormed && !algorithm_1.xml_isPubidChar(node.publicId)) {\n            this.emit(\"error\", new Error(\"DocType public identifier does not match PubidChar construct (well-formed required).\"));\n            return this;\n        }\n        if (this._options.wellFormed &&\n            (!algorithm_1.xml_isLegalChar(node.systemId) ||\n                (node.systemId.indexOf('\"') !== -1 && node.systemId.indexOf(\"'\") !== -1))) {\n            this.emit(\"error\", new Error(\"DocType system identifier contains invalid characters (well-formed required).\"));\n            return this;\n        }\n        this._docTypeName = options.name;\n        this._push(this._writer.docType(options.name, node.publicId, node.systemId));\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.import = function (node) {\n        var e_2, _a;\n        var frag = BuilderFunctions_1.fragment().set(this._options);\n        try {\n            frag.import(node);\n        }\n        catch (err) {\n            this.emit(\"error\", err);\n            return this;\n        }\n        try {\n            for (var _b = __values(frag.node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node_1 = _c.value;\n                this._fromNode(node_1);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.up = function () {\n        this._serializeOpenTag(false);\n        this._serializeCloseTag();\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderCBImpl.prototype.end = function () {\n        this._serializeOpenTag(false);\n        while (this._openTags.length > 0) {\n            this._serializeCloseTag();\n        }\n        this._push(null);\n        return this;\n    };\n    /**\n     * Serializes the opening tag of an element node.\n     *\n     * @param hasChildren - whether the element node has child nodes\n     */\n    XMLBuilderCBImpl.prototype._serializeOpenTag = function (hasChildren) {\n        if (this._currentElementSerialized)\n            return;\n        if (this._currentElement === undefined)\n            return;\n        var node = this._currentElement.node;\n        if (this._options.wellFormed && (node.localName.indexOf(\":\") !== -1 ||\n            !algorithm_1.xml_isName(node.localName))) {\n            this.emit(\"error\", new Error(\"Node local name contains invalid characters (well-formed required).\"));\n            return;\n        }\n        var qualifiedName = \"\";\n        var ignoreNamespaceDefinitionAttribute = false;\n        var map = this._prefixMap.copy();\n        var localPrefixesMap = {};\n        var localDefaultNamespace = this._recordNamespaceInformation(node, map, localPrefixesMap);\n        var inheritedNS = this._openTags.length === 0 ? null : this._openTags[this._openTags.length - 1][1];\n        var ns = node.namespaceURI;\n        if (ns === null)\n            ns = inheritedNS;\n        if (inheritedNS === ns) {\n            if (localDefaultNamespace !== null) {\n                ignoreNamespaceDefinitionAttribute = true;\n            }\n            if (ns === infra_1.namespace.XML) {\n                qualifiedName = \"xml:\" + node.localName;\n            }\n            else {\n                qualifiedName = node.localName;\n            }\n            this._writer.beginElement(qualifiedName);\n            this._push(this._writer.openTagBegin(qualifiedName));\n        }\n        else {\n            var prefix = node.prefix;\n            var candidatePrefix = null;\n            if (prefix !== null || ns !== localDefaultNamespace) {\n                candidatePrefix = map.get(prefix, ns);\n            }\n            if (prefix === \"xmlns\") {\n                if (this._options.wellFormed) {\n                    this.emit(\"error\", new Error(\"An element cannot have the 'xmlns' prefix (well-formed required).\"));\n                    return;\n                }\n                candidatePrefix = prefix;\n            }\n            if (candidatePrefix !== null) {\n                qualifiedName = candidatePrefix + ':' + node.localName;\n                if (localDefaultNamespace !== null && localDefaultNamespace !== infra_1.namespace.XML) {\n                    inheritedNS = localDefaultNamespace || null;\n                }\n                this._writer.beginElement(qualifiedName);\n                this._push(this._writer.openTagBegin(qualifiedName));\n            }\n            else if (prefix !== null) {\n                if (prefix in localPrefixesMap) {\n                    prefix = this._generatePrefix(ns, map, this._prefixIndex);\n                }\n                map.set(prefix, ns);\n                qualifiedName += prefix + ':' + node.localName;\n                this._writer.beginElement(qualifiedName);\n                this._push(this._writer.openTagBegin(qualifiedName));\n                this._push(this._writer.attribute(\"xmlns:\" + prefix, this._serializeAttributeValue(ns, this._options.wellFormed)));\n                if (localDefaultNamespace !== null) {\n                    inheritedNS = localDefaultNamespace || null;\n                }\n            }\n            else if (localDefaultNamespace === null ||\n                (localDefaultNamespace !== null && localDefaultNamespace !== ns)) {\n                ignoreNamespaceDefinitionAttribute = true;\n                qualifiedName += node.localName;\n                inheritedNS = ns;\n                this._writer.beginElement(qualifiedName);\n                this._push(this._writer.openTagBegin(qualifiedName));\n                this._push(this._writer.attribute(\"xmlns\", this._serializeAttributeValue(ns, this._options.wellFormed)));\n            }\n            else {\n                qualifiedName += node.localName;\n                inheritedNS = ns;\n                this._writer.beginElement(qualifiedName);\n                this._push(this._writer.openTagBegin(qualifiedName));\n            }\n        }\n        this._serializeAttributes(node, map, this._prefixIndex, localPrefixesMap, ignoreNamespaceDefinitionAttribute, this._options.wellFormed);\n        var isHTML = (ns === infra_1.namespace.HTML);\n        if (isHTML && !hasChildren &&\n            XMLBuilderCBImpl._VoidElementNames.has(node.localName)) {\n            this._push(this._writer.openTagEnd(qualifiedName, true, true));\n            this._writer.endElement(qualifiedName);\n        }\n        else if (!isHTML && !hasChildren) {\n            this._push(this._writer.openTagEnd(qualifiedName, true, false));\n            this._writer.endElement(qualifiedName);\n        }\n        else {\n            this._push(this._writer.openTagEnd(qualifiedName, false, false));\n        }\n        this._currentElementSerialized = true;\n        /**\n         * Save qualified name, original inherited ns, original prefix map, and\n         * hasChildren flag.\n         */\n        this._openTags.push([qualifiedName, inheritedNS, this._prefixMap, hasChildren]);\n        /**\n         * New values of inherited namespace and prefix map will be used while\n         * serializing child nodes. They will be returned to their original values\n         * when this node is closed using the _openTags array item we saved above.\n         */\n        if (this._isPrefixMapModified(this._prefixMap, map)) {\n            this._prefixMap = map;\n        }\n        /**\n         * Calls following this will either serialize child nodes or close this tag.\n         */\n        this._writer.level++;\n    };\n    /**\n     * Serializes the closing tag of an element node.\n     */\n    XMLBuilderCBImpl.prototype._serializeCloseTag = function () {\n        this._writer.level--;\n        var lastEle = this._openTags.pop();\n        /* istanbul ignore next */\n        if (lastEle === undefined) {\n            this.emit(\"error\", new Error(\"Last element is undefined.\"));\n            return;\n        }\n        var _a = __read(lastEle, 4), qualifiedName = _a[0], ns = _a[1], map = _a[2], hasChildren = _a[3];\n        /**\n         * Restore original values of inherited namespace and prefix map.\n         */\n        this._prefixMap = map;\n        if (!hasChildren)\n            return;\n        this._push(this._writer.closeTag(qualifiedName));\n        this._writer.endElement(qualifiedName);\n    };\n    /**\n     * Pushes data to internal buffer.\n     *\n     * @param data - data\n     */\n    XMLBuilderCBImpl.prototype._push = function (data) {\n        if (data === null) {\n            this._ended = true;\n            this.emit(\"end\");\n        }\n        else if (this._ended) {\n            this.emit(\"error\", new Error(\"Cannot push to ended stream.\"));\n        }\n        else if (data.length !== 0) {\n            this._writer.hasData = true;\n            this.emit(\"data\", data, this._writer.level);\n        }\n    };\n    /**\n     * Reads and serializes an XML tree.\n     *\n     * @param node - root node\n     */\n    XMLBuilderCBImpl.prototype._fromNode = function (node) {\n        var e_3, _a, e_4, _b;\n        if (util_2.Guard.isElementNode(node)) {\n            var name = node.prefix ? node.prefix + \":\" + node.localName : node.localName;\n            if (node.namespaceURI !== null) {\n                this.ele(node.namespaceURI, name);\n            }\n            else {\n                this.ele(name);\n            }\n            try {\n                for (var _c = __values(node.attributes), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var attr = _d.value;\n                    var name_1 = attr.prefix ? attr.prefix + \":\" + attr.localName : attr.localName;\n                    if (attr.namespaceURI !== null) {\n                        this.att(attr.namespaceURI, name_1, attr.value);\n                    }\n                    else {\n                        this.att(name_1, attr.value);\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            try {\n                for (var _e = __values(node.childNodes), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var child = _f.value;\n                    this._fromNode(child);\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            this.up();\n        }\n        else if (util_2.Guard.isExclusiveTextNode(node) && node.data) {\n            this.txt(node.data);\n        }\n        else if (util_2.Guard.isCommentNode(node)) {\n            this.com(node.data);\n        }\n        else if (util_2.Guard.isCDATASectionNode(node)) {\n            this.dat(node.data);\n        }\n        else if (util_2.Guard.isProcessingInstructionNode(node)) {\n            this.ins(node.target, node.data);\n        }\n    };\n    /**\n     * Produces an XML serialization of the attributes of an element node.\n     *\n     * @param node - node to serialize\n     * @param map - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param localPrefixesMap - local prefixes map\n     * @param ignoreNamespaceDefinitionAttribute - whether to ignore namespace\n     * attributes\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLBuilderCBImpl.prototype._serializeAttributes = function (node, map, prefixIndex, localPrefixesMap, ignoreNamespaceDefinitionAttribute, requireWellFormed) {\n        var e_5, _a;\n        var localNameSet = requireWellFormed ? new LocalNameSet_1.LocalNameSet() : undefined;\n        try {\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                // Optimize common case\n                if (!requireWellFormed && !ignoreNamespaceDefinitionAttribute && attr.namespaceURI === null) {\n                    this._push(this._writer.attribute(attr.localName, this._serializeAttributeValue(attr.value, this._options.wellFormed)));\n                    continue;\n                }\n                if (requireWellFormed && localNameSet && localNameSet.has(attr.namespaceURI, attr.localName)) {\n                    this.emit(\"error\", new Error(\"Element contains duplicate attributes (well-formed required).\"));\n                    return;\n                }\n                if (requireWellFormed && localNameSet)\n                    localNameSet.set(attr.namespaceURI, attr.localName);\n                var attributeNamespace = attr.namespaceURI;\n                var candidatePrefix = null;\n                if (attributeNamespace !== null) {\n                    candidatePrefix = map.get(attr.prefix, attributeNamespace);\n                    if (attributeNamespace === infra_1.namespace.XMLNS) {\n                        if (attr.value === infra_1.namespace.XML ||\n                            (attr.prefix === null && ignoreNamespaceDefinitionAttribute) ||\n                            (attr.prefix !== null && (!(attr.localName in localPrefixesMap) ||\n                                localPrefixesMap[attr.localName] !== attr.value) &&\n                                map.has(attr.localName, attr.value)))\n                            continue;\n                        if (requireWellFormed && attr.value === infra_1.namespace.XMLNS) {\n                            this.emit(\"error\", new Error(\"XMLNS namespace is reserved (well-formed required).\"));\n                            return;\n                        }\n                        if (requireWellFormed && attr.value === '') {\n                            this.emit(\"error\", new Error(\"Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).\"));\n                            return;\n                        }\n                        if (attr.prefix === 'xmlns')\n                            candidatePrefix = 'xmlns';\n                        /**\n                         * _Note:_ The (candidatePrefix === null) check is not in the spec.\n                         * We deviate from the spec here. Otherwise a prefix is generated for\n                         * all attributes with namespaces.\n                         */\n                    }\n                    else if (candidatePrefix === null) {\n                        if (attr.prefix !== null &&\n                            (!map.hasPrefix(attr.prefix) ||\n                                map.has(attr.prefix, attributeNamespace))) {\n                            /**\n                             * Check if we can use the attribute's own prefix.\n                             * We deviate from the spec here.\n                             * TODO: This is not an efficient way of searching for prefixes.\n                             * Follow developments to the spec.\n                             */\n                            candidatePrefix = attr.prefix;\n                        }\n                        else {\n                            candidatePrefix = this._generatePrefix(attributeNamespace, map, prefixIndex);\n                        }\n                        this._push(this._writer.attribute(\"xmlns:\" + candidatePrefix, this._serializeAttributeValue(attributeNamespace, this._options.wellFormed)));\n                    }\n                }\n                if (requireWellFormed && (attr.localName.indexOf(\":\") !== -1 ||\n                    !algorithm_1.xml_isName(attr.localName) ||\n                    (attr.localName === \"xmlns\" && attributeNamespace === null))) {\n                    this.emit(\"error\", new Error(\"Attribute local name contains invalid characters (well-formed required).\"));\n                    return;\n                }\n                this._push(this._writer.attribute((candidatePrefix !== null ? candidatePrefix + \":\" : \"\") + attr.localName, this._serializeAttributeValue(attr.value, this._options.wellFormed)));\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    /**\n     * Produces an XML serialization of an attribute value.\n     *\n     * @param value - attribute value\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLBuilderCBImpl.prototype._serializeAttributeValue = function (value, requireWellFormed) {\n        if (requireWellFormed && value !== null && !algorithm_1.xml_isLegalChar(value)) {\n            this.emit(\"error\", new Error(\"Invalid characters in attribute value.\"));\n            return \"\";\n        }\n        if (value === null)\n            return \"\";\n        return value.replace(/(?!&(lt|gt|amp|apos|quot);)&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;');\n    };\n    /**\n     * Records namespace information for the given element and returns the\n     * default namespace attribute value.\n     *\n     * @param node - element node to process\n     * @param map - namespace prefix map\n     * @param localPrefixesMap - local prefixes map\n     */\n    XMLBuilderCBImpl.prototype._recordNamespaceInformation = function (node, map, localPrefixesMap) {\n        var e_6, _a;\n        var defaultNamespaceAttrValue = null;\n        try {\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                var attributeNamespace = attr.namespaceURI;\n                var attributePrefix = attr.prefix;\n                if (attributeNamespace === infra_1.namespace.XMLNS) {\n                    if (attributePrefix === null) {\n                        defaultNamespaceAttrValue = attr.value;\n                        continue;\n                    }\n                    else {\n                        var prefixDefinition = attr.localName;\n                        var namespaceDefinition = attr.value;\n                        if (namespaceDefinition === infra_1.namespace.XML) {\n                            continue;\n                        }\n                        if (namespaceDefinition === '') {\n                            namespaceDefinition = null;\n                        }\n                        if (map.has(prefixDefinition, namespaceDefinition)) {\n                            continue;\n                        }\n                        map.set(prefixDefinition, namespaceDefinition);\n                        localPrefixesMap[prefixDefinition] = namespaceDefinition || '';\n                    }\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        return defaultNamespaceAttrValue;\n    };\n    /**\n     * Generates a new prefix for the given namespace.\n     *\n     * @param newNamespace - a namespace to generate prefix for\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     */\n    XMLBuilderCBImpl.prototype._generatePrefix = function (newNamespace, prefixMap, prefixIndex) {\n        var generatedPrefix = \"ns\" + prefixIndex.value;\n        prefixIndex.value++;\n        prefixMap.set(generatedPrefix, newNamespace);\n        return generatedPrefix;\n    };\n    /**\n     * Determines if the namespace prefix map was modified from its original.\n     *\n     * @param originalMap - original namespace prefix map\n     * @param newMap - new namespace prefix map\n     */\n    XMLBuilderCBImpl.prototype._isPrefixMapModified = function (originalMap, newMap) {\n        var items1 = originalMap._items;\n        var items2 = newMap._items;\n        var nullItems1 = originalMap._nullItems;\n        var nullItems2 = newMap._nullItems;\n        for (var key in items2) {\n            var arr1 = items1[key];\n            if (arr1 === undefined)\n                return true;\n            var arr2 = items2[key];\n            if (arr1.length !== arr2.length)\n                return true;\n            for (var i = 0; i < arr1.length; i++) {\n                if (arr1[i] !== arr2[i])\n                    return true;\n            }\n        }\n        if (nullItems1.length !== nullItems2.length)\n            return true;\n        for (var i = 0; i < nullItems1.length; i++) {\n            if (nullItems1[i] !== nullItems2[i])\n                return true;\n        }\n        return false;\n    };\n    XMLBuilderCBImpl._VoidElementNames = new Set(['area', 'base', 'basefont',\n        'bgsound', 'br', 'col', 'embed', 'frame', 'hr', 'img', 'input', 'keygen',\n        'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']);\n    return XMLBuilderCBImpl;\n}(events_1.EventEmitter));\nexports.XMLBuilderCBImpl = XMLBuilderCBImpl;\n//# sourceMappingURL=XMLBuilderCBImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Parses the given byte sequence representing a JSON string into an object.\n *\n * @param bytes - a byte sequence\n */\nfunction parseJSONFromBytes(bytes) {\n    /**\n     * 1. Let jsonText be the result of running UTF-8 decode on bytes. [ENCODING]\n     * 2. Return ? Call(%JSONParse%, undefined, « jsonText »).\n     */\n    var jsonText = util_1.utf8Decode(bytes);\n    return JSON.parse.call(undefined, jsonText);\n}\nexports.parseJSONFromBytes = parseJSONFromBytes;\n/**\n * Serialize the given JavaScript value into a byte sequence.\n *\n * @param value - a JavaScript value\n */\nfunction serializeJSONToBytes(value) {\n    /**\n     * 1. Let jsonString be ? Call(%JSONStringify%, undefined, « value »).\n     * 2. Return the result of running UTF-8 encode on jsonString. [ENCODING]\n     */\n    var jsonString = JSON.stringify.call(undefined, value);\n    return util_1.utf8Encode(jsonString);\n}\nexports.serializeJSONToBytes = serializeJSONToBytes;\n/**\n * Parses the given JSON string into a Realm-independent JavaScript value.\n *\n * @param jsonText - a JSON string\n */\nfunction parseJSONIntoInfraValues(jsonText) {\n    /**\n     * 1. Let jsValue be ? Call(%JSONParse%, undefined, « jsonText »).\n     * 2. Return the result of converting a JSON-derived JavaScript value to an\n     * Infra value, given jsValue.\n     */\n    var jsValue = JSON.parse.call(undefined, jsonText);\n    return convertAJSONDerivedJavaScriptValueToAnInfraValue(jsValue);\n}\nexports.parseJSONIntoInfraValues = parseJSONIntoInfraValues;\n/**\n * Parses the value into a Realm-independent JavaScript value.\n *\n * @param jsValue - a JavaScript value\n */\nfunction convertAJSONDerivedJavaScriptValueToAnInfraValue(jsValue) {\n    var e_1, _a;\n    /**\n     * 1. If Type(jsValue) is Null, String, or Number, then return jsValue.\n     */\n    if (jsValue === null || util_1.isString(jsValue) || util_1.isNumber(jsValue))\n        return jsValue;\n    /**\n     * 2. If IsArray(jsValue) is true, then:\n     * 2.1. Let result be an empty list.\n     * 2.2. Let length be ! ToLength(! Get(jsValue, \"length\")).\n     * 2.3. For each index of the range 0 to length − 1, inclusive:\n     * 2.3.1. Let indexName be ! ToString(index).\n     * 2.3.2. Let jsValueAtIndex be ! Get(jsValue, indexName).\n     * 2.3.3. Let infraValueAtIndex be the result of converting a JSON-derived\n     * JavaScript value to an Infra value, given jsValueAtIndex.\n     * 2.3.4. Append infraValueAtIndex to result.\n     * 2.8. Return result.\n     */\n    if (util_1.isArray(jsValue)) {\n        var result = new Array();\n        try {\n            for (var jsValue_1 = __values(jsValue), jsValue_1_1 = jsValue_1.next(); !jsValue_1_1.done; jsValue_1_1 = jsValue_1.next()) {\n                var jsValueAtIndex = jsValue_1_1.value;\n                result.push(convertAJSONDerivedJavaScriptValueToAnInfraValue(jsValueAtIndex));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (jsValue_1_1 && !jsValue_1_1.done && (_a = jsValue_1.return)) _a.call(jsValue_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n    }\n    else if (util_1.isObject(jsValue)) {\n        /**\n         * 3. Let result be an empty ordered map.\n         * 4. For each key of ! jsValue.[[OwnPropertyKeys]]():\n         * 4.1. Let jsValueAtKey be ! Get(jsValue, key).\n         * 4.2. Let infraValueAtKey be the result of converting a JSON-derived\n         * JavaScript value to an Infra value, given jsValueAtKey.\n         * 4.3. Set result[key] to infraValueAtKey.\n         * 5. Return result.\n         */\n        var result = new Map();\n        for (var key in jsValue) {\n            /* istanbul ignore else */\n            if (jsValue.hasOwnProperty(key)) {\n                var jsValueAtKey = jsValue[key];\n                result.set(key, convertAJSONDerivedJavaScriptValueToAnInfraValue(jsValueAtKey));\n            }\n        }\n        return result;\n    }\n    /* istanbul ignore next */\n    return jsValue;\n}\nexports.convertAJSONDerivedJavaScriptValueToAnInfraValue = convertAJSONDerivedJavaScriptValueToAnInfraValue;\n//# sourceMappingURL=JSON.js.map","// JS-YAML's default schema for `load` function.\n// It is not described in the YAML specification.\n//\n// This schema is based on JS-YAML's default safe schema and includes\n// JavaScript-specific types: !!js/undefined, !!js/regexp and !!js/function.\n//\n// Also this schema is used as default base schema at `Schema.create` function.\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = Schema.DEFAULT = new Schema({\n  include: [\n    require('./default_safe')\n  ],\n  explicit: [\n    require('../type/js/undefined'),\n    require('../type/js/regexp'),\n    require('../type/js/function')\n  ]\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Appends the given item to the queue.\n *\n * @param list - a list\n * @param item - an item\n */\nfunction enqueue(list, item) {\n    list.push(item);\n}\nexports.enqueue = enqueue;\n/**\n * Removes and returns an item from the queue.\n *\n * @param list - a list\n */\nfunction dequeue(list) {\n    return list.shift() || null;\n}\nexports.dequeue = dequeue;\n//# sourceMappingURL=Queue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Export classes\nvar XMLSerializerImpl_1 = require(\"./XMLSerializerImpl\");\nexports.XMLSerializer = XMLSerializerImpl_1.XMLSerializerImpl;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a controller that allows to abort DOM requests.\n */\nvar AbortControllerImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `AbortController`.\n     */\n    function AbortControllerImpl() {\n        /**\n         * 1. Let signal be a new AbortSignal object.\n         * 2. Let controller be a new AbortController object whose signal is signal.\n         * 3. Return controller.\n         */\n        this._signal = algorithm_1.create_abortSignal();\n    }\n    Object.defineProperty(AbortControllerImpl.prototype, \"signal\", {\n        /** @inheritdoc */\n        get: function () { return this._signal; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    AbortControllerImpl.prototype.abort = function () {\n        algorithm_1.abort_signalAbort(this._signal);\n    };\n    return AbortControllerImpl;\n}());\nexports.AbortControllerImpl = AbortControllerImpl;\n//# sourceMappingURL=AbortControllerImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar interfaces_1 = require(\"./interfaces\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar url_1 = require(\"url\");\nvar _validationErrorCallback;\n/**\n * Default ports for a special URL scheme.\n */\nvar _defaultPorts = {\n    \"ftp\": 21,\n    \"file\": null,\n    \"http\": 80,\n    \"https\": 443,\n    \"ws\": 80,\n    \"wss\": 443\n};\n/**\n * The C0 control percent-encode set are the C0 controls and all code points\n * greater than U+007E (~).\n */\nvar _c0ControlPercentEncodeSet = /[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n/**\n * The fragment percent-encode set is the C0 control percent-encode set and\n * U+0020 SPACE, U+0022 (\"), U+003C (<), U+003E (>), and U+0060 (`).\n */\nvar _fragmentPercentEncodeSet = /[ \"<>`]|[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n/**\n * The path percent-encode set is the fragment percent-encode set and\n * U+0023 (#), U+003F (?), U+007B ({), and U+007D (}).\n */\nvar _pathPercentEncodeSet = /[ \"<>`#?{}]|[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n/**\n * The userinfo percent-encode set is the path percent-encode set and\n * U+002F (/), U+003A (:), U+003B (;), U+003D (=), U+0040 (@), U+005B ([),\n * U+005C (\\), U+005D (]), U+005E (^), and U+007C (|).\n */\nvar _userInfoPercentEncodeSet = /[ \"<>`#?{}/:;=@\\[\\]\\\\\\^\\|]|[\\0-\\x1F\\x7F-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n/**\n * The URL code points are ASCII alphanumeric, U+0021 (!), U+0024 ($),\n * U+0026 (&), U+0027 ('), U+0028 LEFT PARENTHESIS, U+0029 RIGHT PARENTHESIS,\n * U+002A (*), U+002B (+), U+002C (,), U+002D (-), U+002E (.), U+002F (/),\n * U+003A (:), U+003B (;), U+003D (=), U+003F (?), U+0040 (@), U+005F (_),\n * U+007E (~), and code points in the range U+00A0 to U+10FFFD, inclusive,\n * excluding surrogates and noncharacters.\n */\nvar _urlCodePoints = /[0-9A-Za-z!\\$&-\\/:;=\\?@_~\\xA0-\\uD7FF\\uE000-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uD83E\\uD840-\\uD87E\\uD880-\\uD8BE\\uD8C0-\\uD8FE\\uD900-\\uD93E\\uD940-\\uD97E\\uD980-\\uD9BE\\uD9C0-\\uD9FE\\uDA00-\\uDA3E\\uDA40-\\uDA7E\\uDA80-\\uDABE\\uDAC0-\\uDAFE\\uDB00-\\uDB3E\\uDB40-\\uDB7E\\uDB80-\\uDBBE\\uDBC0-\\uDBFE][\\uDC00-\\uDFFF]|[\\uD83F\\uD87F\\uD8BF\\uD8FF\\uD93F\\uD97F\\uD9BF\\uD9FF\\uDA3F\\uDA7F\\uDABF\\uDAFF\\uDB3F\\uDB7F\\uDBBF\\uDBFF][\\uDC00-\\uDFFD]/;\n/**\n * A forbidden host code point is U+0000 NULL, U+0009 TAB, U+000A LF,\n * U+000D CR, U+0020 SPACE, U+0023 (#), U+0025 (%), U+002F (/), U+003A (:),\n * U+003F (?), U+0040 (@), U+005B ([), U+005C (\\), or U+005D (]).\n */\nvar _forbiddenHostCodePoint = /[\\0\\t\\f\\r #%/:?@\\[\\\\\\]]/;\n/**\n * Sets the callback function for validation errors.\n *\n * @param validationErrorCallback - a callback function to be called when a\n * validation error occurs\n */\nfunction setValidationErrorCallback(validationErrorCallback) {\n    _validationErrorCallback = validationErrorCallback;\n}\nexports.setValidationErrorCallback = setValidationErrorCallback;\n/**\n * Generates a validation error.\n *\n * @param message - error message\n */\nfunction validationError(message) {\n    if (_validationErrorCallback !== undefined) {\n        _validationErrorCallback.call(null, \"Validation Error: \" + message);\n    }\n}\n/**\n * Creates a new URL.\n */\nfunction newURL() {\n    return {\n        scheme: '',\n        username: '',\n        password: '',\n        host: null,\n        port: null,\n        path: [],\n        query: null,\n        fragment: null,\n        _cannotBeABaseURLFlag: false,\n        _blobURLEntry: null\n    };\n}\nexports.newURL = newURL;\n/**\n * Determines if the scheme is a special scheme.\n *\n * @param scheme - a scheme\n */\nfunction isSpecialScheme(scheme) {\n    return (scheme in _defaultPorts);\n}\nexports.isSpecialScheme = isSpecialScheme;\n/**\n * Determines if the URL has a special scheme.\n *\n * @param url - an URL\n */\nfunction isSpecial(url) {\n    return isSpecialScheme(url.scheme);\n}\nexports.isSpecial = isSpecial;\n/**\n * Returns the default port for a special scheme.\n *\n * @param scheme - a scheme\n */\nfunction defaultPort(scheme) {\n    return _defaultPorts[scheme] || null;\n}\nexports.defaultPort = defaultPort;\n/**\n * Determines if the URL has credentials.\n *\n * @param url - an URL\n */\nfunction includesCredentials(url) {\n    return url.username !== '' || url.password !== '';\n}\nexports.includesCredentials = includesCredentials;\n/**\n * Determines if an URL cannot have credentials.\n *\n * @param url - an URL\n */\nfunction cannotHaveAUsernamePasswordPort(url) {\n    /**\n     * A URL cannot have a username/password/port if its host is null or the\n     * empty string, its cannot-be-a-base-URL flag is set, or its scheme is\n     * \"file\".\n     */\n    return (url.host === null || url.host === \"\" || url._cannotBeABaseURLFlag ||\n        url.scheme === \"file\");\n}\nexports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\n/**\n * Serializes an URL into a string.\n *\n * @param url - an URL\n */\nfunction urlSerializer(url, excludeFragmentFlag) {\n    var e_1, _a;\n    if (excludeFragmentFlag === void 0) { excludeFragmentFlag = false; }\n    /**\n     * 1. Let output be url’s scheme and U+003A (:) concatenated.\n     */\n    var output = url.scheme + ':';\n    /**\n     * 2. If url’s host is non-null:\n     */\n    if (url.host !== null) {\n        /**\n         * 2.1. Append \"//\" to output.\n         */\n        output += '//';\n        /**\n         * 2.2. If url includes credentials, then:\n         */\n        if (includesCredentials(url)) {\n            /**\n             * 2.2.1. Append url’s username to output.\n             * 2.2.2. If url’s password is not the empty string, then append U+003A (:),\n             * followed by url’s password, to output.\n             * 2.2.3. Append U+0040 (@) to output.\n             */\n            output += url.username;\n            if (url.password !== '') {\n                output += ':' + url.password;\n            }\n            output += '@';\n        }\n        /**\n         * 2.3. Append url’s host, serialized, to output.\n         * 2.4. If url’s port is non-null, append U+003A (:) followed by url’s port,\n         * serialized, to output.\n         */\n        output += hostSerializer(url.host);\n        if (url.port !== null) {\n            output += ':' + url.port;\n        }\n    }\n    else if (url.host === null && url.scheme === \"file\") {\n        /**\n         * 3. Otherwise, if url’s host is null and url’s scheme is \"file\", append \"//\" to output.\n         */\n        output += '//';\n    }\n    /**\n     * 4. If url’s cannot-be-a-base-URL flag is set, append url’s path[0] to\n     * output.\n     * 5. Otherwise, then for each string in url’s path, append U+002F (/)\n     * followed by the string to output.\n     */\n    if (url._cannotBeABaseURLFlag) {\n        output += url.path[0];\n    }\n    else {\n        try {\n            for (var _b = __values(url.path), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var str = _c.value;\n                output += '/' + str;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    /**\n     * 6. If url’s query is non-null, append U+003F (?), followed by url’s\n     * query, to output.\n     * 7. If the exclude fragment flag is unset and url’s fragment is non-null,\n     * append U+0023 (#), followed by url’s fragment, to output.\n     * 8. Return output.\n     */\n    if (url.query !== null) {\n        output += '?' + url.query;\n    }\n    if (!excludeFragmentFlag && url.fragment !== null) {\n        output += '#' + url.fragment;\n    }\n    return output;\n}\nexports.urlSerializer = urlSerializer;\n/**\n * Serializes a host into a string.\n *\n * @param host - a host\n */\nfunction hostSerializer(host) {\n    /**\n     * 1. If host is an IPv4 address, return the result of running the IPv4\n     * serializer on host.\n     * 2. Otherwise, if host is an IPv6 address, return U+005B ([), followed\n     * by the result of running the IPv6 serializer on host, followed by\n     * U+005D (]).\n     * 3. Otherwise, host is a domain, opaque host, or empty host, return host.\n     */\n    if (util_1.isNumber(host)) {\n        return iPv4Serializer(host);\n    }\n    else if (util_1.isArray(host)) {\n        return '[' + iPv6Serializer(host) + ']';\n    }\n    else {\n        return host;\n    }\n}\nexports.hostSerializer = hostSerializer;\n/**\n * Serializes an IPv4 address into a string.\n *\n * @param address  - an IPv4 address\n */\nfunction iPv4Serializer(address) {\n    /**\n     * 1. Let output be the empty string.\n     * 2. Let n be the value of address.\n     * 3. For each i in the range 1 to 4, inclusive:\n     * 3.1. Prepend n % 256, serialized, to output.\n     * 3.2. If i is not 4, then prepend U+002E (.) to output.\n     * 3.3. Set n to floor(n / 256).\n     * 4. Return output.\n     */\n    var output = \"\";\n    var n = address;\n    for (var i = 1; i <= 4; i++) {\n        output = (n % 256).toString() + output;\n        if (i !== 4) {\n            output = '.' + output;\n        }\n        n = Math.floor(n / 256);\n    }\n    return output;\n}\nexports.iPv4Serializer = iPv4Serializer;\n/**\n * Serializes an IPv6 address into a string.\n *\n * @param address  - an IPv6 address represented as a list of eight numbers\n */\nfunction iPv6Serializer(address) {\n    /**\n     * 1. Let output be the empty string.\n     * 2. Let compress be an index to the first IPv6 piece in the first longest\n     * sequences of address’s IPv6 pieces that are 0.\n     * In 0:f:0:0:f:f:0:0 it would point to the second 0.\n     * 3. If there is no sequence of address’s IPv6 pieces that are 0 that is\n     * longer than 1, then set compress to null.\n     */\n    var output = \"\";\n    var compress = null;\n    var lastIndex = -1;\n    var count = 0;\n    var lastCount = 0;\n    for (var i = 0; i < 8; i++) {\n        if (address[i] !== 0)\n            continue;\n        count = 1;\n        for (var j = i + 1; j < 8; j++) {\n            if (address[j] !== 0)\n                break;\n            count++;\n            continue;\n        }\n        if (count > lastCount) {\n            lastCount = count;\n            lastIndex = i;\n        }\n    }\n    if (lastCount > 1)\n        compress = lastIndex;\n    /**\n     * 4. Let ignore0 be false.\n     * 5. For each pieceIndex in the range 0 to 7, inclusive:\n     */\n    var ignore0 = false;\n    for (var pieceIndex = 0; pieceIndex < 8; pieceIndex++) {\n        /**\n         * 5.1. If ignore0 is true and address[pieceIndex] is 0, then continue.\n         * 5.2. Otherwise, if ignore0 is true, set ignore0 to false.\n         * 5.3. If compress is pieceIndex, then:\n         */\n        if (ignore0 && address[pieceIndex] === 0)\n            continue;\n        if (ignore0)\n            ignore0 = false;\n        if (compress === pieceIndex) {\n            /**\n             * 5.3.1. Let separator be \"::\" if pieceIndex is 0, and U+003A (:) otherwise.\n             * 5.3.2. Append separator to output.\n             * 5.3.3. Set ignore0 to true and continue.\n             */\n            output += (pieceIndex === 0 ? '::' : ':');\n            ignore0 = true;\n            continue;\n        }\n        /**\n         * 5.4. Append address[pieceIndex], represented as the shortest possible\n         * lowercase hexadecimal number, to output.\n         * 5.5. If pieceIndex is not 7, then append U+003A (:) to output.\n         */\n        output += address[pieceIndex].toString(16);\n        if (pieceIndex !== 7)\n            output += ':';\n    }\n    /**\n     * 6. Return output.\n     */\n    return output;\n}\nexports.iPv6Serializer = iPv6Serializer;\n/**\n * Parses an URL string.\n *\n * @param input - input string\n * @param baseURL - base URL\n * @param encodingOverride - encoding override\n */\nfunction urlParser(input, baseURL, encodingOverride) {\n    /**\n     * 1. Let url be the result of running the basic URL parser on input with\n     * base, and encoding override as provided.\n     * 2. If url is failure, return failure.\n     * 3. If url’s scheme is not \"blob\", return url.\n     * 4. Set url’s blob URL entry to the result of resolving the blob URL url,\n     * if that did not return failure, and null otherwise.\n     * 5. Return url.\n     */\n    var url = basicURLParser(input, baseURL, encodingOverride);\n    if (url === null)\n        return null;\n    if (url.scheme !== \"blob\")\n        return url;\n    var entry = resolveABlobURL(url);\n    if (entry !== null) {\n        url._blobURLEntry = entry;\n    }\n    else {\n        url._blobURLEntry = null;\n    }\n    return url;\n}\nexports.urlParser = urlParser;\n/**\n * Parses an URL string.\n *\n * @param input - input string\n * @param baseURL - base URL\n * @param encodingOverride - encoding override\n */\nfunction basicURLParser(input, baseURL, encodingOverride, url, stateOverride) {\n    var e_2, _a, e_3, _b;\n    /**\n     * 1. If url is not given:\n     * 1.1. Set url to a new URL.\n     * 1.2. If input contains any leading or trailing C0 control or space,\n     * validation error.\n     * 1.3. Remove any leading and trailing C0 control or space from input.\n     */\n    if (url === undefined) {\n        url = newURL();\n        // leading\n        var leadingControlOrSpace = /^[\\u0000-\\u001F\\u0020]+/;\n        var trailingControlOrSpace = /[\\u0000-\\u001F\\u0020]+$/;\n        if (leadingControlOrSpace.test(input) || trailingControlOrSpace.test(input)) {\n            validationError(\"Input string contains leading or trailing control characters or space.\");\n        }\n        input = input.replace(leadingControlOrSpace, '');\n        input = input.replace(trailingControlOrSpace, '');\n    }\n    /**\n     * 2. If input contains any ASCII tab or newline, validation error.\n     * 3. Remove all ASCII tab or newline from input.\n     */\n    var tabOrNewline = /[\\u0009\\u000A\\u000D]/g;\n    if (tabOrNewline.test(input)) {\n        validationError(\"Input string contains tab or newline characters.\");\n    }\n    input = input.replace(tabOrNewline, '');\n    /**\n     * 4. Let state be state override if given, or scheme start state otherwise.\n     * 5. If base is not given, set it to null.\n     * 6. Let encoding be UTF-8.\n     * 7. If encoding override is given, set encoding to the result of getting\n     * an output encoding from encoding override.\n     */\n    var state = (stateOverride === undefined ? interfaces_1.ParserState.SchemeStart : stateOverride);\n    if (baseURL === undefined)\n        baseURL = null;\n    var encoding = (encodingOverride === undefined ||\n        encodingOverride === \"replacement\" || encodingOverride === \"UTF-16BE\" ||\n        encodingOverride === \"UTF-16LE\" ? \"UTF-8\" : encodingOverride);\n    /**\n     * 8. Let buffer be the empty string.\n     * 9. Let the @ flag, [] flag, and passwordTokenSeenFlag be unset.\n     * 10. Let pointer be a pointer to first code point in input.\n     */\n    var buffer = \"\";\n    var atFlag = false;\n    var arrayFlag = false;\n    var passwordTokenSeenFlag = false;\n    var EOF = \"\";\n    var walker = new util_1.StringWalker(input);\n    /**\n     * 11. Keep running the following state machine by switching on state. If\n     * after a run pointer points to the EOF code point, go to the next step.\n     * Otherwise, increase pointer by one and continue with the state machine.\n     */\n    while (true) {\n        switch (state) {\n            case interfaces_1.ParserState.SchemeStart:\n                /**\n                 * 1. If c is an ASCII alpha, append c, lowercased, to buffer, and set\n                 * state to scheme state.\n                 * 2. Otherwise, if state override is not given, set state to no scheme\n                 * state, and decrease pointer by one.\n                 * 3. Otherwise, validation error, return failure.\n                 */\n                if (infra_1.codePoint.ASCIIAlpha.test(walker.c())) {\n                    buffer += walker.c().toLowerCase();\n                    state = interfaces_1.ParserState.Scheme;\n                }\n                else if (stateOverride === undefined) {\n                    state = interfaces_1.ParserState.NoScheme;\n                    walker.pointer--;\n                }\n                else {\n                    validationError(\"Invalid scheme start character.\");\n                    return null;\n                }\n                break;\n            case interfaces_1.ParserState.Scheme:\n                /**\n                 * 1. If c is an ASCII alphanumeric, U+002B (+), U+002D (-), or U+002E\n                 * (.), append c, lowercased, to buffer.\n                 */\n                if (infra_1.codePoint.ASCIIAlphanumeric.test(walker.c()) ||\n                    walker.c() === '+' || walker.c() === '-' || walker.c() === '.') {\n                    buffer += walker.c().toLowerCase();\n                }\n                else if (walker.c() === ':') {\n                    /**\n                     * 2. Otherwise, if c is U+003A (:), then:\n                     * 2.1. If state override is given, then:\n                     * 2.1.1. If url’s scheme is a special scheme and buffer is not a\n                     * special scheme, then return.\n                     * 2.1.2. If url’s scheme is not a special scheme and buffer is a\n                     * special scheme, then return.\n                     * 2.1.3. If url includes credentials or has a non-null port, and\n                     * buffer is \"file\", then return.\n                     * 2.1.4. If url’s scheme is \"file\" and its host is an empty host or\n                     * null, then return.\n                     */\n                    if (stateOverride !== undefined) {\n                        if (isSpecialScheme(url.scheme) && !isSpecialScheme(buffer))\n                            return url;\n                        if (!isSpecialScheme(url.scheme) && isSpecialScheme(buffer))\n                            return url;\n                        if ((includesCredentials(url) || url.port !== null) && buffer === \"file\")\n                            return url;\n                        if (url.scheme === \"file\" && (url.host === \"\" || url.host === null))\n                            return url;\n                    }\n                    /**\n                     * 2.2. Set url’s scheme to buffer.\n                     */\n                    url.scheme = buffer;\n                    /**\n                     * 2.3. If state override is given, then:\n                     * 2.3.1. If url’s port is url’s scheme’s default port, then set\n                     * url’s port to null.\n                     * 2.3.2. Return.\n                     */\n                    if (stateOverride !== undefined) {\n                        if (url.port === defaultPort(url.scheme)) {\n                            url.port = null;\n                        }\n                        return url;\n                    }\n                    /**\n                     * 2.4. Set buffer to the empty string.\n                     */\n                    buffer = \"\";\n                    if (url.scheme === \"file\") {\n                        /**\n                         * 2.5. If url’s scheme is \"file\", then:\n                         * 2.5.1. If remaining does not start with \"//\", validation error.\n                         * 2.5.2. Set state to file state.\n                         */\n                        if (!walker.remaining().startsWith(\"//\")) {\n                            validationError(\"Invalid file URL scheme, '//' expected.\");\n                        }\n                        state = interfaces_1.ParserState.File;\n                    }\n                    else if (isSpecial(url) && baseURL !== null && baseURL.scheme === url.scheme) {\n                        /**\n                         * 2.6. Otherwise, if url is special, base is non-null, and base’s\n                         * scheme is equal to url’s scheme, set state to special relative\n                         * or authority state.\n                         */\n                        state = interfaces_1.ParserState.SpecialRelativeOrAuthority;\n                    }\n                    else if (isSpecial(url)) {\n                        /**\n                         * 2.7. Otherwise, if url is special, set state to special\n                         * authority slashes state.\n                         */\n                        state = interfaces_1.ParserState.SpecialAuthoritySlashes;\n                    }\n                    else if (walker.remaining().startsWith(\"/\")) {\n                        /**\n                         * 2.8. Otherwise, if remaining starts with an U+002F (/), set state\n                         * to path or authority state and increase pointer by one.\n                         */\n                        state = interfaces_1.ParserState.PathOrAuthority;\n                        walker.pointer++;\n                    }\n                    else {\n                        /**\n                         * 2.9. Otherwise, set url’s cannot-be-a-base-URL flag, append an\n                         * empty string to url’s path, and set state to\n                         * cannot-be-a-base-URL path state.\n                         */\n                        url._cannotBeABaseURLFlag = true;\n                        url.path.push(\"\");\n                        state = interfaces_1.ParserState.CannotBeABaseURLPath;\n                    }\n                }\n                else if (stateOverride === undefined) {\n                    /**\n                     * 3. Otherwise, if state override is not given, set buffer to the\n                     * empty string, state to no scheme state, and start over (from the\n                     * first code point in input).\n                     */\n                    buffer = \"\";\n                    state = interfaces_1.ParserState.NoScheme;\n                    walker.pointer = 0;\n                    continue;\n                }\n                else {\n                    /**\n                     * 4. Otherwise, validation error, return failure.\n                     */\n                    validationError(\"Invalid input string.\");\n                    return null;\n                }\n                break;\n            case interfaces_1.ParserState.NoScheme:\n                /**\n                 * 1. If base is null, or base’s cannot-be-a-base-URL flag is set\n                 * and c is not U+0023 (#), validation error, return failure.\n                 * 2. Otherwise, if base’s cannot-be-a-base-URL flag is set and\n                 * c is U+0023 (#), set url’s scheme to base’s scheme, url’s path to\n                 * a copy of base’s path, url’s query to base’s query, url’s\n                 * fragment to the empty string, set url’s cannot-be-a-base-URL\n                 * flag, and set state to fragment state.\n                 * 3. Otherwise, if base’s scheme is not \"file\", set state to\n                 * relative state and decrease pointer by one.\n                 * 4. Otherwise, set state to file state and decrease pointer by one.\n                 */\n                if (baseURL === null || (baseURL._cannotBeABaseURLFlag && walker.c() !== '#')) {\n                    validationError(\"Invalid input string.\");\n                    return null;\n                }\n                else if (baseURL._cannotBeABaseURLFlag && walker.c() === '#') {\n                    url.scheme = baseURL.scheme;\n                    url.path = infra_1.list.clone(baseURL.path);\n                    url.query = baseURL.query;\n                    url.fragment = \"\";\n                    url._cannotBeABaseURLFlag = true;\n                    state = interfaces_1.ParserState.Fragment;\n                }\n                else if (baseURL.scheme !== \"file\") {\n                    state = interfaces_1.ParserState.Relative;\n                    walker.pointer--;\n                }\n                else {\n                    state = interfaces_1.ParserState.File;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.SpecialRelativeOrAuthority:\n                /**\n                 * If c is U+002F (/) and remaining starts with U+002F (/), then set\n                 * state to special authority ignore slashes state and increase\n                 * pointer by one.\n                 * Otherwise, validation error, set state to relative state and\n                 * decrease pointer by one.\n                 */\n                if (walker.c() === '/' && walker.remaining().startsWith('/')) {\n                    state = interfaces_1.ParserState.SpecialAuthorityIgnoreSlashes;\n                    walker.pointer++;\n                }\n                else {\n                    validationError(\"Invalid input string.\");\n                    state = interfaces_1.ParserState.Relative;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.PathOrAuthority:\n                /**\n                 * If c is U+002F (/), then set state to authority state.\n                 * Otherwise, set state to path state, and decrease pointer by one.\n                 */\n                if (walker.c() === '/') {\n                    state = interfaces_1.ParserState.Authority;\n                }\n                else {\n                    state = interfaces_1.ParserState.Path;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.Relative:\n                /**\n                 * Set url’s scheme to base’s scheme, and then, switching on c:\n                 */\n                if (baseURL === null) {\n                    throw new Error(\"Invalid parser state. Base URL is null.\");\n                }\n                url.scheme = baseURL.scheme;\n                switch (walker.c()) {\n                    case EOF: // EOF\n                        /**\n                         * Set url’s username to base’s username, url’s password to base’s\n                         * password, url’s host to base’s host, url’s port to base’s port,\n                         * url’s path to a copy of base’s path, and url’s query to base’s\n                         * query.\n                         */\n                        url.username = baseURL.username;\n                        url.password = baseURL.password;\n                        url.host = baseURL.host;\n                        url.port = baseURL.port;\n                        url.path = infra_1.list.clone(baseURL.path);\n                        url.query = baseURL.query;\n                        break;\n                    case '/':\n                        /**\n                         * Set state to relative slash state.\n                         */\n                        state = interfaces_1.ParserState.RelativeSlash;\n                        break;\n                    case '?':\n                        /**\n                         * Set url’s username to base’s username, url’s password to base’s\n                         * password, url’s host to base’s host, url’s port to base’s port,\n                         * url’s path to a copy of base’s path, url’s query to the empty\n                         * string, and state to query state.\n                         */\n                        url.username = baseURL.username;\n                        url.password = baseURL.password;\n                        url.host = baseURL.host;\n                        url.port = baseURL.port;\n                        url.path = infra_1.list.clone(baseURL.path);\n                        url.query = \"\";\n                        state = interfaces_1.ParserState.Query;\n                        break;\n                    case '#':\n                        /**\n                         * Set url’s username to base’s username, url’s password to base’s\n                         * password, url’s host to base’s host, url’s port to base’s port,\n                         * url’s path to a copy of base’s path, url’s query to base’s\n                         * query, url’s fragment to the empty string, and state to\n                         * fragment state.\n                         */\n                        url.username = baseURL.username;\n                        url.password = baseURL.password;\n                        url.host = baseURL.host;\n                        url.port = baseURL.port;\n                        url.path = infra_1.list.clone(baseURL.path);\n                        url.query = baseURL.query;\n                        url.fragment = \"\";\n                        state = interfaces_1.ParserState.Fragment;\n                        break;\n                    default:\n                        /**\n                         * If url is special and c is U+005C (\\), validation error,\n                         * set state to relative slash state.\n                         * Otherwise, run these steps:\n                         * 1. Set url’s username to base’s username, url’s password to\n                         * base’s password, url’s host to base’s host, url’s port to\n                         * base’s port, url’s path to a copy of base’s path, and then\n                         * remove url’s path’s last item, if any.\n                         * 2. Set state to path state, and decrease pointer by one.\n                         */\n                        if (isSpecial(url) && walker.c() === '\\\\') {\n                            validationError(\"Invalid input string.\");\n                            state = interfaces_1.ParserState.RelativeSlash;\n                        }\n                        else {\n                            url.username = baseURL.username;\n                            url.password = baseURL.password;\n                            url.host = baseURL.host;\n                            url.port = baseURL.port;\n                            url.path = infra_1.list.clone(baseURL.path);\n                            if (url.path.length !== 0)\n                                url.path.splice(url.path.length - 1, 1);\n                            state = interfaces_1.ParserState.Path;\n                            walker.pointer--;\n                        }\n                        break;\n                }\n                break;\n            case interfaces_1.ParserState.RelativeSlash:\n                /**\n                 * 1. If url is special and c is U+002F (/) or U+005C (\\), then:\n                 * 1.1. If c is U+005C (\\), validation error.\n                 * 1.2. Set state to special authority ignore slashes state.\n                 * 2. Otherwise, if c is U+002F (/), then set state to authority state.\n                 * 3. Otherwise, set url’s username to base’s username, url’s password\n                 * to base’s password, url’s host to base’s host, url’s port to base’s\n                 * port, state to path state, and then, decrease pointer by one.\n                 */\n                if (isSpecial(url) && (walker.c() === '/' || walker.c() === '\\\\')) {\n                    if (walker.c() === '\\\\') {\n                        validationError(\"Invalid input string.\");\n                    }\n                    state = interfaces_1.ParserState.SpecialAuthorityIgnoreSlashes;\n                }\n                else if (walker.c() === '/') {\n                    state = interfaces_1.ParserState.Authority;\n                }\n                else {\n                    if (baseURL === null) {\n                        throw new Error(\"Invalid parser state. Base URL is null.\");\n                    }\n                    url.username = baseURL.username;\n                    url.password = baseURL.password;\n                    url.host = baseURL.host;\n                    url.port = baseURL.port;\n                    state = interfaces_1.ParserState.Path;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.SpecialAuthoritySlashes:\n                /**\n                 * If c is U+002F (/) and remaining starts with U+002F (/), then set\n                 * state to special authority ignore slashes state and increase\n                 * pointer by one.\n                 * Otherwise, validation error, set state to special authority ignore\n                 * slashes state, and decrease pointer by one.\n                 */\n                if (walker.c() === '/' && walker.remaining().startsWith('/')) {\n                    state = interfaces_1.ParserState.SpecialAuthorityIgnoreSlashes;\n                    walker.pointer++;\n                }\n                else {\n                    validationError(\"Expected '//'.\");\n                    state = interfaces_1.ParserState.SpecialAuthorityIgnoreSlashes;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.SpecialAuthorityIgnoreSlashes:\n                /**\n                 * If c is neither U+002F (/) nor U+005C (\\), then set state to\n                 * authority state and decrease pointer by one.\n                 * Otherwise, validation error.\n                 */\n                if (walker.c() !== '/' && walker.c() !== '\\\\') {\n                    state = interfaces_1.ParserState.Authority;\n                    walker.pointer--;\n                }\n                else {\n                    validationError(\"Unexpected '/' or '\\\\'.\");\n                }\n                break;\n            case interfaces_1.ParserState.Authority:\n                /**\n                 * 1. If c is U+0040 (@), then:\n                 */\n                if (walker.c() === '@') {\n                    /**\n                     * 1.1. Validation error.\n                     * 1.2. If the @ flag is set, prepend \"%40\" to buffer.\n                     * 1.3. Set the @ flag.\n                     * 1.4. For each codePoint in buffer:\n                     */\n                    validationError(\"Unexpected '@'.\");\n                    if (atFlag)\n                        buffer = '%40' + buffer;\n                    atFlag = true;\n                    try {\n                        for (var buffer_1 = (e_2 = void 0, __values(buffer)), buffer_1_1 = buffer_1.next(); !buffer_1_1.done; buffer_1_1 = buffer_1.next()) {\n                            var codePoint = buffer_1_1.value;\n                            /**\n                             * 1.4.1. If codePoint is U+003A (:) and passwordTokenSeenFlag is\n                             * unset, then set passwordTokenSeenFlag and continue.\n                             * 1.4.2. Let encodedCodePoints be the result of running UTF-8\n                             * percent encode codePoint using the userinfo percent-encode set.\n                             * 1.4.3. If passwordTokenSeenFlag is set, then append\n                             * encodedCodePoints to url’s password.\n                             * 1.4.4. Otherwise, append encodedCodePoints to url’s username.\n                             */\n                            if (codePoint === ':' && !passwordTokenSeenFlag) {\n                                passwordTokenSeenFlag = true;\n                                continue;\n                            }\n                            var encodedCodePoints = utf8PercentEncode(codePoint, _userInfoPercentEncodeSet);\n                            if (passwordTokenSeenFlag) {\n                                url.password += encodedCodePoints;\n                            }\n                            else {\n                                url.username += encodedCodePoints;\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (buffer_1_1 && !buffer_1_1.done && (_a = buffer_1.return)) _a.call(buffer_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                    /**\n                     * 1.5. Set buffer to the empty string.\n                     */\n                    buffer = \"\";\n                }\n                else if (walker.c() === EOF || walker.c() === '/' || walker.c() === '?' || walker.c() === '#' ||\n                    (isSpecial(url) && walker.c() === '\\\\')) {\n                    /**\n                     * 2. Otherwise, if one of the following is true\n                     * - c is the EOF code point, U+002F (/), U+003F (?), or U+0023 (#)\n                     * - url is special and c is U+005C (\\)\n                     * then:\n                     * 2.1. If @ flag is set and buffer is the empty string, validation\n                     * error, return failure.\n                     * 2.2. Decrease pointer by the number of code points in buffer plus\n                     * one, set buffer to the empty string, and set state to host state.\n                     */\n                    if (atFlag && buffer === \"\") {\n                        validationError(\"Invalid input string.\");\n                        return null;\n                    }\n                    walker.pointer -= (buffer.length + 1);\n                    buffer = \"\";\n                    state = interfaces_1.ParserState.Host;\n                }\n                else {\n                    /**\n                     * 3. Otherwise, append c to buffer.\n                     */\n                    buffer += walker.c();\n                }\n                break;\n            case interfaces_1.ParserState.Host:\n            case interfaces_1.ParserState.Hostname:\n                if (stateOverride !== undefined && url.scheme === \"file\") {\n                    /**\n                     * 1. If state override is given and url’s scheme is \"file\", then\n                     * decrease pointer by one and set state to file host state.\n                     */\n                    walker.pointer--;\n                    state = interfaces_1.ParserState.FileHost;\n                }\n                else if (walker.c() === ':' && !arrayFlag) {\n                    /**\n                     * 2. Otherwise, if c is U+003A (:) and the [] flag is unset, then:\n                     * 2.1. If buffer is the empty string, validation error, return\n                     * failure.\n                     * 2.2. Let host be the result of host parsing buffer with url is\n                     * not special.\n                     * 2.3. If host is failure, then return failure.\n                     * 2.4. Set url’s host to host, buffer to the empty string, and\n                     * state to port state.\n                     * 2.5. If state override is given and state override is hostname\n                     * state, then return.\n                     */\n                    if (buffer === \"\") {\n                        validationError(\"Invalid input string.\");\n                        return null;\n                    }\n                    var host = hostParser(buffer, !isSpecial(url));\n                    if (host === null)\n                        return null;\n                    url.host = host;\n                    buffer = \"\";\n                    state = interfaces_1.ParserState.Port;\n                    if (stateOverride === interfaces_1.ParserState.Hostname)\n                        return url;\n                }\n                else if (walker.c() === EOF || walker.c() === '/' || walker.c() === '?' || walker.c() === '#' ||\n                    (isSpecial(url) && walker.c() === '\\\\')) {\n                    /**\n                     * 3. Otherwise, if one of the following is true\n                     * - c is the EOF code point, U+002F (/), U+003F (?), or U+0023 (#)\n                     * - url is special and c is U+005C (\\)\n                     * then decrease pointer by one, and then:\n                     * 3.1. If url is special and buffer is the empty string, validation\n                     * error, return failure.\n                     * 3.2. Otherwise, if state override is given, buffer is the empty\n                     * string, and either url includes credentials or url’s port is\n                     * non-null, validation error, return.\n                     * 3.3. Let host be the result of host parsing buffer with url is\n                     * not special.\n                     * 3.4. If host is failure, then return failure.\n                     * 3.5. Set url’s host to host, buffer to the empty string, and\n                     * state to path start state.\n                     * 3.6. If state override is given, then return.\n                     */\n                    walker.pointer--;\n                    if (isSpecial(url) && buffer === \"\") {\n                        validationError(\"Invalid input string.\");\n                        return null;\n                    }\n                    else if (stateOverride !== undefined && buffer === \"\" &&\n                        (includesCredentials(url) || url.port !== null)) {\n                        validationError(\"Invalid input string.\");\n                        return url;\n                    }\n                    var host = hostParser(buffer, !isSpecial(url));\n                    if (host === null)\n                        return null;\n                    url.host = host;\n                    buffer = \"\";\n                    state = interfaces_1.ParserState.PathStart;\n                    if (stateOverride !== undefined)\n                        return url;\n                }\n                else {\n                    /**\n                     * 4. Otherwise:\n                     * 4.1. If c is U+005B ([), then set the [] flag.\n                     * 4.2. If c is U+005D (]), then unset the [] flag.\n                     * 4.3. Append c to buffer.\n                     */\n                    if (walker.c() === '[')\n                        arrayFlag = true;\n                    if (walker.c() === ']')\n                        arrayFlag = false;\n                    buffer += walker.c();\n                }\n                break;\n            case interfaces_1.ParserState.Port:\n                if (infra_1.codePoint.ASCIIDigit.test(walker.c())) {\n                    /**\n                     * 1. If c is an ASCII digit, append c to buffer.\n                     */\n                    buffer += walker.c();\n                }\n                else if (walker.c() === EOF || walker.c() === '/' || walker.c() === '?' || walker.c() === '#' ||\n                    (isSpecial(url) && walker.c() === '\\\\') || stateOverride) {\n                    /**\n                     * 2. Otherwise, if one of the following is true\n                     * - c is the EOF code point, U+002F (/), U+003F (?), or U+0023 (#)\n                     * - url is special and c is U+005C (\\)\n                     * - state override is given\n                     * then:\n                     */\n                    if (buffer !== \"\") {\n                        /**\n                         * 2.1. If buffer is not the empty string, then:\n                         * 2.1.1. Let port be the mathematical integer value that is\n                         * represented by buffer in radix-10 using ASCII digits for digits\n                         * with values 0 through 9.\n                         * 2.1.2. If port is greater than 2**16 − 1, validation error,\n                         * return failure.\n                         * 2.1.3. Set url’s port to null, if port is url’s scheme’s default\n                         * port, and to port otherwise.\n                         * 2.1.4. Set buffer to the empty string.\n                         */\n                        if (buffer !== \"\") {\n                            var port = parseInt(buffer, 10);\n                            if (port > Math.pow(2, 16) - 1) {\n                                validationError(\"Invalid port number.\");\n                                return null;\n                            }\n                            url.port = (port === defaultPort(url.scheme) ? null : port);\n                            buffer = \"\";\n                        }\n                    }\n                    /**\n                     * 2.2. If state override is given, then return.\n                     * 2.3. Set state to path start state, and decrease pointer by one.\n                     */\n                    if (stateOverride !== undefined) {\n                        return url;\n                    }\n                    state = interfaces_1.ParserState.PathStart;\n                    walker.pointer--;\n                }\n                else {\n                    /**\n                     * 3. Otherwise, validation error, return failure.\n                     */\n                    validationError(\"Invalid input string.\");\n                    return null;\n                }\n                break;\n            case interfaces_1.ParserState.File:\n                /**\n                 * 1. Set url’s scheme to \"file\".\n                 */\n                url.scheme = \"file\";\n                if (walker.c() === '/' || walker.c() === '\\\\') {\n                    /**\n                     * 2. If c is U+002F (/) or U+005C (\\), then:\n                     * 2.1. If c is U+005C (\\), validation error.\n                     * 2.2. Set state to file slash state.\n                     */\n                    if (walker.c() === '\\\\') {\n                        validationError(\"Invalid input string.\");\n                    }\n                    state = interfaces_1.ParserState.FileSlash;\n                }\n                else if (baseURL !== null && baseURL.scheme === \"file\") {\n                    /**\n                     * 3. Otherwise, if base is non-null and base’s scheme is \"file\",\n                     * switch on c:\n                     */\n                    switch (walker.c()) {\n                        case EOF:\n                            /**\n                             * Set url’s host to base’s host, url’s path to a copy of base’s\n                             * path, and url’s query to base’s query.\n                             */\n                            url.host = baseURL.host;\n                            url.path = infra_1.list.clone(baseURL.path);\n                            url.query = baseURL.query;\n                            break;\n                        case '?':\n                            /**\n                             * Set url’s host to base’s host, url’s path to a copy of base’s\n                             * path, url’s query to the empty string, and state to query\n                             * state.\n                             */\n                            url.host = baseURL.host;\n                            url.path = infra_1.list.clone(baseURL.path);\n                            url.query = \"\";\n                            state = interfaces_1.ParserState.Query;\n                            break;\n                        case '#':\n                            /**\n                             * Set url’s host to base’s host, url’s path to a copy of base’s\n                             * path, url’s query to base’s query, url’s fragment to the\n                             * empty string, and state to fragment state.\n                             */\n                            url.host = baseURL.host;\n                            url.path = infra_1.list.clone(baseURL.path);\n                            url.query = baseURL.query;\n                            url.fragment = \"\";\n                            state = interfaces_1.ParserState.Fragment;\n                            break;\n                        default:\n                            /**\n                             * 1. If the substring from pointer in input does not start\n                             * with a Windows drive letter, then set url’s host to base’s\n                             * host, url’s path to a copy of base’s path, and then shorten\n                             * url’s path.\n                             * _Note:_ is a (platform-independent) Windows drive letter\n                             * quirk.\n                             * 2. Otherwise, validation error.\n                             * 3. Set state to path state, and decrease pointer by one.\n                             */\n                            if (!startsWithAWindowsDriveLetter(walker.substring())) {\n                                url.host = baseURL.host;\n                                url.path = infra_1.list.clone(baseURL.path);\n                                shorten(url);\n                            }\n                            else {\n                                validationError(\"Unexpected windows drive letter in input string.\");\n                            }\n                            state = interfaces_1.ParserState.Path;\n                            walker.pointer--;\n                            break;\n                    }\n                }\n                else {\n                    /**\n                     * 4. Otherwise, set state to path state, and decrease pointer by\n                     * one.\n                     */\n                    state = interfaces_1.ParserState.Path;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.FileSlash:\n                if (walker.c() === '/' || walker.c() === '\\\\') {\n                    /**\n                     * 1. If c is U+002F (/) or U+005C (\\), then:\n                     * 1.1. If c is U+005C (\\), validation error.\n                     * 1.2. Set state to file host state.\n                     */\n                    if (walker.c() === '\\\\') {\n                        validationError(\"Invalid input string.\");\n                    }\n                    state = interfaces_1.ParserState.FileHost;\n                }\n                else {\n                    /**\n                     * 2. Otherwise:\n                     * 2.1. If base is non-null, base’s scheme is \"file\", and the\n                     * substring from pointer in input does not start with a Windows\n                     * drive letter, then:\n                     * 2.1.1. If base’s path[0] is a normalized Windows drive letter,\n                     * then append base’s path[0] to url’s path.\n                     * _Note:_ is a (platform-independent) Windows drive letter\n                     * quirk. Both url’s and base’s host are null under these conditions\n                     * and therefore not copied.\n                     * 2.1.2. Otherwise, set url’s host to base’s host.\n                     * 2.2. Set state to path state, and decrease pointer by one.\n                     */\n                    if (baseURL !== null && baseURL.scheme === \"file\" &&\n                        !startsWithAWindowsDriveLetter(walker.substring())) {\n                        if (isNormalizedWindowsDriveLetter(baseURL.path[0])) {\n                            url.path.push(baseURL.path[0]);\n                        }\n                        else {\n                            url.host = baseURL.host;\n                        }\n                    }\n                    state = interfaces_1.ParserState.Path;\n                    walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.FileHost:\n                if (walker.c() === EOF || walker.c() === '/' || walker.c() === '\\\\' ||\n                    walker.c() === '?' || walker.c() === '#') {\n                    /**\n                     * 1. If c is the EOF code point, U+002F (/), U+005C (\\), U+003F (?),\n                     * or U+0023 (#), then decrease pointer by one and then:\n                     */\n                    walker.pointer--;\n                    if (stateOverride === undefined && isWindowsDriveLetter(buffer)) {\n                        /**\n                         * 1.1. If state override is not given and buffer is a Windows drive\n                         * letter, validation error, set state to path state.\n                         * _Note:_ is a (platform-independent) Windows drive letter\n                         * quirk. buffer is not reset here and instead used in the path state.\n                         */\n                        validationError(\"Unexpected windows drive letter in input string.\");\n                        state = interfaces_1.ParserState.Path;\n                    }\n                    else if (buffer === \"\") {\n                        /**\n                         * 1.2. Otherwise, if buffer is the empty string, then:\n                         * 1.2.1. Set url’s host to the empty string.\n                         * 1.2.2. If state override is given, then return.\n                         * 1.2.3. Set state to path start state.\n                         */\n                        url.host = \"\";\n                        if (stateOverride !== undefined)\n                            return url;\n                        state = interfaces_1.ParserState.PathStart;\n                    }\n                    else {\n                        /**\n                         * 1.3. Otherwise, run these steps:\n                         * 1.3.1. Let host be the result of host parsing buffer with url\n                         * is not special.\n                         * 1.3.2. If host is failure, then return failure.\n                         * 1.3.3. If host is \"localhost\", then set host to the empty\n                         * string.\n                         * 1.3.4. Set url’s host to host.\n                         * 1.3.5. If state override is given, then return.\n                         * 1.3.6. Set buffer to the empty string and state to path start\n                         * state.\n                         */\n                        var host = hostParser(buffer, !isSpecial(url));\n                        if (host === null)\n                            return null;\n                        if (host === \"localhost\")\n                            host = \"\";\n                        url.host = host;\n                        if (stateOverride !== undefined)\n                            return url;\n                        buffer = \"\";\n                        state = interfaces_1.ParserState.PathStart;\n                    }\n                }\n                else {\n                    /**\n                     * 2. Otherwise, append c to buffer.\n                     */\n                    buffer += walker.c();\n                }\n                break;\n            case interfaces_1.ParserState.PathStart:\n                if (isSpecial(url)) {\n                    /**\n                     * 1. If url is special, then:\n                     * 1.1. If c is U+005C (\\), validation error.\n                     * 1.2. Set state to path state.\n                     * 1.3. If c is neither U+002F (/) nor U+005C (\\), then decrease\n                     * pointer by one.\n                     */\n                    if (walker.c() === '\\\\') {\n                        validationError(\"Invalid input string.\");\n                    }\n                    state = interfaces_1.ParserState.Path;\n                    if (walker.c() !== '/' && walker.c() !== '\\\\')\n                        walker.pointer--;\n                }\n                else if (stateOverride === undefined && walker.c() === '?') {\n                    /**\n                     * 2. Otherwise, if state override is not given and c is U+003F (?),\n                     * set url’s query to the empty string and state to query state.\n                     */\n                    url.query = \"\";\n                    state = interfaces_1.ParserState.Query;\n                }\n                else if (stateOverride === undefined && walker.c() === '#') {\n                    /**\n                     * 3. Otherwise, if state override is not given and c is U+0023 (#),\n                     * set url’s fragment to the empty string and state to fragment\n                     * state.\n                     */\n                    url.fragment = \"\";\n                    state = interfaces_1.ParserState.Fragment;\n                }\n                else if (walker.c() !== EOF) {\n                    /**\n                     * 4. Otherwise, if c is not the EOF code point:\n                     * 4.1. Set state to path state.\n                     * 4.2. If c is not U+002F (/), then decrease pointer by one.\n                     */\n                    state = interfaces_1.ParserState.Path;\n                    if (walker.c() !== '/')\n                        walker.pointer--;\n                }\n                break;\n            case interfaces_1.ParserState.Path:\n                if ((walker.c() === EOF || walker.c() === '/') ||\n                    (isSpecial(url) && walker.c() === '\\\\') ||\n                    (stateOverride === undefined && (walker.c() === '?' || walker.c() === '#'))) {\n                    /**\n                     * 1. If one of the following is true\n                     * - c is the EOF code point or U+002F (/)\n                     * - url is special and c is U+005C (\\)\n                     * - state override is not given and c is U+003F (?) or U+0023 (#)\n                     * then:\n                     */\n                    if (isSpecial(url) && walker.c() === '\\\\') {\n                        /**\n                         * 1.1 If url is special and c is U+005C (\\), validation error.\n                         */\n                        validationError(\"Invalid input string.\");\n                    }\n                    if (isDoubleDotPathSegment(buffer)) {\n                        /**\n                         * 1.2. If buffer is a double-dot path segment, shorten url’s path,\n                         * and then if neither c is U+002F (/), nor url is special and c is\n                         * U+005C (\\), append the empty string to url’s path.\n                         */\n                        shorten(url);\n                        if (walker.c() !== '/' && !(isSpecial(url) && walker.c() === '\\\\')) {\n                            url.path.push(\"\");\n                        }\n                    }\n                    else if (isSingleDotPathSegment(buffer) && walker.c() !== '/' &&\n                        !(isSpecial(url) && walker.c() === '\\\\')) {\n                        /**\n                         * 1.3. Otherwise, if buffer is a single-dot path segment and if\n                         * neither c is U+002F (/), nor url is special and c is U+005C (\\),\n                         * append the empty string to url’s path.\n                         */\n                        url.path.push(\"\");\n                    }\n                    else if (!isSingleDotPathSegment(buffer)) {\n                        /**\n                         * 1.4. Otherwise, if buffer is not a single-dot path segment, then:\n                         */\n                        if (url.scheme === \"file\" && url.path.length === 0 &&\n                            isWindowsDriveLetter(buffer)) {\n                            /**\n                             * 1.4.1. If url’s scheme is \"file\", url’s path is empty, and\n                             * buffer is a Windows drive letter, then:\n                             * 1.4.1.1. If url’s host is neither the empty string nor null,\n                             * validation error, set url’s host to the empty string.\n                             * 1.4.1.2. Replace the second code point in buffer with U+003A (:).\n                             * _Note:_ is a (platform-independent) Windows drive letter quirk.\n                             */\n                            if (url.host !== null && url.host !== \"\") {\n                                validationError(\"Invalid input string.\");\n                                url.host = \"\";\n                            }\n                            var bufferCodePoints = Array.from(buffer);\n                            buffer = bufferCodePoints.slice(0, 1) + ':' + bufferCodePoints.slice(2);\n                        }\n                        /**\n                         * 1.4.2. Append buffer to url’s path.\n                         */\n                        url.path.push(buffer);\n                    }\n                    /**\n                     * 1.5. Set buffer to the empty string.\n                     */\n                    buffer = \"\";\n                    /**\n                     * 1.6. If url’s scheme is \"file\" and c is the EOF code point,\n                     * U+003F (?), or U+0023 (#), then while url’s path’s size is\n                     * greater than 1 and url’s path[0] is the empty string, validation\n                     * error, remove the first item from url’s path.\n                     */\n                    if (url.scheme === \"file\" && (walker.c() === EOF || walker.c() === '?' || walker.c() === '#')) {\n                        while (url.path.length > 1 && url.path[0] === \"\") {\n                            validationError(\"Invalid input string.\");\n                            url.path.splice(0, 1);\n                        }\n                    }\n                    /**\n                     * 1.7. If c is U+003F (?), then set url’s query to the empty string\n                     * and state to query state.\n                     * 1.8. If c is U+0023 (#), then set url’s fragment to the empty\n                     * string and state to fragment state.\n                     */\n                    if (walker.c() === '?') {\n                        url.query = \"\";\n                        state = interfaces_1.ParserState.Query;\n                    }\n                    if (walker.c() === '#') {\n                        url.fragment = \"\";\n                        state = interfaces_1.ParserState.Fragment;\n                    }\n                }\n                else {\n                    /**\n                     * 2. Otherwise, run these steps:\n                     * 2.1. If c is not a URL code point and not U+0025 (%), validation\n                     * error.\n                     * 2.2. If c is U+0025 (%) and remaining does not start with two\n                     * ASCII hex digits, validation error.\n                     * 2.3. UTF-8 percent encode c using the path percent-encode set,\n                     * and append the result to buffer.\n                     */\n                    if (!_urlCodePoints.test(walker.c()) && walker.c() !== '%') {\n                        validationError(\"Character is not a URL code point or a percent encoded character.\");\n                    }\n                    if (walker.c() === '%' && !/^[0-9a-fA-F][0-9a-fA-F]/.test(walker.remaining())) {\n                        validationError(\"Percent encoded character must be followed by two hex digits.\");\n                    }\n                    buffer += utf8PercentEncode(walker.c(), _pathPercentEncodeSet);\n                }\n                break;\n            case interfaces_1.ParserState.CannotBeABaseURLPath:\n                /**\n                 * 1. If c is U+003F (?), then set url’s query to the empty string and\n                 * state to query state.\n                 * 2. Otherwise, if c is U+0023 (#), then set url’s fragment to the\n                 * empty string and state to fragment state.\n                 * 3. Otherwise:\n                 * 3.1. If c is not the EOF code point, not a URL code point, and not\n                 * U+0025 (%), validation error.\n                 * 3.2. If c is U+0025 (%) and remaining does not start with two ASCII\n                 * hex digits, validation error.\n                 * 3.3. If c is not the EOF code point, UTF-8 percent encode c using\n                 * the C0 control percent-encode set, and append the result to url’s\n                 * path[0].\n                 */\n                if (walker.c() === '?') {\n                    url.query = \"\";\n                    state = interfaces_1.ParserState.Query;\n                }\n                else if (walker.c() === '#') {\n                    url.fragment = \"\";\n                    state = interfaces_1.ParserState.Fragment;\n                }\n                else {\n                    if (walker.c() !== EOF && !_urlCodePoints.test(walker.c()) && walker.c() !== '%') {\n                        validationError(\"Character is not a URL code point or a percent encoded character.\");\n                    }\n                    if (walker.c() === '%' && !/^[0-9a-fA-F][0-9a-fA-F]/.test(walker.remaining())) {\n                        validationError(\"Percent encoded character must be followed by two hex digits.\");\n                    }\n                    if (walker.c() !== EOF) {\n                        url.path[0] += utf8PercentEncode(walker.c(), _c0ControlPercentEncodeSet);\n                    }\n                }\n                break;\n            case interfaces_1.ParserState.Query:\n                /**\n                 * 1. If encoding is not UTF-8 and one of the following is true\n                 * - url is not special\n                 * - url’s scheme is \"ws\" or \"wss\"\n                 * then set encoding to UTF-8.\n                 */\n                if (encoding !== \"UTF-8\" && (!isSpecial(url) ||\n                    url.scheme === \"ws\" || url.scheme === \"wss\")) {\n                    encoding = \"UTF-8\";\n                }\n                if (stateOverride === undefined && walker.c() === '#') {\n                    /**\n                     * 2. If state override is not given and c is U+0023 (#), then set\n                     * url’s fragment to the empty string and state to fragment state.\n                     */\n                    url.fragment = \"\";\n                    state = interfaces_1.ParserState.Fragment;\n                }\n                else if (walker.c() !== EOF) {\n                    /**\n                     * 3. Otherwise, if c is not the EOF code point:\n                     * 3.1. If c is not a URL code point and not U+0025 (%), validation\n                     * error.\n                     */\n                    if (!_urlCodePoints.test(walker.c()) && walker.c() !== '%') {\n                        validationError(\"Character is not a URL code point or a percent encoded character.\");\n                    }\n                    /**\n                     * 3.2. If c is U+0025 (%) and remaining does not start with two\n                     * ASCII hex digits, validation error.\n                     */\n                    if (walker.c() === '%' && !/^[0-9a-fA-F][0-9a-fA-F]/.test(walker.remaining())) {\n                        validationError(\"Percent encoded character must be followed by two hex digits.\");\n                    }\n                    /**\n                     * 3.3. Let bytes be the result of encoding c using encoding.\n                     */\n                    if (encoding.toUpperCase() !== \"UTF-8\") {\n                        throw new Error(\"Only UTF-8 encoding is supported.\");\n                    }\n                    var bytes = util_1.utf8Encode(walker.c());\n                    /**\n                     * 3.4. If bytes starts with `&#` and ends with 0x3B (;), then:\n                     */\n                    if (bytes.length >= 3 && bytes[0] === 38 && bytes[1] === 35 &&\n                        bytes[bytes.length - 1] === 59) {\n                        /**\n                         * 3.4.1. Replace `&#` at the start of bytes with `%26%23`.\n                         * 3.4.2. Replace 0x3B (;) at the end of bytes with `%3B`.\n                         * 3.4.4. Append bytes, isomorphic decoded, to url’s query.\n                         * _Note:_ can happen when encoding code points using a\n                         * non-UTF-8 encoding.\n                         */\n                        bytes = bytes.subarray(2, bytes.length - 1);\n                        url.query += \"%26%23\" + infra_1.byteSequence.isomorphicDecode(bytes) + \"%3B\";\n                    }\n                    else {\n                        try {\n                            /**\n                             * 3.5. Otherwise, for each byte in bytes:\n                             * 3.5.1. If one of the following is true\n                             * - byte is less than 0x21 (!)\n                             * - byte is greater than 0x7E (~)\n                             * - byte is 0x22 (\"), 0x23 (#), 0x3C (<), or 0x3E (>)\n                             * - byte is 0x27 (') and url is special\n                             * then append byte, percent encoded, to url’s query.\n                             * 3.5.2. Otherwise, append a code point whose value is byte to\n                             * url’s query.\n                             */\n                            for (var bytes_1 = (e_3 = void 0, __values(bytes)), bytes_1_1 = bytes_1.next(); !bytes_1_1.done; bytes_1_1 = bytes_1.next()) {\n                                var byte = bytes_1_1.value;\n                                if (byte < 0x21 || byte > 0x7E || byte === 0x22 ||\n                                    byte === 0x23 || byte === 0x3C || byte === 0x3E ||\n                                    (byte === 0x27 && isSpecial(url))) {\n                                    url.query += percentEncode(byte);\n                                }\n                                else {\n                                    url.query += String.fromCharCode(byte);\n                                }\n                            }\n                        }\n                        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                        finally {\n                            try {\n                                if (bytes_1_1 && !bytes_1_1.done && (_b = bytes_1.return)) _b.call(bytes_1);\n                            }\n                            finally { if (e_3) throw e_3.error; }\n                        }\n                    }\n                }\n                break;\n            case interfaces_1.ParserState.Fragment:\n                /**\n                 * Switching on c:\n                 * - The EOF code point\n                 * Do nothing.\n                 * - U+0000 NULL\n                 * Validation error.\n                 * - Otherwise\n                 * 1. If c is not a URL code point and not U+0025 (%), validation\n                 * error.\n                 * 2. If c is U+0025 (%) and remaining does not start with two ASCII\n                 * hex digits, validation error.\n                 * 3. UTF-8 percent encode c using the fragment percent-encode set and\n                 * append the result to url’s fragment.\n                 */\n                if (walker.c() === EOF) {\n                    //\n                }\n                else if (walker.c() === \"\\u0000\") {\n                    validationError(\"NULL character in input string.\");\n                }\n                else {\n                    if (!_urlCodePoints.test(walker.c()) && walker.c() !== '%') {\n                        validationError(\"Unexpected character in fragment string.\");\n                    }\n                    if (walker.c() === '%' && !/^[A-Za-z0-9][A-Za-z0-9]/.test(walker.remaining())) {\n                        validationError(\"Unexpected character in fragment string.\");\n                    }\n                    url.fragment += utf8PercentEncode(walker.c(), _fragmentPercentEncodeSet);\n                }\n                break;\n        }\n        if (walker.eof)\n            break;\n        else\n            walker.pointer++;\n    }\n    /**\n     * 12. Return url.\n     */\n    return url;\n}\nexports.basicURLParser = basicURLParser;\n/**\n * Sets a URL's username.\n *\n * @param url - a URL\n * @param username - username string\n */\nfunction setTheUsername(url, username) {\n    var e_4, _a;\n    /**\n     * 1. Set url’s username to the empty string.\n     * 2. For each code point in username, UTF-8 percent encode it using the\n     * userinfo percent-encode set, and append the result to url’s username.\n     */\n    var result = \"\";\n    try {\n        for (var username_1 = __values(username), username_1_1 = username_1.next(); !username_1_1.done; username_1_1 = username_1.next()) {\n            var codePoint = username_1_1.value;\n            result += utf8PercentEncode(codePoint, _userInfoPercentEncodeSet);\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (username_1_1 && !username_1_1.done && (_a = username_1.return)) _a.call(username_1);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    url.username = result;\n}\nexports.setTheUsername = setTheUsername;\n/**\n * Sets a URL's password.\n *\n * @param url - a URL\n * @param username - password string\n */\nfunction setThePassword(url, password) {\n    var e_5, _a;\n    /**\n     * 1. Set url’s password to the empty string.\n     * 2. For each code point in password, UTF-8 percent encode it using the\n     * userinfo percent-encode set, and append the result to url’s password.\n     */\n    var result = \"\";\n    try {\n        for (var password_1 = __values(password), password_1_1 = password_1.next(); !password_1_1.done; password_1_1 = password_1.next()) {\n            var codePoint = password_1_1.value;\n            result += utf8PercentEncode(codePoint, _userInfoPercentEncodeSet);\n        }\n    }\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\n    finally {\n        try {\n            if (password_1_1 && !password_1_1.done && (_a = password_1.return)) _a.call(password_1);\n        }\n        finally { if (e_5) throw e_5.error; }\n    }\n    url.password = result;\n}\nexports.setThePassword = setThePassword;\n/**\n * Determines if the string represents a single dot path.\n *\n * @param str - a string\n */\nfunction isSingleDotPathSegment(str) {\n    return str === '.' || str.toLowerCase() === \"%2e\";\n}\nexports.isSingleDotPathSegment = isSingleDotPathSegment;\n/**\n * Determines if the string represents a double dot path.\n *\n * @param str - a string\n */\nfunction isDoubleDotPathSegment(str) {\n    var lowerStr = str.toLowerCase();\n    return lowerStr === \"..\" || lowerStr === \".%2e\" ||\n        lowerStr === \"%2e.\" || lowerStr === \"%2e%2e\";\n}\nexports.isDoubleDotPathSegment = isDoubleDotPathSegment;\n/**\n * Shorten's URL's path.\n *\n * @param url - an URL\n */\nfunction shorten(url) {\n    /**\n     * 1. Let path be url’s path.\n     * 2. If path is empty, then return.\n     * 3. If url’s scheme is \"file\", path’s size is 1, and path[0] is a\n     * normalized Windows drive letter, then return.\n     * 4. Remove path’s last item.\n     */\n    var path = url.path;\n    if (path.length === 0)\n        return;\n    if (url.scheme === \"file\" && path.length === 1 &&\n        isNormalizedWindowsDriveLetter(path[0]))\n        return;\n    url.path.splice(url.path.length - 1, 1);\n}\nexports.shorten = shorten;\n/**\n * Determines if a string is a normalized Windows drive letter.\n *\n * @param str - a string\n */\nfunction isNormalizedWindowsDriveLetter(str) {\n    /**\n     * A normalized Windows drive letter is a Windows drive letter of which the\n     * second code point is U+003A (:).\n     */\n    return str.length >= 2 && infra_1.codePoint.ASCIIAlpha.test(str[0]) &&\n        str[1] === ':';\n}\nexports.isNormalizedWindowsDriveLetter = isNormalizedWindowsDriveLetter;\n/**\n * Determines if a string is a Windows drive letter.\n *\n * @param str - a string\n */\nfunction isWindowsDriveLetter(str) {\n    /**\n     * A Windows drive letter is two code points, of which the first is an ASCII\n     * alpha and the second is either U+003A (:) or U+007C (|).\n     */\n    return str.length >= 2 && infra_1.codePoint.ASCIIAlpha.test(str[0]) &&\n        (str[1] === ':' || str[1] === '|');\n}\nexports.isWindowsDriveLetter = isWindowsDriveLetter;\n/**\n * Determines if a string starts with a Windows drive letter.\n *\n * @param str - a string\n */\nfunction startsWithAWindowsDriveLetter(str) {\n    /**\n     * A string starts with a Windows drive letter if all of the following are\n     * true:\n     * - its length is greater than or equal to 2\n     * - its first two code points are a Windows drive letter\n     * - its length is 2 or its third code point is U+002F (/), U+005C (\\),\n     * U+003F (?), or U+0023 (#).\n     */\n    return str.length >= 2 && isWindowsDriveLetter(str) &&\n        (str.length === 2 || (str[2] === '/' || str[2] === '\\\\' ||\n            str[2] === '?' || str[2] === '#'));\n}\nexports.startsWithAWindowsDriveLetter = startsWithAWindowsDriveLetter;\n/**\n * Parses a host string.\n *\n * @param input - input string\n * @param isNotSpecial - `true` if the source URL is not special; otherwise\n * `false`.\n */\nfunction hostParser(input, isNotSpecial) {\n    if (isNotSpecial === void 0) { isNotSpecial = false; }\n    /**\n     * 1. If isNotSpecial is not given, then set isNotSpecial to false.\n     * 2. If input starts with U+005B ([), then:\n     * 2.1. If input does not end with U+005D (]), validation error, return\n     * failure.\n     * 2.2. Return the result of IPv6 parsing input with its leading U+005B ([)\n     * and trailing U+005D (]) removed.\n     */\n    if (input.startsWith('[')) {\n        if (!input.endsWith(']')) {\n            validationError(\"Expected ']' after '['.\");\n            return null;\n        }\n        return iPv6Parser(input.substring(1, input.length - 1));\n    }\n    /**\n     * 3. If isNotSpecial is true, then return the result of opaque-host parsing\n     * input.\n     */\n    if (isNotSpecial) {\n        return opaqueHostParser(input);\n    }\n    /**\n     * 4. Let domain be the result of running UTF-8 decode without BOM on the\n     * string percent decoding of input.\n     * _Note:_ Alternatively UTF-8 decode without BOM or fail can be used,\n     * coupled with an early return for failure, as domain to ASCII fails\n     * on U+FFFD REPLACEMENT CHARACTER.\n     */\n    var domain = util_1.utf8Decode(stringPercentDecode(input));\n    /**\n     * 5. Let asciiDomain be the result of running domain to ASCII on domain.\n     * 6. If asciiDomain is failure, validation error, return failure.\n     * 7. If asciiDomain contains a forbidden host code point, validation error,\n     * return failure.\n     */\n    var asciiDomain = domainToASCII(domain);\n    if (asciiDomain === null) {\n        validationError(\"Invalid domain.\");\n        return null;\n    }\n    if (_forbiddenHostCodePoint.test(asciiDomain)) {\n        validationError(\"Invalid domain.\");\n        return null;\n    }\n    /**\n     * 8. Let ipv4Host be the result of IPv4 parsing asciiDomain.\n     * 9. If ipv4Host is an IPv4 address or failure, return ipv4Host.\n     * 10. Return asciiDomain.\n     */\n    var ipv4Host = iPv4Parser(asciiDomain);\n    if (ipv4Host === null || util_1.isNumber(ipv4Host))\n        return ipv4Host;\n    return asciiDomain;\n}\nexports.hostParser = hostParser;\n/**\n * Parses a string containing an IP v4 address.\n *\n * @param input - input string\n * @param isNotSpecial - `true` if the source URL is not special; otherwise\n * `false`.\n */\nfunction iPv4NumberParser(input, validationErrorFlag) {\n    if (validationErrorFlag === void 0) { validationErrorFlag = { value: false }; }\n    /**\n     * 1. Let R be 10.\n     */\n    var R = 10;\n    if (input.startsWith(\"0x\") || input.startsWith(\"0X\")) {\n        /**\n         * 2. If input contains at least two code points and the first two code\n         * points are either \"0x\" or \"0X\", then:\n         * 2.1. Set validationErrorFlag.\n         * 2.2. Remove the first two code points from input.\n         * 2.3. Set R to 16.\n         */\n        validationErrorFlag.value = true;\n        input = input.substr(2);\n        R = 16;\n    }\n    else if (input.length >= 2 && input[0] === '0') {\n        /**\n         * 3. Otherwise, if input contains at least two code points and the first\n         * code point is U+0030 (0), then:\n         * 3.1. Set validationErrorFlag.\n         * 3.2. Remove the first code point from input.\n         * 3.3. Set R to 8.\n         */\n        validationErrorFlag.value = true;\n        input = input.substr(1);\n        R = 8;\n    }\n    /**\n     * 4. If input is the empty string, then return zero.\n     * 5. If input contains a code point that is not a radix-R digit, then\n     * return failure.\n     */\n    if (input === \"\")\n        return 0;\n    var radixRDigits = (R === 10 ? /^[0-9]+$/ : (R === 16 ? /^[0-9A-Fa-f]+$/ : /^[0-7]+$/));\n    if (!radixRDigits.test(input))\n        return null;\n    /**\n     * 6. Return the mathematical integer value that is represented by input in\n     * radix-R notation, using ASCII hex digits for digits with values\n     * 0 through 15.\n     */\n    return parseInt(input, R);\n}\nexports.iPv4NumberParser = iPv4NumberParser;\n/**\n * Parses a string containing an IP v4 address.\n *\n * @param input - input string\n */\nfunction iPv4Parser(input) {\n    var e_6, _a, e_7, _b;\n    /**\n     * 1. Let validationErrorFlag be unset.\n     * 2. Let parts be input split on U+002E (.).\n     */\n    var validationErrorFlag = { value: false };\n    var parts = input.split('.');\n    /**\n     * 3. If the last item in parts is the empty string, then:\n     * 3.1. Set validationErrorFlag.\n     * 3.2. If parts has more than one item, then remove the last item from\n     * parts.\n     */\n    if (parts[parts.length - 1] === \"\") {\n        validationErrorFlag.value = true;\n        if (parts.length > 1)\n            parts.pop();\n    }\n    /**\n     * 4. If parts has more than four items, return input.\n     */\n    if (parts.length > 4)\n        return input;\n    /**\n     * 5. Let numbers be the empty list.\n     * 6. For each part in parts:\n     * 6.1. If part is the empty string, return input.\n     * 6.2. Let n be the result of parsing part using validationErrorFlag.\n     * 6.3. If n is failure, return input.\n     * 6.4. Append n to numbers.\n     */\n    var numbers = [];\n    try {\n        for (var parts_1 = __values(parts), parts_1_1 = parts_1.next(); !parts_1_1.done; parts_1_1 = parts_1.next()) {\n            var part = parts_1_1.value;\n            if (part === \"\")\n                return input;\n            var n = iPv4NumberParser(part, validationErrorFlag);\n            if (n === null)\n                return input;\n            numbers.push(n);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (parts_1_1 && !parts_1_1.done && (_a = parts_1.return)) _a.call(parts_1);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    /**\n     * 7. If validationErrorFlag is set, validation error.\n     * 8. If any item in numbers is greater than 255, validation error.\n     * 9. If any but the last item in numbers is greater than 255, return\n     * failure.\n     * 10. If the last item in numbers is greater than or equal to\n     * 256**(5 − the number of items in numbers), validation error, return failure.\n     */\n    if (validationErrorFlag.value)\n        validationError(\"Invalid IP v4 address.\");\n    for (var i = 0; i < numbers.length; i++) {\n        var item = numbers[i];\n        if (item > 255) {\n            validationError(\"Invalid IP v4 address.\");\n            if (i < numbers.length - 1)\n                return null;\n        }\n    }\n    if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\n        validationError(\"Invalid IP v4 address.\");\n        return null;\n    }\n    /**\n     * 11. Let ipv4 be the last item in numbers.\n     * 12. Remove the last item from numbers.\n     */\n    var ipv4 = numbers[numbers.length - 1];\n    numbers.pop();\n    /**\n     * 13. Let counter be zero.\n     * 14. For each n in numbers:\n     * 14.2. Increment ipv4 by n × 256**(3 − counter).\n     * 14.2. Increment counter by 1.\n     */\n    var counter = 0;\n    try {\n        for (var numbers_1 = __values(numbers), numbers_1_1 = numbers_1.next(); !numbers_1_1.done; numbers_1_1 = numbers_1.next()) {\n            var n = numbers_1_1.value;\n            ipv4 += n * Math.pow(256, 3 - counter);\n            counter++;\n        }\n    }\n    catch (e_7_1) { e_7 = { error: e_7_1 }; }\n    finally {\n        try {\n            if (numbers_1_1 && !numbers_1_1.done && (_b = numbers_1.return)) _b.call(numbers_1);\n        }\n        finally { if (e_7) throw e_7.error; }\n    }\n    /**\n     * 15. Return ipv4.\n     */\n    return ipv4;\n}\nexports.iPv4Parser = iPv4Parser;\n/**\n * Parses a string containing an IP v6 address.\n *\n * @param input - input string\n */\nfunction iPv6Parser(input) {\n    var _a;\n    /**\n     * 1. Let address be a new IPv6 address whose IPv6 pieces are all 0.\n     * 2. Let pieceIndex be 0.\n     * 3. Let compress be null.\n     * 4. Let pointer be a pointer into input, initially 0 (pointing to the\n     * first code point).\n     */\n    var EOF = \"\";\n    var address = [0, 0, 0, 0, 0, 0, 0, 0];\n    var pieceIndex = 0;\n    var compress = null;\n    var walker = new util_1.StringWalker(input);\n    /**\n     * 5. If c is U+003A (:), then:\n     * 5.1. If remaining does not start with U+003A (:), validation error,\n     * return failure.\n     * 5.2. Increase pointer by 2.\n     * 5.3. Increase pieceIndex by 1 and then set compress to pieceIndex.\n     */\n    if (walker.c() === ':') {\n        if (!walker.remaining().startsWith(':')) {\n            validationError(\"Invalid IP v6 address.\");\n            return null;\n        }\n        walker.pointer += 2;\n        pieceIndex += 1;\n        compress = pieceIndex;\n    }\n    /**\n     * 6. While c is not the EOF code point:\n     */\n    while (walker.c() !== EOF) {\n        /**\n         * 6.1. If pieceIndex is 8, validation error, return failure.\n         */\n        if (pieceIndex === 8) {\n            validationError(\"Invalid IP v6 address.\");\n            return null;\n        }\n        /**\n         * 6.2. If c is U+003A (:), then:\n         * 6.2.1. If compress is non-null, validation error, return failure.\n         * 6.2.2. Increase pointer and pieceIndex by 1, set compress to pieceIndex,\n         * and then continue.\n         */\n        if (walker.c() === ':') {\n            if (compress !== null) {\n                validationError(\"Invalid IP v6 address.\");\n                return null;\n            }\n            walker.pointer++;\n            pieceIndex++;\n            compress = pieceIndex;\n            continue;\n        }\n        /**\n         * 6.3. Let value and length be 0.\n         * 6.4. While length is less than 4 and c is an ASCII hex digit, set value\n         * to value × 0x10 + c interpreted as hexadecimal number, and increase\n         * pointer and length by 1.\n         */\n        var value = 0;\n        var length = 0;\n        while (length < 4 && infra_1.codePoint.ASCIIHexDigit.test(walker.c())) {\n            value = value * 0x10 + parseInt(walker.c(), 16);\n            walker.pointer++;\n            length++;\n        }\n        /**\n         * 6.5. If c is U+002E (.), then:\n         */\n        if (walker.c() === '.') {\n            /**\n             * 6.5.1. If length is 0, validation error, return failure.\n             * 6.5.2. Decrease pointer by length.\n             * 6.5.3. If pieceIndex is greater than 6, validation error, return\n             * failure.\n             * 6.5.4. Let numbersSeen be 0.\n             */\n            if (length === 0) {\n                validationError(\"Invalid IP v6 address.\");\n                return null;\n            }\n            walker.pointer -= length;\n            if (pieceIndex > 6) {\n                validationError(\"Invalid IP v6 address.\");\n                return null;\n            }\n            var numbersSeen = 0;\n            /**\n             * 6.5.5. While c is not the EOF code point:\n             */\n            while (walker.c() !== EOF) {\n                /**\n                 * 6.5.5.1. Let ipv4Piece be null.\n                 */\n                var ipv4Piece = null;\n                /**\n                 * 6.5.5.2. If numbersSeen is greater than 0, then:\n                 * 6.5.5.2.1. If c is a U+002E (.) and numbersSeen is less than 4, then\n                 * increase pointer by 1.\n                 * 6.5.5.2.1. Otherwise, validation error, return failure.\n                 */\n                if (numbersSeen > 0) {\n                    if (walker.c() === '.' && numbersSeen < 4) {\n                        walker.pointer++;\n                    }\n                    else {\n                        validationError(\"Invalid IP v6 address.\");\n                        return null;\n                    }\n                }\n                /**\n                 * 6.5.5.3. If c is not an ASCII digit, validation error, return\n                 * failure.\n                 */\n                if (!infra_1.codePoint.ASCIIDigit.test(walker.c())) {\n                    validationError(\"Invalid IP v6 address.\");\n                    return null;\n                }\n                /**\n                 * 6.5.5.4. While c is an ASCII digit:\n                 */\n                while (infra_1.codePoint.ASCIIDigit.test(walker.c())) {\n                    /**\n                     * 6.5.5.4.1. Let number be c interpreted as decimal number.\n                     */\n                    var number = parseInt(walker.c(), 10);\n                    /**\n                     * 6.5.5.4.2. If ipv4Piece is null, then set ipv4Piece to number.\n                     * Otherwise, if ipv4Piece is 0, validation error, return failure.\n                     * Otherwise, set ipv4Piece to ipv4Piece × 10 + number.\n                     */\n                    if (ipv4Piece === null) {\n                        ipv4Piece = number;\n                    }\n                    else if (ipv4Piece === 0) {\n                        validationError(\"Invalid IP v6 address.\");\n                        return null;\n                    }\n                    else {\n                        ipv4Piece = ipv4Piece * 10 + number;\n                    }\n                    /**\n                     * 6.5.5.4.3. If ipv4Piece is greater than 255, validation error, return failure.\n                     * 6.5.5.4.4. Increase pointer by 1.\n                     */\n                    if (ipv4Piece > 255) {\n                        validationError(\"Invalid IP v6 address.\");\n                        return null;\n                    }\n                    walker.pointer++;\n                }\n                /**\n                 * 6.5.5.5. Set address[pieceIndex] to address[pieceIndex] × 0x100 + ipv4Piece.\n                 * 6.5.5.6. Increase numbersSeen by 1.\n                 * 6.5.5.7. If numbersSeen is 2 or 4, then increase pieceIndex by 1.\n                 */\n                if (ipv4Piece === null) {\n                    validationError(\"Invalid IP v6 address.\");\n                    return null;\n                }\n                address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\n                numbersSeen++;\n                if (numbersSeen === 2 || numbersSeen === 4)\n                    pieceIndex++;\n            }\n            /**\n             * 6.5.6. If numbersSeen is not 4, validation error, return failure.\n             */\n            if (numbersSeen !== 4) {\n                validationError(\"Invalid IP v6 address.\");\n                return null;\n            }\n            /**\n             * 6.5.7. Break.\n             */\n            break;\n        }\n        else if (walker.c() === ':') {\n            /**\n             * 6.6. Otherwise, if c is U+003A (:):\n             * 6.6.1. Increase pointer by 1.\n             * 6.6.2. If c is the EOF code point, validation error, return failure.\n             */\n            walker.pointer++;\n            if (walker.c() === EOF) {\n                validationError(\"Invalid IP v6 address.\");\n                return null;\n            }\n        }\n        else if (walker.c() !== EOF) {\n            /**\n             * 6.7. Otherwise, if c is not the EOF code point, validation error,\n             * return failure.\n             */\n            validationError(\"Invalid IP v6 address.\");\n            return null;\n        }\n        /**\n         * 6.8. Set address[pieceIndex] to value.\n         * 6.9. Increase pieceIndex by 1.\n         */\n        address[pieceIndex] = value;\n        pieceIndex++;\n    }\n    /**\n     * 7. If compress is non-null, then:\n     * 7.1. Let swaps be pieceIndex − compress.\n     * 7.2. Set pieceIndex to 7.\n     * 7.3. While pieceIndex is not 0 and swaps is greater than 0, swap\n     * address[pieceIndex] with address[compress + swaps − 1], and then decrease\n     * both pieceIndex and swaps by 1.\n     */\n    if (compress !== null) {\n        var swaps = pieceIndex - compress;\n        pieceIndex = 7;\n        while (pieceIndex !== 0 && swaps > 0) {\n            _a = __read([address[compress + swaps - 1], address[pieceIndex]], 2), address[pieceIndex] = _a[0], address[compress + swaps - 1] = _a[1];\n            pieceIndex--;\n            swaps--;\n        }\n    }\n    else if (compress === null && pieceIndex !== 8) {\n        /**\n         * 8. Otherwise, if compress is null and pieceIndex is not 8,\n         * validation error, return failure.\n         */\n        validationError(\"Invalid IP v6 address.\");\n        return null;\n    }\n    /**\n     * 9. Return address.\n     */\n    return address;\n}\nexports.iPv6Parser = iPv6Parser;\n/**\n * Parses an opaque host string.\n *\n * @param input - a string\n */\nfunction opaqueHostParser(input) {\n    var e_8, _a;\n    /**\n     * 1. If input contains a forbidden host code point excluding U+0025 (%),\n     * validation error, return failure.\n     * 2. Let output be the empty string.\n     * 3. For each code point in input, UTF-8 percent encode it using the C0\n     * control percent-encode set, and append the result to output.\n     * 4. Return output.\n     */\n    var forbiddenChars = /[\\x00\\t\\f\\r #/:?@\\[\\\\\\]]/;\n    if (forbiddenChars.test(input)) {\n        validationError(\"Invalid host string.\");\n        return null;\n    }\n    var output = \"\";\n    try {\n        for (var input_1 = __values(input), input_1_1 = input_1.next(); !input_1_1.done; input_1_1 = input_1.next()) {\n            var codePoint = input_1_1.value;\n            output += utf8PercentEncode(codePoint, _c0ControlPercentEncodeSet);\n        }\n    }\n    catch (e_8_1) { e_8 = { error: e_8_1 }; }\n    finally {\n        try {\n            if (input_1_1 && !input_1_1.done && (_a = input_1.return)) _a.call(input_1);\n        }\n        finally { if (e_8) throw e_8.error; }\n    }\n    return output;\n}\nexports.opaqueHostParser = opaqueHostParser;\n/**\n * Resolves a Blob URL from the user agent's Blob URL store.\n * function is not implemented.\n * See: https://w3c.github.io/FileAPI/#blob-url-resolve\n *\n * @param url - an url\n */\nfunction resolveABlobURL(url) {\n    return null;\n}\nexports.resolveABlobURL = resolveABlobURL;\n/**\n * Percent encodes a byte.\n *\n * @param value - a byte\n */\nfunction percentEncode(value) {\n    /**\n     * To percent encode a byte into a percent-encoded byte, return a string\n     * consisting of U+0025 (%), followed by two ASCII upper hex digits\n     * representing byte.\n     */\n    return '%' + ('00' + value.toString(16).toUpperCase()).slice(-2);\n}\nexports.percentEncode = percentEncode;\n/**\n * Percent decodes a byte sequence input.\n *\n * @param input - a byte sequence\n */\nfunction percentDecode(input) {\n    var isHexDigit = function (byte) {\n        return (byte >= 0x30 && byte <= 0x39) || (byte >= 0x41 && byte <= 0x46) ||\n            (byte >= 0x61 && byte <= 0x66);\n    };\n    /**\n     * 1. Let output be an empty byte sequence.\n     * 2. For each byte byte in input:\n     */\n    var output = new Uint8Array(input.length);\n    var n = 0;\n    for (var i = 0; i < input.length; i++) {\n        var byte = input[i];\n        /**\n         * 2.1. If byte is not 0x25 (%), then append byte to output.\n         * 2.2. Otherwise, if byte is 0x25 (%) and the next two bytes after byte\n         * in input are not in the ranges 0x30 (0) to 0x39 (9), 0x41 (A)\n         * to 0x46 (F), and 0x61 (a) to 0x66 (f), all inclusive, append byte\n         * to output.\n         * 2.3. Otherwise:\n         * 2.3.1. Let bytePoint be the two bytes after byte in input, decoded,\n         * and then interpreted as hexadecimal number.\n         * 2.3.2. Append a byte whose value is bytePoint to output.\n         * 2.3.3. Skip the next two bytes in input.\n         */\n        if (byte !== 0x25) {\n            output[n] = byte;\n            n++;\n        }\n        else if (byte === 0x25 && i >= input.length - 2) {\n            output[n] = byte;\n            n++;\n        }\n        else if (byte === 0x25 && (!isHexDigit(input[i + 1]) || !isHexDigit(input[i + 2]))) {\n            output[n] = byte;\n            n++;\n        }\n        else {\n            var bytePoint = parseInt(util_1.utf8Decode(Uint8Array.of(input[i + 1], input[i + 2])), 16);\n            output[n] = bytePoint;\n            n++;\n            i += 2;\n        }\n    }\n    return output.subarray(0, n);\n}\nexports.percentDecode = percentDecode;\n/**\n * String percent decodes a string.\n *\n * @param input - a string\n */\nfunction stringPercentDecode(input) {\n    /**\n     * 1. Let bytes be the UTF-8 encoding of input.\n     * 2. Return the percent decoding of bytes.\n     */\n    return percentDecode(util_1.utf8Encode(input));\n}\nexports.stringPercentDecode = stringPercentDecode;\n/**\n * UTF-8 percent encodes a code point, using a percent encode set.\n *\n * @param codePoint - a code point\n * @param percentEncodeSet - a percent encode set\n */\nfunction utf8PercentEncode(codePoint, percentEncodeSet) {\n    var e_9, _a;\n    /**\n     * 1. If codePoint is not in percentEncodeSet, then return codePoint.\n     * 2. Let bytes be the result of running UTF-8 encode on codePoint.\n     * 3. Percent encode each byte in bytes, and then return the results\n     * concatenated, in the same order.\n     */\n    if (!percentEncodeSet.test(codePoint))\n        return codePoint;\n    var bytes = util_1.utf8Encode(codePoint);\n    var result = \"\";\n    try {\n        for (var bytes_2 = __values(bytes), bytes_2_1 = bytes_2.next(); !bytes_2_1.done; bytes_2_1 = bytes_2.next()) {\n            var byte = bytes_2_1.value;\n            result += percentEncode(byte);\n        }\n    }\n    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n    finally {\n        try {\n            if (bytes_2_1 && !bytes_2_1.done && (_a = bytes_2.return)) _a.call(bytes_2);\n        }\n        finally { if (e_9) throw e_9.error; }\n    }\n    return result;\n}\nexports.utf8PercentEncode = utf8PercentEncode;\n/**\n * Determines if two hosts are considered equal.\n *\n * @param hostA - a host\n * @param hostB - a host\n */\nfunction hostEquals(hostA, hostB) {\n    return hostA === hostB;\n}\nexports.hostEquals = hostEquals;\n/**\n * Determines if two URLs are considered equal.\n *\n * @param urlA - a URL\n * @param urlB - a URL\n * @param excludeFragmentsFlag - whether to ignore fragments while comparing\n */\nfunction urlEquals(urlA, urlB, excludeFragmentsFlag) {\n    if (excludeFragmentsFlag === void 0) { excludeFragmentsFlag = false; }\n    /**\n     * 1. Let serializedA be the result of serializing A, with the exclude\n     * fragment flag set if the exclude fragments flag is set.\n     * 2. Let serializedB be the result of serializing B, with the exclude\n     * fragment flag set if the exclude fragments flag is set.\n     * 3. Return true if serializedA is serializedB, and false otherwise.\n     */\n    return urlSerializer(urlA, excludeFragmentsFlag) ===\n        urlSerializer(urlB, excludeFragmentsFlag);\n}\nexports.urlEquals = urlEquals;\n/**\n * Parses an `application/x-www-form-urlencoded` string.\n *\n * @param input - a string\n */\nfunction urlEncodedStringParser(input) {\n    /**\n     * The application/x-www-form-urlencoded string parser takes a string input,\n     * UTF-8 encodes it, and then returns the result of\n     * application/x-www-form-urlencoded parsing it.\n     */\n    return urlEncodedParser(util_1.utf8Encode(input));\n}\nexports.urlEncodedStringParser = urlEncodedStringParser;\n/**\n * Parses `application/x-www-form-urlencoded` bytes.\n *\n * @param input - a byte sequence\n */\nfunction urlEncodedParser(input) {\n    var e_10, _a, e_11, _b;\n    /**\n     * 1. Let sequences be the result of splitting input on 0x26 (&).\n     */\n    var sequences = [];\n    var currentSequence = [];\n    try {\n        for (var input_2 = __values(input), input_2_1 = input_2.next(); !input_2_1.done; input_2_1 = input_2.next()) {\n            var byte = input_2_1.value;\n            if (byte === 0x26) {\n                sequences.push(Uint8Array.from(currentSequence));\n                currentSequence = [];\n            }\n            else {\n                currentSequence.push(byte);\n            }\n        }\n    }\n    catch (e_10_1) { e_10 = { error: e_10_1 }; }\n    finally {\n        try {\n            if (input_2_1 && !input_2_1.done && (_a = input_2.return)) _a.call(input_2);\n        }\n        finally { if (e_10) throw e_10.error; }\n    }\n    if (currentSequence.length !== 0) {\n        sequences.push(Uint8Array.from(currentSequence));\n    }\n    /**\n     * 2. Let output be an initially empty list of name-value tuples where both name and value hold a string.\n     */\n    var output = [];\n    try {\n        /**\n         * 3. For each byte sequence bytes in sequences:\n         */\n        for (var sequences_1 = __values(sequences), sequences_1_1 = sequences_1.next(); !sequences_1_1.done; sequences_1_1 = sequences_1.next()) {\n            var bytes = sequences_1_1.value;\n            /**\n             * 3.1. If bytes is the empty byte sequence, then continue.\n             */\n            if (bytes.length === 0)\n                continue;\n            /**\n             * 3.2. If bytes contains a 0x3D (=), then let name be the bytes from the\n             * start of bytes up to but excluding its first 0x3D (=), and let value be\n             * the bytes, if any, after the first 0x3D (=) up to the end of bytes.\n             * If 0x3D (=) is the first byte, then name will be the empty byte\n             * sequence. If it is the last, then value will be the empty byte sequence.\n             * 3.3. Otherwise, let name have the value of bytes and let value be the\n             * empty byte sequence.\n             */\n            var index = bytes.indexOf(0x3D);\n            var name = (index !== -1 ? bytes.slice(0, index) : bytes);\n            var value = (index !== -1 ? bytes.slice(index + 1) : new Uint8Array());\n            /**\n             * 3.4. Replace any 0x2B (+) in name and value with 0x20 (SP).\n             */\n            for (var i = 0; i < name.length; i++)\n                if (name[i] === 0x2B)\n                    name[i] = 0x20;\n            for (var i = 0; i < value.length; i++)\n                if (value[i] === 0x2B)\n                    value[i] = 0x20;\n            /**\n             * 3.5. Let nameString and valueString be the result of running UTF-8\n             * decode without BOM on the percent decoding of name and value,\n             * respectively.\n             */\n            var nameString = util_1.utf8Decode(name);\n            var valueString = util_1.utf8Decode(value);\n            /**\n             * 3.6. Append (nameString, valueString) to output.\n             */\n            output.push([nameString, valueString]);\n        }\n    }\n    catch (e_11_1) { e_11 = { error: e_11_1 }; }\n    finally {\n        try {\n            if (sequences_1_1 && !sequences_1_1.done && (_b = sequences_1.return)) _b.call(sequences_1);\n        }\n        finally { if (e_11) throw e_11.error; }\n    }\n    /**\n     * 4. Return output.\n     */\n    return output;\n}\nexports.urlEncodedParser = urlEncodedParser;\n/**\n * Serializes `application/x-www-form-urlencoded` bytes.\n *\n * @param input - a byte sequence\n */\nfunction urlEncodedByteSerializer(input) {\n    var e_12, _a;\n    /**\n     * 1. Let output be the empty string.\n     * 2. For each byte in input, depending on byte:\n     * 0x20 (SP)\n     * Append U+002B (+) to output.\n     *\n     * 0x2A (*)\n     * 0x2D (-)\n     * 0x2E (.)\n     * 0x30 (0) to 0x39 (9)\n     * 0x41 (A) to 0x5A (Z)\n     * 0x5F (_)\n     * 0x61 (a) to 0x7A (z)\n     * Append a code point whose value is byte to output.\n     *\n     * Otherwise\n     * Append byte, percent encoded, to output.\n     * 3. Return output.\n     */\n    var output = \"\";\n    try {\n        for (var input_3 = __values(input), input_3_1 = input_3.next(); !input_3_1.done; input_3_1 = input_3.next()) {\n            var byte = input_3_1.value;\n            if (byte === 0x20) {\n                output += '+';\n            }\n            else if (byte === 0x2A || byte === 0x2D || byte === 0x2E ||\n                (byte >= 0x30 && byte <= 0x39) || (byte >= 0x41 && byte <= 0x5A) ||\n                byte === 0x5F || (byte >= 0x61 && byte <= 0x7A)) {\n                output += String.fromCodePoint(byte);\n            }\n            else {\n                output += percentEncode(byte);\n            }\n        }\n    }\n    catch (e_12_1) { e_12 = { error: e_12_1 }; }\n    finally {\n        try {\n            if (input_3_1 && !input_3_1.done && (_a = input_3.return)) _a.call(input_3);\n        }\n        finally { if (e_12) throw e_12.error; }\n    }\n    return output;\n}\nexports.urlEncodedByteSerializer = urlEncodedByteSerializer;\n/**\n * Serializes `application/x-www-form-urlencoded` tuples.\n *\n * @param input - input tuple of name/value pairs\n * @param encodingOverride: encoding override\n */\nfunction urlEncodedSerializer(tuples, encodingOverride) {\n    var e_13, _a;\n    /**\n     * 1. Let encoding be UTF-8.\n     * 2. If encoding override is given, set encoding to the result of getting\n     * an output encoding from encoding override.\n     */\n    var encoding = (encodingOverride === undefined ||\n        encodingOverride === \"replacement\" || encodingOverride === \"UTF-16BE\" ||\n        encodingOverride === \"UTF-16LE\" ? \"UTF-8\" : encodingOverride);\n    if (encoding.toUpperCase() !== \"UTF-8\") {\n        throw new Error(\"Only UTF-8 encoding is supported.\");\n    }\n    /**\n     * 3. Let output be the empty string.\n     */\n    var output = \"\";\n    try {\n        /**\n         * 4. For each tuple in tuples:\n         */\n        for (var tuples_1 = __values(tuples), tuples_1_1 = tuples_1.next(); !tuples_1_1.done; tuples_1_1 = tuples_1.next()) {\n            var tuple = tuples_1_1.value;\n            /**\n             * 4.1. Let name be the result of serializing the result of encoding\n             * tuple’s name, using encoding.\n             */\n            var name = urlEncodedByteSerializer(util_1.utf8Encode(tuple[0]));\n            /**\n             * 4.2. Let value be tuple’s value.\n             */\n            var value = tuple[1];\n            /**\n             * TODO:\n             * 4.3. If value is a file, then set value to value’s filename.\n             */\n            /**\n             * 4.4. Set value to the result of serializing the result of encoding\n             * value, using encoding.\n             */\n            value = urlEncodedByteSerializer(util_1.utf8Encode(value));\n            /**\n             * 4.5. If tuple is not the first pair in tuples, then append U+0026 (&)\n             * to output.\n             */\n            if (output !== \"\")\n                output += '&';\n            /**\n             * 4.6. Append name, followed by U+003D (=), followed by value, to output.\n             */\n            output += name + '=' + value;\n        }\n    }\n    catch (e_13_1) { e_13 = { error: e_13_1 }; }\n    finally {\n        try {\n            if (tuples_1_1 && !tuples_1_1.done && (_a = tuples_1.return)) _a.call(tuples_1);\n        }\n        finally { if (e_13) throw e_13.error; }\n    }\n    /**\n     * 5. Return output.\n     */\n    return output;\n}\nexports.urlEncodedSerializer = urlEncodedSerializer;\n/**\n * Returns a URL's origin.\n *\n * @param url - a URL\n */\nfunction origin(url) {\n    /**\n     * A URL’s origin is the origin returned by running these steps, switching\n     * on URL’s scheme:\n     * \"blob\"\n     * 1. If URL’s blob URL entry is non-null, then return URL’s blob URL\n     * entry’s environment’s origin.\n     * 2. Let url be the result of parsing URL’s path[0].\n     * 3. Return a new opaque origin, if url is failure, and url’s origin\n     * otherwise.\n     * \"ftp\"\n     * \"http\"\n     * \"https\"\n     * \"ws\"\n     * \"wss\"\n     * Return a tuple consisting of URL’s scheme, URL’s host, URL’s port, and\n     * null.\n     * \"file\"\n     * Unfortunate as it is, is left as an exercise to the reader. When in\n     * doubt, return a new opaque origin.\n     * Otherwise\n     * Return a new opaque origin.\n     */\n    switch (url.scheme) {\n        case \"blob\":\n            if (url._blobURLEntry !== null) {\n                // TODO: return URL’s blob URL entry’s environment’s origin.\n            }\n            var parsedURL = basicURLParser(url.path[0]);\n            if (parsedURL === null)\n                return interfaces_1.OpaqueOrigin;\n            else\n                return origin(parsedURL);\n        case \"ftp\":\n        case \"http\":\n        case \"https\":\n        case \"ws\":\n        case \"wss\":\n            return [url.scheme, url.host === null ? \"\" : url.host, url.port, null];\n        case \"file\":\n            return interfaces_1.OpaqueOrigin;\n        default:\n            return interfaces_1.OpaqueOrigin;\n    }\n}\nexports.origin = origin;\n/**\n * Converts a domain string to ASCII.\n *\n * @param domain - a domain string\n */\nfunction domainToASCII(domain, beStrict) {\n    if (beStrict === void 0) { beStrict = false; }\n    /**\n     * 1. If beStrict is not given, set it to false.\n     * 2. Let result be the result of running Unicode ToASCII with domain_name\n     * set to domain, UseSTD3ASCIIRules set to beStrict, CheckHyphens set to\n     * false, CheckBidi set to true, CheckJoiners set to true,\n     * Transitional_Processing set to false, and VerifyDnsLength set to beStrict.\n     * 3. If result is a failure value, validation error, return failure.\n     * 4. Return result.\n     */\n    // Use node.js function\n    var result = url_1.domainToASCII(domain);\n    if (result === \"\") {\n        validationError(\"Invalid domain name.\");\n        return null;\n    }\n    return result;\n}\nexports.domainToASCII = domainToASCII;\n/**\n * Converts a domain string to Unicode.\n *\n * @param domain - a domain string\n */\nfunction domainToUnicode(domain, beStrict) {\n    if (beStrict === void 0) { beStrict = false; }\n    /**\n     * 1. Let result be the result of running Unicode ToUnicode with domain_name\n     * set to domain, CheckHyphens set to false, CheckBidi set to true,\n     * CheckJoiners set to true, UseSTD3ASCIIRules set to false, and\n     * Transitional_Processing set to false.\n     * 2. Signify validation errors for any returned errors, and then,\n     * return result.\n     */\n    // Use node.js function\n    var result = url_1.domainToUnicode(domain);\n    if (result === \"\") {\n        validationError(\"Invalid domain name.\");\n    }\n    return result;\n}\nexports.domainToUnicode = domainToUnicode;\n/**\n * Serializes an origin.\n * function is from the HTML spec:\n * https://html.spec.whatwg.org/#ascii-serialisation-of-an-origin\n *\n * @param origin - an origin\n */\nfunction asciiSerializationOfAnOrigin(origin) {\n    /**\n     * 1. If origin is an opaque origin, then return \"null\".\n     * 2. Otherwise, let result be origin's scheme.\n     * 3. Append \"://\" to result.\n     * 4. Append origin's host, serialized, to result.\n     * 5. If origin's port is non-null, append a U+003A COLON character (:),\n     * and origin's port, serialized, to result.\n     * 6. Return result.\n     */\n    if (origin[0] === \"\" && origin[1] === \"\" && origin[2] === null && origin[3] === null) {\n        return \"null\";\n    }\n    var result = origin[0] + \"://\" + hostSerializer(origin[1]);\n    if (origin[2] !== null)\n        result += \":\" + origin[2].toString();\n    return result;\n}\nexports.asciiSerializationOfAnOrigin = asciiSerializationOfAnOrigin;\n//# sourceMappingURL=URLAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents an object with lazy initialization.\n */\nvar Lazy = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `Lazy`.\n     *\n     * @param initFunc - initializer function\n     */\n    function Lazy(initFunc) {\n        this._initialized = false;\n        this._value = undefined;\n        this._initFunc = initFunc;\n    }\n    Object.defineProperty(Lazy.prototype, \"value\", {\n        /**\n         * Gets the value of the object.\n         */\n        get: function () {\n            if (!this._initialized) {\n                this._value = this._initFunc();\n                this._initialized = true;\n            }\n            return this._value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Lazy;\n}());\nexports.Lazy = Lazy;\n//# sourceMappingURL=Lazy.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMException_1 = require(\"./DOMException\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a collection of attributes.\n */\nvar NamedNodeMapImpl = /** @class */ (function (_super) {\n    __extends(NamedNodeMapImpl, _super);\n    /**\n     * Initializes a new instance of `NamedNodeMap`.\n     *\n     * @param element - parent element\n     */\n    function NamedNodeMapImpl(element) {\n        var _this = _super.call(this) || this;\n        _this._element = element;\n        // TODO: This workaround is needed to extend Array in ES5\n        Object.setPrototypeOf(_this, NamedNodeMapImpl.prototype);\n        return _this;\n    }\n    NamedNodeMapImpl.prototype._asArray = function () { return this; };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.item = function (index) {\n        /**\n         * 1. If index is equal to or greater than context object’s attribute list’s\n         * size, then return null.\n         * 2. Otherwise, return context object’s attribute list[index].\n         *\n         */\n        return this[index] || null;\n    };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.getNamedItem = function (qualifiedName) {\n        /**\n         * The getNamedItem(qualifiedName) method, when invoked, must return the\n         * result of getting an attribute given qualifiedName and element.\n         */\n        return algorithm_1.element_getAnAttributeByName(qualifiedName, this._element);\n    };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.getNamedItemNS = function (namespace, localName) {\n        /**\n         * The getNamedItemNS(namespace, localName) method, when invoked, must\n         * return the result of getting an attribute given namespace, localName,\n         * and element.\n         */\n        return algorithm_1.element_getAnAttributeByNamespaceAndLocalName(namespace || '', localName, this._element);\n    };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.setNamedItem = function (attr) {\n        /**\n         * The setNamedItem(attr) and setNamedItemNS(attr) methods, when invoked,\n         * must return the result of setting an attribute given attr and element.\n         */\n        return algorithm_1.element_setAnAttribute(attr, this._element);\n    };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.setNamedItemNS = function (attr) {\n        return algorithm_1.element_setAnAttribute(attr, this._element);\n    };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.removeNamedItem = function (qualifiedName) {\n        /**\n         * 1. Let attr be the result of removing an attribute given qualifiedName\n         * and element.\n         * 2. If attr is null, then throw a \"NotFoundError\" DOMException.\n         * 3. Return attr.\n         */\n        var attr = algorithm_1.element_removeAnAttributeByName(qualifiedName, this._element);\n        if (attr === null)\n            throw new DOMException_1.NotFoundError();\n        return attr;\n    };\n    /** @inheritdoc */\n    NamedNodeMapImpl.prototype.removeNamedItemNS = function (namespace, localName) {\n        /**\n         * 1. Let attr be the result of removing an attribute given namespace,\n         * localName, and element.\n         * 2. If attr is null, then throw a \"NotFoundError\" DOMException.\n         * 3. Return attr.\n         */\n        var attr = algorithm_1.element_removeAnAttributeByNamespaceAndLocalName(namespace || '', localName, this._element);\n        if (attr === null)\n            throw new DOMException_1.NotFoundError();\n        return attr;\n    };\n    /**\n     * Creates a new `NamedNodeMap`.\n     *\n     * @param element - parent element\n     */\n    NamedNodeMapImpl._create = function (element) {\n        return new NamedNodeMapImpl(element);\n    };\n    return NamedNodeMapImpl;\n}(Array));\nexports.NamedNodeMapImpl = NamedNodeMapImpl;\n//# sourceMappingURL=NamedNodeMapImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar util_1 = require(\"../util\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar CreateAlgorithm_1 = require(\"./CreateAlgorithm\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar CharacterDataAlgorithm_1 = require(\"./CharacterDataAlgorithm\");\nvar MutationAlgorithm_1 = require(\"./MutationAlgorithm\");\n/**\n * Returns node with its adjacent text and cdata node siblings.\n *\n * @param node - a node\n * @param self - whether to include node itself\n */\nfunction text_contiguousTextNodes(node, self) {\n    var _a;\n    if (self === void 0) { self = false; }\n    /**\n     * The contiguous Text nodes of a node node are node, node’s previous\n     * sibling Text node, if any, and its contiguous Text nodes, and node’s next\n     * sibling Text node, if any, and its contiguous Text nodes, avoiding any\n     * duplicates.\n     */\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var currentNode = node;\n            while (currentNode && util_1.Guard.isTextNode(currentNode._previousSibling)) {\n                currentNode = currentNode._previousSibling;\n            }\n            return {\n                next: function () {\n                    if (currentNode && (!self && currentNode === node)) {\n                        if (util_1.Guard.isTextNode(currentNode._nextSibling)) {\n                            currentNode = currentNode._nextSibling;\n                        }\n                        else {\n                            currentNode = null;\n                        }\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        if (util_1.Guard.isTextNode(currentNode._nextSibling)) {\n                            currentNode = currentNode._nextSibling;\n                        }\n                        else {\n                            currentNode = null;\n                        }\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.text_contiguousTextNodes = text_contiguousTextNodes;\n/**\n * Returns node with its adjacent text node siblings.\n *\n * @param node - a node\n * @param self - whether to include node itself\n */\nfunction text_contiguousExclusiveTextNodes(node, self) {\n    var _a;\n    if (self === void 0) { self = false; }\n    /**\n     * The contiguous exclusive Text nodes of a node node are node, node’s\n     * previous sibling exclusive Text node, if any, and its contiguous\n     * exclusive Text nodes, and node’s next sibling exclusive Text node,\n     * if any, and its contiguous exclusive Text nodes, avoiding any duplicates.\n     */\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var currentNode = node;\n            while (currentNode && util_1.Guard.isExclusiveTextNode(currentNode._previousSibling)) {\n                currentNode = currentNode._previousSibling;\n            }\n            return {\n                next: function () {\n                    if (currentNode && (!self && currentNode === node)) {\n                        if (util_1.Guard.isExclusiveTextNode(currentNode._nextSibling)) {\n                            currentNode = currentNode._nextSibling;\n                        }\n                        else {\n                            currentNode = null;\n                        }\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        if (util_1.Guard.isExclusiveTextNode(currentNode._nextSibling)) {\n                            currentNode = currentNode._nextSibling;\n                        }\n                        else {\n                            currentNode = null;\n                        }\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.text_contiguousExclusiveTextNodes = text_contiguousExclusiveTextNodes;\n/**\n * Returns the concatenation of the data of all the Text node descendants of\n * node, in tree order.\n *\n * @param node - a node\n */\nfunction text_descendantTextContent(node) {\n    /**\n     * The descendant text content of a node node is the concatenation of the\n     * data of all the Text node descendants of node, in tree order.\n     */\n    var contents = '';\n    var text = TreeAlgorithm_1.tree_getFirstDescendantNode(node, false, false, function (e) { return util_1.Guard.isTextNode(e); });\n    while (text !== null) {\n        contents += text._data;\n        text = TreeAlgorithm_1.tree_getNextDescendantNode(node, text, false, false, function (e) { return util_1.Guard.isTextNode(e); });\n    }\n    return contents;\n}\nexports.text_descendantTextContent = text_descendantTextContent;\n/**\n * Splits data at the given offset and returns the remainder as a text\n * node.\n *\n * @param node - a text node\n * @param offset - the offset at which to split the nodes.\n */\nfunction text_split(node, offset) {\n    var e_1, _a;\n    /**\n     * 1. Let length be node’s length.\n     * 2. If offset is greater than length, then throw an \"IndexSizeError\"\n     * DOMException.\n     */\n    var length = node._data.length;\n    if (offset > length) {\n        throw new DOMException_1.IndexSizeError();\n    }\n    /**\n     * 3. Let count be length minus offset.\n     * 4. Let new data be the result of substringing data with node node,\n     * offset offset, and count count.\n     * 5. Let new node be a new Text node, with the same node document as node.\n     * Set new node’s data to new data.\n     * 6. Let parent be node’s parent.\n     * 7. If parent is not null, then:\n     */\n    var count = length - offset;\n    var newData = CharacterDataAlgorithm_1.characterData_substringData(node, offset, count);\n    var newNode = CreateAlgorithm_1.create_text(node._nodeDocument, newData);\n    var parent = node._parent;\n    if (parent !== null) {\n        /**\n         * 7.1. Insert new node into parent before node’s next sibling.\n         */\n        MutationAlgorithm_1.mutation_insert(newNode, parent, node._nextSibling);\n        try {\n            /**\n             * 7.2. For each live range whose start node is node and start offset is\n             * greater than offset, set its start node to new node and decrease its\n             * start offset by offset.\n             * 7.3. For each live range whose end node is node and end offset is greater\n             * than offset, set its end node to new node and decrease its end offset\n             * by offset.\n             * 7.4. For each live range whose start node is parent and start offset is\n             * equal to the index of node plus 1, increase its start offset by 1.\n             * 7.5. For each live range whose end node is parent and end offset is equal\n             * to the index of node plus 1, increase its end offset by 1.\n             */\n            for (var _b = __values(DOMImpl_1.dom.rangeList), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var range = _c.value;\n                if (range._start[0] === node && range._start[1] > offset) {\n                    range._start[0] = newNode;\n                    range._start[1] -= offset;\n                }\n                if (range._end[0] === node && range._end[1] > offset) {\n                    range._end[0] = newNode;\n                    range._end[1] -= offset;\n                }\n                var index = TreeAlgorithm_1.tree_index(node);\n                if (range._start[0] === parent && range._start[1] === index + 1) {\n                    range._start[1]++;\n                }\n                if (range._end[0] === parent && range._end[1] === index + 1) {\n                    range._end[1]++;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    /**\n     * 8. Replace data with node node, offset offset, count count, and data\n     * the empty string.\n     * 9. Return new node.\n     */\n    CharacterDataAlgorithm_1.characterData_replaceData(node, offset, count, '');\n    return newNode;\n}\nexports.text_split = text_split;\n//# sourceMappingURL=TextAlgorithm.js.map","'use strict';\n\nvar Type = require('../type');\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ObjectReader_1 = require(\"./ObjectReader\");\nvar BaseReader_1 = require(\"./BaseReader\");\n/**\n * Parses XML nodes from a JSON string.\n */\nvar JSONReader = /** @class */ (function (_super) {\n    __extends(JSONReader, _super);\n    function JSONReader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Parses the given document representation.\n     *\n     * @param node - node receive parsed XML nodes\n     * @param str - JSON string to parse\n     */\n    JSONReader.prototype._parse = function (node, str) {\n        return new ObjectReader_1.ObjectReader(this._builderOptions).parse(node, JSON.parse(str));\n    };\n    return JSONReader;\n}(BaseReader_1.BaseReader));\nexports.JSONReader = JSONReader;\n//# sourceMappingURL=JSONReader.js.map","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"../algorithm\");\nvar util_1 = require(\"../util\");\nvar util_2 = require(\"@oozcitak/util\");\n/**\n * Represents a collection of elements.\n */\nvar HTMLCollectionImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `HTMLCollection`.\n     *\n     * @param root - root node\n     * @param filter - node filter\n     */\n    function HTMLCollectionImpl(root, filter) {\n        this._live = true;\n        this._root = root;\n        this._filter = filter;\n        return new Proxy(this, this);\n    }\n    Object.defineProperty(HTMLCollectionImpl.prototype, \"length\", {\n        /** @inheritdoc */\n        get: function () {\n            var _this = this;\n            /**\n             * The length attribute’s getter must return the number of nodes\n             * represented by the collection.\n             */\n            var count = 0;\n            var node = algorithm_1.tree_getFirstDescendantNode(this._root, false, false, function (e) { return util_1.Guard.isElementNode(e) && _this._filter(e); });\n            while (node !== null) {\n                count++;\n                node = algorithm_1.tree_getNextDescendantNode(this._root, node, false, false, function (e) { return util_1.Guard.isElementNode(e) && _this._filter(e); });\n            }\n            return count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    HTMLCollectionImpl.prototype.item = function (index) {\n        var _this = this;\n        /**\n         * The item(index) method, when invoked, must return the indexth element\n         * in the collection. If there is no indexth element in the collection,\n         * then the method must return null.\n         */\n        var i = 0;\n        var node = algorithm_1.tree_getFirstDescendantNode(this._root, false, false, function (e) { return util_1.Guard.isElementNode(e) && _this._filter(e); });\n        while (node !== null) {\n            if (i === index)\n                return node;\n            else\n                i++;\n            node = algorithm_1.tree_getNextDescendantNode(this._root, node, false, false, function (e) { return util_1.Guard.isElementNode(e) && _this._filter(e); });\n        }\n        return null;\n    };\n    /** @inheritdoc */\n    HTMLCollectionImpl.prototype.namedItem = function (key) {\n        var _this = this;\n        /**\n         * 1. If key is the empty string, return null.\n         * 2. Return the first element in the collection for which at least one of\n         * the following is true:\n         * - it has an ID which is key;\n         * - it is in the HTML namespace and has a name attribute whose value is key;\n         * or null if there is no such element.\n         */\n        if (key === '')\n            return null;\n        var ele = algorithm_1.tree_getFirstDescendantNode(this._root, false, false, function (e) { return util_1.Guard.isElementNode(e) && _this._filter(e); });\n        while (ele != null) {\n            if (ele._uniqueIdentifier === key) {\n                return ele;\n            }\n            else if (ele._namespace === infra_1.namespace.HTML) {\n                for (var i = 0; i < ele._attributeList.length; i++) {\n                    var attr = ele._attributeList[i];\n                    if (attr._localName === \"name\" && attr._namespace === null &&\n                        attr._namespacePrefix === null && attr._value === key)\n                        return ele;\n                }\n            }\n            ele = algorithm_1.tree_getNextDescendantNode(this._root, ele, false, false, function (e) { return util_1.Guard.isElementNode(e) && _this._filter(e); });\n        }\n        return null;\n    };\n    /** @inheritdoc */\n    HTMLCollectionImpl.prototype[Symbol.iterator] = function () {\n        var root = this._root;\n        var filter = this._filter;\n        var currentNode = algorithm_1.tree_getFirstDescendantNode(root, false, false, function (e) { return util_1.Guard.isElementNode(e) && filter(e); });\n        return {\n            next: function () {\n                if (currentNode === null) {\n                    return { done: true, value: null };\n                }\n                else {\n                    var result = { done: false, value: currentNode };\n                    currentNode = algorithm_1.tree_getNextDescendantNode(root, currentNode, false, false, function (e) { return util_1.Guard.isElementNode(e) && filter(e); });\n                    return result;\n                }\n            }\n        };\n    };\n    /**\n     * Implements a proxy get trap to provide array-like access.\n     */\n    HTMLCollectionImpl.prototype.get = function (target, key, receiver) {\n        if (!util_2.isString(key) || HTMLCollectionImpl.reservedNames.indexOf(key) !== -1) {\n            return Reflect.get(target, key, receiver);\n        }\n        var index = Number(key);\n        if (isNaN(index)) {\n            return target.namedItem(key) || undefined;\n        }\n        else {\n            return target.item(index) || undefined;\n        }\n    };\n    /**\n     * Implements a proxy set trap to provide array-like access.\n     */\n    HTMLCollectionImpl.prototype.set = function (target, key, value, receiver) {\n        if (!util_2.isString(key) || HTMLCollectionImpl.reservedNames.indexOf(key) !== -1) {\n            return Reflect.set(target, key, value, receiver);\n        }\n        var index = Number(key);\n        var node = isNaN(index) ?\n            target.namedItem(key) || undefined : target.item(index) || undefined;\n        if (node && node._parent) {\n            algorithm_1.mutation_replace(node, value, node._parent);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Creates a new `HTMLCollection`.\n     *\n     * @param root - root node\n     * @param filter - node filter\n     */\n    HTMLCollectionImpl._create = function (root, filter) {\n        if (filter === void 0) { filter = (function () { return true; }); }\n        return new HTMLCollectionImpl(root, filter);\n    };\n    HTMLCollectionImpl.reservedNames = ['_root', '_live', '_filter', 'length',\n        'item', 'namedItem', 'get', 'set'];\n    return HTMLCollectionImpl;\n}());\nexports.HTMLCollectionImpl = HTMLCollectionImpl;\n//# sourceMappingURL=HTMLCollectionImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Pre-serializes XML nodes.\n */\nvar BaseCBWriter = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `BaseCBWriter`.\n     *\n     * @param builderOptions - XML builder options\n     */\n    function BaseCBWriter(builderOptions) {\n        /**\n         * Gets the current depth of the XML tree.\n         */\n        this.level = 0;\n        this._builderOptions = builderOptions;\n        this._writerOptions = builderOptions;\n    }\n    return BaseCBWriter;\n}());\nexports.BaseCBWriter = BaseCBWriter;\n//# sourceMappingURL=BaseCBWriter.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../interfaces\");\nvar util_1 = require(\"@oozcitak/util\");\nvar writers_1 = require(\"../writers\");\nvar interfaces_2 = require(\"@oozcitak/dom/lib/dom/interfaces\");\nvar util_2 = require(\"@oozcitak/dom/lib/util\");\nvar algorithm_1 = require(\"@oozcitak/dom/lib/algorithm\");\nvar dom_1 = require(\"./dom\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar readers_1 = require(\"../readers\");\n/**\n * Represents a wrapper that extends XML nodes to implement easy to use and\n * chainable document builder methods.\n */\nvar XMLBuilderImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `XMLBuilderNodeImpl`.\n     *\n     * @param domNode - the DOM node to wrap\n     */\n    function XMLBuilderImpl(domNode) {\n        this._domNode = domNode;\n    }\n    Object.defineProperty(XMLBuilderImpl.prototype, \"node\", {\n        /** @inheritdoc */\n        get: function () { return this._domNode; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(XMLBuilderImpl.prototype, \"options\", {\n        /** @inheritdoc */\n        get: function () { return this._options; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.set = function (options) {\n        this._options = util_1.applyDefaults(util_1.applyDefaults(this._options, options, true), // apply user settings\n        interfaces_1.DefaultBuilderOptions); // provide defaults\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.ele = function (p1, p2, p3) {\n        var _a, _b, _c;\n        var namespace;\n        var name;\n        var attributes;\n        if (util_1.isObject(p1)) {\n            // ele(obj: ExpandObject)\n            return new readers_1.ObjectReader(this._options).parse(this, p1);\n        }\n        else if (p1 !== null && /^\\s*</.test(p1)) {\n            // parse XML document string\n            return new readers_1.XMLReader(this._options).parse(this, p1);\n        }\n        else if (p1 !== null && /^\\s*[\\{\\[]/.test(p1)) {\n            // parse JSON string\n            return new readers_1.JSONReader(this._options).parse(this, p1);\n        }\n        else if (p1 !== null && /^(\\s*|(#.*)|(%.*))*---/.test(p1)) {\n            // parse YAML string\n            return new readers_1.YAMLReader(this._options).parse(this, p1);\n        }\n        if ((p1 === null || util_1.isString(p1)) && util_1.isString(p2)) {\n            // ele(namespace: string, name: string, attributes?: AttributesObject)\n            _a = __read([p1, p2, p3], 3), namespace = _a[0], name = _a[1], attributes = _a[2];\n        }\n        else if (p1 !== null) {\n            // ele(name: string, attributes?: AttributesObject)\n            _b = __read([undefined, p1, util_1.isObject(p2) ? p2 : undefined], 3), namespace = _b[0], name = _b[1], attributes = _b[2];\n        }\n        else {\n            throw new Error(\"Element name cannot be null. \" + this._debugInfo());\n        }\n        if (attributes) {\n            attributes = util_1.getValue(attributes);\n        }\n        _c = __read(this._extractNamespace(dom_1.sanitizeInput(namespace, this._options.invalidCharReplacement), dom_1.sanitizeInput(name, this._options.invalidCharReplacement), true), 2), namespace = _c[0], name = _c[1];\n        // inherit namespace from parent\n        if (namespace === undefined) {\n            var _d = __read(algorithm_1.namespace_extractQName(name), 1), prefix = _d[0];\n            namespace = this.node.lookupNamespaceURI(prefix);\n        }\n        // create a child element node\n        var childNode = (namespace !== undefined && namespace !== null ?\n            this._doc.createElementNS(namespace, name) :\n            this._doc.createElement(name));\n        this.node.appendChild(childNode);\n        var builder = new XMLBuilderImpl(childNode);\n        // update doctype node if the new node is the document element node\n        var oldDocType = this._doc.doctype;\n        if (childNode === this._doc.documentElement && oldDocType !== null) {\n            var docType = this._doc.implementation.createDocumentType(this._doc.documentElement.tagName, oldDocType.publicId, oldDocType.systemId);\n            this._doc.replaceChild(docType, oldDocType);\n        }\n        // create attributes\n        if (attributes && !util_1.isEmpty(attributes)) {\n            builder.att(attributes);\n        }\n        return builder;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.remove = function () {\n        var parent = this.up();\n        parent.node.removeChild(this.node);\n        return parent;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.att = function (p1, p2, p3) {\n        var _a, _b, _c;\n        var _this = this;\n        if (util_1.isMap(p1) || util_1.isObject(p1)) {\n            // att(obj: AttributesObject)\n            // expand if object\n            util_1.forEachObject(p1, function (attName, attValue) { return _this.att(attName, attValue); }, this);\n            return this;\n        }\n        // get primitive values\n        if (p1 !== undefined && p1 !== null)\n            p1 = util_1.getValue(p1 + \"\");\n        if (p2 !== undefined && p2 !== null)\n            p2 = util_1.getValue(p2 + \"\");\n        if (p3 !== undefined && p3 !== null)\n            p3 = util_1.getValue(p3 + \"\");\n        var namespace;\n        var name;\n        var value;\n        if ((p1 === null || util_1.isString(p1)) && util_1.isString(p2) && (p3 === null || util_1.isString(p3))) {\n            // att(namespace: string, name: string, value: string)\n            _a = __read([p1, p2, p3], 3), namespace = _a[0], name = _a[1], value = _a[2];\n        }\n        else if (util_1.isString(p1) && (p2 == null || util_1.isString(p2))) {\n            // ele(name: string, value: string)\n            _b = __read([undefined, p1, p2], 3), namespace = _b[0], name = _b[1], value = _b[2];\n        }\n        else {\n            throw new Error(\"Attribute name and value not specified. \" + this._debugInfo());\n        }\n        if (this._options.keepNullAttributes && (value == null)) {\n            // keep null attributes\n            value = \"\";\n        }\n        else if (value == null) {\n            // skip null|undefined attributes\n            return this;\n        }\n        if (!util_2.Guard.isElementNode(this.node)) {\n            throw new Error(\"An attribute can only be assigned to an element node.\");\n        }\n        var ele = this.node;\n        _c = __read(this._extractNamespace(namespace, name, false), 2), namespace = _c[0], name = _c[1];\n        name = dom_1.sanitizeInput(name, this._options.invalidCharReplacement);\n        namespace = dom_1.sanitizeInput(namespace, this._options.invalidCharReplacement);\n        value = dom_1.sanitizeInput(value, this._options.invalidCharReplacement);\n        var _d = __read(algorithm_1.namespace_extractQName(name), 2), prefix = _d[0], localName = _d[1];\n        var _e = __read(algorithm_1.namespace_extractQName(ele.prefix ? ele.prefix + ':' + ele.localName : ele.localName), 1), elePrefix = _e[0];\n        // check if this is a namespace declaration attribute\n        // assign a new element namespace if it wasn't previously assigned\n        var eleNamespace = null;\n        if (prefix === \"xmlns\") {\n            namespace = infra_1.namespace.XMLNS;\n            if (ele.namespaceURI === null && elePrefix === localName) {\n                eleNamespace = value;\n            }\n        }\n        else if (prefix === null && localName === \"xmlns\" && elePrefix === null) {\n            namespace = infra_1.namespace.XMLNS;\n            eleNamespace = value;\n        }\n        // re-create the element node if its namespace changed\n        // we can't simply change the namespaceURI since its read-only\n        if (eleNamespace !== null) {\n            this._updateNamespace(eleNamespace);\n            ele = this.node;\n        }\n        if (namespace !== undefined) {\n            ele.setAttributeNS(namespace, name, value);\n        }\n        else {\n            ele.setAttribute(name, value);\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.removeAtt = function (p1, p2) {\n        var _this = this;\n        if (!util_2.Guard.isElementNode(this.node)) {\n            throw new Error(\"An attribute can only be removed from an element node.\");\n        }\n        // get primitive values\n        p1 = util_1.getValue(p1);\n        if (p2 !== undefined) {\n            p2 = util_1.getValue(p2);\n        }\n        var namespace;\n        var name;\n        if (p1 !== null && p2 === undefined) {\n            name = p1;\n        }\n        else if ((p1 === null || util_1.isString(p1)) && p2 !== undefined) {\n            namespace = p1;\n            name = p2;\n        }\n        else {\n            throw new Error(\"Attribute namespace must be a string. \" + this._debugInfo());\n        }\n        if (util_1.isArray(name) || util_1.isSet(name)) {\n            // removeAtt(names: string[])\n            // removeAtt(namespace: string, names: string[])\n            util_1.forEachArray(name, function (attName) {\n                return namespace === undefined ? _this.removeAtt(attName) : _this.removeAtt(namespace, attName);\n            }, this);\n        }\n        else if (namespace !== undefined) {\n            // removeAtt(namespace: string, name: string)\n            name = dom_1.sanitizeInput(name, this._options.invalidCharReplacement);\n            namespace = dom_1.sanitizeInput(namespace, this._options.invalidCharReplacement);\n            this.node.removeAttributeNS(namespace, name);\n        }\n        else {\n            // removeAtt(name: string)\n            name = dom_1.sanitizeInput(name, this._options.invalidCharReplacement);\n            this.node.removeAttribute(name);\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.txt = function (content) {\n        if (content === null || content === undefined) {\n            if (this._options.keepNullNodes) {\n                // keep null nodes\n                content = \"\";\n            }\n            else {\n                // skip null|undefined nodes\n                return this;\n            }\n        }\n        var child = this._doc.createTextNode(dom_1.sanitizeInput(content, this._options.invalidCharReplacement));\n        this.node.appendChild(child);\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.com = function (content) {\n        if (content === null || content === undefined) {\n            if (this._options.keepNullNodes) {\n                // keep null nodes\n                content = \"\";\n            }\n            else {\n                // skip null|undefined nodes\n                return this;\n            }\n        }\n        var child = this._doc.createComment(dom_1.sanitizeInput(content, this._options.invalidCharReplacement));\n        this.node.appendChild(child);\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.dat = function (content) {\n        if (content === null || content === undefined) {\n            if (this._options.keepNullNodes) {\n                // keep null nodes\n                content = \"\";\n            }\n            else {\n                // skip null|undefined nodes\n                return this;\n            }\n        }\n        var child = this._doc.createCDATASection(dom_1.sanitizeInput(content, this._options.invalidCharReplacement));\n        this.node.appendChild(child);\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.ins = function (target, content) {\n        var _this = this;\n        if (content === void 0) { content = ''; }\n        if (content === null || content === undefined) {\n            if (this._options.keepNullNodes) {\n                // keep null nodes\n                content = \"\";\n            }\n            else {\n                // skip null|undefined nodes\n                return this;\n            }\n        }\n        if (util_1.isArray(target) || util_1.isSet(target)) {\n            util_1.forEachArray(target, function (item) {\n                item += \"\";\n                var insIndex = item.indexOf(' ');\n                var insTarget = (insIndex === -1 ? item : item.substr(0, insIndex));\n                var insValue = (insIndex === -1 ? '' : item.substr(insIndex + 1));\n                _this.ins(insTarget, insValue);\n            }, this);\n        }\n        else if (util_1.isMap(target) || util_1.isObject(target)) {\n            util_1.forEachObject(target, function (insTarget, insValue) { return _this.ins(insTarget, insValue); }, this);\n        }\n        else {\n            var child = this._doc.createProcessingInstruction(dom_1.sanitizeInput(target, this._options.invalidCharReplacement), dom_1.sanitizeInput(content, this._options.invalidCharReplacement));\n            this.node.appendChild(child);\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.dec = function (options) {\n        this._options.version = options.version || \"1.0\";\n        this._options.encoding = options.encoding;\n        this._options.standalone = options.standalone;\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.dtd = function (options) {\n        var name = dom_1.sanitizeInput((options && options.name) || (this._doc.documentElement ? this._doc.documentElement.tagName : \"ROOT\"), this._options.invalidCharReplacement);\n        var pubID = dom_1.sanitizeInput((options && options.pubID) || \"\", this._options.invalidCharReplacement);\n        var sysID = dom_1.sanitizeInput((options && options.sysID) || \"\", this._options.invalidCharReplacement);\n        // name must match document element\n        if (this._doc.documentElement !== null && name !== this._doc.documentElement.tagName) {\n            throw new Error(\"DocType name does not match document element name.\");\n        }\n        // create doctype node\n        var docType = this._doc.implementation.createDocumentType(name, pubID, sysID);\n        if (this._doc.doctype !== null) {\n            // replace existing doctype\n            this._doc.replaceChild(docType, this._doc.doctype);\n        }\n        else {\n            // insert before document element node or append to end\n            this._doc.insertBefore(docType, this._doc.documentElement);\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.import = function (node) {\n        var e_1, _a;\n        var hostNode = this._domNode;\n        var hostDoc = this._doc;\n        var importedNode = node.node;\n        if (util_2.Guard.isDocumentNode(importedNode)) {\n            // import document node\n            var elementNode = importedNode.documentElement;\n            if (elementNode === null) {\n                throw new Error(\"Imported document has no document element node. \" + this._debugInfo());\n            }\n            var clone = hostDoc.importNode(elementNode, true);\n            hostNode.appendChild(clone);\n            var _b = __read(algorithm_1.namespace_extractQName(clone.prefix ? clone.prefix + ':' + clone.localName : clone.localName), 1), prefix = _b[0];\n            var namespace = hostNode.lookupNamespaceURI(prefix);\n            new XMLBuilderImpl(clone)._updateNamespace(namespace);\n        }\n        else if (util_2.Guard.isDocumentFragmentNode(importedNode)) {\n            try {\n                // import child nodes\n                for (var _c = __values(importedNode.childNodes), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var childNode = _d.value;\n                    var clone = hostDoc.importNode(childNode, true);\n                    hostNode.appendChild(clone);\n                    if (util_2.Guard.isElementNode(clone)) {\n                        var _e = __read(algorithm_1.namespace_extractQName(clone.prefix ? clone.prefix + ':' + clone.localName : clone.localName), 1), prefix = _e[0];\n                        var namespace = hostNode.lookupNamespaceURI(prefix);\n                        new XMLBuilderImpl(clone)._updateNamespace(namespace);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        else {\n            // import node\n            var clone = hostDoc.importNode(importedNode, true);\n            hostNode.appendChild(clone);\n            if (util_2.Guard.isElementNode(clone)) {\n                var _f = __read(algorithm_1.namespace_extractQName(clone.prefix ? clone.prefix + ':' + clone.localName : clone.localName), 1), prefix = _f[0];\n                var namespace = hostNode.lookupNamespaceURI(prefix);\n                new XMLBuilderImpl(clone)._updateNamespace(namespace);\n            }\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.doc = function () {\n        if (this._doc._isFragment) {\n            var node = this.node;\n            while (node && node.nodeType !== interfaces_2.NodeType.DocumentFragment) {\n                node = node.parentNode;\n            }\n            /* istanbul ignore next */\n            if (node === null) {\n                throw new Error(\"Node has no parent node while searching for document fragment ancestor. \" + this._debugInfo());\n            }\n            return new XMLBuilderImpl(node);\n        }\n        else {\n            return new XMLBuilderImpl(this._doc);\n        }\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.root = function () {\n        var ele = this._doc.documentElement;\n        if (!ele) {\n            throw new Error(\"Document root element is null. \" + this._debugInfo());\n        }\n        return new XMLBuilderImpl(ele);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.up = function () {\n        var parent = this._domNode.parentNode;\n        if (!parent) {\n            throw new Error(\"Parent node is null. \" + this._debugInfo());\n        }\n        return new XMLBuilderImpl(parent);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.prev = function () {\n        var node = this._domNode.previousSibling;\n        if (!node) {\n            throw new Error(\"Previous sibling node is null. \" + this._debugInfo());\n        }\n        return new XMLBuilderImpl(node);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.next = function () {\n        var node = this._domNode.nextSibling;\n        if (!node) {\n            throw new Error(\"Next sibling node is null. \" + this._debugInfo());\n        }\n        return new XMLBuilderImpl(node);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.first = function () {\n        var node = this._domNode.firstChild;\n        if (!node) {\n            throw new Error(\"First child node is null. \" + this._debugInfo());\n        }\n        return new XMLBuilderImpl(node);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.last = function () {\n        var node = this._domNode.lastChild;\n        if (!node) {\n            throw new Error(\"Last child node is null. \" + this._debugInfo());\n        }\n        return new XMLBuilderImpl(node);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.each = function (callback, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = this._getFirstDescendantNode(this._domNode, self, recursive);\n        while (result[0]) {\n            var nextResult = this._getNextDescendantNode(this._domNode, result[0], recursive, result[1], result[2]);\n            callback.call(thisArg, new XMLBuilderImpl(result[0]), result[1], result[2]);\n            result = nextResult;\n        }\n        return this;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.map = function (callback, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = [];\n        this.each(function (node, index, level) {\n            return result.push(callback.call(thisArg, node, index, level));\n        }, self, recursive);\n        return result;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.reduce = function (callback, initialValue, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var value = initialValue;\n        this.each(function (node, index, level) {\n            return value = callback.call(thisArg, value, node, index, level);\n        }, self, recursive);\n        return value;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.find = function (predicate, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = this._getFirstDescendantNode(this._domNode, self, recursive);\n        while (result[0]) {\n            var builder = new XMLBuilderImpl(result[0]);\n            if (predicate.call(thisArg, builder, result[1], result[2])) {\n                return builder;\n            }\n            result = this._getNextDescendantNode(this._domNode, result[0], recursive, result[1], result[2]);\n        }\n        return undefined;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.filter = function (predicate, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = [];\n        this.each(function (node, index, level) {\n            if (predicate.call(thisArg, node, index, level)) {\n                result.push(node);\n            }\n        }, self, recursive);\n        return result;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.every = function (predicate, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = this._getFirstDescendantNode(this._domNode, self, recursive);\n        while (result[0]) {\n            var builder = new XMLBuilderImpl(result[0]);\n            if (!predicate.call(thisArg, builder, result[1], result[2])) {\n                return false;\n            }\n            result = this._getNextDescendantNode(this._domNode, result[0], recursive, result[1], result[2]);\n        }\n        return true;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.some = function (predicate, self, recursive, thisArg) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = this._getFirstDescendantNode(this._domNode, self, recursive);\n        while (result[0]) {\n            var builder = new XMLBuilderImpl(result[0]);\n            if (predicate.call(thisArg, builder, result[1], result[2])) {\n                return true;\n            }\n            result = this._getNextDescendantNode(this._domNode, result[0], recursive, result[1], result[2]);\n        }\n        return false;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.toArray = function (self, recursive) {\n        if (self === void 0) { self = false; }\n        if (recursive === void 0) { recursive = false; }\n        var result = [];\n        this.each(function (node) { return result.push(node); }, self, recursive);\n        return result;\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.toString = function (writerOptions) {\n        writerOptions = writerOptions || {};\n        if (writerOptions.format === undefined) {\n            writerOptions.format = \"xml\";\n        }\n        return this._serialize(writerOptions);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.toObject = function (writerOptions) {\n        writerOptions = writerOptions || {};\n        if (writerOptions.format === undefined) {\n            writerOptions.format = \"object\";\n        }\n        return this._serialize(writerOptions);\n    };\n    /** @inheritdoc */\n    XMLBuilderImpl.prototype.end = function (writerOptions) {\n        writerOptions = writerOptions || {};\n        if (writerOptions.format === undefined) {\n            writerOptions.format = \"xml\";\n        }\n        return this.doc()._serialize(writerOptions);\n    };\n    /**\n     * Gets the next descendant of the given node of the tree rooted at `root`\n     * in depth-first pre-order. Returns a three-tuple with\n     * [descendant, descendant_index, descendant_level].\n     *\n     * @param root - root node of the tree\n     * @param self - whether to visit the current node along with child nodes\n     * @param recursive - whether to visit all descendant nodes in tree-order or\n     * only the immediate child nodes\n     */\n    XMLBuilderImpl.prototype._getFirstDescendantNode = function (root, self, recursive) {\n        if (self)\n            return [this._domNode, 0, 0];\n        else if (recursive)\n            return this._getNextDescendantNode(root, root, recursive, 0, 0);\n        else\n            return [this._domNode.firstChild, 0, 1];\n    };\n    /**\n     * Gets the next descendant of the given node of the tree rooted at `root`\n     * in depth-first pre-order. Returns a three-tuple with\n     * [descendant, descendant_index, descendant_level].\n     *\n     * @param root - root node of the tree\n     * @param node - current node\n     * @param recursive - whether to visit all descendant nodes in tree-order or\n     * only the immediate child nodes\n     * @param index - child node index\n     * @param level - current depth of the XML tree\n     */\n    XMLBuilderImpl.prototype._getNextDescendantNode = function (root, node, recursive, index, level) {\n        if (recursive) {\n            // traverse child nodes\n            if (node.firstChild)\n                return [node.firstChild, 0, level + 1];\n            if (node === root)\n                return [null, -1, -1];\n            // traverse siblings\n            if (node.nextSibling)\n                return [node.nextSibling, index + 1, level];\n            // traverse parent's next sibling\n            var parent = node.parentNode;\n            while (parent && parent !== root) {\n                if (parent.nextSibling)\n                    return [parent.nextSibling, algorithm_1.tree_index(parent.nextSibling), level - 1];\n                parent = parent.parentNode;\n                level--;\n            }\n        }\n        else {\n            if (root === node)\n                return [node.firstChild, 0, level + 1];\n            else\n                return [node.nextSibling, index + 1, level];\n        }\n        return [null, -1, -1];\n    };\n    /**\n     * Converts the node into its string or object representation.\n     *\n     * @param options - serialization options\n     */\n    XMLBuilderImpl.prototype._serialize = function (writerOptions) {\n        if (writerOptions.format === \"xml\") {\n            var writer = new writers_1.XMLWriter(this._options, writerOptions);\n            return writer.serialize(this.node);\n        }\n        else if (writerOptions.format === \"map\") {\n            var writer = new writers_1.MapWriter(this._options, writerOptions);\n            return writer.serialize(this.node);\n        }\n        else if (writerOptions.format === \"object\") {\n            var writer = new writers_1.ObjectWriter(this._options, writerOptions);\n            return writer.serialize(this.node);\n        }\n        else if (writerOptions.format === \"json\") {\n            var writer = new writers_1.JSONWriter(this._options, writerOptions);\n            return writer.serialize(this.node);\n        }\n        else if (writerOptions.format === \"yaml\") {\n            var writer = new writers_1.YAMLWriter(this._options, writerOptions);\n            return writer.serialize(this.node);\n        }\n        else {\n            throw new Error(\"Invalid writer format: \" + writerOptions.format + \". \" + this._debugInfo());\n        }\n    };\n    /**\n     * Extracts a namespace and name from the given string.\n     *\n     * @param namespace - namespace\n     * @param name - a string containing both a name and namespace separated by an\n     * `'@'` character\n     * @param ele - `true` if this is an element namespace; otherwise `false`\n     */\n    XMLBuilderImpl.prototype._extractNamespace = function (namespace, name, ele) {\n        // extract from name\n        var atIndex = name.indexOf(\"@\");\n        if (atIndex > 0) {\n            if (namespace === undefined)\n                namespace = name.slice(atIndex + 1);\n            name = name.slice(0, atIndex);\n        }\n        if (namespace === undefined) {\n            // look-up default namespace\n            namespace = (ele ? this._options.defaultNamespace.ele : this._options.defaultNamespace.att);\n        }\n        else if (namespace !== null && namespace[0] === \"@\") {\n            // look-up namespace aliases\n            var alias = namespace.slice(1);\n            namespace = this._options.namespaceAlias[alias];\n            if (namespace === undefined) {\n                throw new Error(\"Namespace alias `\" + alias + \"` is not defined. \" + this._debugInfo());\n            }\n        }\n        return [namespace, name];\n    };\n    /**\n     * Updates the element's namespace.\n     *\n     * @param ns - new namespace\n     */\n    XMLBuilderImpl.prototype._updateNamespace = function (ns) {\n        var e_2, _a, e_3, _b;\n        var ele = this._domNode;\n        if (util_2.Guard.isElementNode(ele) && ns !== null && ele.namespaceURI !== ns) {\n            var _c = __read(algorithm_1.namespace_extractQName(ele.prefix ? ele.prefix + ':' + ele.localName : ele.localName), 2), elePrefix = _c[0], eleLocalName = _c[1];\n            // re-create the element node if its namespace changed\n            // we can't simply change the namespaceURI since its read-only\n            var newEle = algorithm_1.create_element(this._doc, eleLocalName, ns, elePrefix);\n            try {\n                for (var _d = __values(ele.attributes), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var attr = _e.value;\n                    var attrQName = attr.prefix ? attr.prefix + ':' + attr.localName : attr.localName;\n                    var _f = __read(algorithm_1.namespace_extractQName(attrQName), 1), attrPrefix = _f[0];\n                    var newAttrNS = attr.namespaceURI;\n                    if (newAttrNS === null && attrPrefix !== null) {\n                        newAttrNS = ele.lookupNamespaceURI(attrPrefix);\n                    }\n                    if (newAttrNS === null) {\n                        newEle.setAttribute(attrQName, attr.value);\n                    }\n                    else {\n                        newEle.setAttributeNS(newAttrNS, attrQName, attr.value);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            // replace the new node in parent node\n            var parent = ele.parentNode;\n            /* istanbul ignore next */\n            if (parent === null) {\n                throw new Error(\"Parent node is null.\" + this._debugInfo());\n            }\n            parent.replaceChild(newEle, ele);\n            this._domNode = newEle;\n            try {\n                // check child nodes\n                for (var _g = __values(ele.childNodes), _h = _g.next(); !_h.done; _h = _g.next()) {\n                    var childNode = _h.value;\n                    var newChildNode = childNode.cloneNode(true);\n                    newEle.appendChild(newChildNode);\n                    if (util_2.Guard.isElementNode(newChildNode)) {\n                        var _j = __read(algorithm_1.namespace_extractQName(newChildNode.prefix ? newChildNode.prefix + ':' + newChildNode.localName : newChildNode.localName), 1), newChildNodePrefix = _j[0];\n                        var newChildNodeNS = newEle.lookupNamespaceURI(newChildNodePrefix);\n                        new XMLBuilderImpl(newChildNode)._updateNamespace(newChildNodeNS);\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n    };\n    Object.defineProperty(XMLBuilderImpl.prototype, \"_doc\", {\n        /**\n         * Returns the document owning this node.\n         */\n        get: function () {\n            var node = this.node;\n            if (util_2.Guard.isDocumentNode(node)) {\n                return node;\n            }\n            else {\n                var docNode = node.ownerDocument;\n                /* istanbul ignore next */\n                if (!docNode)\n                    throw new Error(\"Owner document is null. \" + this._debugInfo());\n                return docNode;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns debug information for this node.\n     *\n     * @param name - node name\n     */\n    XMLBuilderImpl.prototype._debugInfo = function (name) {\n        var node = this.node;\n        var parentNode = node.parentNode;\n        name = name || node.nodeName;\n        var parentName = parentNode ? parentNode.nodeName : '';\n        if (!parentName) {\n            return \"node: <\" + name + \">\";\n        }\n        else {\n            return \"node: <\" + name + \">, parent: <\" + parentName + \">\";\n        }\n    };\n    Object.defineProperty(XMLBuilderImpl.prototype, \"_options\", {\n        /**\n         * Gets or sets builder options.\n         */\n        get: function () {\n            var doc = this._doc;\n            /* istanbul ignore next */\n            if (doc._xmlBuilderOptions === undefined) {\n                throw new Error(\"Builder options is not set.\");\n            }\n            return doc._xmlBuilderOptions;\n        },\n        set: function (value) {\n            var doc = this._doc;\n            doc._xmlBuilderOptions = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return XMLBuilderImpl;\n}());\nexports.XMLBuilderImpl = XMLBuilderImpl;\n//# sourceMappingURL=XMLBuilderImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar util_1 = require(\"../util\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar MutationObserverAlgorithm_1 = require(\"./MutationObserverAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\n/**\n * Replaces character data.\n *\n * @param node - a character data node\n * @param offset - start offset\n * @param count - count of characters to replace\n * @param data - new data\n */\nfunction characterData_replaceData(node, offset, count, data) {\n    var e_1, _a;\n    /**\n     * 1. Let length be node’s length.\n     * 2. If offset is greater than length, then throw an \"IndexSizeError\"\n     * DOMException.\n     * 3. If offset plus count is greater than length, then set count to length\n     * minus offset.\n     */\n    var length = TreeAlgorithm_1.tree_nodeLength(node);\n    if (offset > length) {\n        throw new DOMException_1.IndexSizeError(\"Offset exceeds character data length. Offset: \" + offset + \", Length: \" + length + \", Node is \" + node.nodeName + \".\");\n    }\n    if (offset + count > length) {\n        count = length - offset;\n    }\n    /**\n     * 4. Queue a mutation record of \"characterData\" for node with null, null,\n     * node’s data, « », « », null, and null.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueMutationRecord(\"characterData\", node, null, null, node._data, [], [], null, null);\n    }\n    /**\n     * 5. Insert data into node’s data after offset code units.\n     * 6. Let delete offset be offset + data’s length.\n     * 7. Starting from delete offset code units, remove count code units from\n     * node’s data.\n     */\n    var newData = node._data.substring(0, offset) + data +\n        node._data.substring(offset + count);\n    node._data = newData;\n    try {\n        /**\n         * 8. For each live range whose start node is node and start offset is\n         * greater than offset but less than or equal to offset plus count, set its\n         * start offset to offset.\n         * 9. For each live range whose end node is node and end offset is greater\n         * than offset but less than or equal to offset plus count, set its end\n         * offset to offset.\n         * 10. For each live range whose start node is node and start offset is\n         * greater than offset plus count, increase its start offset by data’s\n         * length and decrease it by count.\n         * 11. For each live range whose end node is node and end offset is greater\n         * than offset plus count, increase its end offset by data’s length and\n         * decrease it by count.\n         */\n        for (var _b = __values(DOMImpl_1.dom.rangeList), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var range = _c.value;\n            if (range._start[0] === node && range._start[1] > offset && range._start[1] <= offset + count) {\n                range._start[1] = offset;\n            }\n            if (range._end[0] === node && range._end[1] > offset && range._end[1] <= offset + count) {\n                range._end[1] = offset;\n            }\n            if (range._start[0] === node && range._start[1] > offset + count) {\n                range._start[1] += data.length - count;\n            }\n            if (range._end[0] === node && range._end[1] > offset + count) {\n                range._end[1] += data.length - count;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    /**\n     * 12. If node is a Text node and its parent is not null, run the child\n     * text content change steps for node’s parent.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        if (util_1.Guard.isTextNode(node) && node._parent !== null) {\n            DOMAlgorithm_1.dom_runChildTextContentChangeSteps(node._parent);\n        }\n    }\n}\nexports.characterData_replaceData = characterData_replaceData;\n/**\n * Returns `count` number of characters from `node`'s data starting at\n * the given `offset`.\n *\n * @param node - a character data node\n * @param offset - start offset\n * @param count - count of characters to return\n */\nfunction characterData_substringData(node, offset, count) {\n    /**\n     * 1. Let length be node’s length.\n     * 2. If offset is greater than length, then throw an \"IndexSizeError\"\n     * DOMException.\n     * 3. If offset plus count is greater than length, return a string whose\n     * value is the code units from the offsetth code unit to the end of node’s\n     * data, and then return.\n     * 4. Return a string whose value is the code units from the offsetth code\n     * unit to the offset+countth code unit in node’s data.\n     */\n    var length = TreeAlgorithm_1.tree_nodeLength(node);\n    if (offset > length) {\n        throw new DOMException_1.IndexSizeError(\"Offset exceeds character data length. Offset: \" + offset + \", Length: \" + length + \", Node is \" + node.nodeName + \".\");\n    }\n    if (offset + count > length) {\n        return node._data.substr(offset);\n    }\n    else {\n        return node._data.substr(offset, count);\n    }\n}\nexports.characterData_substringData = characterData_substringData;\n//# sourceMappingURL=CharacterDataAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar TraversalAlgorithm_1 = require(\"./TraversalAlgorithm\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\n/**\n * Returns the next or previous node in the subtree, or `null` if\n * there are none.\n *\n * @param iterator - the `NodeIterator` instance\n * @param forward- `true` to return the next node, or `false` to\n * return the previous node.\n */\nfunction nodeIterator_traverse(iterator, forward) {\n    /**\n     * 1. Let node be iterator’s reference.\n     * 2. Let beforeNode be iterator’s pointer before reference.\n     */\n    var node = iterator._reference;\n    var beforeNode = iterator._pointerBeforeReference;\n    /**\n     * 3. While true:\n     */\n    while (true) {\n        /**\n         * 3.1. Branch on direction:\n         */\n        if (forward) {\n            /**\n             * - next\n             */\n            if (!beforeNode) {\n                /**\n                 * If beforeNode is false, then set node to the first node following\n                 * node in iterator’s iterator collection. If there is no such node,\n                 * then return null.\n                 */\n                var nextNode = TreeAlgorithm_1.tree_getFollowingNode(iterator._root, node);\n                if (nextNode) {\n                    node = nextNode;\n                }\n                else {\n                    return null;\n                }\n            }\n            else {\n                /**\n                 * If beforeNode is true, then set it to false.\n                 */\n                beforeNode = false;\n            }\n        }\n        else {\n            /**\n             * - previous\n             */\n            if (beforeNode) {\n                /**\n                 * If beforeNode is true, then set node to the first node preceding\n                 * node in iterator’s iterator collection. If there is no such node,\n                 * then return null.\n                 */\n                var prevNode = TreeAlgorithm_1.tree_getPrecedingNode(iterator.root, node);\n                if (prevNode) {\n                    node = prevNode;\n                }\n                else {\n                    return null;\n                }\n            }\n            else {\n                /**\n                 * If beforeNode is false, then set it to true.\n                 */\n                beforeNode = true;\n            }\n        }\n        /**\n         * 3.2. Let result be the result of filtering node within iterator.\n         * 3.3. If result is FILTER_ACCEPT, then break.\n         */\n        var result = TraversalAlgorithm_1.traversal_filter(iterator, node);\n        if (result === interfaces_1.FilterResult.Accept) {\n            break;\n        }\n    }\n    /**\n     * 4. Set iterator’s reference to node.\n     * 5. Set iterator’s pointer before reference to beforeNode.\n     * 6. Return node.\n     */\n    iterator._reference = node;\n    iterator._pointerBeforeReference = beforeNode;\n    return node;\n}\nexports.nodeIterator_traverse = nodeIterator_traverse;\n/**\n * Gets the global iterator list.\n */\nfunction nodeIterator_iteratorList() {\n    return DOMImpl_1.dom.window._iteratorList;\n}\nexports.nodeIterator_iteratorList = nodeIterator_iteratorList;\n//# sourceMappingURL=NodeIteratorAlgorithm.js.map","'use strict';\n\nvar common = require('../common');\nvar Type   = require('../type');\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // 20:59\n  '|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\\\.[0-9_]*' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign, base, digits;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n  digits = [];\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n\n  } else if (value.indexOf(':') >= 0) {\n    value.split(':').forEach(function (v) {\n      digits.unshift(parseFloat(v, 10));\n    });\n\n    value = 0.0;\n    base = 1;\n\n    digits.forEach(function (d) {\n      value += d * base;\n      base *= 60;\n    });\n\n    return sign * value;\n\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCBWriter_1 = require(\"./BaseCBWriter\");\n/**\n * Serializes XML nodes.\n */\nvar JSONCBWriter = /** @class */ (function (_super) {\n    __extends(JSONCBWriter, _super);\n    /**\n     * Initializes a new instance of `JSONCBWriter`.\n     *\n     * @param builderOptions - XML builder options\n     */\n    function JSONCBWriter(builderOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        _this._hasChildren = [];\n        _this._additionalLevel = 0;\n        return _this;\n    }\n    /** @inheritdoc */\n    JSONCBWriter.prototype.frontMatter = function () {\n        return \"\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.declaration = function (version, encoding, standalone) {\n        return \"\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.docType = function (name, publicId, systemId) {\n        return \"\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.comment = function (data) {\n        // { \"!\": \"hello\" }\n        return this._comma() + this._beginLine() + \"{\" + this._sep() +\n            this._key(this._builderOptions.convert.comment) + this._sep() +\n            this._val(data) + this._sep() + \"}\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.text = function (data) {\n        // { \"#\": \"hello\" }\n        return this._comma() + this._beginLine() + \"{\" + this._sep() +\n            this._key(this._builderOptions.convert.text) + this._sep() +\n            this._val(data) + this._sep() + \"}\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.instruction = function (target, data) {\n        // { \"?\": \"target hello\" }\n        return this._comma() + this._beginLine() + \"{\" + this._sep() +\n            this._key(this._builderOptions.convert.ins) + this._sep() +\n            this._val(data ? target + \" \" + data : target) + this._sep() + \"}\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.cdata = function (data) {\n        // { \"$\": \"hello\" }\n        return this._comma() + this._beginLine() + \"{\" + this._sep() +\n            this._key(this._builderOptions.convert.cdata) + this._sep() +\n            this._val(data) + this._sep() + \"}\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.attribute = function (name, value) {\n        // { \"@name\": \"val\" }\n        return this._comma() + this._beginLine(1) + \"{\" + this._sep() +\n            this._key(this._builderOptions.convert.att + name) + this._sep() +\n            this._val(value) + this._sep() + \"}\";\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.openTagBegin = function (name) {\n        // { \"node\": { \"#\": [\n        var str = this._comma() + this._beginLine() + \"{\" + this._sep() + this._key(name) + this._sep() + \"{\";\n        this._additionalLevel++;\n        this.hasData = true;\n        str += this._beginLine() + this._key(this._builderOptions.convert.text) + this._sep() + \"[\";\n        this._hasChildren.push(false);\n        return str;\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.openTagEnd = function (name, selfClosing, voidElement) {\n        if (selfClosing) {\n            var str = this._sep() + \"]\";\n            this._additionalLevel--;\n            str += this._beginLine() + \"}\" + this._sep() + \"}\";\n            return str;\n        }\n        else {\n            return \"\";\n        }\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.closeTag = function (name) {\n        // ] } }\n        var str = this._beginLine() + \"]\";\n        this._additionalLevel--;\n        str += this._beginLine() + \"}\" + this._sep() + \"}\";\n        return str;\n    };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.beginElement = function (name) { };\n    /** @inheritdoc */\n    JSONCBWriter.prototype.endElement = function (name) { this._hasChildren.pop(); };\n    /**\n     * Produces characters to be prepended to a line of string in pretty-print\n     * mode.\n     */\n    JSONCBWriter.prototype._beginLine = function (additionalOffset) {\n        if (additionalOffset === void 0) { additionalOffset = 0; }\n        if (this._writerOptions.prettyPrint) {\n            return (this.hasData ? this._writerOptions.newline : \"\") +\n                this._indent(this._writerOptions.offset + this.level + additionalOffset);\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Produces an indentation string.\n     *\n     * @param level - depth of the tree\n     */\n    JSONCBWriter.prototype._indent = function (level) {\n        if (level + this._additionalLevel <= 0) {\n            return \"\";\n        }\n        else {\n            return this._writerOptions.indent.repeat(level + this._additionalLevel);\n        }\n    };\n    /**\n     * Produces a comma before a child node if it has previous siblings.\n     */\n    JSONCBWriter.prototype._comma = function () {\n        var str = (this._hasChildren[this._hasChildren.length - 1] ? \",\" : \"\");\n        if (this._hasChildren.length > 0) {\n            this._hasChildren[this._hasChildren.length - 1] = true;\n        }\n        return str;\n    };\n    /**\n     * Produces a separator string.\n     */\n    JSONCBWriter.prototype._sep = function () {\n        return (this._writerOptions.prettyPrint ? \" \" : \"\");\n    };\n    /**\n     * Produces a JSON key string delimited with double quotes.\n     */\n    JSONCBWriter.prototype._key = function (key) {\n        return \"\\\"\" + key + \"\\\":\";\n    };\n    /**\n     * Produces a JSON value string delimited with double quotes.\n     */\n    JSONCBWriter.prototype._val = function (val) {\n        return JSON.stringify(val);\n    };\n    return JSONCBWriter;\n}(BaseCBWriter_1.BaseCBWriter));\nexports.JSONCBWriter = JSONCBWriter;\n//# sourceMappingURL=JSONCBWriter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents a mutation record.\n */\nvar MutationRecordImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `MutationRecord`.\n     *\n     * @param type - type of mutation: `\"attributes\"` for an attribute\n     * mutation, `\"characterData\"` for a mutation to a CharacterData node\n     * and `\"childList\"` for a mutation to the tree of nodes.\n     * @param target - node affected by the mutation.\n     * @param addedNodes - list of added nodes.\n     * @param removedNodes - list of removed nodes.\n     * @param previousSibling - previous sibling of added or removed nodes.\n     * @param nextSibling - next sibling of added or removed nodes.\n     * @param attributeName - local name of the changed attribute,\n     * and `null` otherwise.\n     * @param attributeNamespace - namespace of the changed attribute,\n     * and `null` otherwise.\n     * @param oldValue - value before mutation: attribute value for an attribute\n     * mutation, node `data` for a mutation to a CharacterData node and `null`\n     * for a mutation to the tree of nodes.\n     */\n    function MutationRecordImpl(type, target, addedNodes, removedNodes, previousSibling, nextSibling, attributeName, attributeNamespace, oldValue) {\n        this._type = type;\n        this._target = target;\n        this._addedNodes = addedNodes;\n        this._removedNodes = removedNodes;\n        this._previousSibling = previousSibling;\n        this._nextSibling = nextSibling;\n        this._attributeName = attributeName;\n        this._attributeNamespace = attributeNamespace;\n        this._oldValue = oldValue;\n    }\n    Object.defineProperty(MutationRecordImpl.prototype, \"type\", {\n        /** @inheritdoc */\n        get: function () { return this._type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"target\", {\n        /** @inheritdoc */\n        get: function () { return this._target; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"addedNodes\", {\n        /** @inheritdoc */\n        get: function () { return this._addedNodes; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"removedNodes\", {\n        /** @inheritdoc */\n        get: function () { return this._removedNodes; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"previousSibling\", {\n        /** @inheritdoc */\n        get: function () { return this._previousSibling; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"nextSibling\", {\n        /** @inheritdoc */\n        get: function () { return this._nextSibling; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"attributeName\", {\n        /** @inheritdoc */\n        get: function () { return this._attributeName; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"attributeNamespace\", {\n        /** @inheritdoc */\n        get: function () { return this._attributeNamespace; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutationRecordImpl.prototype, \"oldValue\", {\n        /** @inheritdoc */\n        get: function () { return this._oldValue; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new `MutationRecord`.\n     *\n     * @param type - type of mutation: `\"attributes\"` for an attribute\n     * mutation, `\"characterData\"` for a mutation to a CharacterData node\n     * and `\"childList\"` for a mutation to the tree of nodes.\n     * @param target - node affected by the mutation.\n     * @param addedNodes - list of added nodes.\n     * @param removedNodes - list of removed nodes.\n     * @param previousSibling - previous sibling of added or removed nodes.\n     * @param nextSibling - next sibling of added or removed nodes.\n     * @param attributeName - local name of the changed attribute,\n     * and `null` otherwise.\n     * @param attributeNamespace - namespace of the changed attribute,\n     * and `null` otherwise.\n     * @param oldValue - value before mutation: attribute value for an attribute\n     * mutation, node `data` for a mutation to a CharacterData node and `null`\n     * for a mutation to the tree of nodes.\n     */\n    MutationRecordImpl._create = function (type, target, addedNodes, removedNodes, previousSibling, nextSibling, attributeName, attributeNamespace, oldValue) {\n        return new MutationRecordImpl(type, target, addedNodes, removedNodes, previousSibling, nextSibling, attributeName, attributeNamespace, oldValue);\n    };\n    return MutationRecordImpl;\n}());\nexports.MutationRecordImpl = MutationRecordImpl;\n//# sourceMappingURL=MutationRecordImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar DOMException_1 = require(\"../dom/DOMException\");\n/**\n * Applies the filter to the given node and returns the result.\n *\n * @param traverser - the `NodeIterator` or `TreeWalker` instance\n * @param node - the node to filter\n */\nfunction traversal_filter(traverser, node) {\n    /**\n     * 1. If traverser’s active flag is set, then throw an \"InvalidStateError\"\n     * DOMException.\n     */\n    if (traverser._activeFlag) {\n        throw new DOMException_1.InvalidStateError();\n    }\n    /**\n     * 2. Let n be node’s nodeType attribute value − 1.\n     */\n    var n = node._nodeType - 1;\n    /**\n     * 3. If the nth bit (where 0 is the least significant bit) of traverser’s\n     * whatToShow is not set, then return FILTER_SKIP.\n     */\n    var mask = 1 << n;\n    if ((traverser.whatToShow & mask) === 0) {\n        return interfaces_1.FilterResult.Skip;\n    }\n    /**\n     * 4. If traverser’s filter is null, then return FILTER_ACCEPT.\n     */\n    if (!traverser.filter) {\n        return interfaces_1.FilterResult.Accept;\n    }\n    /**\n     * 5. Set traverser’s active flag.\n     */\n    traverser._activeFlag = true;\n    /**\n     * 6. Let result be the return value of call a user object’s operation with\n     * traverser’s filter, \"acceptNode\", and « node ». If this throws an\n     * exception, then unset traverser’s active flag and rethrow the exception.\n     */\n    var result = interfaces_1.FilterResult.Reject;\n    try {\n        result = traverser.filter.acceptNode(node);\n    }\n    catch (err) {\n        traverser._activeFlag = false;\n        throw err;\n    }\n    /**\n     * 7. Unset traverser’s active flag.\n     * 8. Return result.\n     */\n    traverser._activeFlag = false;\n    return result;\n}\nexports.traversal_filter = traversal_filter;\n//# sourceMappingURL=TraversalAlgorithm.js.map","'use strict';\n\n/*eslint-disable max-len*/\n\nvar common        = require('./common');\nvar YAMLException = require('./exception');\nvar Type          = require('./type');\n\n\nfunction compileList(schema, name, result) {\n  var exclude = [];\n\n  schema.include.forEach(function (includedSchema) {\n    result = compileList(includedSchema, name, result);\n  });\n\n  schema[name].forEach(function (currentType) {\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag && previousType.kind === currentType.kind) {\n        exclude.push(previousIndex);\n      }\n    });\n\n    result.push(currentType);\n  });\n\n  return result.filter(function (type, index) {\n    return exclude.indexOf(index) === -1;\n  });\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {}\n      }, index, length;\n\n  function collectType(type) {\n    result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema(definition) {\n  this.include  = definition.include  || [];\n  this.implicit = definition.implicit || [];\n  this.explicit = definition.explicit || [];\n\n  this.implicit.forEach(function (type) {\n    if (type.loadKind && type.loadKind !== 'scalar') {\n      throw new YAMLException('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n  });\n\n  this.compiledImplicit = compileList(this, 'implicit', []);\n  this.compiledExplicit = compileList(this, 'explicit', []);\n  this.compiledTypeMap  = compileMap(this.compiledImplicit, this.compiledExplicit);\n}\n\n\nSchema.DEFAULT = null;\n\n\nSchema.create = function createSchema() {\n  var schemas, types;\n\n  switch (arguments.length) {\n    case 1:\n      schemas = Schema.DEFAULT;\n      types = arguments[0];\n      break;\n\n    case 2:\n      schemas = arguments[0];\n      types = arguments[1];\n      break;\n\n    default:\n      throw new YAMLException('Wrong number of arguments for Schema.create function');\n  }\n\n  schemas = common.toArray(schemas);\n  types = common.toArray(types);\n\n  if (!schemas.every(function (schema) { return schema instanceof Schema; })) {\n    throw new YAMLException('Specified list of super schemas (or a single Schema object) contains a non-Schema object.');\n  }\n\n  if (!types.every(function (type) { return type instanceof Type; })) {\n    throw new YAMLException('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n  }\n\n  return new Schema({\n    include: schemas,\n    explicit: types\n  });\n};\n\n\nmodule.exports = Schema;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Adds the given item to the end of the list.\n *\n * @param list - a list\n * @param item - an item\n */\nfunction append(list, item) {\n    list.push(item);\n}\nexports.append = append;\n/**\n * Extends a list by appending all items from another list.\n *\n * @param listA - a list to extend\n * @param listB - a list containing items to append to `listA`\n */\nfunction extend(listA, listB) {\n    listA.push.apply(listA, __spread(listB));\n}\nexports.extend = extend;\n/**\n * Inserts the given item to the start of the list.\n *\n * @param list - a list\n * @param item - an item\n */\nfunction prepend(list, item) {\n    list.unshift(item);\n}\nexports.prepend = prepend;\n/**\n * Replaces the given item or all items matching condition with a new item.\n *\n * @param list - a list\n * @param conditionOrItem - an item to replace or a condition matching items\n * to replace\n * @param item - an item\n */\nfunction replace(list, conditionOrItem, newItem) {\n    var e_1, _a;\n    var i = 0;\n    try {\n        for (var list_1 = __values(list), list_1_1 = list_1.next(); !list_1_1.done; list_1_1 = list_1.next()) {\n            var oldItem = list_1_1.value;\n            if (util_1.isFunction(conditionOrItem)) {\n                if (!!conditionOrItem.call(null, oldItem)) {\n                    list[i] = newItem;\n                }\n            }\n            else if (oldItem === conditionOrItem) {\n                list[i] = newItem;\n                return;\n            }\n            i++;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (list_1_1 && !list_1_1.done && (_a = list_1.return)) _a.call(list_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n}\nexports.replace = replace;\n/**\n * Inserts the given item before the given index.\n *\n * @param list - a list\n * @param item - an item\n */\nfunction insert(list, item, index) {\n    list.splice(index, 0, item);\n}\nexports.insert = insert;\n/**\n * Removes the given item or all items matching condition.\n *\n * @param list - a list\n * @param conditionOrItem - an item to remove or a condition matching items\n * to remove\n */\nfunction remove(list, conditionOrItem) {\n    var i = list.length;\n    while (i--) {\n        var oldItem = list[i];\n        if (util_1.isFunction(conditionOrItem)) {\n            if (!!conditionOrItem.call(null, oldItem)) {\n                list.splice(i, 1);\n            }\n        }\n        else if (oldItem === conditionOrItem) {\n            list.splice(i, 1);\n            return;\n        }\n    }\n}\nexports.remove = remove;\n/**\n * Removes all items from the list.\n */\nfunction empty(list) {\n    list.length = 0;\n}\nexports.empty = empty;\n/**\n * Determines if the list contains the given item or any items matching\n * condition.\n *\n * @param list - a list\n * @param conditionOrItem - an item to a condition to match\n */\nfunction contains(list, conditionOrItem) {\n    var e_2, _a;\n    try {\n        for (var list_2 = __values(list), list_2_1 = list_2.next(); !list_2_1.done; list_2_1 = list_2.next()) {\n            var oldItem = list_2_1.value;\n            if (util_1.isFunction(conditionOrItem)) {\n                if (!!conditionOrItem.call(null, oldItem)) {\n                    return true;\n                }\n            }\n            else if (oldItem === conditionOrItem) {\n                return true;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (list_2_1 && !list_2_1.done && (_a = list_2.return)) _a.call(list_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return false;\n}\nexports.contains = contains;\n/**\n * Returns the count of items in the list matching the given condition.\n *\n * @param list - a list\n * @param condition - an optional condition to match\n */\nfunction size(list, condition) {\n    var e_3, _a;\n    if (condition === undefined) {\n        return list.length;\n    }\n    else {\n        var count = 0;\n        try {\n            for (var list_3 = __values(list), list_3_1 = list_3.next(); !list_3_1.done; list_3_1 = list_3.next()) {\n                var item = list_3_1.value;\n                if (!!condition.call(null, item)) {\n                    count++;\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (list_3_1 && !list_3_1.done && (_a = list_3.return)) _a.call(list_3);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return count;\n    }\n}\nexports.size = size;\n/**\n * Determines if the list is empty.\n *\n * @param list - a list\n */\nfunction isEmpty(list) {\n    return list.length === 0;\n}\nexports.isEmpty = isEmpty;\n/**\n * Returns an iterator for the items of the list.\n *\n * @param list - a list\n * @param condition - an optional condition to match\n */\nfunction forEach(list, condition) {\n    var list_4, list_4_1, item, e_4_1;\n    var e_4, _a;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (!(condition === undefined)) return [3 /*break*/, 2];\n                return [5 /*yield**/, __values(list)];\n            case 1:\n                _b.sent();\n                return [3 /*break*/, 9];\n            case 2:\n                _b.trys.push([2, 7, 8, 9]);\n                list_4 = __values(list), list_4_1 = list_4.next();\n                _b.label = 3;\n            case 3:\n                if (!!list_4_1.done) return [3 /*break*/, 6];\n                item = list_4_1.value;\n                if (!!!condition.call(null, item)) return [3 /*break*/, 5];\n                return [4 /*yield*/, item];\n            case 4:\n                _b.sent();\n                _b.label = 5;\n            case 5:\n                list_4_1 = list_4.next();\n                return [3 /*break*/, 3];\n            case 6: return [3 /*break*/, 9];\n            case 7:\n                e_4_1 = _b.sent();\n                e_4 = { error: e_4_1 };\n                return [3 /*break*/, 9];\n            case 8:\n                try {\n                    if (list_4_1 && !list_4_1.done && (_a = list_4.return)) _a.call(list_4);\n                }\n                finally { if (e_4) throw e_4.error; }\n                return [7 /*endfinally*/];\n            case 9: return [2 /*return*/];\n        }\n    });\n}\nexports.forEach = forEach;\n/**\n * Creates and returns a shallow clone of list.\n *\n * @param list - a list\n */\nfunction clone(list) {\n    return new (Array.bind.apply(Array, __spread([void 0], list)))();\n}\nexports.clone = clone;\n/**\n * Returns a new list containing items from the list sorted in ascending\n * order.\n *\n * @param list - a list\n * @param lessThanAlgo - a function that returns `true` if its first argument\n * is less than its second argument, and `false` otherwise.\n */\nfunction sortInAscendingOrder(list, lessThanAlgo) {\n    return list.sort(function (itemA, itemB) {\n        return lessThanAlgo.call(null, itemA, itemB) ? -1 : 1;\n    });\n}\nexports.sortInAscendingOrder = sortInAscendingOrder;\n/**\n * Returns a new list containing items from the list sorted in descending\n * order.\n *\n * @param list - a list\n * @param lessThanAlgo - a function that returns `true` if its first argument\n * is less than its second argument, and `false` otherwise.\n */\nfunction sortInDescendingOrder(list, lessThanAlgo) {\n    return list.sort(function (itemA, itemB) {\n        return lessThanAlgo.call(null, itemA, itemB) ? 1 : -1;\n    });\n}\nexports.sortInDescendingOrder = sortInDescendingOrder;\n//# sourceMappingURL=List.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dom_1 = require(\"@oozcitak/dom\");\nvar dom_2 = require(\"@oozcitak/dom/lib/dom\");\nvar util_1 = require(\"@oozcitak/util\");\ndom_2.dom.setFeatures(false);\n/**\n * Creates an XML document without any child nodes.\n */\nfunction createDocument() {\n    var impl = new dom_1.DOMImplementation();\n    var doc = impl.createDocument(null, 'root', null);\n    /* istanbul ignore else */\n    if (doc.documentElement) {\n        doc.removeChild(doc.documentElement);\n    }\n    return doc;\n}\nexports.createDocument = createDocument;\n/**\n * Sanitizes input strings with user supplied replacement characters.\n *\n * @param str - input string\n * @param replacement - replacement character or function\n */\nfunction sanitizeInput(str, replacement) {\n    if (str == null) {\n        return str;\n    }\n    else if (replacement === undefined) {\n        return str + \"\";\n    }\n    else {\n        var result = \"\";\n        str = str + \"\";\n        for (var i = 0; i < str.length; i++) {\n            var n = str.charCodeAt(i);\n            // #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]\n            if (n === 0x9 || n === 0xA || n === 0xD ||\n                (n >= 0x20 && n <= 0xD7FF) ||\n                (n >= 0xE000 && n <= 0xFFFD)) {\n                // valid character - not surrogate pair\n                result += str.charAt(i);\n            }\n            else if (n >= 0xD800 && n <= 0xDBFF && i < str.length - 1) {\n                var n2 = str.charCodeAt(i + 1);\n                if (n2 >= 0xDC00 && n2 <= 0xDFFF) {\n                    // valid surrogate pair\n                    n = (n - 0xD800) * 0x400 + n2 - 0xDC00 + 0x10000;\n                    result += String.fromCodePoint(n);\n                    i++;\n                }\n                else {\n                    // invalid lone surrogate\n                    result += util_1.isString(replacement) ? replacement : replacement(str.charAt(i), i, str);\n                }\n            }\n            else {\n                // invalid character\n                result += util_1.isString(replacement) ? replacement : replacement(str.charAt(i), i, str);\n            }\n        }\n        return result;\n    }\n}\nexports.sanitizeInput = sanitizeInput;\n//# sourceMappingURL=dom.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents an abstract range with a start and end boundary point.\n */\nvar AbstractRangeImpl = /** @class */ (function () {\n    function AbstractRangeImpl() {\n    }\n    Object.defineProperty(AbstractRangeImpl.prototype, \"_startNode\", {\n        get: function () { return this._start[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"_startOffset\", {\n        get: function () { return this._start[1]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"_endNode\", {\n        get: function () { return this._end[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"_endOffset\", {\n        get: function () { return this._end[1]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"_collapsed\", {\n        get: function () {\n            return (this._start[0] === this._end[0] &&\n                this._start[1] === this._end[1]);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"startContainer\", {\n        /** @inheritdoc */\n        get: function () { return this._startNode; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"startOffset\", {\n        /** @inheritdoc */\n        get: function () { return this._startOffset; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"endContainer\", {\n        /** @inheritdoc */\n        get: function () { return this._endNode; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"endOffset\", {\n        /** @inheritdoc */\n        get: function () { return this._endOffset; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractRangeImpl.prototype, \"collapsed\", {\n        /** @inheritdoc */\n        get: function () { return this._collapsed; },\n        enumerable: true,\n        configurable: true\n    });\n    return AbstractRangeImpl;\n}());\nexports.AbstractRangeImpl = AbstractRangeImpl;\n//# sourceMappingURL=AbstractRangeImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\n// Import implementation classes\nvar AbortControllerImpl_1 = require(\"./AbortControllerImpl\");\nexports.AbortController = AbortControllerImpl_1.AbortControllerImpl;\nvar AbortSignalImpl_1 = require(\"./AbortSignalImpl\");\nexports.AbortSignal = AbortSignalImpl_1.AbortSignalImpl;\nvar AbstractRangeImpl_1 = require(\"./AbstractRangeImpl\");\nexports.AbstractRange = AbstractRangeImpl_1.AbstractRangeImpl;\nvar AttrImpl_1 = require(\"./AttrImpl\");\nexports.Attr = AttrImpl_1.AttrImpl;\nvar CDATASectionImpl_1 = require(\"./CDATASectionImpl\");\nexports.CDATASection = CDATASectionImpl_1.CDATASectionImpl;\nvar CharacterDataImpl_1 = require(\"./CharacterDataImpl\");\nexports.CharacterData = CharacterDataImpl_1.CharacterDataImpl;\nvar ChildNodeImpl_1 = require(\"./ChildNodeImpl\");\nvar CommentImpl_1 = require(\"./CommentImpl\");\nexports.Comment = CommentImpl_1.CommentImpl;\nvar CustomEventImpl_1 = require(\"./CustomEventImpl\");\nexports.CustomEvent = CustomEventImpl_1.CustomEventImpl;\nvar DocumentFragmentImpl_1 = require(\"./DocumentFragmentImpl\");\nexports.DocumentFragment = DocumentFragmentImpl_1.DocumentFragmentImpl;\nvar DocumentImpl_1 = require(\"./DocumentImpl\");\nexports.Document = DocumentImpl_1.DocumentImpl;\nvar DocumentOrShadowRootImpl_1 = require(\"./DocumentOrShadowRootImpl\");\nvar DocumentTypeImpl_1 = require(\"./DocumentTypeImpl\");\nexports.DocumentType = DocumentTypeImpl_1.DocumentTypeImpl;\nvar DOMImpl_1 = require(\"./DOMImpl\");\nexports.dom = DOMImpl_1.dom;\nvar DOMImplementationImpl_1 = require(\"./DOMImplementationImpl\");\nexports.DOMImplementation = DOMImplementationImpl_1.DOMImplementationImpl;\nvar DOMTokenListImpl_1 = require(\"./DOMTokenListImpl\");\nexports.DOMTokenList = DOMTokenListImpl_1.DOMTokenListImpl;\nvar ElementImpl_1 = require(\"./ElementImpl\");\nexports.Element = ElementImpl_1.ElementImpl;\nvar EventImpl_1 = require(\"./EventImpl\");\nexports.Event = EventImpl_1.EventImpl;\nvar EventTargetImpl_1 = require(\"./EventTargetImpl\");\nexports.EventTarget = EventTargetImpl_1.EventTargetImpl;\nvar HTMLCollectionImpl_1 = require(\"./HTMLCollectionImpl\");\nexports.HTMLCollection = HTMLCollectionImpl_1.HTMLCollectionImpl;\nvar MutationObserverImpl_1 = require(\"./MutationObserverImpl\");\nexports.MutationObserver = MutationObserverImpl_1.MutationObserverImpl;\nvar MutationRecordImpl_1 = require(\"./MutationRecordImpl\");\nexports.MutationRecord = MutationRecordImpl_1.MutationRecordImpl;\nvar NamedNodeMapImpl_1 = require(\"./NamedNodeMapImpl\");\nexports.NamedNodeMap = NamedNodeMapImpl_1.NamedNodeMapImpl;\nvar NodeFilterImpl_1 = require(\"./NodeFilterImpl\");\nexports.NodeFilter = NodeFilterImpl_1.NodeFilterImpl;\nvar NodeImpl_1 = require(\"./NodeImpl\");\nexports.Node = NodeImpl_1.NodeImpl;\nvar NodeIteratorImpl_1 = require(\"./NodeIteratorImpl\");\nexports.NodeIterator = NodeIteratorImpl_1.NodeIteratorImpl;\nvar NodeListImpl_1 = require(\"./NodeListImpl\");\nexports.NodeList = NodeListImpl_1.NodeListImpl;\nvar NodeListStaticImpl_1 = require(\"./NodeListStaticImpl\");\nexports.NodeListStatic = NodeListStaticImpl_1.NodeListStaticImpl;\nvar NonDocumentTypeChildNodeImpl_1 = require(\"./NonDocumentTypeChildNodeImpl\");\nvar NonElementParentNodeImpl_1 = require(\"./NonElementParentNodeImpl\");\nvar ParentNodeImpl_1 = require(\"./ParentNodeImpl\");\nvar ProcessingInstructionImpl_1 = require(\"./ProcessingInstructionImpl\");\nexports.ProcessingInstruction = ProcessingInstructionImpl_1.ProcessingInstructionImpl;\nvar RangeImpl_1 = require(\"./RangeImpl\");\nexports.Range = RangeImpl_1.RangeImpl;\nvar ShadowRootImpl_1 = require(\"./ShadowRootImpl\");\nexports.ShadowRoot = ShadowRootImpl_1.ShadowRootImpl;\nvar SlotableImpl_1 = require(\"./SlotableImpl\");\nvar StaticRangeImpl_1 = require(\"./StaticRangeImpl\");\nexports.StaticRange = StaticRangeImpl_1.StaticRangeImpl;\nvar TextImpl_1 = require(\"./TextImpl\");\nexports.Text = TextImpl_1.TextImpl;\nvar TraverserImpl_1 = require(\"./TraverserImpl\");\nexports.Traverser = TraverserImpl_1.TraverserImpl;\nvar TreeWalkerImpl_1 = require(\"./TreeWalkerImpl\");\nexports.TreeWalker = TreeWalkerImpl_1.TreeWalkerImpl;\nvar WindowImpl_1 = require(\"./WindowImpl\");\nexports.Window = WindowImpl_1.WindowImpl;\nvar XMLDocumentImpl_1 = require(\"./XMLDocumentImpl\");\nexports.XMLDocument = XMLDocumentImpl_1.XMLDocumentImpl;\n// Apply mixins\n// ChildNode\nutil_1.applyMixin(ElementImpl_1.ElementImpl, ChildNodeImpl_1.ChildNodeImpl);\nutil_1.applyMixin(CharacterDataImpl_1.CharacterDataImpl, ChildNodeImpl_1.ChildNodeImpl);\nutil_1.applyMixin(DocumentTypeImpl_1.DocumentTypeImpl, ChildNodeImpl_1.ChildNodeImpl);\n// DocumentOrShadowRoot\nutil_1.applyMixin(DocumentImpl_1.DocumentImpl, DocumentOrShadowRootImpl_1.DocumentOrShadowRootImpl);\nutil_1.applyMixin(ShadowRootImpl_1.ShadowRootImpl, DocumentOrShadowRootImpl_1.DocumentOrShadowRootImpl);\n// NonDocumentTypeChildNode\nutil_1.applyMixin(ElementImpl_1.ElementImpl, NonDocumentTypeChildNodeImpl_1.NonDocumentTypeChildNodeImpl);\nutil_1.applyMixin(CharacterDataImpl_1.CharacterDataImpl, NonDocumentTypeChildNodeImpl_1.NonDocumentTypeChildNodeImpl);\n// NonElementParentNode\nutil_1.applyMixin(DocumentImpl_1.DocumentImpl, NonElementParentNodeImpl_1.NonElementParentNodeImpl);\nutil_1.applyMixin(DocumentFragmentImpl_1.DocumentFragmentImpl, NonElementParentNodeImpl_1.NonElementParentNodeImpl);\n// ParentNode\nutil_1.applyMixin(DocumentImpl_1.DocumentImpl, ParentNodeImpl_1.ParentNodeImpl);\nutil_1.applyMixin(DocumentFragmentImpl_1.DocumentFragmentImpl, ParentNodeImpl_1.ParentNodeImpl);\nutil_1.applyMixin(ElementImpl_1.ElementImpl, ParentNodeImpl_1.ParentNodeImpl);\n// Slotable\nutil_1.applyMixin(TextImpl_1.TextImpl, SlotableImpl_1.SlotableImpl);\nutil_1.applyMixin(ElementImpl_1.ElementImpl, SlotableImpl_1.SlotableImpl);\n//# sourceMappingURL=index.js.map","module.exports = require(\"fs/promises\");","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents a cache of objects with a size limit.\n */\nvar ObjectCache = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `ObjectCache`.\n     *\n     * @param limit - maximum number of items to keep in the cache. When the limit\n     * is exceeded the first item is removed from the cache.\n     */\n    function ObjectCache(limit) {\n        if (limit === void 0) { limit = 1000; }\n        this._items = new Map();\n        this._limit = limit;\n    }\n    /**\n     * Gets an item from the cache.\n     *\n     * @param key - object key\n     */\n    ObjectCache.prototype.get = function (key) {\n        return this._items.get(key);\n    };\n    /**\n     * Adds a new item to the cache.\n     *\n     * @param key - object key\n     * @param value - object value\n     */\n    ObjectCache.prototype.set = function (key, value) {\n        this._items.set(key, value);\n        if (this._items.size > this._limit) {\n            var it_1 = this._items.keys().next();\n            /* istanbul ignore else */\n            if (!it_1.done) {\n                this._items.delete(it_1.value);\n            }\n        }\n    };\n    /**\n     * Removes an item from the cache.\n     *\n     * @param item - an item\n     */\n    ObjectCache.prototype.delete = function (key) {\n        return this._items.delete(key);\n    };\n    /**\n     * Determines if an item is in the cache.\n     *\n     * @param item - an item\n     */\n    ObjectCache.prototype.has = function (key) {\n        return this._items.has(key);\n    };\n    /**\n     * Removes all items from the cache.\n     */\n    ObjectCache.prototype.clear = function () {\n        this._items.clear();\n    };\n    Object.defineProperty(ObjectCache.prototype, \"size\", {\n        /**\n         * Gets the number of items in the cache.\n         */\n        get: function () { return this._items.size; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Applies the given callback function to all elements of the cache.\n     */\n    ObjectCache.prototype.forEach = function (callback, thisArg) {\n        this._items.forEach(function (v, k) { return callback.call(thisArg, k, v); });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    ObjectCache.prototype.keys = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items.keys())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    ObjectCache.prototype.values = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items.values())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    ObjectCache.prototype.entries = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items.entries())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    ObjectCache.prototype[Symbol.iterator] = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    Object.defineProperty(ObjectCache.prototype, Symbol.toStringTag, {\n        /**\n         * Returns the string tag of the cache.\n         */\n        get: function () {\n            return \"ObjectCache\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ObjectCache;\n}());\nexports.ObjectCache = ObjectCache;\n//# sourceMappingURL=ObjectCache.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar interfaces_1 = require(\"@oozcitak/dom/lib/dom/interfaces\");\nvar BaseWriter_1 = require(\"./BaseWriter\");\nvar util_2 = require(\"@oozcitak/dom/lib/util\");\n/**\n * Serializes XML nodes into strings.\n */\nvar XMLWriter = /** @class */ (function (_super) {\n    __extends(XMLWriter, _super);\n    /**\n     * Initializes a new instance of `XMLWriter`.\n     *\n     * @param builderOptions - XML builder options\n     * @param writerOptions - serialization options\n     */\n    function XMLWriter(builderOptions, writerOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        _this._indentation = {};\n        _this._lengthToLastNewline = 0;\n        // provide default options\n        _this._writerOptions = util_1.applyDefaults(writerOptions, {\n            wellFormed: false,\n            headless: false,\n            prettyPrint: false,\n            indent: \"  \",\n            newline: \"\\n\",\n            offset: 0,\n            width: 0,\n            allowEmptyTags: false,\n            indentTextOnlyNodes: false,\n            spaceBeforeSlash: false\n        });\n        return _this;\n    }\n    /**\n     * Produces an XML serialization of the given node.\n     *\n     * @param node - node to serialize\n     */\n    XMLWriter.prototype.serialize = function (node) {\n        this._refs = { suppressPretty: false, emptyNode: false, markup: \"\" };\n        // Serialize XML declaration\n        if (node.nodeType === interfaces_1.NodeType.Document && !this._writerOptions.headless) {\n            this.declaration(this._builderOptions.version, this._builderOptions.encoding, this._builderOptions.standalone);\n        }\n        // recursively serialize node\n        this.serializeNode(node, this._writerOptions.wellFormed);\n        // remove trailing newline\n        if (this._writerOptions.prettyPrint &&\n            this._refs.markup.slice(-this._writerOptions.newline.length) === this._writerOptions.newline) {\n            this._refs.markup = this._refs.markup.slice(0, -this._writerOptions.newline.length);\n        }\n        return this._refs.markup;\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.declaration = function (version, encoding, standalone) {\n        this._beginLine();\n        this._refs.markup += \"<?xml version=\\\"\" + version + \"\\\"\";\n        if (encoding !== undefined) {\n            this._refs.markup += \" encoding=\\\"\" + encoding + \"\\\"\";\n        }\n        if (standalone !== undefined) {\n            this._refs.markup += \" standalone=\\\"\" + (standalone ? \"yes\" : \"no\") + \"\\\"\";\n        }\n        this._refs.markup += \"?>\";\n        this._endLine();\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.docType = function (name, publicId, systemId) {\n        this._beginLine();\n        if (publicId && systemId) {\n            this._refs.markup += \"<!DOCTYPE \" + name + \" PUBLIC \\\"\" + publicId + \"\\\" \\\"\" + systemId + \"\\\">\";\n        }\n        else if (publicId) {\n            this._refs.markup += \"<!DOCTYPE \" + name + \" PUBLIC \\\"\" + publicId + \"\\\">\";\n        }\n        else if (systemId) {\n            this._refs.markup += \"<!DOCTYPE \" + name + \" SYSTEM \\\"\" + systemId + \"\\\">\";\n        }\n        else {\n            this._refs.markup += \"<!DOCTYPE \" + name + \">\";\n        }\n        this._endLine();\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.openTagBegin = function (name) {\n        this._beginLine();\n        this._refs.markup += \"<\" + name;\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.openTagEnd = function (name, selfClosing, voidElement) {\n        // do not indent text only elements or elements with empty text nodes\n        this._refs.suppressPretty = false;\n        this._refs.emptyNode = false;\n        if (this._writerOptions.prettyPrint && !selfClosing && !voidElement) {\n            var textOnlyNode = true;\n            var emptyNode = true;\n            var childNode = this.currentNode.firstChild;\n            var cdataCount = 0;\n            var textCount = 0;\n            while (childNode) {\n                if (util_2.Guard.isExclusiveTextNode(childNode)) {\n                    textCount++;\n                }\n                else if (util_2.Guard.isCDATASectionNode(childNode)) {\n                    cdataCount++;\n                }\n                else {\n                    textOnlyNode = false;\n                    emptyNode = false;\n                    break;\n                }\n                if (childNode.data !== '') {\n                    emptyNode = false;\n                }\n                childNode = childNode.nextSibling;\n            }\n            this._refs.suppressPretty = !this._writerOptions.indentTextOnlyNodes && textOnlyNode && ((cdataCount <= 1 && textCount === 0) || cdataCount === 0);\n            this._refs.emptyNode = emptyNode;\n        }\n        if ((voidElement || selfClosing || this._refs.emptyNode) && this._writerOptions.allowEmptyTags) {\n            this._refs.markup += \"></\" + name + \">\";\n        }\n        else {\n            this._refs.markup += voidElement ? \" />\" :\n                (selfClosing || this._refs.emptyNode) ? (this._writerOptions.spaceBeforeSlash ? \" />\" : \"/>\") : \">\";\n        }\n        this._endLine();\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.closeTag = function (name) {\n        if (!this._refs.emptyNode) {\n            this._beginLine();\n            this._refs.markup += \"</\" + name + \">\";\n        }\n        this._refs.suppressPretty = false;\n        this._refs.emptyNode = false;\n        this._endLine();\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.attribute = function (name, value) {\n        var str = name + \"=\\\"\" + value + \"\\\"\";\n        if (this._writerOptions.prettyPrint && this._writerOptions.width > 0 &&\n            this._refs.markup.length - this._lengthToLastNewline + 1 + str.length > this._writerOptions.width) {\n            this._endLine();\n            this._beginLine();\n            this._refs.markup += this._indent(1) + str;\n        }\n        else {\n            this._refs.markup += \" \" + str;\n        }\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.text = function (data) {\n        if (data !== '') {\n            this._beginLine();\n            this._refs.markup += data;\n            this._endLine();\n        }\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.cdata = function (data) {\n        if (data !== '') {\n            this._beginLine();\n            this._refs.markup += \"<![CDATA[\" + data + \"]]>\";\n            this._endLine();\n        }\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.comment = function (data) {\n        this._beginLine();\n        this._refs.markup += \"<!--\" + data + \"-->\";\n        this._endLine();\n    };\n    /** @inheritdoc */\n    XMLWriter.prototype.instruction = function (target, data) {\n        this._beginLine();\n        this._refs.markup += \"<?\" + (data === \"\" ? target : target + \" \" + data) + \"?>\";\n        this._endLine();\n    };\n    /**\n     * Produces characters to be prepended to a line of string in pretty-print\n     * mode.\n     */\n    XMLWriter.prototype._beginLine = function () {\n        if (this._writerOptions.prettyPrint && !this._refs.suppressPretty) {\n            this._refs.markup += this._indent(this._writerOptions.offset + this.level);\n        }\n    };\n    /**\n     * Produces characters to be appended to a line of string in pretty-print\n     * mode.\n     */\n    XMLWriter.prototype._endLine = function () {\n        if (this._writerOptions.prettyPrint && !this._refs.suppressPretty) {\n            this._refs.markup += this._writerOptions.newline;\n            this._lengthToLastNewline = this._refs.markup.length;\n        }\n    };\n    /**\n     * Produces an indentation string.\n     *\n     * @param level - depth of the tree\n     */\n    XMLWriter.prototype._indent = function (level) {\n        if (level <= 0) {\n            return \"\";\n        }\n        else if (this._indentation[level] !== undefined) {\n            return this._indentation[level];\n        }\n        else {\n            var str = this._writerOptions.indent.repeat(level);\n            this._indentation[level] = str;\n            return str;\n        }\n    };\n    return XMLWriter;\n}(BaseWriter_1.BaseWriter));\nexports.XMLWriter = XMLWriter;\n//# sourceMappingURL=XMLWriter.js.map","module.exports = require(\"tty\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar interfaces_1 = require(\"./interfaces\");\nvar EventTargetImpl_1 = require(\"./EventTargetImpl\");\nvar util_1 = require(\"../util\");\nvar DOMException_1 = require(\"./DOMException\");\nvar algorithm_1 = require(\"../algorithm\");\nvar URLAlgorithm_1 = require(\"@oozcitak/url/lib/URLAlgorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a generic XML node.\n */\nvar NodeImpl = /** @class */ (function (_super) {\n    __extends(NodeImpl, _super);\n    /**\n     * Initializes a new instance of `Node`.\n     */\n    function NodeImpl() {\n        var _this = _super.call(this) || this;\n        _this._parent = null;\n        _this._firstChild = null;\n        _this._lastChild = null;\n        _this._previousSibling = null;\n        _this._nextSibling = null;\n        return _this;\n    }\n    Object.defineProperty(NodeImpl.prototype, \"_childNodes\", {\n        get: function () {\n            return this.__childNodes || (this.__childNodes = algorithm_1.create_nodeList(this));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"_nodeDocument\", {\n        get: function () { return this._nodeDocumentOverride || DOMImpl_1.dom.window._associatedDocument; },\n        set: function (val) { this._nodeDocumentOverride = val; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"_registeredObserverList\", {\n        get: function () {\n            return this.__registeredObserverList || (this.__registeredObserverList = []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"nodeType\", {\n        /** @inheritdoc */\n        get: function () { return this._nodeType; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"nodeName\", {\n        /**\n         * Returns a string appropriate for the type of node.\n         */\n        get: function () {\n            if (util_1.Guard.isElementNode(this)) {\n                return this._htmlUppercasedQualifiedName;\n            }\n            else if (util_1.Guard.isAttrNode(this)) {\n                return this._qualifiedName;\n            }\n            else if (util_1.Guard.isExclusiveTextNode(this)) {\n                return \"#text\";\n            }\n            else if (util_1.Guard.isCDATASectionNode(this)) {\n                return \"#cdata-section\";\n            }\n            else if (util_1.Guard.isProcessingInstructionNode(this)) {\n                return this._target;\n            }\n            else if (util_1.Guard.isCommentNode(this)) {\n                return \"#comment\";\n            }\n            else if (util_1.Guard.isDocumentNode(this)) {\n                return \"#document\";\n            }\n            else if (util_1.Guard.isDocumentTypeNode(this)) {\n                return this._name;\n            }\n            else if (util_1.Guard.isDocumentFragmentNode(this)) {\n                return \"#document-fragment\";\n            }\n            else {\n                return \"\";\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"baseURI\", {\n        /**\n         * Gets the absolute base URL of the node.\n         */\n        get: function () {\n            /**\n             * The baseURI attribute’s getter must return node document’s document\n             * base URL, serialized.\n             * TODO: Implement in HTML DOM\n             * https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url\n             */\n            return URLAlgorithm_1.urlSerializer(this._nodeDocument._URL);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"isConnected\", {\n        /**\n         * Returns whether the node is rooted to a document node.\n         */\n        get: function () {\n            /**\n             * The isConnected attribute’s getter must return true, if context object\n             * is connected, and false otherwise.\n             */\n            return util_1.Guard.isElementNode(this) && algorithm_1.shadowTree_isConnected(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"ownerDocument\", {\n        /**\n         * Returns the parent document.\n         */\n        get: function () {\n            /**\n             * The ownerDocument attribute’s getter must return null, if the context\n             * object is a document, and the context object’s node document otherwise.\n             * _Note:_ The node document of a document is that document itself. All\n             * nodes have a node document at all times.\n             */\n            if (this._nodeType === interfaces_1.NodeType.Document)\n                return null;\n            else\n                return this._nodeDocument;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns the root node.\n     *\n     * @param options - if options has `composed = true` this function\n     * returns the node's shadow-including root, otherwise it returns\n     * the node's root node.\n     */\n    NodeImpl.prototype.getRootNode = function (options) {\n        /**\n         * The getRootNode(options) method, when invoked, must return context\n         * object’s shadow-including root if options’s composed is true,\n         * and context object’s root otherwise.\n         */\n        return algorithm_1.tree_rootNode(this, !!options && options.composed);\n    };\n    Object.defineProperty(NodeImpl.prototype, \"parentNode\", {\n        /**\n         * Returns the parent node.\n         */\n        get: function () {\n            /**\n             * The parentNode attribute’s getter must return the context object’s parent.\n             * _Note:_ An Attr node has no parent.\n             */\n            if (this._nodeType === interfaces_1.NodeType.Attribute) {\n                return null;\n            }\n            else {\n                return this._parent;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"parentElement\", {\n        /**\n         * Returns the parent element.\n         */\n        get: function () {\n            /**\n             * The parentElement attribute’s getter must return the context object’s\n             * parent element.\n             */\n            if (this._parent && util_1.Guard.isElementNode(this._parent)) {\n                return this._parent;\n            }\n            else {\n                return null;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Determines whether a node has any children.\n     */\n    NodeImpl.prototype.hasChildNodes = function () {\n        /**\n         * The hasChildNodes() method, when invoked, must return true if the context\n         * object has children, and false otherwise.\n         */\n        return (this._firstChild !== null);\n    };\n    Object.defineProperty(NodeImpl.prototype, \"childNodes\", {\n        /**\n         * Returns a {@link NodeList} of child nodes.\n         */\n        get: function () {\n            /**\n             * The childNodes attribute’s getter must return a NodeList rooted at the\n             * context object matching only children.\n             */\n            return this._childNodes;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"firstChild\", {\n        /**\n         * Returns the first child node.\n         */\n        get: function () {\n            /**\n             * The firstChild attribute’s getter must return the context object’s first\n             * child.\n             */\n            return this._firstChild;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"lastChild\", {\n        /**\n         * Returns the last child node.\n         */\n        get: function () {\n            /**\n             * The lastChild attribute’s getter must return the context object’s last\n             * child.\n             */\n            return this._lastChild;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"previousSibling\", {\n        /**\n         * Returns the previous sibling node.\n         */\n        get: function () {\n            /**\n             * The previousSibling attribute’s getter must return the context object’s\n             * previous sibling.\n             * _Note:_ An Attr node has no siblings.\n             */\n            return this._previousSibling;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"nextSibling\", {\n        /**\n         * Returns the next sibling node.\n         */\n        get: function () {\n            /**\n             * The nextSibling attribute’s getter must return the context object’s\n             * next sibling.\n             */\n            return this._nextSibling;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"nodeValue\", {\n        /**\n         * Gets or sets the data associated with a {@link CharacterData} node or the\n         * value of an {@link @Attr} node. For other node types returns `null`.\n         */\n        get: function () {\n            if (util_1.Guard.isAttrNode(this)) {\n                return this._value;\n            }\n            else if (util_1.Guard.isCharacterDataNode(this)) {\n                return this._data;\n            }\n            else {\n                return null;\n            }\n        },\n        set: function (value) {\n            if (value === null) {\n                value = '';\n            }\n            if (util_1.Guard.isAttrNode(this)) {\n                algorithm_1.attr_setAnExistingAttributeValue(this, value);\n            }\n            else if (util_1.Guard.isCharacterDataNode(this)) {\n                algorithm_1.characterData_replaceData(this, 0, this._data.length, value);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeImpl.prototype, \"textContent\", {\n        /**\n         * Returns the concatenation of data of all the {@link Text}\n         * node descendants in tree order. When set, replaces the text\n         * contents of the node with the given value.\n         */\n        get: function () {\n            if (util_1.Guard.isDocumentFragmentNode(this) || util_1.Guard.isElementNode(this)) {\n                return algorithm_1.text_descendantTextContent(this);\n            }\n            else if (util_1.Guard.isAttrNode(this)) {\n                return this._value;\n            }\n            else if (util_1.Guard.isCharacterDataNode(this)) {\n                return this._data;\n            }\n            else {\n                return null;\n            }\n        },\n        set: function (value) {\n            if (value === null) {\n                value = '';\n            }\n            if (util_1.Guard.isDocumentFragmentNode(this) || util_1.Guard.isElementNode(this)) {\n                algorithm_1.node_stringReplaceAll(value, this);\n            }\n            else if (util_1.Guard.isAttrNode(this)) {\n                algorithm_1.attr_setAnExistingAttributeValue(this, value);\n            }\n            else if (util_1.Guard.isCharacterDataNode(this)) {\n                algorithm_1.characterData_replaceData(this, 0, algorithm_1.tree_nodeLength(this), value);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Puts all {@link Text} nodes in the full depth of the sub-tree\n     * underneath this node into a \"normal\" form where only markup\n     * (e.g., tags, comments, processing instructions, CDATA sections,\n     * and entity references) separates {@link Text} nodes, i.e., there\n     * are no adjacent Text nodes.\n     */\n    NodeImpl.prototype.normalize = function () {\n        var e_1, _a, e_2, _b;\n        /**\n         * The normalize() method, when invoked, must run these steps for each\n         * descendant exclusive Text node node of context object:\n         */\n        var descendantNodes = [];\n        var node = algorithm_1.tree_getFirstDescendantNode(this, false, false, function (e) { return util_1.Guard.isExclusiveTextNode(e); });\n        while (node !== null) {\n            descendantNodes.push(node);\n            node = algorithm_1.tree_getNextDescendantNode(this, node, false, false, function (e) { return util_1.Guard.isExclusiveTextNode(e); });\n        }\n        for (var i = 0; i < descendantNodes.length; i++) {\n            var node_1 = descendantNodes[i];\n            if (node_1._parent === null)\n                continue;\n            /**\n             * 1. Let length be node’s length.\n             * 2. If length is zero, then remove node and continue with the next\n             * exclusive Text node, if any.\n             */\n            var length = algorithm_1.tree_nodeLength(node_1);\n            if (length === 0) {\n                algorithm_1.mutation_remove(node_1, node_1._parent);\n                continue;\n            }\n            /**\n             * 3. Let data be the concatenation of the data of node’s contiguous\n             * exclusive Text nodes (excluding itself), in tree order.\n             */\n            var textSiblings = [];\n            var data = '';\n            try {\n                for (var _c = (e_1 = void 0, __values(algorithm_1.text_contiguousExclusiveTextNodes(node_1))), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var sibling = _d.value;\n                    textSiblings.push(sibling);\n                    data += sibling._data;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            /**\n             * 4. Replace data with node node, offset length, count 0, and data data.\n             */\n            algorithm_1.characterData_replaceData(node_1, length, 0, data);\n            /**\n             * 5. Let currentNode be node’s next sibling.\n             * 6. While currentNode is an exclusive Text node:\n             */\n            if (DOMImpl_1.dom.rangeList.size !== 0) {\n                var currentNode = node_1._nextSibling;\n                while (currentNode !== null && util_1.Guard.isExclusiveTextNode(currentNode)) {\n                    /**\n                     * 6.1. For each live range whose start node is currentNode, add length\n                     * to its start offset and set its start node to node.\n                     * 6.2. For each live range whose end node is currentNode, add length to\n                     * its end offset and set its end node to node.\n                     * 6.3. For each live range whose start node is currentNode’s parent and\n                     * start offset is currentNode’s index, set its start node to node and\n                     * its start offset to length.\n                     * 6.4. For each live range whose end node is currentNode’s parent and\n                     * end offset is currentNode’s index, set its end node to node and its\n                     * end offset to length.\n                     */\n                    var cn = currentNode;\n                    var index = algorithm_1.tree_index(cn);\n                    try {\n                        for (var _e = (e_2 = void 0, __values(DOMImpl_1.dom.rangeList)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                            var range = _f.value;\n                            if (range._start[0] === cn) {\n                                range._start[0] = node_1;\n                                range._start[1] += length;\n                            }\n                            if (range._end[0] === cn) {\n                                range._end[0] = node_1;\n                                range._end[1] += length;\n                            }\n                            if (range._start[0] === cn._parent && range._start[1] === index) {\n                                range._start[0] = node_1;\n                                range._start[1] = length;\n                            }\n                            if (range._end[0] === cn._parent && range._end[1] === index) {\n                                range._end[0] = node_1;\n                                range._end[1] = length;\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                    /**\n                     * 6.5. Add currentNode’s length to length.\n                     * 6.6. Set currentNode to its next sibling.\n                     */\n                    length += algorithm_1.tree_nodeLength(currentNode);\n                    currentNode = currentNode._nextSibling;\n                }\n            }\n            /**\n             * 7. Remove node’s contiguous exclusive Text nodes (excluding itself),\n             * in tree order.\n             */\n            for (var i_1 = 0; i_1 < textSiblings.length; i_1++) {\n                var sibling = textSiblings[i_1];\n                if (sibling._parent === null)\n                    continue;\n                algorithm_1.mutation_remove(sibling, sibling._parent);\n            }\n        }\n    };\n    /**\n     * Returns a duplicate of this node, i.e., serves as a generic copy\n     * constructor for nodes. The duplicate node has no parent\n     * ({@link parentNode} returns `null`).\n     *\n     * @param deep - if `true`, recursively clone the subtree under the\n     * specified node. If `false`, clone only the node itself (and its\n     * attributes, if it is an {@link Element}).\n     */\n    NodeImpl.prototype.cloneNode = function (deep) {\n        if (deep === void 0) { deep = false; }\n        /**\n         * 1. If context object is a shadow root, then throw a \"NotSupportedError\"\n         * DOMException.\n         * 2. Return a clone of the context object, with the clone children flag set\n         * if deep is true.\n         */\n        if (util_1.Guard.isShadowRoot(this))\n            throw new DOMException_1.NotSupportedError();\n        return algorithm_1.node_clone(this, null, deep);\n    };\n    /**\n     * Determines if the given node is equal to this one.\n     *\n     * @param node - the node to compare with\n     */\n    NodeImpl.prototype.isEqualNode = function (node) {\n        if (node === void 0) { node = null; }\n        /**\n         * The isEqualNode(otherNode) method, when invoked, must return true if\n         * otherNode is non-null and context object equals otherNode, and false\n         * otherwise.\n         */\n        return (node !== null && algorithm_1.node_equals(this, node));\n    };\n    /**\n     * Determines if the given node is reference equal to this one.\n     *\n     * @param node - the node to compare with\n     */\n    NodeImpl.prototype.isSameNode = function (node) {\n        if (node === void 0) { node = null; }\n        /**\n         * The isSameNode(otherNode) method, when invoked, must return true if\n         * otherNode is context object, and false otherwise.\n         */\n        return (this === node);\n    };\n    /**\n     * Returns a bitmask indicating the position of the given `node`\n     * relative to this node.\n     */\n    NodeImpl.prototype.compareDocumentPosition = function (other) {\n        /**\n         * 1. If context object is other, then return zero.\n         * 2. Let node1 be other and node2 be context object.\n         * 3. Let attr1 and attr2 be null.\n         * attr1’s element.\n         */\n        if (other === this)\n            return 0;\n        var node1 = other;\n        var node2 = this;\n        var attr1 = null;\n        var attr2 = null;\n        /**\n         * 4. If node1 is an attribute, then set attr1 to node1 and node1 to\n         * attr1’s element.\n         */\n        if (util_1.Guard.isAttrNode(node1)) {\n            attr1 = node1;\n            node1 = attr1._element;\n        }\n        /**\n         * 5. If node2 is an attribute, then:\n         */\n        if (util_1.Guard.isAttrNode(node2)) {\n            /**\n             * 5.1. Set attr2 to node2 and node2 to attr2’s element.\n             */\n            attr2 = node2;\n            node2 = attr2._element;\n            /**\n             * 5.2. If attr1 and node1 are non-null, and node2 is node1, then:\n             */\n            if (attr1 && node1 && (node1 === node2)) {\n                /**\n                 * 5.2. For each attr in node2’s attribute list:\n                 */\n                for (var i = 0; i < node2._attributeList.length; i++) {\n                    var attr = node2._attributeList[i];\n                    /**\n                     * 5.2.1. If attr equals attr1, then return the result of adding\n                     * DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC and\n                     * DOCUMENT_POSITION_PRECEDING.\n                     * 5.2.2. If attr equals attr2, then return the result of adding\n                     * DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC and\n                     * DOCUMENT_POSITION_FOLLOWING.\n                     */\n                    if (algorithm_1.node_equals(attr, attr1)) {\n                        return interfaces_1.Position.ImplementationSpecific | interfaces_1.Position.Preceding;\n                    }\n                    else if (algorithm_1.node_equals(attr, attr2)) {\n                        return interfaces_1.Position.ImplementationSpecific | interfaces_1.Position.Following;\n                    }\n                }\n            }\n        }\n        /**\n         * 6. If node1 or node2 is null, or node1’s root is not node2’s root, then\n         * return the result of adding DOCUMENT_POSITION_DISCONNECTED,\n         * DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC, and either\n         * DOCUMENT_POSITION_PRECEDING or DOCUMENT_POSITION_FOLLOWING,\n         * with the constraint that this is to be consistent, together.\n         */\n        if (node1 === null || node2 === null ||\n            algorithm_1.tree_rootNode(node1) !== algorithm_1.tree_rootNode(node2)) {\n            // nodes are disconnected\n            // return a random result but cache the value for consistency\n            return interfaces_1.Position.Disconnected | interfaces_1.Position.ImplementationSpecific |\n                (DOMImpl_1.dom.compareCache.check(this, other) ? interfaces_1.Position.Preceding : interfaces_1.Position.Following);\n        }\n        /**\n         * 7. If node1 is an ancestor of node2 and attr1 is null, or node1 is node2\n         * and attr2 is non-null, then return the result of adding\n         * DOCUMENT_POSITION_CONTAINS to DOCUMENT_POSITION_PRECEDING.\n         */\n        if ((!attr1 && algorithm_1.tree_isAncestorOf(node2, node1)) ||\n            (attr2 && (node1 === node2))) {\n            return interfaces_1.Position.Contains | interfaces_1.Position.Preceding;\n        }\n        /**\n         * 8. If node1 is a descendant of node2 and attr2 is null, or node1 is node2\n         * and attr1 is non-null, then return the result of adding\n         * DOCUMENT_POSITION_CONTAINED_BY to DOCUMENT_POSITION_FOLLOWING.\n         */\n        if ((!attr2 && algorithm_1.tree_isDescendantOf(node2, node1)) ||\n            (attr1 && (node1 === node2))) {\n            return interfaces_1.Position.ContainedBy | interfaces_1.Position.Following;\n        }\n        /**\n         * 9. If node1 is preceding node2, then return DOCUMENT_POSITION_PRECEDING.\n         */\n        if (algorithm_1.tree_isPreceding(node2, node1))\n            return interfaces_1.Position.Preceding;\n        /**\n         * 10. Return DOCUMENT_POSITION_FOLLOWING.\n         */\n        return interfaces_1.Position.Following;\n    };\n    /**\n     * Returns `true` if given node is an inclusive descendant of this\n     * node, and `false` otherwise (including when other node is `null`).\n     *\n     * @param other - the node to check\n     */\n    NodeImpl.prototype.contains = function (other) {\n        /**\n         * The contains(other) method, when invoked, must return true if other is an\n         * inclusive descendant of context object, and false otherwise (including\n         * when other is null).\n         */\n        if (other === null)\n            return false;\n        return algorithm_1.tree_isDescendantOf(this, other, true);\n    };\n    /**\n     * Returns the prefix for a given namespace URI, if present, and\n     * `null` if not.\n     *\n     * @param namespace - the namespace to search\n     */\n    NodeImpl.prototype.lookupPrefix = function (namespace) {\n        /**\n         * 1. If namespace is null or the empty string, then return null.\n         * 2. Switch on the context object:\n         */\n        if (!namespace)\n            return null;\n        if (util_1.Guard.isElementNode(this)) {\n            /**\n             * Return the result of locating a namespace prefix for it using\n             * namespace.\n             */\n            return algorithm_1.node_locateANamespacePrefix(this, namespace);\n        }\n        else if (util_1.Guard.isDocumentNode(this)) {\n            /**\n             * Return the result of locating a namespace prefix for its document\n             * element, if its document element is non-null, and null otherwise.\n             */\n            if (this.documentElement === null) {\n                return null;\n            }\n            else {\n                return algorithm_1.node_locateANamespacePrefix(this.documentElement, namespace);\n            }\n        }\n        else if (util_1.Guard.isDocumentTypeNode(this) || util_1.Guard.isDocumentFragmentNode(this)) {\n            return null;\n        }\n        else if (util_1.Guard.isAttrNode(this)) {\n            /**\n             * Return the result of locating a namespace prefix for its element,\n             * if its element is non-null, and null otherwise.\n             */\n            if (this._element === null) {\n                return null;\n            }\n            else {\n                return algorithm_1.node_locateANamespacePrefix(this._element, namespace);\n            }\n        }\n        else {\n            /**\n             * Return the result of locating a namespace prefix for its parent\n             * element, if its parent element is non-null, and null otherwise.\n             */\n            if (this._parent !== null && util_1.Guard.isElementNode(this._parent)) {\n                return algorithm_1.node_locateANamespacePrefix(this._parent, namespace);\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    /**\n     * Returns the namespace URI for a given prefix if present, and `null`\n     * if not.\n     *\n     * @param prefix - the prefix to search\n     */\n    NodeImpl.prototype.lookupNamespaceURI = function (prefix) {\n        /**\n         * 1. If prefix is the empty string, then set it to null.\n         * 2. Return the result of running locate a namespace for the context object\n         * using prefix.\n         */\n        return algorithm_1.node_locateANamespace(this, prefix || null);\n    };\n    /**\n     * Returns `true` if the namespace is the default namespace on this\n     * node or `false` if not.\n     *\n     * @param namespace - the namespace to check\n     */\n    NodeImpl.prototype.isDefaultNamespace = function (namespace) {\n        /**\n         * 1. If namespace is the empty string, then set it to null.\n         * 2. Let defaultNamespace be the result of running locate a namespace for\n         * context object using null.\n         * 3. Return true if defaultNamespace is the same as namespace, and false otherwise.\n         */\n        if (!namespace)\n            namespace = null;\n        var defaultNamespace = algorithm_1.node_locateANamespace(this, null);\n        return (defaultNamespace === namespace);\n    };\n    /**\n     * Inserts the node `newChild` before the existing child node\n     * `refChild`. If `refChild` is `null`, inserts `newChild` at the end\n     * of the list of children.\n     *\n     * If `newChild` is a {@link DocumentFragment} object, all of its\n     * children are inserted, in the same order, before `refChild`.\n     *\n     * If `newChild` is already in the tree, it is first removed.\n     *\n     * @param newChild - the node to insert\n     * @param refChild - the node before which the new node must be\n     *   inserted\n     *\n     * @returns the newly inserted child node\n     */\n    NodeImpl.prototype.insertBefore = function (newChild, refChild) {\n        /**\n         * The insertBefore(node, child) method, when invoked, must return the\n         * result of pre-inserting node into context object before child.\n         */\n        return algorithm_1.mutation_preInsert(newChild, this, refChild);\n    };\n    /**\n     * Adds the node `newChild` to the end of the list of children of this\n     * node, and returns it. If `newChild` is already in the tree, it is\n     * first removed.\n     *\n     * If `newChild` is a {@link DocumentFragment} object, the entire\n     * contents of the document fragment are moved into the child list of\n     * this node.\n     *\n     * @param newChild - the node to add\n     *\n     * @returns the newly inserted child node\n     */\n    NodeImpl.prototype.appendChild = function (newChild) {\n        /**\n         * The appendChild(node) method, when invoked, must return the result of\n         * appending node to context object.\n         */\n        return algorithm_1.mutation_append(newChild, this);\n    };\n    /**\n     * Replaces the child node `oldChild` with `newChild` in the list of\n     * children, and returns the `oldChild` node. If `newChild` is already\n     * in the tree, it is first removed.\n     *\n     * @param newChild - the new node to put in the child list\n     * @param oldChild - the node being replaced in the list\n     *\n     * @returns the removed child node\n     */\n    NodeImpl.prototype.replaceChild = function (newChild, oldChild) {\n        /**\n         * The replaceChild(node, child) method, when invoked, must return the\n         * result of replacing child with node within context object.\n         */\n        return algorithm_1.mutation_replace(oldChild, newChild, this);\n    };\n    /**\n    * Removes the child node indicated by `oldChild` from the list of\n    * children, and returns it.\n    *\n    * @param oldChild - the node being removed from the list\n    *\n    * @returns the removed child node\n    */\n    NodeImpl.prototype.removeChild = function (oldChild) {\n        /**\n         * The removeChild(child) method, when invoked, must return the result of\n         * pre-removing child from context object.\n         */\n        return algorithm_1.mutation_preRemove(oldChild, this);\n    };\n    /**\n     * Gets the parent event target for the given event.\n     *\n     * @param event - an event\n     */\n    NodeImpl.prototype._getTheParent = function (event) {\n        /**\n         * A node’s get the parent algorithm, given an event, returns the node’s\n         * assigned slot, if node is assigned, and node’s parent otherwise.\n         */\n        if (util_1.Guard.isSlotable(this) && algorithm_1.shadowTree_isAssigned(this)) {\n            return this._assignedSlot;\n        }\n        else {\n            return this._parent;\n        }\n    };\n    NodeImpl.ELEMENT_NODE = 1;\n    NodeImpl.ATTRIBUTE_NODE = 2;\n    NodeImpl.TEXT_NODE = 3;\n    NodeImpl.CDATA_SECTION_NODE = 4;\n    NodeImpl.ENTITY_REFERENCE_NODE = 5;\n    NodeImpl.ENTITY_NODE = 6;\n    NodeImpl.PROCESSING_INSTRUCTION_NODE = 7;\n    NodeImpl.COMMENT_NODE = 8;\n    NodeImpl.DOCUMENT_NODE = 9;\n    NodeImpl.DOCUMENT_TYPE_NODE = 10;\n    NodeImpl.DOCUMENT_FRAGMENT_NODE = 11;\n    NodeImpl.NOTATION_NODE = 12;\n    NodeImpl.DOCUMENT_POSITION_DISCONNECTED = 0x01;\n    NodeImpl.DOCUMENT_POSITION_PRECEDING = 0x02;\n    NodeImpl.DOCUMENT_POSITION_FOLLOWING = 0x04;\n    NodeImpl.DOCUMENT_POSITION_CONTAINS = 0x08;\n    NodeImpl.DOCUMENT_POSITION_CONTAINED_BY = 0x10;\n    NodeImpl.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 0x20;\n    return NodeImpl;\n}(EventTargetImpl_1.EventTargetImpl));\nexports.NodeImpl = NodeImpl;\n/**\n * A performance tweak to share an empty set between all node classes. This will\n * be overwritten by element, document and document fragment nodes to supply an\n * actual set of nodes.\n */\nNodeImpl.prototype._children = new util_1.EmptySet();\n/**\n * Define constants on prototype.\n */\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"ELEMENT_NODE\", 1);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"ATTRIBUTE_NODE\", 2);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"TEXT_NODE\", 3);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"CDATA_SECTION_NODE\", 4);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"ENTITY_REFERENCE_NODE\", 5);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"ENTITY_NODE\", 6);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"PROCESSING_INSTRUCTION_NODE\", 7);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"COMMENT_NODE\", 8);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_NODE\", 9);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_TYPE_NODE\", 10);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_FRAGMENT_NODE\", 11);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"NOTATION_NODE\", 12);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_POSITION_DISCONNECTED\", 0x01);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_POSITION_PRECEDING\", 0x02);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_POSITION_FOLLOWING\", 0x04);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_POSITION_CONTAINS\", 0x08);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_POSITION_CONTAINED_BY\", 0x10);\nWebIDLAlgorithm_1.idl_defineConst(NodeImpl.prototype, \"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC\", 0x20);\n//# sourceMappingURL=NodeImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Flattens the given options argument.\n *\n * @param options - options argument\n */\nfunction eventTarget_flatten(options) {\n    /**\n     * 1. If options is a boolean, then return options.\n     * 2. Return options’s capture.\n     */\n    if (util_1.isBoolean(options)) {\n        return options;\n    }\n    else {\n        return options.capture || false;\n    }\n}\nexports.eventTarget_flatten = eventTarget_flatten;\n/**\n * Flattens the given options argument.\n *\n * @param options - options argument\n */\nfunction eventTarget_flattenMore(options) {\n    /**\n     * 1. Let capture be the result of flattening options.\n     * 2. Let once and passive be false.\n     * 3. If options is a dictionary, then set passive to options’s passive and\n     * once to options’s once.\n     * 4. Return capture, passive, and once.\n     */\n    var capture = eventTarget_flatten(options);\n    var once = false;\n    var passive = false;\n    if (!util_1.isBoolean(options)) {\n        once = options.once || false;\n        passive = options.passive || false;\n    }\n    return [capture, passive, once];\n}\nexports.eventTarget_flattenMore = eventTarget_flattenMore;\n/**\n * Adds a new event listener.\n *\n * @param eventTarget - event target\n * @param listener - event listener\n */\nfunction eventTarget_addEventListener(eventTarget, listener) {\n    /**\n     * 1. If eventTarget is a ServiceWorkerGlobalScope object, its service\n     * worker’s script resource’s has ever been evaluated flag is set, and\n     * listener’s type matches the type attribute value of any of the service\n     * worker events, then report a warning to the console that this might not\n     * give the expected results. [SERVICE-WORKERS]\n     */\n    // TODO: service worker\n    /**\n     * 2. If listener’s callback is null, then return.\n     */\n    if (listener.callback === null)\n        return;\n    /**\n     * 3. If eventTarget’s event listener list does not contain an event listener\n     * whose type is listener’s type, callback is listener’s callback, and capture\n     * is listener’s capture, then append listener to eventTarget’s event listener\n     * list.\n     */\n    for (var i = 0; i < eventTarget._eventListenerList.length; i++) {\n        var entry = eventTarget._eventListenerList[i];\n        if (entry.type === listener.type && entry.callback.handleEvent === listener.callback.handleEvent\n            && entry.capture === listener.capture) {\n            return;\n        }\n    }\n    eventTarget._eventListenerList.push(listener);\n}\nexports.eventTarget_addEventListener = eventTarget_addEventListener;\n/**\n * Removes an event listener.\n *\n * @param eventTarget - event target\n * @param listener - event listener\n */\nfunction eventTarget_removeEventListener(eventTarget, listener, index) {\n    /**\n     * 1. If eventTarget is a ServiceWorkerGlobalScope object and its service\n     * worker’s set of event types to handle contains type, then report a\n     * warning to the console that this might not give the expected results.\n     * [SERVICE-WORKERS]\n     */\n    // TODO: service worker\n    /**\n     * 2. Set listener’s removed to true and remove listener from eventTarget’s\n     * event listener list.\n     */\n    listener.removed = true;\n    eventTarget._eventListenerList.splice(index, 1);\n}\nexports.eventTarget_removeEventListener = eventTarget_removeEventListener;\n/**\n * Removes all event listeners.\n *\n * @param eventTarget - event target\n */\nfunction eventTarget_removeAllEventListeners(eventTarget) {\n    /**\n     * To remove all event listeners, given an EventTarget object eventTarget,\n     * for each listener of eventTarget’s event listener list, remove an event\n     * listener with eventTarget and listener.\n     */\n    var e_1, _a;\n    try {\n        for (var _b = __values(eventTarget._eventListenerList), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var e = _c.value;\n            e.removed = true;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    eventTarget._eventListenerList.length = 0;\n}\nexports.eventTarget_removeAllEventListeners = eventTarget_removeAllEventListeners;\n//# sourceMappingURL=EventTargetAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ElementAlgorithm_1 = require(\"./ElementAlgorithm\");\n/**\n * Changes the value of an existing attribute.\n *\n * @param attribute - an attribute node\n * @param value - attribute value\n */\nfunction attr_setAnExistingAttributeValue(attribute, value) {\n    /**\n     * 1. If attribute’s element is null, then set attribute’s value to value.\n     * 2. Otherwise, change attribute from attribute’s element to value.\n     */\n    if (attribute._element === null) {\n        attribute._value = value;\n    }\n    else {\n        ElementAlgorithm_1.element_change(attribute, attribute._element, value);\n    }\n}\nexports.attr_setAnExistingAttributeValue = attr_setAnExistingAttributeValue;\n//# sourceMappingURL=AttrAlgorithm.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar DOMException_1 = require(\"./DOMException\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a token set.\n */\nvar DOMTokenListImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `DOMTokenList`.\n     *\n     * @param element - associated element\n     * @param attribute - associated attribute\n     */\n    function DOMTokenListImpl(element, attribute) {\n        /**\n         * 1. Let element be associated element.\n         * 2. Let localName be associated attribute’s local name.\n         * 3. Let value be the result of getting an attribute value given element\n         * and localName.\n         * 4. Run the attribute change steps for element, localName, value, value,\n         * and null.\n         */\n        this._element = element;\n        this._attribute = attribute;\n        this._tokenSet = new Set();\n        var localName = attribute._localName;\n        var value = algorithm_1.element_getAnAttributeValue(element, localName);\n        // define a closure to be called when the associated attribute's value changes\n        var thisObj = this;\n        function updateTokenSet(element, localName, oldValue, value, namespace) {\n            /**\n             * 1. If localName is associated attribute’s local name, namespace is null,\n             * and value is null, then empty token set.\n             * 2. Otherwise, if localName is associated attribute’s local name,\n             * namespace is null, then set token set to value, parsed.\n             */\n            if (localName === thisObj._attribute._localName && namespace === null) {\n                if (!value)\n                    thisObj._tokenSet.clear();\n                else\n                    thisObj._tokenSet = algorithm_1.orderedSet_parse(value);\n            }\n        }\n        // add the closure to the associated element's attribute change steps\n        this._element._attributeChangeSteps.push(updateTokenSet);\n        if (DOMImpl_1.dom.features.steps) {\n            algorithm_1.dom_runAttributeChangeSteps(element, localName, value, value, null);\n        }\n    }\n    Object.defineProperty(DOMTokenListImpl.prototype, \"length\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The length attribute' getter must return context object’s token set’s\n             * size.\n             */\n            return this._tokenSet.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.item = function (index) {\n        var e_1, _a;\n        /**\n         * 1. If index is equal to or greater than context object’s token set’s\n         * size, then return null.\n         * 2. Return context object’s token set[index].\n         */\n        var i = 0;\n        try {\n            for (var _b = __values(this._tokenSet), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var token = _c.value;\n                if (i === index)\n                    return token;\n                i++;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return null;\n    };\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.contains = function (token) {\n        /**\n         * The contains(token) method, when invoked, must return true if context\n         * object’s token set[token] exists, and false otherwise.\n         */\n        return this._tokenSet.has(token);\n    };\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.add = function () {\n        var e_2, _a;\n        var tokens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tokens[_i] = arguments[_i];\n        }\n        try {\n            /**\n             * 1. For each token in tokens:\n             * 1.1. If token is the empty string, then throw a \"SyntaxError\"\n             * DOMException.\n             * 1.2. If token contains any ASCII whitespace, then throw an\n             * \"InvalidCharacterError\" DOMException.\n             * 2. For each token in tokens, append token to context object’s token set.\n             * 3. Run the update steps.\n             */\n            for (var tokens_1 = __values(tokens), tokens_1_1 = tokens_1.next(); !tokens_1_1.done; tokens_1_1 = tokens_1.next()) {\n                var token = tokens_1_1.value;\n                if (token === '') {\n                    throw new DOMException_1.SyntaxError(\"Cannot add an empty token.\");\n                }\n                else if (infra_1.codePoint.ASCIIWhiteSpace.test(token)) {\n                    throw new DOMException_1.InvalidCharacterError(\"Token cannot contain whitespace.\");\n                }\n                else {\n                    this._tokenSet.add(token);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (tokens_1_1 && !tokens_1_1.done && (_a = tokens_1.return)) _a.call(tokens_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        algorithm_1.tokenList_updateSteps(this);\n    };\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.remove = function () {\n        var e_3, _a;\n        var tokens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tokens[_i] = arguments[_i];\n        }\n        try {\n            /**\n             * 1. For each token in tokens:\n             * 1.1. If token is the empty string, then throw a \"SyntaxError\"\n             * DOMException.\n             * 1.2. If token contains any ASCII whitespace, then throw an\n             * \"InvalidCharacterError\" DOMException.\n             * 2. For each token in tokens, remove token from context object’s token set.\n             * 3. Run the update steps.\n             */\n            for (var tokens_2 = __values(tokens), tokens_2_1 = tokens_2.next(); !tokens_2_1.done; tokens_2_1 = tokens_2.next()) {\n                var token = tokens_2_1.value;\n                if (token === '') {\n                    throw new DOMException_1.SyntaxError(\"Cannot remove an empty token.\");\n                }\n                else if (infra_1.codePoint.ASCIIWhiteSpace.test(token)) {\n                    throw new DOMException_1.InvalidCharacterError(\"Token cannot contain whitespace.\");\n                }\n                else {\n                    this._tokenSet.delete(token);\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (tokens_2_1 && !tokens_2_1.done && (_a = tokens_2.return)) _a.call(tokens_2);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        algorithm_1.tokenList_updateSteps(this);\n    };\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.toggle = function (token, force) {\n        if (force === void 0) { force = undefined; }\n        /**\n         * 1. If token is the empty string, then throw a \"SyntaxError\" DOMException.\n         * 2. If token contains any ASCII whitespace, then throw an\n         * \"InvalidCharacterError\" DOMException.\n         */\n        if (token === '') {\n            throw new DOMException_1.SyntaxError(\"Cannot toggle an empty token.\");\n        }\n        else if (infra_1.codePoint.ASCIIWhiteSpace.test(token)) {\n            throw new DOMException_1.InvalidCharacterError(\"Token cannot contain whitespace.\");\n        }\n        /**\n         * 3. If context object’s token set[token] exists, then:\n         */\n        if (this._tokenSet.has(token)) {\n            /**\n             * 3.1. If force is either not given or is false, then remove token from\n             * context object’s token set, run the update steps and return false.\n             * 3.2. Return true.\n             */\n            if (force === undefined || force === false) {\n                this._tokenSet.delete(token);\n                algorithm_1.tokenList_updateSteps(this);\n                return false;\n            }\n            return true;\n        }\n        /**\n         * 4. Otherwise, if force not given or is true, append token to context\n         * object’s token set, run the update steps, and return true.\n         */\n        if (force === undefined || force === true) {\n            this._tokenSet.add(token);\n            algorithm_1.tokenList_updateSteps(this);\n            return true;\n        }\n        /**\n         * 5. Return false.\n         */\n        return false;\n    };\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.replace = function (token, newToken) {\n        /**\n         * 1. If either token or newToken is the empty string, then throw a\n         * \"SyntaxError\" DOMException.\n         * 2. If either token or newToken contains any ASCII whitespace, then throw\n         * an \"InvalidCharacterError\" DOMException.\n         */\n        if (token === '' || newToken === '') {\n            throw new DOMException_1.SyntaxError(\"Cannot replace an empty token.\");\n        }\n        else if (infra_1.codePoint.ASCIIWhiteSpace.test(token) || infra_1.codePoint.ASCIIWhiteSpace.test(newToken)) {\n            throw new DOMException_1.InvalidCharacterError(\"Token cannot contain whitespace.\");\n        }\n        /**\n         * 3. If context object’s token set does not contain token, then return\n         * false.\n         */\n        if (!this._tokenSet.has(token))\n            return false;\n        /**\n         * 4. Replace token in context object’s token set with newToken.\n         * 5. Run the update steps.\n         * 6. Return true.\n         */\n        infra_1.set.replace(this._tokenSet, token, newToken);\n        algorithm_1.tokenList_updateSteps(this);\n        return true;\n    };\n    /** @inheritdoc */\n    DOMTokenListImpl.prototype.supports = function (token) {\n        /**\n         * 1. Let result be the return value of validation steps called with token.\n         * 2. Return result.\n         */\n        return algorithm_1.tokenList_validationSteps(this, token);\n    };\n    Object.defineProperty(DOMTokenListImpl.prototype, \"value\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The value attribute must return the result of running context object’s\n             * serialize steps.\n             */\n            return algorithm_1.tokenList_serializeSteps(this);\n        },\n        set: function (value) {\n            /**\n             * Setting the value attribute must set an attribute value for the\n             * associated element using associated attribute’s local name and the given\n             * value.\n             */\n            algorithm_1.element_setAnAttributeValue(this._element, this._attribute._localName, value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns an iterator for the token set.\n     */\n    DOMTokenListImpl.prototype[Symbol.iterator] = function () {\n        var it = this._tokenSet[Symbol.iterator]();\n        return {\n            next: function () {\n                return it.next();\n            }\n        };\n    };\n    /**\n     * Creates a new `DOMTokenList`.\n     *\n     * @param element - associated element\n     * @param attribute - associated attribute\n     */\n    DOMTokenListImpl._create = function (element, attribute) {\n        return new DOMTokenListImpl(element, attribute);\n    };\n    return DOMTokenListImpl;\n}());\nexports.DOMTokenListImpl = DOMTokenListImpl;\n//# sourceMappingURL=DOMTokenListImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventTargetImpl_1 = require(\"./EventTargetImpl\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a signal object that communicates with a DOM request and abort\n * it through an AbortController.\n */\nvar AbortSignalImpl = /** @class */ (function (_super) {\n    __extends(AbortSignalImpl, _super);\n    /**\n     * Initializes a new instance of `AbortSignal`.\n     */\n    function AbortSignalImpl() {\n        var _this = _super.call(this) || this;\n        _this._abortedFlag = false;\n        _this._abortAlgorithms = new Set();\n        return _this;\n    }\n    Object.defineProperty(AbortSignalImpl.prototype, \"aborted\", {\n        /** @inheritdoc */\n        get: function () { return this._abortedFlag; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbortSignalImpl.prototype, \"onabort\", {\n        /** @inheritdoc */\n        get: function () {\n            return algorithm_1.event_getterEventHandlerIDLAttribute(this, \"onabort\");\n        },\n        set: function (val) {\n            algorithm_1.event_setterEventHandlerIDLAttribute(this, \"onabort\", val);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new `AbortSignal`.\n     */\n    AbortSignalImpl._create = function () {\n        return new AbortSignalImpl();\n    };\n    return AbortSignalImpl;\n}(EventTargetImpl_1.EventTargetImpl));\nexports.AbortSignalImpl = AbortSignalImpl;\n//# sourceMappingURL=AbortSignalImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar CreateAlgorithm_1 = require(\"../algorithm/CreateAlgorithm\");\n/**\n * Represents an object implementing DOM algorithms.\n */\nvar DOMImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `DOM`.\n     */\n    function DOMImpl() {\n        this._features = {\n            mutationObservers: true,\n            customElements: true,\n            slots: true,\n            steps: true\n        };\n        this._window = null;\n        this._compareCache = new util_1.CompareCache();\n        this._rangeList = new util_1.FixedSizeSet();\n    }\n    /**\n     * Sets DOM algorithm features.\n     *\n     * @param features - DOM features supported by algorithms. All features are\n     * enabled by default unless explicity disabled.\n     */\n    DOMImpl.prototype.setFeatures = function (features) {\n        if (features === undefined)\n            features = true;\n        if (util_1.isObject(features)) {\n            for (var key in features) {\n                this._features[key] = features[key] || false;\n            }\n        }\n        else {\n            // enable/disable all features\n            for (var key in this._features) {\n                this._features[key] = features;\n            }\n        }\n    };\n    Object.defineProperty(DOMImpl.prototype, \"features\", {\n        /**\n         * Gets DOM algorithm features.\n         */\n        get: function () { return this._features; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DOMImpl.prototype, \"window\", {\n        /**\n         * Gets the DOM window.\n         */\n        get: function () {\n            if (this._window === null) {\n                this._window = CreateAlgorithm_1.create_window();\n            }\n            return this._window;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DOMImpl.prototype, \"compareCache\", {\n        /**\n         * Gets the global node compare cache.\n         */\n        get: function () { return this._compareCache; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DOMImpl.prototype, \"rangeList\", {\n        /**\n         * Gets the global range list.\n         */\n        get: function () { return this._rangeList; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DOMImpl, \"instance\", {\n        /**\n         * Returns the instance of `DOM`.\n         */\n        get: function () {\n            if (!DOMImpl._instance) {\n                DOMImpl._instance = new DOMImpl();\n            }\n            return DOMImpl._instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return DOMImpl;\n}());\n/**\n * Represents an object implementing DOM algorithms.\n */\nexports.dom = DOMImpl.instance;\n//# sourceMappingURL=DOMImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A namespace prefix map is a map that associates namespaceURI and namespace\n * prefix lists, where namespaceURI values are the map's unique keys (which can\n * include the null value representing no namespace), and ordered lists of\n * associated prefix values are the map's key values. The namespace prefix map\n * will be populated by previously seen namespaceURIs and all their previously\n * encountered prefix associations for a given node and its ancestors.\n *\n * _Note:_ The last seen prefix for a given namespaceURI is at the end of its\n * respective list. The list is searched to find potentially matching prefixes,\n * and if no matches are found for the given namespaceURI, then the last prefix\n * in the list is used. See copy a namespace prefix map and retrieve a preferred\n * prefix string for additional details.\n *\n * See: https://w3c.github.io/DOM-Parsing/#the-namespace-prefix-map\n */\nvar NamespacePrefixMap = /** @class */ (function () {\n    function NamespacePrefixMap() {\n        this._items = {};\n        this._nullItems = [];\n    }\n    /**\n     * Creates a copy of the map.\n     */\n    NamespacePrefixMap.prototype.copy = function () {\n        /**\n         * To copy a namespace prefix map map means to copy the map's keys into a\n         * new empty namespace prefix map, and to copy each of the values in the\n         * namespace prefix list associated with each keys' value into a new list\n         * which should be associated with the respective key in the new map.\n         */\n        var mapCopy = new NamespacePrefixMap();\n        for (var key in this._items) {\n            mapCopy._items[key] = this._items[key].slice(0);\n        }\n        mapCopy._nullItems = this._nullItems.slice(0);\n        return mapCopy;\n    };\n    /**\n     * Retrieves a preferred prefix string from the namespace prefix map.\n     *\n     * @param preferredPrefix - preferred prefix string\n     * @param ns - namespace\n     */\n    NamespacePrefixMap.prototype.get = function (preferredPrefix, ns) {\n        /**\n         * 1. Let candidates list be the result of retrieving a list from map where\n         * there exists a key in map that matches the value of ns or if there is no\n         * such key, then stop running these steps, and return the null value.\n         */\n        var candidatesList = ns === null ? this._nullItems : (this._items[ns] || null);\n        if (candidatesList === null) {\n            return null;\n        }\n        /**\n         * 2. Otherwise, for each prefix value prefix in candidates list, iterating\n         * from beginning to end:\n         *\n         * _Note:_ There will always be at least one prefix value in the list.\n         */\n        var prefix = null;\n        for (var i = 0; i < candidatesList.length; i++) {\n            prefix = candidatesList[i];\n            /**\n             * 2.1. If prefix matches preferred prefix, then stop running these steps\n             * and return prefix.\n             */\n            if (prefix === preferredPrefix) {\n                return prefix;\n            }\n        }\n        /**\n        * 2.2. If prefix is the last item in the candidates list, then stop\n        * running these steps and return prefix.\n        */\n        return prefix;\n    };\n    /**\n     * Checks if a prefix string is found in the namespace prefix map associated\n     * with the given namespace.\n     *\n     * @param prefix - prefix string\n     * @param ns - namespace\n     */\n    NamespacePrefixMap.prototype.has = function (prefix, ns) {\n        /**\n         * 1. Let candidates list be the result of retrieving a list from map where\n         * there exists a key in map that matches the value of ns or if there is\n         * no such key, then stop running these steps, and return false.\n         */\n        var candidatesList = ns === null ? this._nullItems : (this._items[ns] || null);\n        if (candidatesList === null) {\n            return false;\n        }\n        /**\n         * 2. If the value of prefix occurs at least once in candidates list,\n         * return true, otherwise return false.\n         */\n        return (candidatesList.indexOf(prefix) !== -1);\n    };\n    /**\n     * Checks if a prefix string is found in the namespace prefix map.\n     *\n     * @param prefix - prefix string\n     */\n    NamespacePrefixMap.prototype.hasPrefix = function (prefix) {\n        if (this._nullItems.indexOf(prefix) !== -1)\n            return true;\n        for (var key in this._items) {\n            if (this._items[key].indexOf(prefix) !== -1)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Adds a prefix string associated with a namespace to the prefix map.\n     *\n     * @param prefix - prefix string\n     * @param ns - namespace\n     */\n    NamespacePrefixMap.prototype.set = function (prefix, ns) {\n        /**\n         * 1. Let candidates list be the result of retrieving a list from map where\n         * there exists a key in map that matches the value of ns or if there is\n         * no such key, then let candidates list be null.\n         */\n        var candidatesList = ns === null ? this._nullItems : (this._items[ns] || null);\n        /**\n         * 2. If candidates list is null, then create a new list with prefix as the\n         * only item in the list, and associate that list with a new key ns in map.\n         * 3. Otherwise, append prefix to the end of candidates list.\n         *\n         * _Note:_ The steps in retrieve a preferred prefix string use the list to\n         * track the most recently used (MRU) prefix associated with a given\n         * namespace, which will be the prefix at the end of the list. This list\n         * may contain duplicates of the same prefix value seen earlier\n         * (and that's OK).\n         */\n        if (ns !== null && candidatesList === null) {\n            this._items[ns] = [prefix];\n        }\n        else {\n            candidatesList.push(prefix);\n        }\n    };\n    return NamespacePrefixMap;\n}());\nexports.NamespacePrefixMap = NamespacePrefixMap;\n//# sourceMappingURL=NamespacePrefixMap.js.map","'use strict';\n\nvar Type = require('../type');\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nvar _toString       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base64 = __importStar(require(\"./Base64\"));\nexports.base64 = base64;\nvar byte = __importStar(require(\"./Byte\"));\nexports.byte = byte;\nvar byteSequence = __importStar(require(\"./ByteSequence\"));\nexports.byteSequence = byteSequence;\nvar codePoint = __importStar(require(\"./CodePoints\"));\nexports.codePoint = codePoint;\nvar json = __importStar(require(\"./JSON\"));\nexports.json = json;\nvar list = __importStar(require(\"./List\"));\nexports.list = list;\nvar map = __importStar(require(\"./Map\"));\nexports.map = map;\nvar namespace = __importStar(require(\"./Namespace\"));\nexports.namespace = namespace;\nvar queue = __importStar(require(\"./Queue\"));\nexports.queue = queue;\nvar set = __importStar(require(\"./Set\"));\nexports.set = set;\nvar stack = __importStar(require(\"./Stack\"));\nexports.stack = stack;\nvar string = __importStar(require(\"./String\"));\nexports.string = string;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar CreateAlgorithm_1 = require(\"./CreateAlgorithm\");\n/**\n * Converts the given nodes or strings into a node (if `nodes` has\n * only one element) or a document fragment.\n *\n * @param nodes - the array of nodes or strings,\n * @param document - owner document\n */\nfunction parentNode_convertNodesIntoANode(nodes, document) {\n    var e_1, _a;\n    /**\n     * 1. Let node be null.\n     * 2. Replace each string in nodes with a new Text node whose data is the\n     * string and node document is document.\n     */\n    var node = null;\n    for (var i = 0; i < nodes.length; i++) {\n        var item = nodes[i];\n        if (util_1.isString(item)) {\n            var text = CreateAlgorithm_1.create_text(document, item);\n            nodes[i] = text;\n        }\n    }\n    /**\n     * 3. If nodes contains one node, set node to that node.\n     * 4. Otherwise, set node to a new DocumentFragment whose node document is\n     * document, and then append each node in nodes, if any, to it.\n     */\n    if (nodes.length === 1) {\n        node = nodes[0];\n    }\n    else {\n        node = CreateAlgorithm_1.create_documentFragment(document);\n        var ns = node;\n        try {\n            for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\n                var item = nodes_1_1.value;\n                ns.appendChild(item);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    /**\n     * 5. Return node.\n     */\n    return node;\n}\nexports.parentNode_convertNodesIntoANode = parentNode_convertNodesIntoANode;\n//# sourceMappingURL=ParentNodeAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Defines the type of a token.\n */\nvar TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"EOF\"] = 0] = \"EOF\";\n    TokenType[TokenType[\"Declaration\"] = 1] = \"Declaration\";\n    TokenType[TokenType[\"DocType\"] = 2] = \"DocType\";\n    TokenType[TokenType[\"Element\"] = 3] = \"Element\";\n    TokenType[TokenType[\"Text\"] = 4] = \"Text\";\n    TokenType[TokenType[\"CDATA\"] = 5] = \"CDATA\";\n    TokenType[TokenType[\"PI\"] = 6] = \"PI\";\n    TokenType[TokenType[\"Comment\"] = 7] = \"Comment\";\n    TokenType[TokenType[\"ClosingTag\"] = 8] = \"ClosingTag\";\n})(TokenType = exports.TokenType || (exports.TokenType = {}));\n//# sourceMappingURL=interfaces.js.map","var path = require('path');\nvar spawn = require('child_process').spawn;\nvar debug = require('debug')('electron-squirrel-startup');\nvar app = require('electron').app;\n\nvar run = function(args, done) {\n  var updateExe = path.resolve(path.dirname(process.execPath), '..', 'Update.exe');\n  debug('Spawning `%s` with args `%s`', updateExe, args);\n  spawn(updateExe, args, {\n    detached: true\n  }).on('close', done);\n};\n\nvar check = function() {\n  if (process.platform === 'win32') {\n    var cmd = process.argv[1];\n    debug('processing squirrel command `%s`', cmd);\n    var target = path.basename(process.execPath);\n\n    if (cmd === '--squirrel-install' || cmd === '--squirrel-updated') {\n      run(['--createShortcut=' + target + ''], app.quit);\n      return true;\n    }\n    if (cmd === '--squirrel-uninstall') {\n      run(['--removeShortcut=' + target + ''], app.quit);\n      return true;\n    }\n    if (cmd === '--squirrel-obsolete') {\n      app.quit();\n      return true;\n    }\n  }\n  return false;\n};\n\nmodule.exports = check();\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ObjectWriter_1 = require(\"./ObjectWriter\");\nvar util_1 = require(\"@oozcitak/util\");\nvar BaseWriter_1 = require(\"./BaseWriter\");\n/**\n * Serializes XML nodes into a JSON string.\n */\nvar JSONWriter = /** @class */ (function (_super) {\n    __extends(JSONWriter, _super);\n    /**\n     * Initializes a new instance of `JSONWriter`.\n     *\n     * @param builderOptions - XML builder options\n     * @param writerOptions - serialization options\n     */\n    function JSONWriter(builderOptions, writerOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        // provide default options\n        _this._writerOptions = util_1.applyDefaults(writerOptions, {\n            wellFormed: false,\n            prettyPrint: false,\n            indent: '  ',\n            newline: '\\n',\n            offset: 0,\n            group: false,\n            verbose: false\n        });\n        return _this;\n    }\n    /**\n     * Produces an XML serialization of the given node.\n     *\n     * @param node - node to serialize\n     * @param writerOptions - serialization options\n     */\n    JSONWriter.prototype.serialize = function (node) {\n        // convert to object\n        var objectWriterOptions = util_1.applyDefaults(this._writerOptions, {\n            format: \"object\",\n            wellFormed: false\n        });\n        var objectWriter = new ObjectWriter_1.ObjectWriter(this._builderOptions, objectWriterOptions);\n        var val = objectWriter.serialize(node);\n        // recursively convert object into JSON string\n        return this._beginLine(this._writerOptions, 0) + this._convertObject(val, this._writerOptions);\n    };\n    /**\n     * Produces an XML serialization of the given object.\n     *\n     * @param obj - object to serialize\n     * @param options - serialization options\n     * @param level - depth of the XML tree\n     */\n    JSONWriter.prototype._convertObject = function (obj, options, level) {\n        var e_1, _a;\n        var _this = this;\n        if (level === void 0) { level = 0; }\n        var markup = '';\n        var isLeaf = this._isLeafNode(obj);\n        if (util_1.isArray(obj)) {\n            markup += '[';\n            var len = obj.length;\n            var i = 0;\n            try {\n                for (var obj_1 = __values(obj), obj_1_1 = obj_1.next(); !obj_1_1.done; obj_1_1 = obj_1.next()) {\n                    var val = obj_1_1.value;\n                    markup += this._endLine(options, level + 1) +\n                        this._beginLine(options, level + 1) +\n                        this._convertObject(val, options, level + 1);\n                    if (i < len - 1) {\n                        markup += ',';\n                    }\n                    i++;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (obj_1_1 && !obj_1_1.done && (_a = obj_1.return)) _a.call(obj_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            markup += this._endLine(options, level) + this._beginLine(options, level);\n            markup += ']';\n        }\n        else if (util_1.isObject(obj)) {\n            markup += '{';\n            var len_1 = util_1.objectLength(obj);\n            var i_1 = 0;\n            util_1.forEachObject(obj, function (key, val) {\n                if (isLeaf && options.prettyPrint) {\n                    markup += ' ';\n                }\n                else {\n                    markup += _this._endLine(options, level + 1) + _this._beginLine(options, level + 1);\n                }\n                markup += _this._key(key);\n                if (options.prettyPrint) {\n                    markup += ' ';\n                }\n                markup += _this._convertObject(val, options, level + 1);\n                if (i_1 < len_1 - 1) {\n                    markup += ',';\n                }\n                i_1++;\n            }, this);\n            if (isLeaf && options.prettyPrint) {\n                markup += ' ';\n            }\n            else {\n                markup += this._endLine(options, level) + this._beginLine(options, level);\n            }\n            markup += '}';\n        }\n        else {\n            markup += this._val(obj);\n        }\n        return markup;\n    };\n    /**\n     * Produces characters to be prepended to a line of string in pretty-print\n     * mode.\n     *\n     * @param options - serialization options\n     * @param level - current depth of the XML tree\n     */\n    JSONWriter.prototype._beginLine = function (options, level) {\n        if (!options.prettyPrint) {\n            return '';\n        }\n        else {\n            var indentLevel = options.offset + level + 1;\n            if (indentLevel > 0) {\n                return new Array(indentLevel).join(options.indent);\n            }\n        }\n        return '';\n    };\n    /**\n     * Produces characters to be appended to a line of string in pretty-print\n     * mode.\n     *\n     * @param options - serialization options\n     * @param level - current depth of the XML tree\n     */\n    JSONWriter.prototype._endLine = function (options, level) {\n        if (!options.prettyPrint) {\n            return '';\n        }\n        else {\n            return options.newline;\n        }\n    };\n    /**\n     * Produces a JSON key string delimited with double quotes.\n     */\n    JSONWriter.prototype._key = function (key) {\n        return \"\\\"\" + key + \"\\\":\";\n    };\n    /**\n     * Produces a JSON value string delimited with double quotes.\n     */\n    JSONWriter.prototype._val = function (val) {\n        return JSON.stringify(val);\n    };\n    /**\n     * Determines if an object is a leaf node.\n     *\n     * @param obj\n     */\n    JSONWriter.prototype._isLeafNode = function (obj) {\n        return this._descendantCount(obj) <= 1;\n    };\n    /**\n     * Counts the number of descendants of the given object.\n     *\n     * @param obj\n     * @param count\n     */\n    JSONWriter.prototype._descendantCount = function (obj, count) {\n        var _this = this;\n        if (count === void 0) { count = 0; }\n        if (util_1.isArray(obj)) {\n            util_1.forEachArray(obj, function (val) { return count += _this._descendantCount(val, count); }, this);\n        }\n        else if (util_1.isObject(obj)) {\n            util_1.forEachObject(obj, function (key, val) { return count += _this._descendantCount(val, count); }, this);\n        }\n        else {\n            count++;\n        }\n        return count;\n    };\n    return JSONWriter;\n}(BaseWriter_1.BaseWriter));\nexports.JSONWriter = JSONWriter;\n//# sourceMappingURL=JSONWriter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMException_1 = require(\"../dom/DOMException\");\n/**\n * Matches elements with the given selectors.\n *\n * @param selectors - selectors\n * @param node - the node to match against\n */\nfunction selectors_scopeMatchASelectorsString(selectors, node) {\n    /**\n     * TODO: Selectors\n     * 1. Let s be the result of parse a selector selectors. [SELECTORS4]\n     * 2. If s is failure, then throw a \"SyntaxError\" DOMException.\n     * 3. Return the result of match a selector against a tree with s and node’s\n     * root using scoping root node. [SELECTORS4].\n     */\n    throw new DOMException_1.NotSupportedError();\n}\nexports.selectors_scopeMatchASelectorsString = selectors_scopeMatchASelectorsString;\n//# sourceMappingURL=SelectorsAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar algorithm_1 = require(\"../algorithm\");\nvar XMLParserImpl_1 = require(\"./XMLParserImpl\");\n/**\n * Represents a parser for XML and HTML content.\n *\n * See: https://w3c.github.io/DOM-Parsing/#the-domparser-interface\n */\nvar DOMParserImpl = /** @class */ (function () {\n    function DOMParserImpl() {\n    }\n    /** @inheritdoc */\n    DOMParserImpl.prototype.parseFromString = function (source, mimeType) {\n        if (mimeType === \"text/html\")\n            throw new Error('HTML parser not implemented.');\n        try {\n            var parser = new XMLParserImpl_1.XMLParserImpl();\n            var doc = parser.parse(source);\n            doc._contentType = mimeType;\n            return doc;\n        }\n        catch (e) {\n            var errorNS = \"http://www.mozilla.org/newlayout/xml/parsererror.xml\";\n            var doc = algorithm_1.create_xmlDocument();\n            var root = doc.createElementNS(errorNS, \"parsererror\");\n            var ele = doc.createElementNS(errorNS, \"error\");\n            ele.setAttribute(\"message\", e.message);\n            root.appendChild(ele);\n            doc.appendChild(root);\n            return doc;\n        }\n    };\n    return DOMParserImpl;\n}());\nexports.DOMParserImpl = DOMParserImpl;\n//# sourceMappingURL=DOMParserImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar util_1 = require(\"../util\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar CreateAlgorithm_1 = require(\"./CreateAlgorithm\");\nvar CustomElementAlgorithm_1 = require(\"./CustomElementAlgorithm\");\nvar MutationObserverAlgorithm_1 = require(\"./MutationObserverAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\nvar MutationAlgorithm_1 = require(\"./MutationAlgorithm\");\nvar DocumentAlgorithm_1 = require(\"./DocumentAlgorithm\");\n/**\n * Determines whether the element's attribute list contains the given\n * attribute.\n *\n * @param attribute - an attribute node\n * @param element - an element node\n */\nfunction element_has(attribute, element) {\n    /**\n     * An element has an attribute A if its attribute list contains A.\n     */\n    return element._attributeList._asArray().indexOf(attribute) !== -1;\n}\nexports.element_has = element_has;\n/**\n * Changes the value of an attribute node.\n *\n * @param attribute - an attribute node\n * @param element - an element node\n * @param value - attribute value\n */\nfunction element_change(attribute, element, value) {\n    /**\n     * 1. Queue an attribute mutation record for element with attribute’s\n     * local name, attribute’s namespace, and attribute’s value.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueAttributeMutationRecord(element, attribute._localName, attribute._namespace, attribute._value);\n    }\n    /**\n     * 2. If element is custom, then enqueue a custom element callback reaction\n     * with element, callback name \"attributeChangedCallback\", and an argument\n     * list containing attribute’s local name, attribute’s value, value, and\n     * attribute’s namespace.\n     */\n    if (DOMImpl_1.dom.features.customElements) {\n        if (util_1.Guard.isCustomElementNode(element)) {\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(element, \"attributeChangedCallback\", [attribute._localName, attribute._value, value, attribute._namespace]);\n        }\n    }\n    /**\n     * 3. Run the attribute change steps with element, attribute’s local name,\n     * attribute’s value, value, and attribute’s namespace.\n     * 4. Set attribute’s value to value.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runAttributeChangeSteps(element, attribute._localName, attribute._value, value, attribute._namespace);\n    }\n    attribute._value = value;\n}\nexports.element_change = element_change;\n/**\n * Appends an attribute to an element node.\n *\n * @param attribute - an attribute\n * @param element - an element to receive the attribute\n */\nfunction element_append(attribute, element) {\n    /**\n     * 1. Queue an attribute mutation record for element with attribute’s\n     * local name, attribute’s namespace, and null.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueAttributeMutationRecord(element, attribute._localName, attribute._namespace, null);\n    }\n    /**\n     * 2. If element is custom, then enqueue a custom element callback reaction\n     * with element, callback name \"attributeChangedCallback\", and an argument\n     * list containing attribute’s local name, null, attribute’s value, and\n     * attribute’s namespace.\n     */\n    if (DOMImpl_1.dom.features.customElements) {\n        if (util_1.Guard.isCustomElementNode(element)) {\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(element, \"attributeChangedCallback\", [attribute._localName, null, attribute._value, attribute._namespace]);\n        }\n    }\n    /**\n     * 3. Run the attribute change steps with element, attribute’s local name,\n     * null, attribute’s value, and attribute’s namespace.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runAttributeChangeSteps(element, attribute._localName, null, attribute._value, attribute._namespace);\n    }\n    /**\n     * 4. Append attribute to element’s attribute list.\n     * 5. Set attribute’s element to element.\n     */\n    element._attributeList._asArray().push(attribute);\n    attribute._element = element;\n    // mark that the document has namespaces\n    if (!element._nodeDocument._hasNamespaces && (attribute._namespace !== null ||\n        attribute._namespacePrefix !== null || attribute._localName === \"xmlns\")) {\n        element._nodeDocument._hasNamespaces = true;\n    }\n}\nexports.element_append = element_append;\n/**\n * Removes an attribute from an element node.\n *\n * @param attribute - an attribute\n * @param element - an element to receive the attribute\n */\nfunction element_remove(attribute, element) {\n    /**\n     * 1. Queue an attribute mutation record for element with attribute’s\n     * local name, attribute’s namespace, and attribute’s value.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueAttributeMutationRecord(element, attribute._localName, attribute._namespace, attribute._value);\n    }\n    /**\n     * 2. If element is custom, then enqueue a custom element callback reaction\n     * with element, callback name \"attributeChangedCallback\", and an argument\n     * list containing attribute’s local name, attribute’s value, null,\n     * and attribute’s namespace.\n     */\n    if (DOMImpl_1.dom.features.customElements) {\n        if (util_1.Guard.isCustomElementNode(element)) {\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(element, \"attributeChangedCallback\", [attribute._localName, attribute._value, null, attribute._namespace]);\n        }\n    }\n    /**\n     * 3. Run the attribute change steps with element, attribute’s local name,\n     * attribute’s value, null, and attribute’s namespace.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runAttributeChangeSteps(element, attribute._localName, attribute._value, null, attribute._namespace);\n    }\n    /**\n     * 3. Remove attribute from element’s attribute list.\n     * 5. Set attribute’s element to null.\n     */\n    var index = element._attributeList._asArray().indexOf(attribute);\n    element._attributeList._asArray().splice(index, 1);\n    attribute._element = null;\n}\nexports.element_remove = element_remove;\n/**\n * Replaces an attribute with another of an element node.\n *\n * @param oldAttr - old attribute\n * @param newAttr - new attribute\n * @param element - an element to receive the attribute\n */\nfunction element_replace(oldAttr, newAttr, element) {\n    /**\n     * 1. Queue an attribute mutation record for element with oldAttr’s\n     * local name, oldAttr’s namespace, and oldAttr’s value.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueAttributeMutationRecord(element, oldAttr._localName, oldAttr._namespace, oldAttr._value);\n    }\n    /**\n     * 2. If element is custom, then enqueue a custom element callback reaction\n     * with element, callback name \"attributeChangedCallback\", and an argument\n     * list containing oldAttr’s local name, oldAttr’s value, newAttr’s value,\n     * and oldAttr’s namespace.\n     */\n    if (DOMImpl_1.dom.features.customElements) {\n        if (util_1.Guard.isCustomElementNode(element)) {\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(element, \"attributeChangedCallback\", [oldAttr._localName, oldAttr._value, newAttr._value, oldAttr._namespace]);\n        }\n    }\n    /**\n     * 3. Run the attribute change steps with element, oldAttr’s local name,\n     * oldAttr’s value, newAttr’s value, and oldAttr’s namespace.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runAttributeChangeSteps(element, oldAttr._localName, oldAttr._value, newAttr._value, oldAttr._namespace);\n    }\n    /**\n     * 4. Replace oldAttr by newAttr in element’s attribute list.\n     * 5. Set oldAttr’s element to null.\n     * 6. Set newAttr’s element to element.\n     */\n    var index = element._attributeList._asArray().indexOf(oldAttr);\n    if (index !== -1) {\n        element._attributeList._asArray()[index] = newAttr;\n    }\n    oldAttr._element = null;\n    newAttr._element = element;\n    // mark that the document has namespaces\n    if (!element._nodeDocument._hasNamespaces && (newAttr._namespace !== null ||\n        newAttr._namespacePrefix !== null || newAttr._localName === \"xmlns\")) {\n        element._nodeDocument._hasNamespaces = true;\n    }\n}\nexports.element_replace = element_replace;\n/**\n * Retrieves an attribute with the given name from an element node.\n *\n * @param qualifiedName - an attribute name\n * @param element - an element to receive the attribute\n */\nfunction element_getAnAttributeByName(qualifiedName, element) {\n    /**\n     * 1. If element is in the HTML namespace and its node document is an HTML\n     * document, then set qualifiedName to qualifiedName in ASCII lowercase.\n     * 2. Return the first attribute in element’s attribute list whose qualified\n     * name is qualifiedName, and null otherwise.\n     */\n    if (element._namespace === infra_1.namespace.HTML && element._nodeDocument._type === \"html\") {\n        qualifiedName = qualifiedName.toLowerCase();\n    }\n    return element._attributeList._asArray().find(function (attr) { return attr._qualifiedName === qualifiedName; }) || null;\n}\nexports.element_getAnAttributeByName = element_getAnAttributeByName;\n/**\n * Retrieves an attribute with the given namespace and local name from an\n * element node.\n *\n * @param namespace - an attribute namespace\n * @param localName - an attribute local name\n * @param element - an element to receive the attribute\n */\nfunction element_getAnAttributeByNamespaceAndLocalName(namespace, localName, element) {\n    /**\n     * 1. If namespace is the empty string, set it to null.\n     * 2. Return the attribute in element’s attribute list whose namespace is\n     * namespace and local name is localName, if any, and null otherwise.\n     */\n    var ns = namespace || null;\n    return element._attributeList._asArray().find(function (attr) { return attr._namespace === ns && attr._localName === localName; }) || null;\n}\nexports.element_getAnAttributeByNamespaceAndLocalName = element_getAnAttributeByNamespaceAndLocalName;\n/**\n * Retrieves an attribute's value with the given name namespace and local\n * name from an element node.\n *\n * @param element - an element to receive the attribute\n * @param localName - an attribute local name\n * @param namespace - an attribute namespace\n */\nfunction element_getAnAttributeValue(element, localName, namespace) {\n    if (namespace === void 0) { namespace = ''; }\n    /**\n     * 1. Let attr be the result of getting an attribute given namespace,\n     * localName, and element.\n     * 2. If attr is null, then return the empty string.\n     * 3. Return attr’s value.\n     */\n    var attr = element_getAnAttributeByNamespaceAndLocalName(namespace, localName, element);\n    if (attr === null)\n        return '';\n    else\n        return attr._value;\n}\nexports.element_getAnAttributeValue = element_getAnAttributeValue;\n/**\n * Sets an attribute of an element node.\n *\n * @param attr - an attribute\n * @param element - an element to receive the attribute\n */\nfunction element_setAnAttribute(attr, element) {\n    /**\n     * 1. If attr’s element is neither null nor element, throw an\n     * \"InUseAttributeError\" DOMException.\n     * 2. Let oldAttr be the result of getting an attribute given attr’s\n     * namespace, attr’s local name, and element.\n     * 3. If oldAttr is attr, return attr.\n     * 4. If oldAttr is non-null, replace it by attr in element.\n     * 5. Otherwise, append attr to element.\n     * 6. Return oldAttr.\n     */\n    if (attr._element !== null && attr._element !== element)\n        throw new DOMException_1.InUseAttributeError(\"This attribute already exists in the document: \" + attr._qualifiedName + \" as a child of \" + attr._element._qualifiedName + \".\");\n    var oldAttr = element_getAnAttributeByNamespaceAndLocalName(attr._namespace || '', attr._localName, element);\n    if (oldAttr === attr)\n        return attr;\n    if (oldAttr !== null) {\n        element_replace(oldAttr, attr, element);\n    }\n    else {\n        element_append(attr, element);\n    }\n    return oldAttr;\n}\nexports.element_setAnAttribute = element_setAnAttribute;\n/**\n * Sets an attribute's value of an element node.\n *\n * @param element - an element to receive the attribute\n * @param localName - an attribute local name\n * @param value - an attribute value\n * @param prefix - an attribute prefix\n * @param namespace - an attribute namespace\n */\nfunction element_setAnAttributeValue(element, localName, value, prefix, namespace) {\n    if (prefix === void 0) { prefix = null; }\n    if (namespace === void 0) { namespace = null; }\n    /**\n     * 1. If prefix is not given, set it to null.\n     * 2. If namespace is not given, set it to null.\n     * 3. Let attribute be the result of getting an attribute given namespace,\n     * localName, and element.\n     * 4. If attribute is null, create an attribute whose namespace is\n     * namespace, namespace prefix is prefix, local name is localName, value\n     * is value, and node document is element’s node document, then append this\n     * attribute to element, and then return.\n     * 5. Change attribute from element to value.\n     */\n    var attribute = element_getAnAttributeByNamespaceAndLocalName(namespace || '', localName, element);\n    if (attribute === null) {\n        var newAttr = CreateAlgorithm_1.create_attr(element._nodeDocument, localName);\n        newAttr._namespace = namespace;\n        newAttr._namespacePrefix = prefix;\n        newAttr._value = value;\n        element_append(newAttr, element);\n        return;\n    }\n    element_change(attribute, element, value);\n}\nexports.element_setAnAttributeValue = element_setAnAttributeValue;\n/**\n * Removes an attribute with the given name from an element node.\n *\n * @param qualifiedName - an attribute name\n * @param element - an element to receive the attribute\n */\nfunction element_removeAnAttributeByName(qualifiedName, element) {\n    /**\n     * 1. Let attr be the result of getting an attribute given qualifiedName\n     * and element.\n     * 2. If attr is non-null, remove it from element.\n     * 3. Return attr.\n     */\n    var attr = element_getAnAttributeByName(qualifiedName, element);\n    if (attr !== null) {\n        element_remove(attr, element);\n    }\n    return attr;\n}\nexports.element_removeAnAttributeByName = element_removeAnAttributeByName;\n/**\n * Removes an attribute with the given namespace and local name from an\n * element node.\n *\n * @param namespace - an attribute namespace\n * @param localName - an attribute local name\n * @param element - an element to receive the attribute\n */\nfunction element_removeAnAttributeByNamespaceAndLocalName(namespace, localName, element) {\n    /**\n     * 1. Let attr be the result of getting an attribute given namespace, localName, and element.\n     * 2. If attr is non-null, remove it from element.\n     * 3. Return attr.\n     */\n    var attr = element_getAnAttributeByNamespaceAndLocalName(namespace, localName, element);\n    if (attr !== null) {\n        element_remove(attr, element);\n    }\n    return attr;\n}\nexports.element_removeAnAttributeByNamespaceAndLocalName = element_removeAnAttributeByNamespaceAndLocalName;\n/**\n * Creates an element node.\n * See: https://dom.spec.whatwg.org/#concept-create-element.\n *\n * @param document - the document owning the element\n * @param localName - local name\n * @param namespace - element namespace\n * @param prefix - namespace prefix\n * @param is - the \"is\" value\n * @param synchronousCustomElementsFlag - synchronous custom elements flag\n */\nfunction element_createAnElement(document, localName, namespace, prefix, is, synchronousCustomElementsFlag) {\n    if (prefix === void 0) { prefix = null; }\n    if (is === void 0) { is = null; }\n    if (synchronousCustomElementsFlag === void 0) { synchronousCustomElementsFlag = false; }\n    /**\n     * 1. If prefix was not given, let prefix be null.\n     * 2. If is was not given, let is be null.\n     * 3. Let result be null.\n     */\n    var result = null;\n    if (!DOMImpl_1.dom.features.customElements) {\n        result = CreateAlgorithm_1.create_element(document, localName, namespace, prefix);\n        result._customElementState = \"uncustomized\";\n        result._customElementDefinition = null;\n        result._is = is;\n        return result;\n    }\n    /**\n     * 4. Let definition be the result of looking up a custom element definition\n     * given document, namespace, localName, and is.\n     */\n    var definition = CustomElementAlgorithm_1.customElement_lookUpACustomElementDefinition(document, namespace, localName, is);\n    if (definition !== null && definition.name !== definition.localName) {\n        /**\n        * 5. If definition is non-null, and definition’s name is not equal to\n        * its local name (i.e., definition represents a customized built-in\n        * element), then:\n          * 5.1. Let interface be the element interface for localName and the HTML\n          * namespace.\n          * 5.2. Set result to a new element that implements interface, with no\n          * attributes, namespace set to the HTML namespace, namespace prefix\n          * set to prefix, local name set to localName, custom element state set\n          * to \"undefined\", custom element definition set to null, is value set\n          * to is, and node document set to document.\n          * 5.3. If the synchronous custom elements flag is set, upgrade element\n          * using definition.\n          * 5.4. Otherwise, enqueue a custom element upgrade reaction given result\n          * and definition.\n          */\n        var elemenInterface = DocumentAlgorithm_1.document_elementInterface(localName, infra_1.namespace.HTML);\n        result = new elemenInterface();\n        result._localName = localName;\n        result._namespace = infra_1.namespace.HTML;\n        result._namespacePrefix = prefix;\n        result._customElementState = \"undefined\";\n        result._customElementDefinition = null;\n        result._is = is;\n        result._nodeDocument = document;\n        if (synchronousCustomElementsFlag) {\n            CustomElementAlgorithm_1.customElement_upgrade(definition, result);\n        }\n        else {\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementUpgradeReaction(result, definition);\n        }\n    }\n    else if (definition !== null) {\n        /**\n         * 6. Otherwise, if definition is non-null, then:\n         */\n        if (synchronousCustomElementsFlag) {\n            /**\n             * 6.1. If the synchronous custom elements flag is set, then run these\n             * steps while catching any exceptions:\n             */\n            try {\n                /**\n                 * 6.1.1. Let C be definition’s constructor.\n                 * 6.1.2. Set result to the result of constructing C, with no arguments.\n                 * 6.1.3. Assert: result’s custom element state and custom element definition\n                 * are initialized.\n                 * 6.1.4. Assert: result’s namespace is the HTML namespace.\n                 * _Note:_ IDL enforces that result is an HTMLElement object, which all\n                 * use the HTML namespace.\n                 */\n                var C = definition.constructor;\n                var result_1 = new C();\n                console.assert(result_1._customElementState !== undefined);\n                console.assert(result_1._customElementDefinition !== undefined);\n                console.assert(result_1._namespace === infra_1.namespace.HTML);\n                /**\n                 * 6.1.5. If result’s attribute list is not empty, then throw a\n                 * \"NotSupportedError\" DOMException.\n                 * 6.1.6. If result has children, then throw a \"NotSupportedError\"\n                 * DOMException.\n                 * 6.1.7. If result’s parent is not null, then throw a\n                 * \"NotSupportedError\" DOMException.\n                 * 6.1.8. If result’s node document is not document, then throw a\n                 * \"NotSupportedError\" DOMException.\n                 * 6.1.9. If result’s local name is not equal to localName, then throw\n                 * a \"NotSupportedError\" DOMException.\n                 */\n                if (result_1._attributeList.length !== 0)\n                    throw new DOMException_1.NotSupportedError(\"Custom element already has attributes.\");\n                if (result_1._children.size !== 0)\n                    throw new DOMException_1.NotSupportedError(\"Custom element already has child nodes.\");\n                if (result_1._parent !== null)\n                    throw new DOMException_1.NotSupportedError(\"Custom element already has a parent node.\");\n                if (result_1._nodeDocument !== document)\n                    throw new DOMException_1.NotSupportedError(\"Custom element is already in a document.\");\n                if (result_1._localName !== localName)\n                    throw new DOMException_1.NotSupportedError(\"Custom element has a different local name.\");\n                /**\n                 * 6.1.10. Set result’s namespace prefix to prefix.\n                 * 6.1.11. Set result’s is value to null.\n                 */\n                result_1._namespacePrefix = prefix;\n                result_1._is = null;\n            }\n            catch (e) {\n                /**\n                 * If any of these steps threw an exception, then:\n                 * - Report the exception.\n                 * - Set result to a new element that implements the HTMLUnknownElement\n                 * interface, with no attributes, namespace set to the HTML namespace,\n                 * namespace prefix set to prefix, local name set to localName, custom\n                 * element state set to \"failed\", custom element definition set to null,\n                 * is value set to null, and node document set to document.\n                 */\n                // TODO: Report the exception\n                result = CreateAlgorithm_1.create_htmlUnknownElement(document, localName, infra_1.namespace.HTML, prefix);\n                result._customElementState = \"failed\";\n                result._customElementDefinition = null;\n                result._is = null;\n            }\n        }\n        else {\n            /**\n             * 6.2. Otherwise:\n             * 6.2.1. Set result to a new element that implements the HTMLElement\n             * interface, with no attributes, namespace set to the HTML namespace,\n             * namespace prefix set to prefix, local name set to localName, custom\n             * element state set to \"undefined\", custom element definition set to\n             * null, is value set to null, and node document set to document.\n             * 6.2.2. Enqueue a custom element upgrade reaction given result and\n             * definition.\n             */\n            result = CreateAlgorithm_1.create_htmlElement(document, localName, infra_1.namespace.HTML, prefix);\n            result._customElementState = \"undefined\";\n            result._customElementDefinition = null;\n            result._is = null;\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementUpgradeReaction(result, definition);\n        }\n    }\n    else {\n        /**\n         * 7. Otherwise:\n         * 7.1. Let interface be the element interface for localName and\n         * namespace.\n         * 7.2. Set result to a new element that implements interface, with no\n         * attributes, namespace set to namespace, namespace prefix set to prefix,\n         * local name set to localName, custom element state set to\n         * \"uncustomized\", custom element definition set to null, is value set to\n         * is, and node document set to document.\n         */\n        var elementInterface = DocumentAlgorithm_1.document_elementInterface(localName, namespace);\n        result = new elementInterface();\n        result._localName = localName;\n        result._namespace = namespace;\n        result._namespacePrefix = prefix;\n        result._customElementState = \"uncustomized\";\n        result._customElementDefinition = null;\n        result._is = is;\n        result._nodeDocument = document;\n        /**\n         * 7.3. If namespace is the HTML namespace, and either localName is a\n         * valid custom element name or is is non-null, then set result’s\n         * custom element state to \"undefined\".\n         */\n        if (namespace === infra_1.namespace.HTML && (is !== null ||\n            CustomElementAlgorithm_1.customElement_isValidCustomElementName(localName))) {\n            result._customElementState = \"undefined\";\n        }\n    }\n    /* istanbul ignore next */\n    if (result === null) {\n        throw new Error(\"Unable to create element.\");\n    }\n    /**\n     * 8. Returns result\n     */\n    return result;\n}\nexports.element_createAnElement = element_createAnElement;\n/**\n * Inserts a new node adjacent to this element.\n *\n * @param element - a reference element\n * @param where - a string defining where to insert the element node.\n *   - `beforebegin` before this element itself.\n *   - `afterbegin` before the first child.\n *   - `beforeend` after the last child.\n *   - `afterend` after this element itself.\n * @param node - node to insert\n */\nfunction element_insertAdjacent(element, where, node) {\n    /**\n     * - \"beforebegin\"\n     * If element’s parent is null, return null.\n     * Return the result of pre-inserting node into element’s parent before\n     * element.\n     * - \"afterbegin\"\n     * Return the result of pre-inserting node into element before element’s\n     * first child.\n     * - \"beforeend\"\n     * Return the result of pre-inserting node into element before null.\n     * - \"afterend\"\n     * If element’s parent is null, return null.\n     * Return the result of pre-inserting node into element’s parent before element’s next sibling.\n     * - Otherwise\n     * Throw a \"SyntaxError\" DOMException.\n     */\n    switch (where.toLowerCase()) {\n        case 'beforebegin':\n            if (element._parent === null)\n                return null;\n            return MutationAlgorithm_1.mutation_preInsert(node, element._parent, element);\n        case 'afterbegin':\n            return MutationAlgorithm_1.mutation_preInsert(node, element, element._firstChild);\n        case 'beforeend':\n            return MutationAlgorithm_1.mutation_preInsert(node, element, null);\n        case 'afterend':\n            if (element._parent === null)\n                return null;\n            return MutationAlgorithm_1.mutation_preInsert(node, element._parent, element._nextSibling);\n        default:\n            throw new DOMException_1.SyntaxError(\"Invalid 'where' argument. \\\"beforebegin\\\", \\\"afterbegin\\\", \\\"beforeend\\\" or \\\"afterend\\\" expected\");\n    }\n}\nexports.element_insertAdjacent = element_insertAdjacent;\n//# sourceMappingURL=ElementAlgorithm.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar interfaces_1 = require(\"./interfaces\");\nvar AbstractRangeImpl_1 = require(\"./AbstractRangeImpl\");\nvar DOMException_1 = require(\"./DOMException\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\nvar util_1 = require(\"../util\");\n/**\n * Represents a live range.\n */\nvar RangeImpl = /** @class */ (function (_super) {\n    __extends(RangeImpl, _super);\n    /**\n     * Initializes a new instance of `Range`.\n     */\n    function RangeImpl() {\n        var _this = _super.call(this) || this;\n        /**\n         * The Range() constructor, when invoked, must return a new live range with\n         * (current global object’s associated Document, 0) as its start and end.\n         */\n        var doc = DOMImpl_1.dom.window._associatedDocument;\n        _this._start = [doc, 0];\n        _this._end = [doc, 0];\n        DOMImpl_1.dom.rangeList.add(_this);\n        return _this;\n    }\n    Object.defineProperty(RangeImpl.prototype, \"commonAncestorContainer\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * 1. Let container be start node.\n             * 2. While container is not an inclusive ancestor of end node, let\n             * container be container’s parent.\n             * 3. Return container.\n             */\n            var container = this._start[0];\n            while (!algorithm_1.tree_isAncestorOf(this._end[0], container, true)) {\n                if (container._parent === null) {\n                    throw new Error(\"Parent node  is null.\");\n                }\n                container = container._parent;\n            }\n            return container;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    RangeImpl.prototype.setStart = function (node, offset) {\n        /**\n         * The setStart(node, offset) method, when invoked, must set the start of\n         * context object to boundary point (node, offset).\n         */\n        algorithm_1.range_setTheStart(this, node, offset);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.setEnd = function (node, offset) {\n        /**\n         * The setEnd(node, offset) method, when invoked, must set the end of\n         * context object to boundary point (node, offset).\n         */\n        algorithm_1.range_setTheEnd(this, node, offset);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.setStartBefore = function (node) {\n        /**\n         * 1. Let parent be node’s parent.\n         * 2. If parent is null, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 3. Set the start of the context object to boundary point\n         * (parent, node’s index).\n         */\n        var parent = node._parent;\n        if (parent === null)\n            throw new DOMException_1.InvalidNodeTypeError();\n        algorithm_1.range_setTheStart(this, parent, algorithm_1.tree_index(node));\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.setStartAfter = function (node) {\n        /**\n         * 1. Let parent be node’s parent.\n         * 2. If parent is null, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 3. Set the start of the context object to boundary point\n         * (parent, node’s index plus 1).\n         */\n        var parent = node._parent;\n        if (parent === null)\n            throw new DOMException_1.InvalidNodeTypeError();\n        algorithm_1.range_setTheStart(this, parent, algorithm_1.tree_index(node) + 1);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.setEndBefore = function (node) {\n        /**\n         * 1. Let parent be node’s parent.\n         * 2. If parent is null, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 3. Set the end of the context object to boundary point\n         * (parent, node’s index).\n         */\n        var parent = node._parent;\n        if (parent === null)\n            throw new DOMException_1.InvalidNodeTypeError();\n        algorithm_1.range_setTheEnd(this, parent, algorithm_1.tree_index(node));\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.setEndAfter = function (node) {\n        /**\n         * 1. Let parent be node’s parent.\n         * 2. If parent is null, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 3. Set the end of the context object to boundary point\n         * (parent, node’s index plus 1).\n         */\n        var parent = node._parent;\n        if (parent === null)\n            throw new DOMException_1.InvalidNodeTypeError();\n        algorithm_1.range_setTheEnd(this, parent, algorithm_1.tree_index(node) + 1);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.collapse = function (toStart) {\n        /**\n         * The collapse(toStart) method, when invoked, must if toStart is true,\n         * set end to start, and set start to end otherwise.\n         */\n        if (toStart) {\n            this._end = this._start;\n        }\n        else {\n            this._start = this._end;\n        }\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.selectNode = function (node) {\n        /**\n         * The selectNode(node) method, when invoked, must select node within\n         * context object.\n         */\n        algorithm_1.range_select(node, this);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.selectNodeContents = function (node) {\n        /**\n         * 1. If node is a doctype, throw an \"InvalidNodeTypeError\" DOMException.\n         * 2. Let length be the length of node.\n         * 3. Set start to the boundary point (node, 0).\n         * 4. Set end to the boundary point (node, length).\n         */\n        if (util_1.Guard.isDocumentTypeNode(node))\n            throw new DOMException_1.InvalidNodeTypeError();\n        var length = algorithm_1.tree_nodeLength(node);\n        this._start = [node, 0];\n        this._end = [node, length];\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.compareBoundaryPoints = function (how, sourceRange) {\n        /**\n         * 1. If how is not one of\n         * - START_TO_START,\n         * - START_TO_END,\n         * - END_TO_END, and\n         * - END_TO_START,\n         * then throw a \"NotSupportedError\" DOMException.\n         */\n        if (how !== interfaces_1.HowToCompare.StartToStart && how !== interfaces_1.HowToCompare.StartToEnd &&\n            how !== interfaces_1.HowToCompare.EndToEnd && how !== interfaces_1.HowToCompare.EndToStart)\n            throw new DOMException_1.NotSupportedError();\n        /**\n         * 2. If context object’s root is not the same as sourceRange’s root,\n         * then throw a \"WrongDocumentError\" DOMException.\n         */\n        if (algorithm_1.range_root(this) !== algorithm_1.range_root(sourceRange))\n            throw new DOMException_1.WrongDocumentError();\n        /**\n         * 3. If how is:\n         * - START_TO_START:\n         * Let this point be the context object’s start. Let other point be\n         * sourceRange’s start.\n         * - START_TO_END:\n         * Let this point be the context object’s end. Let other point be\n         * sourceRange’s start.\n         * - END_TO_END:\n         * Let this point be the context object’s end. Let other point be\n         * sourceRange’s end.\n         * - END_TO_START:\n         * Let this point be the context object’s start. Let other point be\n         * sourceRange’s end.\n         */\n        var thisPoint;\n        var otherPoint;\n        switch (how) {\n            case interfaces_1.HowToCompare.StartToStart:\n                thisPoint = this._start;\n                otherPoint = sourceRange._start;\n                break;\n            case interfaces_1.HowToCompare.StartToEnd:\n                thisPoint = this._end;\n                otherPoint = sourceRange._start;\n                break;\n            case interfaces_1.HowToCompare.EndToEnd:\n                thisPoint = this._end;\n                otherPoint = sourceRange._end;\n                break;\n            case interfaces_1.HowToCompare.EndToStart:\n                thisPoint = this._start;\n                otherPoint = sourceRange._end;\n                break;\n            /* istanbul ignore next */\n            default:\n                throw new DOMException_1.NotSupportedError();\n        }\n        /**\n         * 4. If the position of this point relative to other point is\n         * - before\n         * Return −1.\n         * - equal\n         * Return 0.\n         * - after\n         * Return 1.\n         */\n        var position = algorithm_1.boundaryPoint_position(thisPoint, otherPoint);\n        if (position === interfaces_1.BoundaryPosition.Before) {\n            return -1;\n        }\n        else if (position === interfaces_1.BoundaryPosition.After) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.deleteContents = function () {\n        var e_1, _a, e_2, _b;\n        /**\n         * 1. If the context object is collapsed, then return.\n         * 2. Let original start node, original start offset, original end node,\n         * and original end offset be the context object’s start node,\n         * start offset, end node, and end offset, respectively.\n         */\n        if (algorithm_1.range_collapsed(this))\n            return;\n        var originalStartNode = this._startNode;\n        var originalStartOffset = this._startOffset;\n        var originalEndNode = this._endNode;\n        var originalEndOffset = this._endOffset;\n        /**\n         * 3. If original start node and original end node are the same, and they\n         * are a Text, ProcessingInstruction, or Comment node, replace data with\n         * node original start node, offset original start offset, count original\n         * end offset minus original start offset, and data the empty string,\n         * and then return.\n         */\n        if (originalStartNode === originalEndNode &&\n            util_1.Guard.isCharacterDataNode(originalStartNode)) {\n            algorithm_1.characterData_replaceData(originalStartNode, originalStartOffset, originalEndOffset - originalStartOffset, '');\n            return;\n        }\n        /**\n         * 4. Let nodes to remove be a list of all the nodes that are contained in\n         * the context object, in tree order, omitting any node whose parent is also\n         * contained in the context object.\n         */\n        var nodesToRemove = [];\n        try {\n            for (var _c = __values(algorithm_1.range_getContainedNodes(this)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var node = _d.value;\n                var parent = node._parent;\n                if (parent !== null && algorithm_1.range_isContained(parent, this)) {\n                    continue;\n                }\n                nodesToRemove.push(node);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var newNode;\n        var newOffset;\n        if (algorithm_1.tree_isAncestorOf(originalEndNode, originalStartNode, true)) {\n            /**\n             * 5. If original start node is an inclusive ancestor of original end\n             * node, set new node to original start node and new offset to original\n             * start offset.\n             */\n            newNode = originalStartNode;\n            newOffset = originalStartOffset;\n        }\n        else {\n            /**\n             * 6. Otherwise:\n             * 6.1. Let reference node equal original start node.\n             * 6.2. While reference node’s parent is not null and is not an inclusive\n             * ancestor of original end node, set reference node to its parent.\n             * 6.3. Set new node to the parent of reference node, and new offset to\n             * one plus the index of reference node.\n             */\n            var referenceNode = originalStartNode;\n            while (referenceNode._parent !== null &&\n                !algorithm_1.tree_isAncestorOf(originalEndNode, referenceNode._parent, true)) {\n                referenceNode = referenceNode._parent;\n            }\n            /* istanbul ignore next */\n            if (referenceNode._parent === null) {\n                throw new Error(\"Parent node is null.\");\n            }\n            newNode = referenceNode._parent;\n            newOffset = algorithm_1.tree_index(referenceNode) + 1;\n        }\n        /**\n         * 7. If original start node is a Text, ProcessingInstruction, or Comment\n         * node, replace data with node original start node, offset original start\n         * offset, count original start node’s length minus original start offset,\n         * data the empty string.\n         */\n        if (util_1.Guard.isCharacterDataNode(originalStartNode)) {\n            algorithm_1.characterData_replaceData(originalStartNode, originalStartOffset, algorithm_1.tree_nodeLength(originalStartNode) - originalStartOffset, '');\n        }\n        try {\n            /**\n             * 8. For each node in nodes to remove, in tree order, remove node from its\n             * parent.\n             */\n            for (var nodesToRemove_1 = __values(nodesToRemove), nodesToRemove_1_1 = nodesToRemove_1.next(); !nodesToRemove_1_1.done; nodesToRemove_1_1 = nodesToRemove_1.next()) {\n                var node = nodesToRemove_1_1.value;\n                /* istanbul ignore else */\n                if (node._parent) {\n                    algorithm_1.mutation_remove(node, node._parent);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (nodesToRemove_1_1 && !nodesToRemove_1_1.done && (_b = nodesToRemove_1.return)) _b.call(nodesToRemove_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        /**\n         * 9. If original end node is a Text, ProcessingInstruction, or Comment\n         * node, replace data with node original end node, offset 0, count original\n         * end offset and data the empty string.\n         */\n        if (util_1.Guard.isCharacterDataNode(originalEndNode)) {\n            algorithm_1.characterData_replaceData(originalEndNode, 0, originalEndOffset, '');\n        }\n        /**\n         * 10. Set start and end to (new node, new offset).\n         */\n        this._start = [newNode, newOffset];\n        this._end = [newNode, newOffset];\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.extractContents = function () {\n        /**\n         * The extractContents() method, when invoked, must return the result of\n         * extracting the context object.\n         */\n        return algorithm_1.range_extract(this);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.cloneContents = function () {\n        /**\n         * The cloneContents() method, when invoked, must return the result of\n         * cloning the contents of the context object.\n         */\n        return algorithm_1.range_cloneTheContents(this);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.insertNode = function (node) {\n        /**\n         * The insertNode(node) method, when invoked, must insert node into the\n         * context object.\n         */\n        return algorithm_1.range_insert(node, this);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.surroundContents = function (newParent) {\n        var e_3, _a;\n        try {\n            /**\n             * 1. If a non-Text node is partially contained in the context object, then\n             * throw an \"InvalidStateError\" DOMException.\n             */\n            for (var _b = __values(algorithm_1.range_getPartiallyContainedNodes(this)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node = _c.value;\n                if (!util_1.Guard.isTextNode(node)) {\n                    throw new DOMException_1.InvalidStateError();\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        /**\n         * 2. If newParent is a Document, DocumentType, or DocumentFragment node,\n         * then throw an \"InvalidNodeTypeError\" DOMException.\n         */\n        if (util_1.Guard.isDocumentNode(newParent) ||\n            util_1.Guard.isDocumentTypeNode(newParent) ||\n            util_1.Guard.isDocumentFragmentNode(newParent)) {\n            throw new DOMException_1.InvalidNodeTypeError();\n        }\n        /**\n         * 3. Let fragment be the result of extracting the context object.\n         */\n        var fragment = algorithm_1.range_extract(this);\n        /**\n         * 4. If newParent has children, then replace all with null within newParent.\n         */\n        if ((newParent)._children.size !== 0) {\n            algorithm_1.mutation_replaceAll(null, newParent);\n        }\n        /**\n         * 5. Insert newParent into the context object.\n         * 6. Append fragment to newParent.\n         */\n        algorithm_1.range_insert(newParent, this);\n        algorithm_1.mutation_append(fragment, newParent);\n        /**\n         * 7. Select newParent within the context object.\n         */\n        algorithm_1.range_select(newParent, this);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.cloneRange = function () {\n        /**\n         * The cloneRange() method, when invoked, must return a new live range with\n         * the same start and end as the context object.\n         */\n        return algorithm_1.create_range(this._start, this._end);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.detach = function () {\n        /**\n         * The detach() method, when invoked, must do nothing.\n         *\n         * since JS lacks weak references, we still use detach\n         */\n        DOMImpl_1.dom.rangeList.delete(this);\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.isPointInRange = function (node, offset) {\n        /**\n         * 1. If node’s root is different from the context object’s root, return false.\n         */\n        if (algorithm_1.tree_rootNode(node) !== algorithm_1.range_root(this)) {\n            return false;\n        }\n        /**\n         * 2. If node is a doctype, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 3. If offset is greater than node’s length, then throw an\n         * \"IndexSizeError\" DOMException.\n         */\n        if (util_1.Guard.isDocumentTypeNode(node))\n            throw new DOMException_1.InvalidNodeTypeError();\n        if (offset > algorithm_1.tree_nodeLength(node))\n            throw new DOMException_1.IndexSizeError();\n        /**\n         * 4. If (node, offset) is before start or after end, return false.\n         */\n        var bp = [node, offset];\n        if (algorithm_1.boundaryPoint_position(bp, this._start) === interfaces_1.BoundaryPosition.Before ||\n            algorithm_1.boundaryPoint_position(bp, this._end) === interfaces_1.BoundaryPosition.After) {\n            return false;\n        }\n        /**\n         * 5. Return true.\n         */\n        return true;\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.comparePoint = function (node, offset) {\n        /**\n         * 1. If node’s root is different from the context object’s root, then throw\n         * a \"WrongDocumentError\" DOMException.\n         * 2. If node is a doctype, then throw an \"InvalidNodeTypeError\" DOMException.\n         * 3. If offset is greater than node’s length, then throw an\n         * \"IndexSizeError\" DOMException.\n         */\n        if (algorithm_1.tree_rootNode(node) !== algorithm_1.range_root(this))\n            throw new DOMException_1.WrongDocumentError();\n        if (util_1.Guard.isDocumentTypeNode(node))\n            throw new DOMException_1.InvalidNodeTypeError();\n        if (offset > algorithm_1.tree_nodeLength(node))\n            throw new DOMException_1.IndexSizeError();\n        /**\n         * 4. If (node, offset) is before start, return −1.\n         * 5. If (node, offset) is after end, return 1.\n         * 6. Return 0.\n         */\n        var bp = [node, offset];\n        if (algorithm_1.boundaryPoint_position(bp, this._start) === interfaces_1.BoundaryPosition.Before) {\n            return -1;\n        }\n        else if (algorithm_1.boundaryPoint_position(bp, this._end) === interfaces_1.BoundaryPosition.After) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    };\n    /** @inheritdoc */\n    RangeImpl.prototype.intersectsNode = function (node) {\n        /**\n         * 1. If node’s root is different from the context object’s root, return false.\n         */\n        if (algorithm_1.tree_rootNode(node) !== algorithm_1.range_root(this)) {\n            return false;\n        }\n        /**\n         * 2. Let parent be node’s parent.\n         * 3. If parent is null, return true.\n         */\n        var parent = node._parent;\n        if (parent === null)\n            return true;\n        /**\n         * 4. Let offset be node’s index.\n         */\n        var offset = algorithm_1.tree_index(node);\n        /**\n         * 5. If (parent, offset) is before end and (parent, offset plus 1) is\n         * after start, return true.\n         */\n        if (algorithm_1.boundaryPoint_position([parent, offset], this._end) === interfaces_1.BoundaryPosition.Before &&\n            algorithm_1.boundaryPoint_position([parent, offset + 1], this._start) === interfaces_1.BoundaryPosition.After) {\n            return true;\n        }\n        /**\n         * 6. Return false.\n         */\n        return false;\n    };\n    RangeImpl.prototype.toString = function () {\n        var e_4, _a;\n        /**\n         * 1. Let s be the empty string.\n         */\n        var s = '';\n        /**\n         * 2. If the context object’s start node is the context object’s end node\n         * and it is a Text node, then return the substring of that Text node’s data\n         * beginning at the context object’s start offset and ending at the context\n         * object’s end offset.\n         */\n        if (this._startNode === this._endNode && util_1.Guard.isTextNode(this._startNode)) {\n            return this._startNode._data.substring(this._startOffset, this._endOffset);\n        }\n        /**\n         * 3. If the context object’s start node is a Text node, then append the\n         * substring of that node’s data from the context object’s start offset\n         * until the end to s.\n         */\n        if (util_1.Guard.isTextNode(this._startNode)) {\n            s += this._startNode._data.substring(this._startOffset);\n        }\n        try {\n            /**\n             * 4. Append the concatenation of the data of all Text nodes that are\n             * contained in the context object, in tree order, to s.\n             */\n            for (var _b = __values(algorithm_1.range_getContainedNodes(this)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var child = _c.value;\n                if (util_1.Guard.isTextNode(child)) {\n                    s += child._data;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        /**\n         * 5. If the context object’s end node is a Text node, then append the\n         * substring of that node’s data from its start until the context object’s\n         * end offset to s.\n         */\n        if (util_1.Guard.isTextNode(this._endNode)) {\n            s += this._endNode._data.substring(0, this._endOffset);\n        }\n        /**\n         * 6. Return s.\n         */\n        return s;\n    };\n    /**\n     * Creates a new `Range`.\n     *\n     * @param start - start point\n     * @param end - end point\n     */\n    RangeImpl._create = function (start, end) {\n        var range = new RangeImpl();\n        if (start)\n            range._start = start;\n        if (end)\n            range._end = end;\n        return range;\n    };\n    RangeImpl.START_TO_START = 0;\n    RangeImpl.START_TO_END = 1;\n    RangeImpl.END_TO_END = 2;\n    RangeImpl.END_TO_START = 3;\n    return RangeImpl;\n}(AbstractRangeImpl_1.AbstractRangeImpl));\nexports.RangeImpl = RangeImpl;\n/**\n * Define constants on prototype.\n */\nWebIDLAlgorithm_1.idl_defineConst(RangeImpl.prototype, \"START_TO_START\", 0);\nWebIDLAlgorithm_1.idl_defineConst(RangeImpl.prototype, \"START_TO_END\", 1);\nWebIDLAlgorithm_1.idl_defineConst(RangeImpl.prototype, \"END_TO_END\", 2);\nWebIDLAlgorithm_1.idl_defineConst(RangeImpl.prototype, \"END_TO_START\", 3);\n//# sourceMappingURL=RangeImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar util_1 = require(\"../util\");\nvar CustomEventImpl_1 = require(\"../dom/CustomEventImpl\");\nvar EventImpl_1 = require(\"../dom/EventImpl\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar ShadowTreeAlgorithm_1 = require(\"./ShadowTreeAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\n/**\n * Sets the canceled flag of an event.\n *\n * @param event - an event\n */\nfunction event_setTheCanceledFlag(event) {\n    if (event._cancelable && !event._inPassiveListenerFlag) {\n        event._canceledFlag = true;\n    }\n}\nexports.event_setTheCanceledFlag = event_setTheCanceledFlag;\n/**\n * Initializes the value of an event.\n *\n * @param event - an event to initialize\n * @param type - the type of event\n * @param bubbles - whether the event propagates in reverse\n * @param cancelable - whether the event can be cancelled\n */\nfunction event_initialize(event, type, bubbles, cancelable) {\n    event._initializedFlag = true;\n    event._stopPropagationFlag = false;\n    event._stopImmediatePropagationFlag = false;\n    event._canceledFlag = false;\n    event._isTrusted = false;\n    event._target = null;\n    event._type = type;\n    event._bubbles = bubbles;\n    event._cancelable = cancelable;\n}\nexports.event_initialize = event_initialize;\n/**\n * Creates a new event.\n *\n * @param eventInterface - event interface\n * @param realm - realm\n */\nfunction event_createAnEvent(eventInterface, realm) {\n    if (realm === void 0) { realm = undefined; }\n    /**\n     * 1. If realm is not given, then set it to null.\n     * 2. Let dictionary be the result of converting the JavaScript value\n     * undefined to the dictionary type accepted by eventInterface’s\n     * constructor. (This dictionary type will either be EventInit or a\n     * dictionary that inherits from it.)\n     * 3. Let event be the result of running the inner event creation steps with\n     * eventInterface, realm, the time of the occurrence that the event is\n     * signaling, and dictionary.\n     * 4. Initialize event’s isTrusted attribute to true.\n     * 5. Return event.\n     */\n    if (realm === undefined)\n        realm = null;\n    var dictionary = {};\n    var event = event_innerEventCreationSteps(eventInterface, realm, new Date(), dictionary);\n    event._isTrusted = true;\n    return event;\n}\nexports.event_createAnEvent = event_createAnEvent;\n/**\n * Performs event creation steps.\n *\n * @param eventInterface - event interface\n * @param realm - realm\n * @param time - time of occurrance\n * @param dictionary - event attributes\n *\n */\nfunction event_innerEventCreationSteps(eventInterface, realm, time, dictionary) {\n    /**\n     * 1. Let event be the result of creating a new object using eventInterface.\n     * TODO: Implement realms\n     * If realm is non-null, then use that Realm; otherwise, use the default\n     * behavior defined in Web IDL.\n     */\n    var event = new eventInterface(\"\");\n    /**\n     * 2. Set event’s initialized flag.\n     * 3. Initialize event’s timeStamp attribute to a DOMHighResTimeStamp\n     * representing the high resolution time from the time origin to time.\n     * 4. For each member → value in dictionary, if event has an attribute\n     * whose identifier is member, then initialize that attribute to value.\n     * 5. Run the event constructing steps with event.\n     * 6. Return event.\n     */\n    event._initializedFlag = true;\n    event._timeStamp = time.getTime();\n    Object.assign(event, dictionary);\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runEventConstructingSteps(event);\n    }\n    return event;\n}\nexports.event_innerEventCreationSteps = event_innerEventCreationSteps;\n/**\n * Dispatches an event to an event target.\n *\n * @param event - the event to dispatch\n * @param target - event target\n * @param legacyTargetOverrideFlag - legacy target override flag\n * @param legacyOutputDidListenersThrowFlag - legacy output flag that returns\n * whether the event listener's callback threw an exception\n */\nfunction event_dispatch(event, target, legacyTargetOverrideFlag, legacyOutputDidListenersThrowFlag) {\n    var e_1, _a, e_2, _b;\n    if (legacyTargetOverrideFlag === void 0) { legacyTargetOverrideFlag = false; }\n    if (legacyOutputDidListenersThrowFlag === void 0) { legacyOutputDidListenersThrowFlag = { value: false }; }\n    var clearTargets = false;\n    /**\n     * 1. Set event's dispatch flag.\n     */\n    event._dispatchFlag = true;\n    /**\n     * 2. Let targetOverride be target, if legacy target override flag is not\n     * given, and target's associated Document otherwise.\n     *\n     * _Note:_ legacy target override flag is only used by HTML and only when\n     * target is a Window object.\n     */\n    var targetOverride = target;\n    if (legacyTargetOverrideFlag) {\n        var doc = target._associatedDocument;\n        if (util_1.Guard.isDocumentNode(doc)) {\n            targetOverride = doc;\n        }\n    }\n    /**\n     * 3. Let activationTarget be null.\n     * 4. Let relatedTarget be the result of retargeting event's relatedTarget\n     * against target.\n     * 5. If target is not relatedTarget or target is event's relatedTarget,\n     * then:\n    */\n    var activationTarget = null;\n    var relatedTarget = TreeAlgorithm_1.tree_retarget(event._relatedTarget, target);\n    if (target !== relatedTarget || target === event._relatedTarget) {\n        /**\n         * 5.1. Let touchTargets be a new list.\n         * 5.2. For each touchTarget of event's touch target list, append the\n         * result of retargeting touchTarget against target to touchTargets.\n         * 5.3. Append to an event path with event, target, targetOverride,\n         * relatedTarget, touchTargets, and false.\n         * 5.4. Let isActivationEvent be true, if event is a MouseEvent object\n         * and event's type attribute is \"click\", and false otherwise.\n         * 5.5. If isActivationEvent is true and target has activation behavior,\n         * then set activationTarget to target.\n         * 5.6. Let slotable be target, if target is a slotable and is assigned,\n         * and null otherwise.\n         * 5.7. Let slot-in-closed-tree be false.\n         * 5.8. Let parent be the result of invoking target's get the parent with\n         * event.\n         */\n        var touchTargets = [];\n        try {\n            for (var _c = __values(event._touchTargetList), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var touchTarget = _d.value;\n                touchTargets.push(TreeAlgorithm_1.tree_retarget(touchTarget, target));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        event_appendToAnEventPath(event, target, targetOverride, relatedTarget, touchTargets, false);\n        var isActivationEvent = (util_1.Guard.isMouseEvent(event) && event._type === \"click\");\n        if (isActivationEvent && target._activationBehavior !== undefined) {\n            activationTarget = target;\n        }\n        var slotable = (util_1.Guard.isSlotable(target) && ShadowTreeAlgorithm_1.shadowTree_isAssigned(target)) ?\n            target : null;\n        var slotInClosedTree = false;\n        var parent = target._getTheParent(event);\n        /**\n         * 5.9. While parent is non-null:\n         */\n        while (parent !== null && util_1.Guard.isNode(parent)) {\n            /**\n             * 5.9.1 If slotable is non-null:\n             * 5.9.1.1. Assert: parent is a slot.\n             * 5.9.1.2. Set slotable to null.\n             * 5.9.1.3. If parent's root is a shadow root whose mode is \"closed\",\n             * then set slot-in-closed-tree to true.\n             */\n            if (slotable !== null) {\n                if (!util_1.Guard.isSlot(parent)) {\n                    throw new Error(\"Parent node of a slotable should be a slot.\");\n                }\n                slotable = null;\n                var root = TreeAlgorithm_1.tree_rootNode(parent, true);\n                if (util_1.Guard.isShadowRoot(root) && root._mode === \"closed\") {\n                    slotInClosedTree = true;\n                }\n            }\n            /**\n             * 5.9.2 If parent is a slotable and is assigned, then set slotable to\n             * parent.\n             * 5.9.3. Let relatedTarget be the result of retargeting event's\n             * relatedTarget against parent.\n             * 5.9.4. Let touchTargets be a new list.\n             * 5.9.4. For each touchTarget of event's touch target list, append the\n             * result of retargeting touchTarget against parent to touchTargets.\n             */\n            if (util_1.Guard.isSlotable(parent) && ShadowTreeAlgorithm_1.shadowTree_isAssigned(parent)) {\n                slotable = parent;\n            }\n            relatedTarget = TreeAlgorithm_1.tree_retarget(event._relatedTarget, parent);\n            touchTargets = [];\n            try {\n                for (var _e = (e_2 = void 0, __values(event._touchTargetList)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var touchTarget = _f.value;\n                    touchTargets.push(TreeAlgorithm_1.tree_retarget(touchTarget, parent));\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            /**\n             * 5.9.6. If parent is a Window object, or parent is a node and target's\n             * root is a shadow-including inclusive ancestor of parent, then:\n             */\n            if (util_1.Guard.isWindow(parent) || (util_1.Guard.isNode(parent) && util_1.Guard.isNode(target) &&\n                TreeAlgorithm_1.tree_isAncestorOf(TreeAlgorithm_1.tree_rootNode(target, true), parent, true, true))) {\n                /**\n                 * 5.9.6.1. If isActivationEvent is true, event's bubbles attribute\n                 * is true, activationTarget is null, and parent has activation\n                 * behavior, then set activationTarget to parent.\n                 * 5.9.6.2. Append to an event path with event, parent, null,\n                 * relatedTarget, touchTargets, and slot-in-closed-tree.\n                 */\n                if (isActivationEvent && event._bubbles && activationTarget === null &&\n                    parent._activationBehavior) {\n                    activationTarget = parent;\n                }\n                event_appendToAnEventPath(event, parent, null, relatedTarget, touchTargets, slotInClosedTree);\n            }\n            else if (parent === relatedTarget) {\n                /**\n                 * 5.9.7. Otherwise, if parent is relatedTarget,\n                 * then set parent to null.\n                 */\n                parent = null;\n            }\n            else {\n                /**\n                 * 5.9.8. Otherwise, set target to parent and then:\n                 * 5.9.8.1. If isActivationEvent is true, activationTarget is null,\n                 * and target has activation behavior, then set activationTarget\n                 * to target.\n                 * 5.9.8.2. Append to an event path with event, parent, target,\n                 * relatedTarget, touchTargets, and slot-in-closed-tree.\n                 */\n                target = parent;\n                if (isActivationEvent && activationTarget === null &&\n                    target._activationBehavior) {\n                    activationTarget = target;\n                }\n                event_appendToAnEventPath(event, parent, target, relatedTarget, touchTargets, slotInClosedTree);\n            }\n            /**\n             * 5.9.9. If parent is non-null, then set parent to the result of\n             * invoking parent's get the parent with event.\n             * 5.9.10. Set slot-in-closed-tree to false.\n             */\n            if (parent !== null) {\n                parent = parent._getTheParent(event);\n            }\n            slotInClosedTree = false;\n        }\n        /**\n         * 5.10. Let clearTargetsStruct be the last struct in event's path whose\n         * shadow-adjusted target is non-null.\n         */\n        var clearTargetsStruct = null;\n        var path = event._path;\n        for (var i = path.length - 1; i >= 0; i--) {\n            var struct = path[i];\n            if (struct.shadowAdjustedTarget !== null) {\n                clearTargetsStruct = struct;\n                break;\n            }\n        }\n        /**\n         * 5.11. Let clearTargets be true if clearTargetsStruct's shadow-adjusted\n         * target, clearTargetsStruct's relatedTarget, or an EventTarget object\n         * in clearTargetsStruct's touch target list is a node and its root is\n         * a shadow root, and false otherwise.\n         */\n        if (clearTargetsStruct !== null) {\n            if (util_1.Guard.isNode(clearTargetsStruct.shadowAdjustedTarget) &&\n                util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(clearTargetsStruct.shadowAdjustedTarget, true))) {\n                clearTargets = true;\n            }\n            else if (util_1.Guard.isNode(clearTargetsStruct.relatedTarget) &&\n                util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(clearTargetsStruct.relatedTarget, true))) {\n                clearTargets = true;\n            }\n            else {\n                for (var j = 0; j < clearTargetsStruct.touchTargetList.length; j++) {\n                    var struct = clearTargetsStruct.touchTargetList[j];\n                    if (util_1.Guard.isNode(struct) &&\n                        util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(struct, true))) {\n                        clearTargets = true;\n                        break;\n                    }\n                }\n            }\n        }\n        /**\n         * 5.12. If activationTarget is non-null and activationTarget has\n         * legacy-pre-activation behavior, then run activationTarget's\n         * legacy-pre-activation behavior.\n         */\n        if (activationTarget !== null &&\n            activationTarget._legacyPreActivationBehavior !== undefined) {\n            activationTarget._legacyPreActivationBehavior(event);\n        }\n        /**\n         * 5.13. For each struct in event's path, in reverse order:\n         */\n        for (var i = path.length - 1; i >= 0; i--) {\n            var struct = path[i];\n            /**\n             * 5.13.1. If struct's shadow-adjusted target is non-null, then set\n             * event's eventPhase attribute to AT_TARGET.\n             * 5.13.2. Otherwise, set event's eventPhase attribute to\n             * CAPTURING_PHASE.\n             * 5.13.3. Invoke with struct, event, \"capturing\", and\n             * legacyOutputDidListenersThrowFlag if given.\n             */\n            if (struct.shadowAdjustedTarget !== null) {\n                event._eventPhase = interfaces_1.EventPhase.AtTarget;\n            }\n            else {\n                event._eventPhase = interfaces_1.EventPhase.Capturing;\n            }\n            event_invoke(struct, event, \"capturing\", legacyOutputDidListenersThrowFlag);\n        }\n        /**\n         * 5.14. For each struct in event's path\n         */\n        for (var i = 0; i < path.length; i++) {\n            var struct = path[i];\n            /**\n             * 5.14.1. If struct's shadow-adjusted target is non-null, then set\n             * event's eventPhase attribute to AT_TARGET.\n             * 5.14.2. Otherwise:\n             * 5.14.2.1. If event's bubbles attribute is false, then continue.\n             * 5.14.2.2. Set event's eventPhase attribute to BUBBLING_PHASE.\n             * 5.14.3. Invoke with struct, event, \"bubbling\", and\n             * legacyOutputDidListenersThrowFlag if given.\n             */\n            if (struct.shadowAdjustedTarget !== null) {\n                event._eventPhase = interfaces_1.EventPhase.AtTarget;\n            }\n            else {\n                if (!event._bubbles)\n                    continue;\n                event._eventPhase = interfaces_1.EventPhase.Bubbling;\n            }\n            event_invoke(struct, event, \"bubbling\", legacyOutputDidListenersThrowFlag);\n        }\n    }\n    /**\n     * 6. Set event's eventPhase attribute to NONE.\n     * 7. Set event's currentTarget attribute to null.\n     * 8. Set event's path to the empty list.\n     * 9. Unset event's dispatch flag, stop propagation flag, and stop\n     * immediate propagation flag.\n     */\n    event._eventPhase = interfaces_1.EventPhase.None;\n    event._currentTarget = null;\n    event._path = [];\n    event._dispatchFlag = false;\n    event._stopPropagationFlag = false;\n    event._stopImmediatePropagationFlag = false;\n    /**\n     * 10. If clearTargets, then:\n     * 10.1. Set event's target to null.\n     * 10.2. Set event's relatedTarget to null.\n     * 10.3. Set event's touch target list to the empty list.\n     */\n    if (clearTargets) {\n        event._target = null;\n        event._relatedTarget = null;\n        event._touchTargetList = [];\n    }\n    /**\n     * 11. If activationTarget is non-null, then:\n     * 11.1. If event's canceled flag is unset, then run activationTarget's\n     * activation behavior with event.\n     * 11.2. Otherwise, if activationTarget has legacy-canceled-activation\n     * behavior, then run activationTarget's legacy-canceled-activation\n     * behavior.\n     */\n    if (activationTarget !== null) {\n        if (!event._canceledFlag && activationTarget._activationBehavior !== undefined) {\n            activationTarget._activationBehavior(event);\n        }\n        else if (activationTarget._legacyCanceledActivationBehavior !== undefined) {\n            activationTarget._legacyCanceledActivationBehavior(event);\n        }\n    }\n    /**\n     * 12. Return false if event's canceled flag is set, and true otherwise.\n     */\n    return !event._canceledFlag;\n}\nexports.event_dispatch = event_dispatch;\n/**\n * Appends a new struct to an event's path.\n *\n * @param event - an event\n * @param invocationTarget - the target of the invocation\n * @param shadowAdjustedTarget - shadow-root adjusted event target\n * @param relatedTarget - related event target\n * @param touchTargets - a list of touch targets\n * @param slotInClosedTree - if the target's parent is a closed shadow root\n */\nfunction event_appendToAnEventPath(event, invocationTarget, shadowAdjustedTarget, relatedTarget, touchTargets, slotInClosedTree) {\n    /**\n     * 1. Let invocationTargetInShadowTree be false.\n     * 2. If invocationTarget is a node and its root is a shadow root, then\n     * set invocationTargetInShadowTree to true.\n     */\n    var invocationTargetInShadowTree = false;\n    if (util_1.Guard.isNode(invocationTarget) &&\n        util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(invocationTarget))) {\n        invocationTargetInShadowTree = true;\n    }\n    /**\n     * 3. Let root-of-closed-tree be false.\n     * 4. If invocationTarget is a shadow root whose mode is \"closed\", then\n     * set root-of-closed-tree to true.\n     */\n    var rootOfClosedTree = false;\n    if (util_1.Guard.isShadowRoot(invocationTarget) &&\n        invocationTarget._mode === \"closed\") {\n        rootOfClosedTree = true;\n    }\n    /**\n     * 5. Append a new struct to event's path whose invocation target is\n     * invocationTarget, invocation-target-in-shadow-tree is\n     * invocationTargetInShadowTree, shadow-adjusted target is\n     * shadowAdjustedTarget, relatedTarget is relatedTarget,\n     * touch target list is touchTargets, root-of-closed-tree is\n     * root-of-closed-tree, and slot-in-closed-tree is slot-in-closed-tree.\n     */\n    event._path.push({\n        invocationTarget: invocationTarget,\n        invocationTargetInShadowTree: invocationTargetInShadowTree,\n        shadowAdjustedTarget: shadowAdjustedTarget,\n        relatedTarget: relatedTarget,\n        touchTargetList: touchTargets,\n        rootOfClosedTree: rootOfClosedTree,\n        slotInClosedTree: slotInClosedTree\n    });\n}\nexports.event_appendToAnEventPath = event_appendToAnEventPath;\n/**\n * Invokes an event.\n *\n * @param struct - a struct defining event's path\n * @param event - the event to invoke\n * @param phase - event phase\n * @param legacyOutputDidListenersThrowFlag - legacy output flag that returns\n * whether the event listener's callback threw an exception\n */\nfunction event_invoke(struct, event, phase, legacyOutputDidListenersThrowFlag) {\n    if (legacyOutputDidListenersThrowFlag === void 0) { legacyOutputDidListenersThrowFlag = { value: false }; }\n    /**\n     * 1. Set event's target to the shadow-adjusted target of the last struct\n     * in event's path, that is either struct or preceding struct, whose\n     * shadow-adjusted target is non-null.\n     */\n    var path = event._path;\n    var index = -1;\n    for (var i = 0; i < path.length; i++) {\n        if (path[i] === struct) {\n            index = i;\n            break;\n        }\n    }\n    if (index !== -1) {\n        var item = path[index];\n        if (item.shadowAdjustedTarget !== null) {\n            event._target = item.shadowAdjustedTarget;\n        }\n        else if (index > 0) {\n            item = path[index - 1];\n            if (item.shadowAdjustedTarget !== null) {\n                event._target = item.shadowAdjustedTarget;\n            }\n        }\n    }\n    /**\n     * 2. Set event's relatedTarget to struct's relatedTarget.\n     * 3. Set event's touch target list to struct's touch target list.\n     * 4. If event's stop propagation flag is set, then return.\n     * 5. Initialize event's currentTarget attribute to struct's invocation\n     * target.\n     * 6. Let listeners be a clone of event's currentTarget attribute value's\n     * event listener list.\n     *\n     * _Note:_ This avoids event listeners added after this point from being\n     * run. Note that removal still has an effect due to the removed field.\n     */\n    event._relatedTarget = struct.relatedTarget;\n    event._touchTargetList = struct.touchTargetList;\n    if (event._stopPropagationFlag)\n        return;\n    event._currentTarget = struct.invocationTarget;\n    var currentTarget = event._currentTarget;\n    var targetListeners = currentTarget._eventListenerList;\n    var listeners = new (Array.bind.apply(Array, __spread([void 0], targetListeners)))();\n    /**\n     * 7. Let found be the result of running inner invoke with event, listeners,\n     * phase, and legacyOutputDidListenersThrowFlag if given.\n     */\n    var found = event_innerInvoke(event, listeners, phase, struct, legacyOutputDidListenersThrowFlag);\n    /**\n     * 8. If found is false and event's isTrusted attribute is true, then:\n     */\n    if (!found && event._isTrusted) {\n        /**\n         * 8.1. Let originalEventType be event's type attribute value.\n         * 8.2. If event's type attribute value is a match for any of the strings\n         * in the first column in the following table, set event's type attribute\n         * value to the string in the second column on the same row as the matching\n         * string, and return otherwise.\n         *\n         * Event type           | Legacy event type\n         * -------------------------------------------------\n         * \"animationend\"       | \"webkitAnimationEnd\"\n         * \"animationiteration\" | \"webkitAnimationIteration\"\n         * \"animationstart\"     | \"webkitAnimationStart\"\n         * \"transitionend\"      | \"webkitTransitionEnd\"\n         */\n        var originalEventType = event._type;\n        if (originalEventType === \"animationend\") {\n            event._type = \"webkitAnimationEnd\";\n        }\n        else if (originalEventType === \"animationiteration\") {\n            event._type = \"webkitAnimationIteration\";\n        }\n        else if (originalEventType === \"animationstart\") {\n            event._type = \"webkitAnimationStart\";\n        }\n        else if (originalEventType === \"transitionend\") {\n            event._type = \"webkitTransitionEnd\";\n        }\n        /**\n         * 8.3. Inner invoke with event, listeners, phase, and\n         * legacyOutputDidListenersThrowFlag if given.\n         * 8.4. Set event's type attribute value to originalEventType.\n         */\n        event_innerInvoke(event, listeners, phase, struct, legacyOutputDidListenersThrowFlag);\n        event._type = originalEventType;\n    }\n}\nexports.event_invoke = event_invoke;\n/**\n * Invokes an event.\n *\n * @param event - the event to invoke\n * @param listeners - event listeners\n * @param phase - event phase\n * @param struct - a struct defining event's path\n * @param legacyOutputDidListenersThrowFlag - legacy output flag that returns\n * whether the event listener's callback threw an exception\n */\nfunction event_innerInvoke(event, listeners, phase, struct, legacyOutputDidListenersThrowFlag) {\n    if (legacyOutputDidListenersThrowFlag === void 0) { legacyOutputDidListenersThrowFlag = { value: false }; }\n    /**\n     * 1. Let found be false.\n     * 2. For each listener in listeners, whose removed is false:\n     */\n    var found = false;\n    for (var i = 0; i < listeners.length; i++) {\n        var listener = listeners[i];\n        if (!listener.removed) {\n            /**\n             * 2.1. If event's type attribute value is not listener's type, then\n             * continue.\n             * 2.2. Set found to true.\n             * 2.3. If phase is \"capturing\" and listener's capture is false, then\n             * continue.\n             * 2.4. If phase is \"bubbling\" and listener's capture is true, then\n             * continue.\n             */\n            if (event._type !== listener.type)\n                continue;\n            found = true;\n            if (phase === \"capturing\" && !listener.capture)\n                continue;\n            if (phase === \"bubbling\" && listener.capture)\n                continue;\n            /**\n             * 2.5. If listener's once is true, then remove listener from event's\n             * currentTarget attribute value's event listener list.\n             */\n            if (listener.once && event._currentTarget !== null) {\n                var impl = event._currentTarget;\n                var index = -1;\n                for (var i_1 = 0; i_1 < impl._eventListenerList.length; i_1++) {\n                    if (impl._eventListenerList[i_1] === listener) {\n                        index = i_1;\n                        break;\n                    }\n                }\n                if (index !== -1) {\n                    impl._eventListenerList.splice(index, 1);\n                }\n            }\n            /**\n             * TODO: Implement realms\n             *\n             * 2.6. Let global be listener callback's associated Realm's global\n             * object.\n             */\n            var globalObject = undefined;\n            /**\n             * 2.7. Let currentEvent be undefined.\n             * 2.8. If global is a Window object, then:\n             * 2.8.1. Set currentEvent to global's current event.\n             * 2.8.2. If struct's invocation-target-in-shadow-tree is false, then\n             * set global's current event to event.\n             */\n            var currentEvent = undefined;\n            if (util_1.Guard.isWindow(globalObject)) {\n                currentEvent = globalObject._currentEvent;\n                if (struct.invocationTargetInShadowTree === false) {\n                    globalObject._currentEvent = event;\n                }\n            }\n            /**\n             * 2.9. If listener's passive is true, then set event's in passive\n             * listener flag.\n             * 2.10. Call a user object's operation with listener's callback,\n             * \"handleEvent\", « event », and event's currentTarget attribute value.\n             */\n            if (listener.passive)\n                event._inPassiveListenerFlag = true;\n            try {\n                listener.callback.handleEvent.call(event._currentTarget, event);\n            }\n            catch (err) {\n                /**\n                 * If this throws an exception, then:\n                 * 2.10.1. Report the exception.\n                 * 2.10.2. Set legacyOutputDidListenersThrowFlag if given.\n                 *\n                 * _Note:_ The legacyOutputDidListenersThrowFlag is only used by\n                 * Indexed Database API.\n                 * TODO: Report the exception\n                 * See: https://html.spec.whatwg.org/multipage/webappapis.html#runtime-script-errors-in-documents\n                 */\n                legacyOutputDidListenersThrowFlag.value = true;\n            }\n            /**\n             * 2.11. Unset event's in passive listener flag.\n             */\n            if (listener.passive)\n                event._inPassiveListenerFlag = false;\n            /**\n             * 2.12. If global is a Window object, then set global's current event\n             * to currentEvent.\n             */\n            if (util_1.Guard.isWindow(globalObject)) {\n                globalObject._currentEvent = currentEvent;\n            }\n            /**\n             * 2.13. If event's stop immediate propagation flag is set, then return\n             * found.\n             */\n            if (event._stopImmediatePropagationFlag)\n                return found;\n        }\n    }\n    /**\n     * 3. Return found.\n     */\n    return found;\n}\nexports.event_innerInvoke = event_innerInvoke;\n/**\n * Fires an event at target.\n * @param e - event name\n * @param target - event target\n * @param eventConstructor - an event constructor, with a description of how\n * IDL attributes are to be initialized\n * @param idlAttributes - a dictionary describing how IDL attributes are\n * to be initialized\n * @param legacyTargetOverrideFlag - legacy target override flag\n */\nfunction event_fireAnEvent(e, target, eventConstructor, idlAttributes, legacyTargetOverrideFlag) {\n    /**\n     * 1. If eventConstructor is not given, then let eventConstructor be Event.\n     */\n    if (eventConstructor === undefined) {\n        eventConstructor = EventImpl_1.EventImpl;\n    }\n    /**\n     * 2. Let event be the result of creating an event given eventConstructor,\n     * in the relevant Realm of target.\n     */\n    var event = event_createAnEvent(eventConstructor);\n    /**\n     * 3. Initialize event’s type attribute to e.\n     */\n    event._type = e;\n    /**\n     * 4. Initialize any other IDL attributes of event as described in the\n     * invocation of this algorithm.\n     * _Note:_ This also allows for the isTrusted attribute to be set to false.\n     */\n    if (idlAttributes) {\n        for (var key in idlAttributes) {\n            var idlObj = event;\n            idlObj[key] = idlAttributes[key];\n        }\n    }\n    /**\n     * 5. Return the result of dispatching event at target, with legacy target\n     * override flag set if set.\n     */\n    return event_dispatch(event, target, legacyTargetOverrideFlag);\n}\nexports.event_fireAnEvent = event_fireAnEvent;\n/**\n * Creates an event.\n *\n * @param eventInterface - the name of the event interface\n */\nfunction event_createLegacyEvent(eventInterface) {\n    /**\n     * 1. Let constructor be null.\n     */\n    var constructor = null;\n    /**\n     * TODO: Implement in HTML DOM\n     * 2. If interface is an ASCII case-insensitive match for any of the strings\n     * in the first column in the following table, then set constructor to the\n     * interface in the second column on the same row as the matching string:\n     *\n     * String | Interface\n     * -------|----------\n     * \"beforeunloadevent\" | BeforeUnloadEvent\n     * \"compositionevent\" | CompositionEvent\n     * \"customevent\" | CustomEvent\n     * \"devicemotionevent\" | DeviceMotionEvent\n     * \"deviceorientationevent\" | DeviceOrientationEvent\n     * \"dragevent\" | DragEvent\n     * \"event\" | Event\n     * \"events\" | Event\n     * \"focusevent\" | FocusEvent\n     * \"hashchangeevent\" | HashChangeEvent\n     * \"htmlevents\" | Event\n     * \"keyboardevent\" | KeyboardEvent\n     * \"messageevent\" | MessageEvent\n     * \"mouseevent\" | MouseEvent\n     * \"mouseevents\" |\n     * \"storageevent\" | StorageEvent\n     * \"svgevents\" | Event\n     * \"textevent\" | CompositionEvent\n     * \"touchevent\" | TouchEvent\n     * \"uievent\" | UIEvent\n     * \"uievents\" | UIEvent\n     */\n    switch (eventInterface.toLowerCase()) {\n        case \"beforeunloadevent\":\n            break;\n        case \"compositionevent\":\n            break;\n        case \"customevent\":\n            constructor = CustomEventImpl_1.CustomEventImpl;\n            break;\n        case \"devicemotionevent\":\n            break;\n        case \"deviceorientationevent\":\n            break;\n        case \"dragevent\":\n            break;\n        case \"event\":\n        case \"events\":\n            constructor = EventImpl_1.EventImpl;\n            break;\n        case \"focusevent\":\n            break;\n        case \"hashchangeevent\":\n            break;\n        case \"htmlevents\":\n            break;\n        case \"keyboardevent\":\n            break;\n        case \"messageevent\":\n            break;\n        case \"mouseevent\":\n            break;\n        case \"mouseevents\":\n            break;\n        case \"storageevent\":\n            break;\n        case \"svgevents\":\n            break;\n        case \"textevent\":\n            break;\n        case \"touchevent\":\n            break;\n        case \"uievent\":\n            break;\n        case \"uievents\":\n            break;\n    }\n    /**\n     * 3. If constructor is null, then throw a \"NotSupportedError\" DOMException.\n     */\n    if (constructor === null) {\n        throw new DOMException_1.NotSupportedError(\"Event constructor not found for interface \" + eventInterface + \".\");\n    }\n    /**\n     * 4. If the interface indicated by constructor is not exposed on the\n     * relevant global object of the context object, then throw a\n     * \"NotSupportedError\" DOMException.\n     * _Note:_ Typically user agents disable support for touch events in some\n     * configurations, in which case this clause would be triggered for the\n     * interface TouchEvent.\n     */\n    // TODO: Implement realms\n    /**\n     * 5. Let event be the result of creating an event given constructor.\n     * 6. Initialize event’s type attribute to the empty string.\n     * 7. Initialize event’s timeStamp attribute to a DOMHighResTimeStamp\n     * representing the high resolution time from the time origin to now.\n     * 8. Initialize event’s isTrusted attribute to false.\n     * 9. Unset event’s initialized flag.\n     */\n    var event = new constructor(\"\");\n    event._type = \"\";\n    event._timeStamp = new Date().getTime();\n    event._isTrusted = false;\n    event._initializedFlag = false;\n    /**\n     * 10. Return event.\n     */\n    return event;\n}\nexports.event_createLegacyEvent = event_createLegacyEvent;\n/**\n * Getter of an event handler IDL attribute.\n *\n * @param eventTarget - event target\n * @param name - event name\n */\nfunction event_getterEventHandlerIDLAttribute(thisObj, name) {\n    /**\n     * 1. Let eventTarget be the result of determining the target of an event\n     * handler given this object and name.\n     * 2. If eventTarget is null, then return null.\n     * 3. Return the result of getting the current value of the event handler\n     * given eventTarget and name.\n     */\n    var eventTarget = event_determineTheTargetOfAnEventHandler(thisObj, name);\n    if (eventTarget === null)\n        return null;\n    return event_getTheCurrentValueOfAnEventHandler(eventTarget, name);\n}\nexports.event_getterEventHandlerIDLAttribute = event_getterEventHandlerIDLAttribute;\n/**\n * Setter of an event handler IDL attribute.\n *\n * @param eventTarget - event target\n * @param name - event name\n * @param value - event handler\n */\nfunction event_setterEventHandlerIDLAttribute(thisObj, name, value) {\n    /**\n     * 1. Let eventTarget be the result of determining the target of an event\n     * handler given this object and name.\n     * 2. If eventTarget is null, then return.\n     * 3. If the given value is null, then deactivate an event handler given\n     * eventTarget and name.\n     * 4. Otherwise:\n     * 4.1. Let handlerMap be eventTarget's event handler map.\n     * 4.2. Let eventHandler be handlerMap[name].\n     * 4.3. Set eventHandler's value to the given value.\n     * 4.4. Activate an event handler given eventTarget and name.\n     */\n    var eventTarget = event_determineTheTargetOfAnEventHandler(thisObj, name);\n    if (eventTarget === null)\n        return;\n    if (value === null) {\n        event_deactivateAnEventHandler(eventTarget, name);\n    }\n    else {\n        var handlerMap = eventTarget._eventHandlerMap;\n        var eventHandler = handlerMap[\"onabort\"];\n        if (eventHandler !== undefined) {\n            eventHandler.value = value;\n        }\n        event_activateAnEventHandler(eventTarget, name);\n    }\n}\nexports.event_setterEventHandlerIDLAttribute = event_setterEventHandlerIDLAttribute;\n/**\n * Determines the target of an event handler.\n *\n * @param eventTarget - event target\n * @param name - event name\n */\nfunction event_determineTheTargetOfAnEventHandler(eventTarget, name) {\n    // TODO: Implement in HTML DOM\n    return null;\n}\nexports.event_determineTheTargetOfAnEventHandler = event_determineTheTargetOfAnEventHandler;\n/**\n * Gets the current value of an event handler.\n *\n * @param eventTarget - event target\n * @param name - event name\n */\nfunction event_getTheCurrentValueOfAnEventHandler(eventTarget, name) {\n    // TODO: Implement in HTML DOM\n    return null;\n}\nexports.event_getTheCurrentValueOfAnEventHandler = event_getTheCurrentValueOfAnEventHandler;\n/**\n * Activates an event handler.\n *\n * @param eventTarget - event target\n * @param name - event name\n */\nfunction event_activateAnEventHandler(eventTarget, name) {\n    // TODO: Implement in HTML DOM\n}\nexports.event_activateAnEventHandler = event_activateAnEventHandler;\n/**\n * Deactivates an event handler.\n *\n * @param eventTarget - event target\n * @param name - event name\n */\nfunction event_deactivateAnEventHandler(eventTarget, name) {\n    // TODO: Implement in HTML DOM\n}\nexports.event_deactivateAnEventHandler = event_deactivateAnEventHandler;\n//# sourceMappingURL=EventAlgorithm.js.map","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Gets the value corresponding to the given key.\n *\n * @param map - a map\n * @param key - a key\n */\nfunction get(map, key) {\n    return map.get(key);\n}\nexports.get = get;\n/**\n * Sets the value corresponding to the given key.\n *\n * @param map - a map\n * @param key - a key\n * @param val - a value\n */\nfunction set(map, key, val) {\n    map.set(key, val);\n}\nexports.set = set;\n/**\n * Removes the item with the given key or all items matching condition.\n *\n * @param map - a map\n * @param conditionOrItem - the key of an item to remove or a condition matching\n * items to remove\n */\nfunction remove(map, conditionOrItem) {\n    var e_1, _a, e_2, _b;\n    if (!util_1.isFunction(conditionOrItem)) {\n        map.delete(conditionOrItem);\n    }\n    else {\n        var toRemove = [];\n        try {\n            for (var map_1 = __values(map), map_1_1 = map_1.next(); !map_1_1.done; map_1_1 = map_1.next()) {\n                var item = map_1_1.value;\n                if (!!conditionOrItem.call(null, item)) {\n                    toRemove.push(item[0]);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (map_1_1 && !map_1_1.done && (_a = map_1.return)) _a.call(map_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        try {\n            for (var toRemove_1 = __values(toRemove), toRemove_1_1 = toRemove_1.next(); !toRemove_1_1.done; toRemove_1_1 = toRemove_1.next()) {\n                var key = toRemove_1_1.value;\n                map.delete(key);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (toRemove_1_1 && !toRemove_1_1.done && (_b = toRemove_1.return)) _b.call(toRemove_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n}\nexports.remove = remove;\n/**\n * Determines if the map contains a value with the given key.\n *\n * @param map - a map\n * @param conditionOrItem - the key of an item to match or a condition matching\n * items\n */\nfunction contains(map, conditionOrItem) {\n    var e_3, _a;\n    if (!util_1.isFunction(conditionOrItem)) {\n        return map.has(conditionOrItem);\n    }\n    else {\n        try {\n            for (var map_2 = __values(map), map_2_1 = map_2.next(); !map_2_1.done; map_2_1 = map_2.next()) {\n                var item = map_2_1.value;\n                if (!!conditionOrItem.call(null, item)) {\n                    return true;\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (map_2_1 && !map_2_1.done && (_a = map_2.return)) _a.call(map_2);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return false;\n    }\n}\nexports.contains = contains;\n/**\n * Gets the keys of the map.\n *\n * @param map - a map\n */\nfunction keys(map) {\n    return new Set(map.keys());\n}\nexports.keys = keys;\n/**\n * Gets the values of the map.\n *\n * @param map - a map\n */\nfunction values(map) {\n    return __spread(map.values());\n}\nexports.values = values;\n/**\n * Gets the size of the map.\n *\n * @param map - a map\n * @param condition - an optional condition to match\n */\nfunction size(map, condition) {\n    var e_4, _a;\n    if (condition === undefined) {\n        return map.size;\n    }\n    else {\n        var count = 0;\n        try {\n            for (var map_3 = __values(map), map_3_1 = map_3.next(); !map_3_1.done; map_3_1 = map_3.next()) {\n                var item = map_3_1.value;\n                if (!!condition.call(null, item)) {\n                    count++;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (map_3_1 && !map_3_1.done && (_a = map_3.return)) _a.call(map_3);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return count;\n    }\n}\nexports.size = size;\n/**\n * Determines if the map is empty.\n *\n * @param map - a map\n */\nfunction isEmpty(map) {\n    return map.size === 0;\n}\nexports.isEmpty = isEmpty;\n/**\n * Returns an iterator for the items of the map.\n *\n * @param map - a map\n * @param condition - an optional condition to match\n */\nfunction forEach(map, condition) {\n    var map_4, map_4_1, item, e_5_1;\n    var e_5, _a;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (!(condition === undefined)) return [3 /*break*/, 2];\n                return [5 /*yield**/, __values(map)];\n            case 1:\n                _b.sent();\n                return [3 /*break*/, 9];\n            case 2:\n                _b.trys.push([2, 7, 8, 9]);\n                map_4 = __values(map), map_4_1 = map_4.next();\n                _b.label = 3;\n            case 3:\n                if (!!map_4_1.done) return [3 /*break*/, 6];\n                item = map_4_1.value;\n                if (!!!condition.call(null, item)) return [3 /*break*/, 5];\n                return [4 /*yield*/, item];\n            case 4:\n                _b.sent();\n                _b.label = 5;\n            case 5:\n                map_4_1 = map_4.next();\n                return [3 /*break*/, 3];\n            case 6: return [3 /*break*/, 9];\n            case 7:\n                e_5_1 = _b.sent();\n                e_5 = { error: e_5_1 };\n                return [3 /*break*/, 9];\n            case 8:\n                try {\n                    if (map_4_1 && !map_4_1.done && (_a = map_4.return)) _a.call(map_4);\n                }\n                finally { if (e_5) throw e_5.error; }\n                return [7 /*endfinally*/];\n            case 9: return [2 /*return*/];\n        }\n    });\n}\nexports.forEach = forEach;\n/**\n * Creates and returns a shallow clone of map.\n *\n * @param map - a map\n */\nfunction clone(map) {\n    return new Map(map);\n}\nexports.clone = clone;\n/**\n * Returns a new map containing items from the map sorted in ascending\n * order.\n *\n * @param map - a map\n * @param lessThanAlgo - a function that returns `true` if its first argument\n * is less than its second argument, and `false` otherwise.\n */\nfunction sortInAscendingOrder(map, lessThanAlgo) {\n    var list = new (Array.bind.apply(Array, __spread([void 0], map)))();\n    list.sort(function (itemA, itemB) {\n        return lessThanAlgo.call(null, itemA, itemB) ? -1 : 1;\n    });\n    return new Map(list);\n}\nexports.sortInAscendingOrder = sortInAscendingOrder;\n/**\n * Returns a new map containing items from the map sorted in descending\n * order.\n *\n * @param map - a map\n * @param lessThanAlgo - a function that returns `true` if its first argument\n * is less than its second argument, and `false` otherwise.\n */\nfunction sortInDescendingOrder(map, lessThanAlgo) {\n    var list = new (Array.bind.apply(Array, __spread([void 0], map)))();\n    list.sort(function (itemA, itemB) {\n        return lessThanAlgo.call(null, itemA, itemB) ? 1 : -1;\n    });\n    return new Map(list);\n}\nexports.sortInDescendingOrder = sortInDescendingOrder;\n//# sourceMappingURL=Map.js.map","// Standard YAML's Core schema.\n// http://www.yaml.org/spec/1.2/spec.html#id2804923\n//\n// NOTE: JS-YAML does not support schema-specific tag resolution restrictions.\n// So, Core schema has no distinctions from JSON schema is JS-YAML.\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  include: [\n    require('./json')\n  ]\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar NodeImpl_1 = require(\"./NodeImpl\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents an attribute of an element node.\n */\nvar AttrImpl = /** @class */ (function (_super) {\n    __extends(AttrImpl, _super);\n    /**\n     * Initializes a new instance of `Attr`.\n     *\n     * @param localName - local name\n     */\n    function AttrImpl(localName) {\n        var _this = _super.call(this) || this;\n        _this._namespace = null;\n        _this._namespacePrefix = null;\n        _this._element = null;\n        _this._value = '';\n        _this._localName = localName;\n        return _this;\n    }\n    Object.defineProperty(AttrImpl.prototype, \"ownerElement\", {\n        /** @inheritdoc */\n        get: function () { return this._element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttrImpl.prototype, \"namespaceURI\", {\n        /** @inheritdoc */\n        get: function () { return this._namespace; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttrImpl.prototype, \"prefix\", {\n        /** @inheritdoc */\n        get: function () { return this._namespacePrefix; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttrImpl.prototype, \"localName\", {\n        /** @inheritdoc */\n        get: function () { return this._localName; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttrImpl.prototype, \"name\", {\n        /** @inheritdoc */\n        get: function () { return this._qualifiedName; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttrImpl.prototype, \"value\", {\n        /** @inheritdoc */\n        get: function () { return this._value; },\n        set: function (value) {\n            /**\n             * The value attribute’s setter must set an existing attribute value with\n             * context object and the given value.\n             */\n            algorithm_1.attr_setAnExistingAttributeValue(this, value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttrImpl.prototype, \"_qualifiedName\", {\n        /**\n         * Returns the qualified name.\n         */\n        get: function () {\n            /**\n             * An attribute’s qualified name is its local name if its namespace prefix\n             * is null, and its namespace prefix, followed by \":\", followed by its\n             * local name, otherwise.\n             */\n            return (this._namespacePrefix !== null ?\n                this._namespacePrefix + ':' + this._localName :\n                this._localName);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates an `Attr`.\n     *\n     * @param document - owner document\n     * @param localName - local name\n     */\n    AttrImpl._create = function (document, localName) {\n        var node = new AttrImpl(localName);\n        node._nodeDocument = document;\n        return node;\n    };\n    return AttrImpl;\n}(NodeImpl_1.NodeImpl));\nexports.AttrImpl = AttrImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(AttrImpl.prototype, \"_nodeType\", interfaces_1.NodeType.Attribute);\nWebIDLAlgorithm_1.idl_defineConst(AttrImpl.prototype, \"specified\", true);\n//# sourceMappingURL=AttrImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar BaseReader_1 = require(\"./BaseReader\");\n/**\n * Parses XML nodes from objects and arrays.\n * ES6 maps and sets are also supoorted.\n */\nvar ObjectReader = /** @class */ (function (_super) {\n    __extends(ObjectReader, _super);\n    function ObjectReader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Parses the given document representation.\n     *\n     * @param node - node receive parsed XML nodes\n     * @param obj - object to parse\n     */\n    ObjectReader.prototype._parse = function (node, obj) {\n        var _this = this;\n        var options = this._builderOptions;\n        var lastChild = null;\n        if (util_1.isFunction(obj)) {\n            // evaluate if function\n            lastChild = this.parse(node, obj.apply(this));\n        }\n        else if (util_1.isArray(obj) || util_1.isSet(obj)) {\n            util_1.forEachArray(obj, function (item) { return lastChild = _this.parse(node, item); }, this);\n        }\n        else if (util_1.isMap(obj) || util_1.isObject(obj)) {\n            // expand if object\n            util_1.forEachObject(obj, function (key, val) {\n                if (util_1.isFunction(val)) {\n                    // evaluate if function\n                    val = val.apply(_this);\n                }\n                if (!options.ignoreConverters && key.indexOf(options.convert.att) === 0) {\n                    // assign attributes\n                    if (key === options.convert.att) {\n                        if (util_1.isArray(val) || util_1.isSet(val)) {\n                            throw new Error(\"Invalid attribute: \" + val.toString() + \". \" + node._debugInfo());\n                        }\n                        else /* if (isMap(val) || isObject(val)) */ {\n                            util_1.forEachObject(val, function (attrKey, attrVal) {\n                                lastChild = _this.attribute(node, undefined, _this.sanitize(attrKey), _this._decodeAttributeValue(_this.sanitize(attrVal))) || lastChild;\n                            });\n                        }\n                    }\n                    else {\n                        lastChild = _this.attribute(node, undefined, _this.sanitize(key.substr(options.convert.att.length)), _this._decodeAttributeValue(_this.sanitize(val))) || lastChild;\n                    }\n                }\n                else if (!options.ignoreConverters && key.indexOf(options.convert.text) === 0) {\n                    // text node\n                    if (util_1.isMap(val) || util_1.isObject(val)) {\n                        // if the key is #text expand child nodes under this node to support mixed content\n                        lastChild = _this.parse(node, val);\n                    }\n                    else {\n                        lastChild = _this.text(node, _this._decodeText(_this.sanitize(val))) || lastChild;\n                    }\n                }\n                else if (!options.ignoreConverters && key.indexOf(options.convert.cdata) === 0) {\n                    // cdata node\n                    if (util_1.isArray(val) || util_1.isSet(val)) {\n                        util_1.forEachArray(val, function (item) { return lastChild = _this.cdata(node, _this.sanitize(item)) || lastChild; }, _this);\n                    }\n                    else {\n                        lastChild = _this.cdata(node, _this.sanitize(val)) || lastChild;\n                    }\n                }\n                else if (!options.ignoreConverters && key.indexOf(options.convert.comment) === 0) {\n                    // comment node\n                    if (util_1.isArray(val) || util_1.isSet(val)) {\n                        util_1.forEachArray(val, function (item) { return lastChild = _this.comment(node, _this.sanitize(item)) || lastChild; }, _this);\n                    }\n                    else {\n                        lastChild = _this.comment(node, _this.sanitize(val)) || lastChild;\n                    }\n                }\n                else if (!options.ignoreConverters && key.indexOf(options.convert.ins) === 0) {\n                    // processing instruction\n                    if (util_1.isString(val)) {\n                        var insIndex = val.indexOf(' ');\n                        var insTarget = (insIndex === -1 ? val : val.substr(0, insIndex));\n                        var insValue = (insIndex === -1 ? '' : val.substr(insIndex + 1));\n                        lastChild = _this.instruction(node, _this.sanitize(insTarget), _this.sanitize(insValue)) || lastChild;\n                    }\n                    else if (util_1.isArray(val) || util_1.isSet(val)) {\n                        util_1.forEachArray(val, function (item) {\n                            var insIndex = item.indexOf(' ');\n                            var insTarget = (insIndex === -1 ? item : item.substr(0, insIndex));\n                            var insValue = (insIndex === -1 ? '' : item.substr(insIndex + 1));\n                            lastChild = _this.instruction(node, _this.sanitize(insTarget), _this.sanitize(insValue)) || lastChild;\n                        }, _this);\n                    }\n                    else /* if (isMap(target) || isObject(target)) */ {\n                        util_1.forEachObject(val, function (insTarget, insValue) { return lastChild = _this.instruction(node, _this.sanitize(insTarget), _this.sanitize(insValue)) || lastChild; }, _this);\n                    }\n                }\n                else if ((util_1.isArray(val) || util_1.isSet(val)) && util_1.isEmpty(val)) {\n                    // skip empty arrays\n                }\n                else if ((util_1.isMap(val) || util_1.isObject(val)) && util_1.isEmpty(val)) {\n                    // empty objects produce one node\n                    lastChild = _this.element(node, undefined, _this.sanitize(key)) || lastChild;\n                }\n                else if (!options.keepNullNodes && (val == null)) {\n                    // skip null and undefined nodes\n                }\n                else if (util_1.isArray(val) || util_1.isSet(val)) {\n                    // expand list by creating child nodes\n                    util_1.forEachArray(val, function (item) {\n                        var childNode = {};\n                        childNode[key] = item;\n                        lastChild = _this.parse(node, childNode);\n                    }, _this);\n                }\n                else if (util_1.isMap(val) || util_1.isObject(val)) {\n                    // create a parent node\n                    var parent = _this.element(node, undefined, _this.sanitize(key));\n                    if (parent) {\n                        lastChild = parent;\n                        // expand child nodes under parent\n                        _this.parse(parent, val);\n                    }\n                }\n                else if (val != null && val !== '') {\n                    // leaf element node with a single text node\n                    var parent = _this.element(node, undefined, _this.sanitize(key));\n                    if (parent) {\n                        lastChild = parent;\n                        _this.text(parent, _this._decodeText(_this.sanitize(val)));\n                    }\n                }\n                else {\n                    // leaf element node\n                    lastChild = _this.element(node, undefined, _this.sanitize(key)) || lastChild;\n                }\n            }, this);\n        }\n        else if (!options.keepNullNodes && (obj == null)) {\n            // skip null and undefined nodes\n        }\n        else {\n            // text node\n            lastChild = this.text(node, this._decodeText(this.sanitize(obj))) || lastChild;\n        }\n        return lastChild || node;\n    };\n    return ObjectReader;\n}(BaseReader_1.BaseReader));\nexports.ObjectReader = ObjectReader;\n//# sourceMappingURL=ObjectReader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Defines the position of a boundary point relative to another.\n */\nvar BoundaryPosition;\n(function (BoundaryPosition) {\n    BoundaryPosition[BoundaryPosition[\"Before\"] = 0] = \"Before\";\n    BoundaryPosition[BoundaryPosition[\"Equal\"] = 1] = \"Equal\";\n    BoundaryPosition[BoundaryPosition[\"After\"] = 2] = \"After\";\n})(BoundaryPosition = exports.BoundaryPosition || (exports.BoundaryPosition = {}));\n/**\n * Defines the event phase.\n */\nvar EventPhase;\n(function (EventPhase) {\n    EventPhase[EventPhase[\"None\"] = 0] = \"None\";\n    EventPhase[EventPhase[\"Capturing\"] = 1] = \"Capturing\";\n    EventPhase[EventPhase[\"AtTarget\"] = 2] = \"AtTarget\";\n    EventPhase[EventPhase[\"Bubbling\"] = 3] = \"Bubbling\";\n})(EventPhase = exports.EventPhase || (exports.EventPhase = {}));\n/**\n * Defines the type of a node object.\n */\nvar NodeType;\n(function (NodeType) {\n    NodeType[NodeType[\"Element\"] = 1] = \"Element\";\n    NodeType[NodeType[\"Attribute\"] = 2] = \"Attribute\";\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\n    NodeType[NodeType[\"CData\"] = 4] = \"CData\";\n    NodeType[NodeType[\"EntityReference\"] = 5] = \"EntityReference\";\n    NodeType[NodeType[\"Entity\"] = 6] = \"Entity\";\n    NodeType[NodeType[\"ProcessingInstruction\"] = 7] = \"ProcessingInstruction\";\n    NodeType[NodeType[\"Comment\"] = 8] = \"Comment\";\n    NodeType[NodeType[\"Document\"] = 9] = \"Document\";\n    NodeType[NodeType[\"DocumentType\"] = 10] = \"DocumentType\";\n    NodeType[NodeType[\"DocumentFragment\"] = 11] = \"DocumentFragment\";\n    NodeType[NodeType[\"Notation\"] = 12] = \"Notation\"; // historical\n})(NodeType = exports.NodeType || (exports.NodeType = {}));\n/**\n * Defines the position of a node in the document relative to another\n * node.\n */\nvar Position;\n(function (Position) {\n    Position[Position[\"Disconnected\"] = 1] = \"Disconnected\";\n    Position[Position[\"Preceding\"] = 2] = \"Preceding\";\n    Position[Position[\"Following\"] = 4] = \"Following\";\n    Position[Position[\"Contains\"] = 8] = \"Contains\";\n    Position[Position[\"ContainedBy\"] = 16] = \"ContainedBy\";\n    Position[Position[\"ImplementationSpecific\"] = 32] = \"ImplementationSpecific\";\n})(Position = exports.Position || (exports.Position = {}));\n/**\n * Defines the return value of a filter callback.\n */\nvar FilterResult;\n(function (FilterResult) {\n    FilterResult[FilterResult[\"Accept\"] = 1] = \"Accept\";\n    FilterResult[FilterResult[\"Reject\"] = 2] = \"Reject\";\n    FilterResult[FilterResult[\"Skip\"] = 3] = \"Skip\";\n})(FilterResult = exports.FilterResult || (exports.FilterResult = {}));\n/**\n * Defines what to show in node filter.\n */\nvar WhatToShow;\n(function (WhatToShow) {\n    WhatToShow[WhatToShow[\"All\"] = 4294967295] = \"All\";\n    WhatToShow[WhatToShow[\"Element\"] = 1] = \"Element\";\n    WhatToShow[WhatToShow[\"Attribute\"] = 2] = \"Attribute\";\n    WhatToShow[WhatToShow[\"Text\"] = 4] = \"Text\";\n    WhatToShow[WhatToShow[\"CDataSection\"] = 8] = \"CDataSection\";\n    WhatToShow[WhatToShow[\"EntityReference\"] = 16] = \"EntityReference\";\n    WhatToShow[WhatToShow[\"Entity\"] = 32] = \"Entity\";\n    WhatToShow[WhatToShow[\"ProcessingInstruction\"] = 64] = \"ProcessingInstruction\";\n    WhatToShow[WhatToShow[\"Comment\"] = 128] = \"Comment\";\n    WhatToShow[WhatToShow[\"Document\"] = 256] = \"Document\";\n    WhatToShow[WhatToShow[\"DocumentType\"] = 512] = \"DocumentType\";\n    WhatToShow[WhatToShow[\"DocumentFragment\"] = 1024] = \"DocumentFragment\";\n    WhatToShow[WhatToShow[\"Notation\"] = 2048] = \"Notation\";\n})(WhatToShow = exports.WhatToShow || (exports.WhatToShow = {}));\n/**\n * Defines how boundary points are compared.\n */\nvar HowToCompare;\n(function (HowToCompare) {\n    HowToCompare[HowToCompare[\"StartToStart\"] = 0] = \"StartToStart\";\n    HowToCompare[HowToCompare[\"StartToEnd\"] = 1] = \"StartToEnd\";\n    HowToCompare[HowToCompare[\"EndToEnd\"] = 2] = \"EndToEnd\";\n    HowToCompare[HowToCompare[\"EndToStart\"] = 3] = \"EndToStart\";\n})(HowToCompare = exports.HowToCompare || (exports.HowToCompare = {}));\n//# sourceMappingURL=interfaces.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar util_1 = require(\"@oozcitak/util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents an ordered set of nodes.\n */\nvar NodeListImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `NodeList`.\n     *\n     * @param root - root node\n     */\n    function NodeListImpl(root) {\n        this._live = true;\n        this._filter = null;\n        this._length = 0;\n        this._root = root;\n        return new Proxy(this, this);\n    }\n    Object.defineProperty(NodeListImpl.prototype, \"length\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The length attribute must return the number of nodes represented\n             * by the collection.\n             */\n            return this._root._children.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    NodeListImpl.prototype.item = function (index) {\n        /**\n         * The item(index) method must return the indexth node in the collection.\n         * If there is no indexth node in the collection, then the method must\n         * return null.\n         */\n        if (index < 0 || index > this.length - 1)\n            return null;\n        if (index < this.length / 2) {\n            var i = 0;\n            var node = this._root._firstChild;\n            while (node !== null && i !== index) {\n                node = node._nextSibling;\n                i++;\n            }\n            return node;\n        }\n        else {\n            var i = this.length - 1;\n            var node = this._root._lastChild;\n            while (node !== null && i !== index) {\n                node = node._previousSibling;\n                i--;\n            }\n            return node;\n        }\n    };\n    /** @inheritdoc */\n    NodeListImpl.prototype.keys = function () {\n        var _a;\n        return _a = {},\n            _a[Symbol.iterator] = function () {\n                var index = 0;\n                return {\n                    next: function () {\n                        if (index === this.length) {\n                            return { done: true, value: null };\n                        }\n                        else {\n                            return { done: false, value: index++ };\n                        }\n                    }.bind(this)\n                };\n            }.bind(this),\n            _a;\n    };\n    /** @inheritdoc */\n    NodeListImpl.prototype.values = function () {\n        var _a;\n        return _a = {},\n            _a[Symbol.iterator] = function () {\n                var it = this[Symbol.iterator]();\n                return {\n                    next: function () {\n                        return it.next();\n                    }\n                };\n            }.bind(this),\n            _a;\n    };\n    /** @inheritdoc */\n    NodeListImpl.prototype.entries = function () {\n        var _a;\n        return _a = {},\n            _a[Symbol.iterator] = function () {\n                var it = this[Symbol.iterator]();\n                var index = 0;\n                return {\n                    next: function () {\n                        var itResult = it.next();\n                        if (itResult.done) {\n                            return { done: true, value: null };\n                        }\n                        else {\n                            return { done: false, value: [index++, itResult.value] };\n                        }\n                    }\n                };\n            }.bind(this),\n            _a;\n    };\n    /** @inheritdoc */\n    NodeListImpl.prototype[Symbol.iterator] = function () {\n        return this._root._children[Symbol.iterator]();\n    };\n    /** @inheritdoc */\n    NodeListImpl.prototype.forEach = function (callback, thisArg) {\n        var e_1, _a;\n        if (thisArg === undefined) {\n            thisArg = DOMImpl_1.dom.window;\n        }\n        var index = 0;\n        try {\n            for (var _b = __values(this._root._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node = _c.value;\n                callback.call(thisArg, node, index++, this);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Implements a proxy get trap to provide array-like access.\n     */\n    NodeListImpl.prototype.get = function (target, key, receiver) {\n        if (!util_1.isString(key)) {\n            return Reflect.get(target, key, receiver);\n        }\n        var index = Number(key);\n        if (isNaN(index)) {\n            return Reflect.get(target, key, receiver);\n        }\n        return target.item(index) || undefined;\n    };\n    /**\n     * Implements a proxy set trap to provide array-like access.\n     */\n    NodeListImpl.prototype.set = function (target, key, value, receiver) {\n        if (!util_1.isString(key)) {\n            return Reflect.set(target, key, value, receiver);\n        }\n        var index = Number(key);\n        if (isNaN(index)) {\n            return Reflect.set(target, key, value, receiver);\n        }\n        var node = target.item(index) || undefined;\n        if (!node)\n            return false;\n        if (node._parent) {\n            algorithm_1.mutation_replace(node, value, node._parent);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Creates a new `NodeList`.\n     *\n     * @param root - root node\n     */\n    NodeListImpl._create = function (root) {\n        return new NodeListImpl(root);\n    };\n    return NodeListImpl;\n}());\nexports.NodeListImpl = NodeListImpl;\n//# sourceMappingURL=NodeListImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar OrderedSetAlgorithm_1 = require(\"./OrderedSetAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\nvar ElementAlgorithm_1 = require(\"./ElementAlgorithm\");\n/**\n * Validates a given token against the supported tokens defined for the given\n * token lists' associated attribute.\n *\n * @param tokenList - a token list\n * @param token - a token\n */\nfunction tokenList_validationSteps(tokenList, token) {\n    /**\n     * 1. If the associated attribute’s local name does not define supported\n     * tokens, throw a TypeError.\n     * 2. Let lowercase token be a copy of token, in ASCII lowercase.\n     * 3. If lowercase token is present in supported tokens, return true.\n     * 4. Return false.\n     */\n    if (!DOMAlgorithm_1.dom_hasSupportedTokens(tokenList._attribute._localName)) {\n        throw new TypeError(\"There are no supported tokens defined for attribute name: '\" + tokenList._attribute._localName + \"'.\");\n    }\n    return DOMAlgorithm_1.dom_getSupportedTokens(tokenList._attribute._localName).has(token.toLowerCase());\n}\nexports.tokenList_validationSteps = tokenList_validationSteps;\n/**\n * Updates the value of the token lists' associated attribute.\n *\n * @param tokenList - a token list\n */\nfunction tokenList_updateSteps(tokenList) {\n    /**\n     * 1. If the associated element does not have an associated attribute and\n     * token set is empty, then return.\n     * 2. Set an attribute value for the associated element using associated\n     * attribute’s local name and the result of running the ordered set\n     * serializer for token set.\n     */\n    if (!tokenList._element.hasAttribute(tokenList._attribute._localName) &&\n        tokenList._tokenSet.size === 0) {\n        return;\n    }\n    ElementAlgorithm_1.element_setAnAttributeValue(tokenList._element, tokenList._attribute._localName, OrderedSetAlgorithm_1.orderedSet_serialize(tokenList._tokenSet));\n}\nexports.tokenList_updateSteps = tokenList_updateSteps;\n/**\n * Gets the value of the token lists' associated attribute.\n *\n * @param tokenList - a token list\n */\nfunction tokenList_serializeSteps(tokenList) {\n    /**\n     * A DOMTokenList object’s serialize steps are to return the result of\n     * running get an attribute value given the associated element and the\n     * associated attribute’s local name.\n     */\n    return ElementAlgorithm_1.element_getAnAttributeValue(tokenList._element, tokenList._attribute._localName);\n}\nexports.tokenList_serializeSteps = tokenList_serializeSteps;\n//# sourceMappingURL=DOMTokenListAlgorithm.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar XMLStringLexer_1 = require(\"./XMLStringLexer\");\nvar interfaces_1 = require(\"./interfaces\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"../algorithm\");\nvar LocalNameSet_1 = require(\"../serializer/LocalNameSet\");\n/**\n * Represents a parser for XML content.\n *\n * See: https://html.spec.whatwg.org/#xml-parser\n */\nvar XMLParserImpl = /** @class */ (function () {\n    function XMLParserImpl() {\n    }\n    /**\n     * Parses XML content.\n     *\n     * @param source - a string containing XML content\n     */\n    XMLParserImpl.prototype.parse = function (source) {\n        var e_1, _a, e_2, _b;\n        var lexer = new XMLStringLexer_1.XMLStringLexer(source, { skipWhitespaceOnlyText: true });\n        var doc = algorithm_1.create_document();\n        var context = doc;\n        var token = lexer.nextToken();\n        while (token.type !== interfaces_1.TokenType.EOF) {\n            switch (token.type) {\n                case interfaces_1.TokenType.Declaration:\n                    var declaration = token;\n                    if (declaration.version !== \"1.0\") {\n                        throw new Error(\"Invalid xml version: \" + declaration.version);\n                    }\n                    break;\n                case interfaces_1.TokenType.DocType:\n                    var doctype = token;\n                    if (!algorithm_1.xml_isPubidChar(doctype.pubId)) {\n                        throw new Error(\"DocType public identifier does not match PubidChar construct.\");\n                    }\n                    if (!algorithm_1.xml_isLegalChar(doctype.sysId) ||\n                        (doctype.sysId.indexOf('\"') !== -1 && doctype.sysId.indexOf(\"'\") !== -1)) {\n                        throw new Error(\"DocType system identifier contains invalid characters.\");\n                    }\n                    context.appendChild(doc.implementation.createDocumentType(doctype.name, doctype.pubId, doctype.sysId));\n                    break;\n                case interfaces_1.TokenType.CDATA:\n                    var cdata = token;\n                    if (!algorithm_1.xml_isLegalChar(cdata.data) ||\n                        cdata.data.indexOf(\"]]>\") !== -1) {\n                        throw new Error(\"CDATA contains invalid characters.\");\n                    }\n                    context.appendChild(doc.createCDATASection(cdata.data));\n                    break;\n                case interfaces_1.TokenType.Comment:\n                    var comment = token;\n                    if (!algorithm_1.xml_isLegalChar(comment.data) ||\n                        comment.data.indexOf(\"--\") !== -1 || comment.data.endsWith(\"-\")) {\n                        throw new Error(\"Comment data contains invalid characters.\");\n                    }\n                    context.appendChild(doc.createComment(comment.data));\n                    break;\n                case interfaces_1.TokenType.PI:\n                    var pi = token;\n                    if (pi.target.indexOf(\":\") !== -1 || (/^xml$/i).test(pi.target)) {\n                        throw new Error(\"Processing instruction target contains invalid characters.\");\n                    }\n                    if (!algorithm_1.xml_isLegalChar(pi.data) || pi.data.indexOf(\"?>\") !== -1) {\n                        throw new Error(\"Processing instruction data contains invalid characters.\");\n                    }\n                    context.appendChild(doc.createProcessingInstruction(pi.target, pi.data));\n                    break;\n                case interfaces_1.TokenType.Text:\n                    var text = token;\n                    if (!algorithm_1.xml_isLegalChar(text.data)) {\n                        throw new Error(\"Text data contains invalid characters.\");\n                    }\n                    context.appendChild(doc.createTextNode(this._decodeText(text.data)));\n                    break;\n                case interfaces_1.TokenType.Element:\n                    var element = token;\n                    // inherit namespace from parent\n                    var _c = __read(algorithm_1.namespace_extractQName(element.name), 2), prefix = _c[0], localName = _c[1];\n                    if (localName.indexOf(\":\") !== -1 || !algorithm_1.xml_isName(localName)) {\n                        throw new Error(\"Node local name contains invalid characters.\");\n                    }\n                    if (prefix === \"xmlns\") {\n                        throw new Error(\"An element cannot have the 'xmlns' prefix.\");\n                    }\n                    var namespace = context.lookupNamespaceURI(prefix);\n                    // override namespace if there is a namespace declaration\n                    // attribute\n                    // also lookup namespace declaration attributes\n                    var nsDeclarations = {};\n                    try {\n                        for (var _d = (e_1 = void 0, __values(element.attributes)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                            var _f = __read(_e.value, 2), attName = _f[0], attValue = _f[1];\n                            if (attName === \"xmlns\") {\n                                namespace = attValue;\n                            }\n                            else {\n                                var _g = __read(algorithm_1.namespace_extractQName(attName), 2), attPrefix = _g[0], attLocalName = _g[1];\n                                if (attPrefix === \"xmlns\") {\n                                    if (attLocalName === prefix) {\n                                        namespace = attValue;\n                                    }\n                                    nsDeclarations[attLocalName] = attValue;\n                                }\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    // create the DOM element node\n                    var elementNode = (namespace !== null ?\n                        doc.createElementNS(namespace, element.name) :\n                        doc.createElement(element.name));\n                    context.appendChild(elementNode);\n                    // assign attributes\n                    var localNameSet = new LocalNameSet_1.LocalNameSet();\n                    try {\n                        for (var _h = (e_2 = void 0, __values(element.attributes)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                            var _k = __read(_j.value, 2), attName = _k[0], attValue = _k[1];\n                            var _l = __read(algorithm_1.namespace_extractQName(attName), 2), attPrefix = _l[0], attLocalName = _l[1];\n                            var attNamespace = null;\n                            if (attPrefix === \"xmlns\" || (attPrefix === null && attLocalName === \"xmlns\")) {\n                                // namespace declaration attribute\n                                attNamespace = infra_1.namespace.XMLNS;\n                            }\n                            else {\n                                attNamespace = elementNode.lookupNamespaceURI(attPrefix);\n                                if (attNamespace !== null && elementNode.isDefaultNamespace(attNamespace)) {\n                                    attNamespace = null;\n                                }\n                                else if (attNamespace === null && attPrefix !== null) {\n                                    attNamespace = nsDeclarations[attPrefix] || null;\n                                }\n                            }\n                            if (localNameSet.has(attNamespace, attLocalName)) {\n                                throw new Error(\"Element contains duplicate attributes.\");\n                            }\n                            localNameSet.set(attNamespace, attLocalName);\n                            if (attNamespace === infra_1.namespace.XMLNS) {\n                                if (attValue === infra_1.namespace.XMLNS) {\n                                    throw new Error(\"XMLNS namespace is reserved.\");\n                                }\n                            }\n                            if (attLocalName.indexOf(\":\") !== -1 || !algorithm_1.xml_isName(attLocalName)) {\n                                throw new Error(\"Attribute local name contains invalid characters.\");\n                            }\n                            if (attPrefix === \"xmlns\" && attValue === \"\") {\n                                throw new Error(\"Empty XML namespace is not allowed.\");\n                            }\n                            if (attNamespace !== null)\n                                elementNode.setAttributeNS(attNamespace, attName, this._decodeAttributeValue(attValue));\n                            else\n                                elementNode.setAttribute(attName, this._decodeAttributeValue(attValue));\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                    if (!element.selfClosing) {\n                        context = elementNode;\n                    }\n                    break;\n                case interfaces_1.TokenType.ClosingTag:\n                    var closingTag = token;\n                    if (closingTag.name !== context.nodeName) {\n                        throw new Error('Closing tag name does not match opening tag name.');\n                    }\n                    /* istanbul ignore else */\n                    if (context._parent) {\n                        context = context._parent;\n                    }\n                    break;\n            }\n            token = lexer.nextToken();\n        }\n        return doc;\n    };\n    /**\n     * Decodes serialized text.\n     *\n     * @param text - text value to serialize\n     */\n    XMLParserImpl.prototype._decodeText = function (text) {\n        return text == null ? text : text.replace(/&lt;/g, '<')\n            .replace(/&gt;/g, '>')\n            .replace(/&amp;/g, '&');\n    };\n    /**\n     * Decodes serialized attribute value.\n     *\n     * @param text - attribute value to serialize\n     */\n    XMLParserImpl.prototype._decodeAttributeValue = function (text) {\n        return text == null ? text : text.replace(/&lt;/g, '<')\n            .replace(/&gt;/g, '>')\n            .replace(/&amp;/g, '&');\n    };\n    return XMLParserImpl;\n}());\nexports.XMLParserImpl = XMLParserImpl;\n//# sourceMappingURL=XMLParserImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../dom/interfaces\");\n/**\n * Contains user-defined type guards for DOM objects.\n */\nvar Guard = /** @class */ (function () {\n    function Guard() {\n    }\n    /**\n     * Determines if the given object is a `Node`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isNode = function (a) {\n        return (!!a && a._nodeType !== undefined);\n    };\n    /**\n     * Determines if the given object is a `Document`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isDocumentNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.Document);\n    };\n    /**\n     * Determines if the given object is a `DocumentType`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isDocumentTypeNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.DocumentType);\n    };\n    /**\n     * Determines if the given object is a `DocumentFragment`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isDocumentFragmentNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.DocumentFragment);\n    };\n    /**\n     * Determines if the given object is a `Attr`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isAttrNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.Attribute);\n    };\n    /**\n     * Determines if the given node is a `CharacterData` node.\n     *\n     * @param a - the object to check\n     */\n    Guard.isCharacterDataNode = function (a) {\n        if (!Guard.isNode(a))\n            return false;\n        var type = a._nodeType;\n        return (type === interfaces_1.NodeType.Text ||\n            type === interfaces_1.NodeType.ProcessingInstruction ||\n            type === interfaces_1.NodeType.Comment ||\n            type === interfaces_1.NodeType.CData);\n    };\n    /**\n     * Determines if the given object is a `Text` or a `CDATASection`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isTextNode = function (a) {\n        return (Guard.isNode(a) && (a._nodeType === interfaces_1.NodeType.Text || a._nodeType === interfaces_1.NodeType.CData));\n    };\n    /**\n     * Determines if the given object is a `Text`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isExclusiveTextNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.Text);\n    };\n    /**\n     * Determines if the given object is a `CDATASection`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isCDATASectionNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.CData);\n    };\n    /**\n     * Determines if the given object is a `Comment`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isCommentNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.Comment);\n    };\n    /**\n     * Determines if the given object is a `ProcessingInstruction`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isProcessingInstructionNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.ProcessingInstruction);\n    };\n    /**\n     * Determines if the given object is an `Element`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isElementNode = function (a) {\n        return (Guard.isNode(a) && a._nodeType === interfaces_1.NodeType.Element);\n    };\n    /**\n     * Determines if the given object is a custom `Element`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isCustomElementNode = function (a) {\n        return (Guard.isElementNode(a) && a._customElementState === \"custom\");\n    };\n    /**\n     * Determines if the given object is a `ShadowRoot`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isShadowRoot = function (a) {\n        return (!!a && a.host !== undefined);\n    };\n    /**\n     * Determines if the given object is a `MouseEvent`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isMouseEvent = function (a) {\n        return (!!a && a.screenX !== undefined && a.screenY != undefined);\n    };\n    /**\n     * Determines if the given object is a slotable.\n     *\n     * Element and Text nodes are slotables. A slotable has an associated name\n     * (a string).\n     *\n     * @param a - the object to check\n     */\n    Guard.isSlotable = function (a) {\n        return (!!a && a._name !== undefined && a._assignedSlot !== undefined &&\n            (Guard.isTextNode(a) || Guard.isElementNode(a)));\n    };\n    /**\n     * Determines if the given object is a slot.\n     *\n     * @param a - the object to check\n     */\n    Guard.isSlot = function (a) {\n        return (!!a && a._name !== undefined && a._assignedNodes !== undefined &&\n            Guard.isElementNode(a));\n    };\n    /**\n     * Determines if the given object is a `Window`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isWindow = function (a) {\n        return (!!a && a.navigator !== undefined);\n    };\n    /**\n     * Determines if the given object is an `EventListener`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isEventListener = function (a) {\n        return (!!a && a.handleEvent !== undefined);\n    };\n    /**\n     * Determines if the given object is a `RegisteredObserver`.\n     *\n     * @param a - the object to check\n     */\n    Guard.isRegisteredObserver = function (a) {\n        return (!!a && a.observer !== undefined && a.options !== undefined);\n    };\n    /**\n   * Determines if the given object is a `TransientRegisteredObserver`.\n   *\n   * @param a - the object to check\n   */\n    Guard.isTransientRegisteredObserver = function (a) {\n        return (!!a && a.source !== undefined && Guard.isRegisteredObserver(a));\n    };\n    return Guard;\n}());\nexports.Guard = Guard;\n//# sourceMappingURL=Guard.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar infra_1 = require(\"@oozcitak/infra\");\n/**\n * Converts a whitespace separated string into an array of tokens.\n *\n * @param value - a string of whitespace separated tokens\n */\nfunction orderedSet_parse(value) {\n    /**\n     * 1. Let inputTokens be the result of splitting input on ASCII whitespace.\n     * 2. Let tokens be a new ordered set.\n     * 3. For each token in inputTokens, append token to tokens.\n     * 4. Return tokens.\n     */\n    var inputTokens = infra_1.string.splitAStringOnASCIIWhitespace(value);\n    return new Set(inputTokens);\n}\nexports.orderedSet_parse = orderedSet_parse;\n/**\n * Converts an array of tokens into a space separated string.\n *\n * @param tokens - an array of token strings\n */\nfunction orderedSet_serialize(tokens) {\n    /**\n     * The ordered set serializer takes a set and returns the concatenation of\n     * set using U+0020 SPACE.\n     */\n    return __spread(tokens).join(' ');\n}\nexports.orderedSet_serialize = orderedSet_serialize;\n/**\n * Removes duplicate tokens and convert all whitespace characters\n * to space.\n *\n * @param value - a string of whitespace separated tokens\n */\nfunction orderedSet_sanitize(value) {\n    return orderedSet_serialize(orderedSet_parse(value));\n}\nexports.orderedSet_sanitize = orderedSet_sanitize;\n/**\n * Determines whether a set contains the other.\n *\n * @param set1 - a set\n * @param set1 - a set that is contained in set1\n * @param caseSensitive - whether matches are case-sensitive\n */\nfunction orderedSet_contains(set1, set2, caseSensitive) {\n    var e_1, _a, e_2, _b;\n    try {\n        for (var set2_1 = __values(set2), set2_1_1 = set2_1.next(); !set2_1_1.done; set2_1_1 = set2_1.next()) {\n            var val2 = set2_1_1.value;\n            var found = false;\n            try {\n                for (var set1_1 = (e_2 = void 0, __values(set1)), set1_1_1 = set1_1.next(); !set1_1_1.done; set1_1_1 = set1_1.next()) {\n                    var val1 = set1_1_1.value;\n                    if (caseSensitive) {\n                        if (val1 === val2) {\n                            found = true;\n                            break;\n                        }\n                    }\n                    else {\n                        if (val1.toUpperCase() === val2.toUpperCase()) {\n                            found = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (set1_1_1 && !set1_1_1.done && (_b = set1_1.return)) _b.call(set1_1);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (!found)\n                return false;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (set2_1_1 && !set2_1_1.done && (_a = set2_1.return)) _a.call(set2_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return true;\n}\nexports.orderedSet_contains = orderedSet_contains;\n//# sourceMappingURL=OrderedSetAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Determines if the given string is valid for a `\"Name\"` construct.\n *\n * @param name - name string to test\n */\nfunction xml_isName(name) {\n    for (var i = 0; i < name.length; i++) {\n        var n = name.charCodeAt(i);\n        // NameStartChar\n        if ((n >= 97 && n <= 122) || // [a-z]\n            (n >= 65 && n <= 90) || // [A-Z]\n            n === 58 || n === 95 || // ':' or '_'\n            (n >= 0xC0 && n <= 0xD6) ||\n            (n >= 0xD8 && n <= 0xF6) ||\n            (n >= 0xF8 && n <= 0x2FF) ||\n            (n >= 0x370 && n <= 0x37D) ||\n            (n >= 0x37F && n <= 0x1FFF) ||\n            (n >= 0x200C && n <= 0x200D) ||\n            (n >= 0x2070 && n <= 0x218F) ||\n            (n >= 0x2C00 && n <= 0x2FEF) ||\n            (n >= 0x3001 && n <= 0xD7FF) ||\n            (n >= 0xF900 && n <= 0xFDCF) ||\n            (n >= 0xFDF0 && n <= 0xFFFD)) {\n            continue;\n        }\n        else if (i !== 0 &&\n            (n === 45 || n === 46 || // '-' or '.'\n                (n >= 48 && n <= 57) || // [0-9]\n                (n === 0xB7) ||\n                (n >= 0x0300 && n <= 0x036F) ||\n                (n >= 0x203F && n <= 0x2040))) {\n            continue;\n        }\n        if (n >= 0xD800 && n <= 0xDBFF && i < name.length - 1) {\n            var n2 = name.charCodeAt(i + 1);\n            if (n2 >= 0xDC00 && n2 <= 0xDFFF) {\n                n = (n - 0xD800) * 0x400 + n2 - 0xDC00 + 0x10000;\n                i++;\n                if (n >= 0x10000 && n <= 0xEFFFF) {\n                    continue;\n                }\n            }\n        }\n        return false;\n    }\n    return true;\n}\nexports.xml_isName = xml_isName;\n/**\n * Determines if the given string is valid for a `\"QName\"` construct.\n *\n * @param name - name string to test\n */\nfunction xml_isQName(name) {\n    var colonFound = false;\n    for (var i = 0; i < name.length; i++) {\n        var n = name.charCodeAt(i);\n        // NameStartChar\n        if ((n >= 97 && n <= 122) || // [a-z]\n            (n >= 65 && n <= 90) || // [A-Z]\n            n === 95 || // '_'\n            (n >= 0xC0 && n <= 0xD6) ||\n            (n >= 0xD8 && n <= 0xF6) ||\n            (n >= 0xF8 && n <= 0x2FF) ||\n            (n >= 0x370 && n <= 0x37D) ||\n            (n >= 0x37F && n <= 0x1FFF) ||\n            (n >= 0x200C && n <= 0x200D) ||\n            (n >= 0x2070 && n <= 0x218F) ||\n            (n >= 0x2C00 && n <= 0x2FEF) ||\n            (n >= 0x3001 && n <= 0xD7FF) ||\n            (n >= 0xF900 && n <= 0xFDCF) ||\n            (n >= 0xFDF0 && n <= 0xFFFD)) {\n            continue;\n        }\n        else if (i !== 0 &&\n            (n === 45 || n === 46 || // '-' or '.'\n                (n >= 48 && n <= 57) || // [0-9]\n                (n === 0xB7) ||\n                (n >= 0x0300 && n <= 0x036F) ||\n                (n >= 0x203F && n <= 0x2040))) {\n            continue;\n        }\n        else if (i !== 0 && n === 58) { // :\n            if (colonFound)\n                return false; // multiple colons in qname\n            if (i === name.length - 1)\n                return false; // colon at the end of qname\n            colonFound = true;\n            continue;\n        }\n        if (n >= 0xD800 && n <= 0xDBFF && i < name.length - 1) {\n            var n2 = name.charCodeAt(i + 1);\n            if (n2 >= 0xDC00 && n2 <= 0xDFFF) {\n                n = (n - 0xD800) * 0x400 + n2 - 0xDC00 + 0x10000;\n                i++;\n                if (n >= 0x10000 && n <= 0xEFFFF) {\n                    continue;\n                }\n            }\n        }\n        return false;\n    }\n    return true;\n}\nexports.xml_isQName = xml_isQName;\n/**\n * Determines if the given string contains legal characters.\n *\n * @param chars - sequence of characters to test\n */\nfunction xml_isLegalChar(chars) {\n    for (var i = 0; i < chars.length; i++) {\n        var n = chars.charCodeAt(i);\n        // #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]\n        if (n === 0x9 || n === 0xA || n === 0xD ||\n            (n >= 0x20 && n <= 0xD7FF) ||\n            (n >= 0xE000 && n <= 0xFFFD)) {\n            continue;\n        }\n        if (n >= 0xD800 && n <= 0xDBFF && i < chars.length - 1) {\n            var n2 = chars.charCodeAt(i + 1);\n            if (n2 >= 0xDC00 && n2 <= 0xDFFF) {\n                n = (n - 0xD800) * 0x400 + n2 - 0xDC00 + 0x10000;\n                i++;\n                if (n >= 0x10000 && n <= 0x10FFFF) {\n                    continue;\n                }\n            }\n        }\n        return false;\n    }\n    return true;\n}\nexports.xml_isLegalChar = xml_isLegalChar;\n/**\n * Determines if the given string contains legal characters for a public\n * identifier.\n *\n * @param chars - sequence of characters to test\n */\nfunction xml_isPubidChar(chars) {\n    for (var i = 0; i < chars.length; i++) {\n        // PubId chars are all in the ASCII range, no need to check surrogates\n        var n = chars.charCodeAt(i);\n        // #x20 | #xD | #xA | [a-zA-Z0-9] | [-'()+,./:=?;!*#@$_%]\n        if ((n >= 97 && n <= 122) || // [a-z]\n            (n >= 65 && n <= 90) || // [A-Z]\n            (n >= 39 && n <= 59) || // ['()*+,-./] | [0-9] | [:;]\n            n === 0x20 || n === 0xD || n === 0xA || // #x20 | #xD | #xA\n            (n >= 35 && n <= 37) || // [#$%]\n            n === 33 || // !\n            n === 61 || n === 63 || n === 64 || n === 95) { // [=?@_]\n            continue;\n        }\n        else {\n            return false;\n        }\n    }\n    return true;\n}\nexports.xml_isPubidChar = xml_isPubidChar;\n//# sourceMappingURL=XMLAlgorithm.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar util_1 = require(\"../util\");\nvar util_2 = require(\"@oozcitak/util\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar MutationObserverAlgorithm_1 = require(\"./MutationObserverAlgorithm\");\n/**\n * Signals a slot change to the given slot.\n *\n * @param slot - a slot\n */\nfunction shadowTree_signalASlotChange(slot) {\n    /**\n     * 1. Append slot to slot’s relevant agent’s signal slots.\n     * 2. Queue a mutation observer microtask.\n     */\n    var window = DOMImpl_1.dom.window;\n    window._signalSlots.add(slot);\n    MutationObserverAlgorithm_1.observer_queueAMutationObserverMicrotask();\n}\nexports.shadowTree_signalASlotChange = shadowTree_signalASlotChange;\n/**\n * Determines whether a the shadow tree of the given element node is\n * connected to a document node.\n *\n * @param element - an element node of the shadow tree\n */\nfunction shadowTree_isConnected(element) {\n    /**\n     * An element is connected if its shadow-including root is a document.\n     */\n    return util_1.Guard.isDocumentNode(TreeAlgorithm_1.tree_rootNode(element, true));\n}\nexports.shadowTree_isConnected = shadowTree_isConnected;\n/**\n * Determines whether a slotable is assigned.\n *\n * @param slotable - a slotable\n */\nfunction shadowTree_isAssigned(slotable) {\n    /**\n     * A slotable is assigned if its assigned slot is non-null.\n     */\n    return (slotable._assignedSlot !== null);\n}\nexports.shadowTree_isAssigned = shadowTree_isAssigned;\n/**\n * Finds a slot for the given slotable.\n *\n * @param slotable - a slotable\n * @param openFlag - `true` to search open shadow tree's only\n */\nfunction shadowTree_findASlot(slotable, openFlag) {\n    if (openFlag === void 0) { openFlag = false; }\n    /**\n     * 1. If slotable’s parent is null, then return null.\n     * 2. Let shadow be slotable’s parent’s shadow root.\n     * 3. If shadow is null, then return null.\n     * 4. If the open flag is set and shadow’s mode is not \"open\", then\n     * return null.\n     * 5. Return the first slot in tree order in shadow’s descendants whose name\n     * is slotable’s name, if any, and null otherwise.\n     */\n    var node = util_1.Cast.asNode(slotable);\n    var parent = node._parent;\n    if (parent === null)\n        return null;\n    var shadow = parent._shadowRoot || null;\n    if (shadow === null)\n        return null;\n    if (openFlag && shadow._mode !== \"open\")\n        return null;\n    var child = TreeAlgorithm_1.tree_getFirstDescendantNode(shadow, false, true, function (e) { return util_1.Guard.isSlot(e); });\n    while (child !== null) {\n        if (child._name === slotable._name)\n            return child;\n        child = TreeAlgorithm_1.tree_getNextDescendantNode(shadow, child, false, true, function (e) { return util_1.Guard.isSlot(e); });\n    }\n    return null;\n}\nexports.shadowTree_findASlot = shadowTree_findASlot;\n/**\n * Finds slotables for the given slot.\n *\n * @param slot - a slot\n */\nfunction shadowTree_findSlotables(slot) {\n    var e_1, _a;\n    /**\n     * 1. Let result be an empty list.\n     * 2. If slot’s root is not a shadow root, then return result.\n     */\n    var result = [];\n    var root = TreeAlgorithm_1.tree_rootNode(slot);\n    if (!util_1.Guard.isShadowRoot(root))\n        return result;\n    /**\n     * 3. Let host be slot’s root’s host.\n     * 4. For each slotable child of host, slotable, in tree order:\n     */\n    var host = root._host;\n    try {\n        for (var _b = __values(host._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var slotable = _c.value;\n            if (util_1.Guard.isSlotable(slotable)) {\n                /**\n                 * 4.1. Let foundSlot be the result of finding a slot given slotable.\n                 * 4.2. If foundSlot is slot, then append slotable to result.\n                 */\n                var foundSlot = shadowTree_findASlot(slotable);\n                if (foundSlot === slot) {\n                    result.push(slotable);\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    /**\n     * 5. Return result.\n     */\n    return result;\n}\nexports.shadowTree_findSlotables = shadowTree_findSlotables;\n/**\n * Finds slotables for the given slot.\n *\n * @param slot - a slot\n */\nfunction shadowTree_findFlattenedSlotables(slot) {\n    var e_2, _a, e_3, _b;\n    /**\n     * 1. Let result be an empty list.\n     * 2. If slot’s root is not a shadow root, then return result.\n     */\n    var result = [];\n    var root = TreeAlgorithm_1.tree_rootNode(slot);\n    if (!util_1.Guard.isShadowRoot(root))\n        return result;\n    /**\n     * 3. Let slotables be the result of finding slotables given slot.\n     * 4. If slotables is the empty list, then append each slotable child of\n     * slot, in tree order, to slotables.\n     */\n    var slotables = shadowTree_findSlotables(slot);\n    if (util_2.isEmpty(slotables)) {\n        try {\n            for (var _c = __values(slot._children), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var slotable = _d.value;\n                if (util_1.Guard.isSlotable(slotable)) {\n                    slotables.push(slotable);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    try {\n        /**\n         * 5. For each node in slotables:\n         */\n        for (var slotables_1 = __values(slotables), slotables_1_1 = slotables_1.next(); !slotables_1_1.done; slotables_1_1 = slotables_1.next()) {\n            var node = slotables_1_1.value;\n            /**\n             * 5.1. If node is a slot whose root is a shadow root, then:\n             */\n            if (util_1.Guard.isSlot(node) && util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(node))) {\n                /**\n                 * 5.1.1. Let temporaryResult be the result of finding flattened slotables given node.\n                 * 5.1.2. Append each slotable in temporaryResult, in order, to result.\n                 */\n                var temporaryResult = shadowTree_findFlattenedSlotables(node);\n                result.push.apply(result, __spread(temporaryResult));\n            }\n            else {\n                /**\n                 * 5.2. Otherwise, append node to result.\n                 */\n                result.push(node);\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (slotables_1_1 && !slotables_1_1.done && (_b = slotables_1.return)) _b.call(slotables_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    /**\n     * 6. Return result.\n     */\n    return result;\n}\nexports.shadowTree_findFlattenedSlotables = shadowTree_findFlattenedSlotables;\n/**\n * Assigns slotables to the given slot.\n *\n * @param slot - a slot\n */\nfunction shadowTree_assignSlotables(slot) {\n    var e_4, _a;\n    /**\n     * 1. Let slotables be the result of finding slotables for slot.\n     * 2. If slotables and slot’s assigned nodes are not identical, then run\n     * signal a slot change for slot.\n     */\n    var slotables = shadowTree_findSlotables(slot);\n    if (slotables.length === slot._assignedNodes.length) {\n        var nodesIdentical = true;\n        for (var i = 0; i < slotables.length; i++) {\n            if (slotables[i] !== slot._assignedNodes[i]) {\n                nodesIdentical = false;\n                break;\n            }\n        }\n        if (!nodesIdentical) {\n            shadowTree_signalASlotChange(slot);\n        }\n    }\n    /**\n     * 3. Set slot’s assigned nodes to slotables.\n     * 4. For each slotable in slotables, set slotable’s assigned slot to slot.\n     */\n    slot._assignedNodes = slotables;\n    try {\n        for (var slotables_2 = __values(slotables), slotables_2_1 = slotables_2.next(); !slotables_2_1.done; slotables_2_1 = slotables_2.next()) {\n            var slotable = slotables_2_1.value;\n            slotable._assignedSlot = slot;\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (slotables_2_1 && !slotables_2_1.done && (_a = slotables_2.return)) _a.call(slotables_2);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n}\nexports.shadowTree_assignSlotables = shadowTree_assignSlotables;\n/**\n * Assigns slotables to all nodes of a tree.\n *\n * @param root - root node\n */\nfunction shadowTree_assignSlotablesForATree(root) {\n    /**\n     * To assign slotables for a tree, given a node root, run assign slotables\n     * for each slot slot in root’s inclusive descendants, in tree order.\n     */\n    var descendant = TreeAlgorithm_1.tree_getFirstDescendantNode(root, true, false, function (e) { return util_1.Guard.isSlot(e); });\n    while (descendant !== null) {\n        shadowTree_assignSlotables(descendant);\n        descendant = TreeAlgorithm_1.tree_getNextDescendantNode(root, descendant, true, false, function (e) { return util_1.Guard.isSlot(e); });\n    }\n}\nexports.shadowTree_assignSlotablesForATree = shadowTree_assignSlotablesForATree;\n/**\n * Assigns a slot to a slotables.\n *\n * @param slotable - a slotable\n */\nfunction shadowTree_assignASlot(slotable) {\n    /**\n     * 1. Let slot be the result of finding a slot with slotable.\n     * 2. If slot is non-null, then run assign slotables for slot.\n     */\n    var slot = shadowTree_findASlot(slotable);\n    if (slot !== null) {\n        shadowTree_assignSlotables(slot);\n    }\n}\nexports.shadowTree_assignASlot = shadowTree_assignASlot;\n//# sourceMappingURL=ShadowTreeAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\n/**\n * Represents a mixin that extends child nodes that can have siblings\n * other than doctypes. This mixin is implemented by {@link Element} and\n * {@link CharacterData}.\n */\nvar NonDocumentTypeChildNodeImpl = /** @class */ (function () {\n    function NonDocumentTypeChildNodeImpl() {\n    }\n    Object.defineProperty(NonDocumentTypeChildNodeImpl.prototype, \"previousElementSibling\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The previousElementSibling attribute’s getter must return the first\n             * preceding sibling that is an element, and null otherwise.\n             */\n            var node = util_1.Cast.asNode(this)._previousSibling;\n            while (node) {\n                if (util_1.Guard.isElementNode(node))\n                    return node;\n                else\n                    node = node._previousSibling;\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NonDocumentTypeChildNodeImpl.prototype, \"nextElementSibling\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The nextElementSibling attribute’s getter must return the first\n             * following sibling that is an element, and null otherwise.\n             */\n            var node = util_1.Cast.asNode(this)._nextSibling;\n            while (node) {\n                if (util_1.Guard.isElementNode(node))\n                    return node;\n                else\n                    node = node._nextSibling;\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NonDocumentTypeChildNodeImpl;\n}());\nexports.NonDocumentTypeChildNodeImpl = NonDocumentTypeChildNodeImpl;\n//# sourceMappingURL=NonDocumentTypeChildNodeImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents the base class of `Error` objects used by this module.\n */\nvar DOMException = /** @class */ (function (_super) {\n    __extends(DOMException, _super);\n    /**\n     *\n     * @param name - message name\n     * @param message - error message\n     */\n    function DOMException(name, message) {\n        if (message === void 0) { message = \"\"; }\n        var _this = _super.call(this, message) || this;\n        _this.name = name;\n        return _this;\n    }\n    return DOMException;\n}(Error));\nexports.DOMException = DOMException;\nvar DOMStringSizeError = /** @class */ (function (_super) {\n    __extends(DOMStringSizeError, _super);\n    /**\n    * @param message - error message\n    */\n    function DOMStringSizeError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"DOMStringSizeError\", message) || this;\n    }\n    return DOMStringSizeError;\n}(DOMException));\nexports.DOMStringSizeError = DOMStringSizeError;\nvar WrongDocumentError = /** @class */ (function (_super) {\n    __extends(WrongDocumentError, _super);\n    /**\n    * @param message - error message\n    */\n    function WrongDocumentError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"WrongDocumentError\", \"The object is in the wrong document. \" + message) || this;\n    }\n    return WrongDocumentError;\n}(DOMException));\nexports.WrongDocumentError = WrongDocumentError;\nvar NoDataAllowedError = /** @class */ (function (_super) {\n    __extends(NoDataAllowedError, _super);\n    /**\n    * @param message - error message\n    */\n    function NoDataAllowedError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NoDataAllowedError\", message) || this;\n    }\n    return NoDataAllowedError;\n}(DOMException));\nexports.NoDataAllowedError = NoDataAllowedError;\nvar NoModificationAllowedError = /** @class */ (function (_super) {\n    __extends(NoModificationAllowedError, _super);\n    /**\n    * @param message - error message\n    */\n    function NoModificationAllowedError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NoModificationAllowedError\", \"The object can not be modified. \" + message) || this;\n    }\n    return NoModificationAllowedError;\n}(DOMException));\nexports.NoModificationAllowedError = NoModificationAllowedError;\nvar NotSupportedError = /** @class */ (function (_super) {\n    __extends(NotSupportedError, _super);\n    /**\n    * @param message - error message\n    */\n    function NotSupportedError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NotSupportedError\", \"The operation is not supported. \" + message) || this;\n    }\n    return NotSupportedError;\n}(DOMException));\nexports.NotSupportedError = NotSupportedError;\nvar InUseAttributeError = /** @class */ (function (_super) {\n    __extends(InUseAttributeError, _super);\n    /**\n    * @param message - error message\n    */\n    function InUseAttributeError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"InUseAttributeError\", message) || this;\n    }\n    return InUseAttributeError;\n}(DOMException));\nexports.InUseAttributeError = InUseAttributeError;\nvar InvalidStateError = /** @class */ (function (_super) {\n    __extends(InvalidStateError, _super);\n    /**\n    * @param message - error message\n    */\n    function InvalidStateError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"InvalidStateError\", \"The object is in an invalid state. \" + message) || this;\n    }\n    return InvalidStateError;\n}(DOMException));\nexports.InvalidStateError = InvalidStateError;\nvar InvalidModificationError = /** @class */ (function (_super) {\n    __extends(InvalidModificationError, _super);\n    /**\n    * @param message - error message\n    */\n    function InvalidModificationError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"InvalidModificationError\", \"The object can not be modified in this way. \" + message) || this;\n    }\n    return InvalidModificationError;\n}(DOMException));\nexports.InvalidModificationError = InvalidModificationError;\nvar NamespaceError = /** @class */ (function (_super) {\n    __extends(NamespaceError, _super);\n    /**\n    * @param message - error message\n    */\n    function NamespaceError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NamespaceError\", \"The operation is not allowed by Namespaces in XML. [XMLNS] \" + message) || this;\n    }\n    return NamespaceError;\n}(DOMException));\nexports.NamespaceError = NamespaceError;\nvar InvalidAccessError = /** @class */ (function (_super) {\n    __extends(InvalidAccessError, _super);\n    /**\n    * @param message - error message\n    */\n    function InvalidAccessError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"InvalidAccessError\", \"The object does not support the operation or argument. \" + message) || this;\n    }\n    return InvalidAccessError;\n}(DOMException));\nexports.InvalidAccessError = InvalidAccessError;\nvar ValidationError = /** @class */ (function (_super) {\n    __extends(ValidationError, _super);\n    /**\n    * @param message - error message\n    */\n    function ValidationError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"ValidationError\", message) || this;\n    }\n    return ValidationError;\n}(DOMException));\nexports.ValidationError = ValidationError;\nvar TypeMismatchError = /** @class */ (function (_super) {\n    __extends(TypeMismatchError, _super);\n    /**\n    * @param message - error message\n    */\n    function TypeMismatchError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"TypeMismatchError\", message) || this;\n    }\n    return TypeMismatchError;\n}(DOMException));\nexports.TypeMismatchError = TypeMismatchError;\nvar SecurityError = /** @class */ (function (_super) {\n    __extends(SecurityError, _super);\n    /**\n    * @param message - error message\n    */\n    function SecurityError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"SecurityError\", \"The operation is insecure. \" + message) || this;\n    }\n    return SecurityError;\n}(DOMException));\nexports.SecurityError = SecurityError;\nvar NetworkError = /** @class */ (function (_super) {\n    __extends(NetworkError, _super);\n    /**\n    * @param message - error message\n    */\n    function NetworkError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NetworkError\", \"A network error occurred. \" + message) || this;\n    }\n    return NetworkError;\n}(DOMException));\nexports.NetworkError = NetworkError;\nvar AbortError = /** @class */ (function (_super) {\n    __extends(AbortError, _super);\n    /**\n    * @param message - error message\n    */\n    function AbortError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"AbortError\", \"The operation was aborted. \" + message) || this;\n    }\n    return AbortError;\n}(DOMException));\nexports.AbortError = AbortError;\nvar URLMismatchError = /** @class */ (function (_super) {\n    __extends(URLMismatchError, _super);\n    /**\n    * @param message - error message\n    */\n    function URLMismatchError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"URLMismatchError\", \"The given URL does not match another URL. \" + message) || this;\n    }\n    return URLMismatchError;\n}(DOMException));\nexports.URLMismatchError = URLMismatchError;\nvar QuotaExceededError = /** @class */ (function (_super) {\n    __extends(QuotaExceededError, _super);\n    /**\n    * @param message - error message\n    */\n    function QuotaExceededError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"QuotaExceededError\", \"The quota has been exceeded. \" + message) || this;\n    }\n    return QuotaExceededError;\n}(DOMException));\nexports.QuotaExceededError = QuotaExceededError;\nvar TimeoutError = /** @class */ (function (_super) {\n    __extends(TimeoutError, _super);\n    /**\n    * @param message - error message\n    */\n    function TimeoutError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"TimeoutError\", \"The operation timed out. \" + message) || this;\n    }\n    return TimeoutError;\n}(DOMException));\nexports.TimeoutError = TimeoutError;\nvar InvalidNodeTypeError = /** @class */ (function (_super) {\n    __extends(InvalidNodeTypeError, _super);\n    /**\n    * @param message - error message\n    */\n    function InvalidNodeTypeError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"InvalidNodeTypeError\", \"The supplied node is incorrect or has an incorrect ancestor for this operation. \" + message) || this;\n    }\n    return InvalidNodeTypeError;\n}(DOMException));\nexports.InvalidNodeTypeError = InvalidNodeTypeError;\nvar DataCloneError = /** @class */ (function (_super) {\n    __extends(DataCloneError, _super);\n    /**\n    * @param message - error message\n    */\n    function DataCloneError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"DataCloneError\", \"The object can not be cloned. \" + message) || this;\n    }\n    return DataCloneError;\n}(DOMException));\nexports.DataCloneError = DataCloneError;\nvar NotImplementedError = /** @class */ (function (_super) {\n    __extends(NotImplementedError, _super);\n    /**\n    * @param message - error message\n    */\n    function NotImplementedError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NotImplementedError\", \"The DOM method is not implemented by this module. \" + message) || this;\n    }\n    return NotImplementedError;\n}(DOMException));\nexports.NotImplementedError = NotImplementedError;\nvar HierarchyRequestError = /** @class */ (function (_super) {\n    __extends(HierarchyRequestError, _super);\n    /**\n     * @param message - error message\n     */\n    function HierarchyRequestError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"HierarchyRequestError\", \"The operation would yield an incorrect node tree. \" + message) || this;\n    }\n    return HierarchyRequestError;\n}(DOMException));\nexports.HierarchyRequestError = HierarchyRequestError;\nvar NotFoundError = /** @class */ (function (_super) {\n    __extends(NotFoundError, _super);\n    /**\n     * @param message - error message\n     */\n    function NotFoundError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"NotFoundError\", \"The object can not be found here. \" + message) || this;\n    }\n    return NotFoundError;\n}(DOMException));\nexports.NotFoundError = NotFoundError;\nvar IndexSizeError = /** @class */ (function (_super) {\n    __extends(IndexSizeError, _super);\n    /**\n     * @param message - error message\n     */\n    function IndexSizeError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"IndexSizeError\", \"The index is not in the allowed range. \" + message) || this;\n    }\n    return IndexSizeError;\n}(DOMException));\nexports.IndexSizeError = IndexSizeError;\nvar SyntaxError = /** @class */ (function (_super) {\n    __extends(SyntaxError, _super);\n    /**\n     * @param message - error message\n     */\n    function SyntaxError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"SyntaxError\", \"The string did not match the expected pattern. \" + message) || this;\n    }\n    return SyntaxError;\n}(DOMException));\nexports.SyntaxError = SyntaxError;\nvar InvalidCharacterError = /** @class */ (function (_super) {\n    __extends(InvalidCharacterError, _super);\n    /**\n     * @param message - error message\n     */\n    function InvalidCharacterError(message) {\n        if (message === void 0) { message = \"\"; }\n        return _super.call(this, \"InvalidCharacterError\", \"The string contains invalid characters. \" + message) || this;\n    }\n    return InvalidCharacterError;\n}(DOMException));\nexports.InvalidCharacterError = InvalidCharacterError;\n//# sourceMappingURL=DOMException.js.map","module.exports = require(\"electron\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nonEntityAmpersandRegex = /&(?![A-Za-z]+;|#\\d+;)/g;\n//# sourceMappingURL=constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\n/**\n * Represents an object which can be used to iterate through the nodes\n * of a subtree.\n */\nvar TraverserImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `Traverser`.\n     *\n     * @param root - root node\n     */\n    function TraverserImpl(root) {\n        this._activeFlag = false;\n        this._root = root;\n        this._whatToShow = interfaces_1.WhatToShow.All;\n        this._filter = null;\n    }\n    Object.defineProperty(TraverserImpl.prototype, \"root\", {\n        /** @inheritdoc */\n        get: function () { return this._root; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TraverserImpl.prototype, \"whatToShow\", {\n        /** @inheritdoc */\n        get: function () { return this._whatToShow; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TraverserImpl.prototype, \"filter\", {\n        /** @inheritdoc */\n        get: function () { return this._filter; },\n        enumerable: true,\n        configurable: true\n    });\n    return TraverserImpl;\n}());\nexports.TraverserImpl = TraverserImpl;\n//# sourceMappingURL=TraverserImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dom_1 = require(\"./dom\");\ndom_1.dom.setFeatures(true);\nvar dom_2 = require(\"./dom\");\nexports.DOMImplementation = dom_2.DOMImplementation;\nvar parser_1 = require(\"./parser\");\nexports.DOMParser = parser_1.DOMParser;\nvar serializer_1 = require(\"./serializer\");\nexports.XMLSerializer = serializer_1.XMLSerializer;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dom_1 = require(\"../builder/dom\");\n/**\n * Parses XML nodes.\n */\nvar BaseReader = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `BaseReader`.\n     *\n     * @param builderOptions - XML builder options\n     */\n    function BaseReader(builderOptions) {\n        this._builderOptions = builderOptions;\n        if (builderOptions.parser) {\n            Object.assign(this, builderOptions.parser);\n        }\n    }\n    BaseReader.prototype._docType = function (parent, name, publicId, systemId) {\n        return parent.dtd({ name: name, pubID: publicId, sysID: systemId });\n    };\n    BaseReader.prototype._comment = function (parent, data) {\n        return parent.com(data);\n    };\n    BaseReader.prototype._text = function (parent, data) {\n        return parent.txt(data);\n    };\n    BaseReader.prototype._instruction = function (parent, target, data) {\n        return parent.ins(target, data);\n    };\n    BaseReader.prototype._cdata = function (parent, data) {\n        return parent.dat(data);\n    };\n    BaseReader.prototype._element = function (parent, namespace, name) {\n        return (namespace === undefined ? parent.ele(name) : parent.ele(namespace, name));\n    };\n    BaseReader.prototype._attribute = function (parent, namespace, name, value) {\n        return (namespace === undefined ? parent.att(name, value) : parent.att(namespace, name, value));\n    };\n    BaseReader.prototype._sanitize = function (str) {\n        return dom_1.sanitizeInput(str, this._builderOptions.invalidCharReplacement);\n    };\n    /**\n     * Decodes serialized text.\n     *\n     * @param text - text value to serialize\n     */\n    BaseReader.prototype._decodeText = function (text) {\n        if (text == null)\n            return text;\n        return text.replace(/&(quot|amp|apos|lt|gt);/g, function (_match, tag) {\n            return BaseReader._entityTable[tag];\n        }).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g, function (_match, hexStr, numStr) {\n            return String.fromCodePoint(parseInt(hexStr || numStr, hexStr ? 16 : 10));\n        });\n    };\n    /**\n     * Decodes serialized attribute value.\n     *\n     * @param text - attribute value to serialize\n     */\n    BaseReader.prototype._decodeAttributeValue = function (text) {\n        return this._decodeText(text);\n    };\n    /**\n     * Main parser function which parses the given object and returns an XMLBuilder.\n     *\n     * @param node - node to recieve parsed content\n     * @param obj - object to parse\n     */\n    BaseReader.prototype.parse = function (node, obj) {\n        return this._parse(node, obj);\n    };\n    /**\n     * Creates a DocType node.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param name - node name\n     * @param publicId - public identifier\n     * @param systemId - system identifier\n     */\n    BaseReader.prototype.docType = function (parent, name, publicId, systemId) {\n        return this._docType(parent, name, publicId, systemId);\n    };\n    /**\n     * Creates a comment node.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param parent - parent node\n     * @param data - node data\n     */\n    BaseReader.prototype.comment = function (parent, data) {\n        return this._comment(parent, data);\n    };\n    /**\n     * Creates a text node.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param parent - parent node\n     * @param data - node data\n     */\n    BaseReader.prototype.text = function (parent, data) {\n        return this._text(parent, data);\n    };\n    /**\n     * Creates a processing instruction node.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param parent - parent node\n     * @param target - instruction target\n     * @param data - node data\n     */\n    BaseReader.prototype.instruction = function (parent, target, data) {\n        return this._instruction(parent, target, data);\n    };\n    /**\n     * Creates a CData section node.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param parent - parent node\n     * @param data - node data\n     */\n    BaseReader.prototype.cdata = function (parent, data) {\n        return this._cdata(parent, data);\n    };\n    /**\n     * Creates an element node.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param parent - parent node\n     * @param namespace - node namespace\n     * @param name - node name\n     */\n    BaseReader.prototype.element = function (parent, namespace, name) {\n        return this._element(parent, namespace, name);\n    };\n    /**\n     * Creates an attribute or namespace declaration.\n     * The node will be skipped if the function returns `undefined`.\n     *\n     * @param parent - parent node\n     * @param namespace - node namespace\n     * @param name - node name\n     * @param value - node value\n     */\n    BaseReader.prototype.attribute = function (parent, namespace, name, value) {\n        return this._attribute(parent, namespace, name, value);\n    };\n    /**\n     * Sanitizes input strings.\n     *\n     * @param str - input string\n     */\n    BaseReader.prototype.sanitize = function (str) {\n        return this._sanitize(str);\n    };\n    BaseReader._entityTable = {\n        \"lt\": \"<\",\n        \"gt\": \">\",\n        \"amp\": \"&\",\n        \"quot\": '\"',\n        \"apos\": \"'\",\n    };\n    return BaseReader;\n}());\nexports.BaseReader = BaseReader;\n//# sourceMappingURL=BaseReader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Guard_1 = require(\"./Guard\");\n/**\n * Contains type casts for DOM objects.\n */\nvar Cast = /** @class */ (function () {\n    function Cast() {\n    }\n    /**\n     * Casts the given object to a `Node`.\n     *\n     * @param a - the object to cast\n     */\n    Cast.asNode = function (a) {\n        if (Guard_1.Guard.isNode(a)) {\n            return a;\n        }\n        else {\n            throw new Error(\"Invalid object. Node expected.\");\n        }\n    };\n    return Cast;\n}());\nexports.Cast = Cast;\n//# sourceMappingURL=Cast.js.map","'use strict';\n\nvar Type = require('../type');\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; }\n  },\n  defaultStyle: 'lowercase'\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TraverserImpl_1 = require(\"./TraverserImpl\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents an object which can be used to iterate through the nodes\n * of a subtree.\n */\nvar NodeIteratorImpl = /** @class */ (function (_super) {\n    __extends(NodeIteratorImpl, _super);\n    /**\n     * Initializes a new instance of `NodeIterator`.\n     */\n    function NodeIteratorImpl(root, reference, pointerBeforeReference) {\n        var _this = _super.call(this, root) || this;\n        _this._iteratorCollection = undefined;\n        _this._reference = reference;\n        _this._pointerBeforeReference = pointerBeforeReference;\n        algorithm_1.nodeIterator_iteratorList().add(_this);\n        return _this;\n    }\n    Object.defineProperty(NodeIteratorImpl.prototype, \"referenceNode\", {\n        /** @inheritdoc */\n        get: function () { return this._reference; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NodeIteratorImpl.prototype, \"pointerBeforeReferenceNode\", {\n        /** @inheritdoc */\n        get: function () { return this._pointerBeforeReference; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    NodeIteratorImpl.prototype.nextNode = function () {\n        /**\n         * The nextNode() method, when invoked, must return the result of\n         * traversing with the context object and next.\n         */\n        return algorithm_1.nodeIterator_traverse(this, true);\n    };\n    /** @inheritdoc */\n    NodeIteratorImpl.prototype.previousNode = function () {\n        /**\n         * The previousNode() method, when invoked, must return the result of\n         * traversing with the context object and previous.\n         */\n        return algorithm_1.nodeIterator_traverse(this, false);\n    };\n    /** @inheritdoc */\n    NodeIteratorImpl.prototype.detach = function () {\n        /**\n         * The detach() method, when invoked, must do nothing.\n         *\n         * since JS lacks weak references, we still use detach\n         */\n        algorithm_1.nodeIterator_iteratorList().delete(this);\n    };\n    /**\n     * Creates a new `NodeIterator`.\n     *\n     * @param root - iterator's root node\n     * @param reference - reference node\n     * @param pointerBeforeReference - whether the iterator is before or after the\n     * reference node\n     */\n    NodeIteratorImpl._create = function (root, reference, pointerBeforeReference) {\n        return new NodeIteratorImpl(root, reference, pointerBeforeReference);\n    };\n    return NodeIteratorImpl;\n}(TraverserImpl_1.TraverserImpl));\nexports.NodeIteratorImpl = NodeIteratorImpl;\n//# sourceMappingURL=NodeIteratorImpl.js.map","module.exports = require(\"events\");","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMException_1 = require(\"./DOMException\");\nvar util_1 = require(\"../util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a target to which an event can be dispatched.\n */\nvar EventTargetImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `EventTarget`.\n     */\n    function EventTargetImpl() {\n    }\n    Object.defineProperty(EventTargetImpl.prototype, \"_eventListenerList\", {\n        get: function () {\n            return this.__eventListenerList || (this.__eventListenerList = []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventTargetImpl.prototype, \"_eventHandlerMap\", {\n        get: function () {\n            return this.__eventHandlerMap || (this.__eventHandlerMap = {});\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    EventTargetImpl.prototype.addEventListener = function (type, callback, options) {\n        if (options === void 0) { options = { passive: false, once: false, capture: false }; }\n        /**\n         * 1. Let capture, passive, and once be the result of flattening more options.\n         */\n        var _a = __read(algorithm_1.eventTarget_flattenMore(options), 3), capture = _a[0], passive = _a[1], once = _a[2];\n        // convert callback function to EventListener, return if null\n        var listenerCallback;\n        if (!callback) {\n            return;\n        }\n        else if (util_1.Guard.isEventListener(callback)) {\n            listenerCallback = callback;\n        }\n        else {\n            listenerCallback = { handleEvent: callback };\n        }\n        /**\n         * 2. Add an event listener with the context object and an event listener\n         * whose type is type, callback is callback, capture is capture, passive is\n         * passive, and once is once.\n         */\n        algorithm_1.eventTarget_addEventListener(this, {\n            type: type,\n            callback: listenerCallback,\n            capture: capture,\n            passive: passive,\n            once: once,\n            removed: false\n        });\n    };\n    /** @inheritdoc */\n    EventTargetImpl.prototype.removeEventListener = function (type, callback, options) {\n        /**\n         * TODO: Implement realms\n         * 1. If the context object’s relevant global object is a\n         * ServiceWorkerGlobalScope object and its associated service worker’s\n         * script resource’s has ever been evaluated flag is set, then throw\n         * a TypeError. [SERVICE-WORKERS]\n         */\n        if (options === void 0) { options = { capture: false }; }\n        /**\n         * 2. Let capture be the result of flattening options.\n         */\n        var capture = algorithm_1.eventTarget_flatten(options);\n        if (!callback)\n            return;\n        /**\n         * 3. If the context object’s event listener list contains an event listener\n         * whose type is type, callback is callback, and capture is capture, then\n         * remove an event listener with the context object and that event listener.\n         */\n        for (var i = 0; i < this._eventListenerList.length; i++) {\n            var entry = this._eventListenerList[i];\n            if (entry.type !== type || entry.capture !== capture)\n                continue;\n            if (util_1.Guard.isEventListener(callback) && entry.callback === callback) {\n                algorithm_1.eventTarget_removeEventListener(this, entry, i);\n                break;\n            }\n            else if (callback && entry.callback.handleEvent === callback) {\n                algorithm_1.eventTarget_removeEventListener(this, entry, i);\n                break;\n            }\n        }\n    };\n    /** @inheritdoc */\n    EventTargetImpl.prototype.dispatchEvent = function (event) {\n        /**\n         * 1. If event’s dispatch flag is set, or if its initialized flag is not\n         * set, then throw an \"InvalidStateError\" DOMException.\n         * 2. Initialize event’s isTrusted attribute to false.\n         * 3. Return the result of dispatching event to the context object.\n         */\n        if (event._dispatchFlag || !event._initializedFlag) {\n            throw new DOMException_1.InvalidStateError();\n        }\n        event._isTrusted = false;\n        return algorithm_1.event_dispatch(event, this);\n    };\n    /** @inheritdoc */\n    EventTargetImpl.prototype._getTheParent = function (event) {\n        return null;\n    };\n    return EventTargetImpl;\n}());\nexports.EventTargetImpl = EventTargetImpl;\n//# sourceMappingURL=EventTargetImpl.js.map","'use strict';\n\nvar Type = require('../type');\n\nvar _toString = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns the count of bytes in a sequence.\n *\n * @param list - a byte sequence\n */\nfunction length(list) {\n    /**\n     * A byte sequence’s length is the number of bytes it contains.\n     */\n    return list.length;\n}\nexports.length = length;\n/**\n * Converts each byte to lowercase.\n *\n * @param list - a byte sequence\n */\nfunction byteLowercase(list) {\n    /**\n     * To byte-lowercase a byte sequence, increase each byte it contains, in the\n     * range 0x41 (A) to 0x5A (Z), inclusive, by 0x20.\n     */\n    for (var i = 0; i < list.length; i++) {\n        var c = list[i];\n        if (c >= 0x41 && c <= 0x5A) {\n            list[i] = c + 0x20;\n        }\n    }\n}\nexports.byteLowercase = byteLowercase;\n/**\n * Converts each byte to uppercase.\n *\n * @param list - a byte sequence\n */\nfunction byteUppercase(list) {\n    /**\n     * To byte-uppercase a byte sequence, subtract each byte it contains, in the\n     * range 0x61 (a) to 0x7A (z), inclusive, by 0x20.\n     */\n    for (var i = 0; i < list.length; i++) {\n        var c = list[i];\n        if (c >= 0x61 && c <= 0x7A) {\n            list[i] = c - 0x20;\n        }\n    }\n}\nexports.byteUppercase = byteUppercase;\n/**\n * Compares two byte sequences.\n *\n * @param listA - a byte sequence\n * @param listB - a byte sequence\n */\nfunction byteCaseInsensitiveMatch(listA, listB) {\n    /**\n     * A byte sequence A is a byte-case-insensitive match for a byte sequence B,\n     * if the byte-lowercase of A is the byte-lowercase of B.\n     */\n    if (listA.length !== listB.length)\n        return false;\n    for (var i = 0; i < listA.length; i++) {\n        var a = listA[i];\n        var b = listB[i];\n        if (a >= 0x41 && a <= 0x5A)\n            a += 0x20;\n        if (b >= 0x41 && b <= 0x5A)\n            b += 0x20;\n        if (a !== b)\n            return false;\n    }\n    return true;\n}\nexports.byteCaseInsensitiveMatch = byteCaseInsensitiveMatch;\n/**\n * Determines if `listA` starts with `listB`.\n *\n * @param listA - a byte sequence\n * @param listB - a byte sequence\n */\nfunction startsWith(listA, listB) {\n    /**\n     * 1. Let i be 0.\n     * 2. While true:\n     * 2.1. Let aByte be the ith byte of a if i is less than a’s length; otherwise null.\n     * 2.3. Let bByte be the ith byte of b if i is less than b’s length; otherwise null.\n     * 2.4. If bByte is null, then return true.\n     * 2.5. Return false if aByte is not bByte.\n     * 2.6. Set i to i + 1.\n     */\n    var i = 0;\n    while (true) {\n        if (i >= listA.length)\n            return false;\n        if (i >= listB.length)\n            return true;\n        if (listA[i] !== listB[i])\n            return false;\n        i++;\n    }\n}\nexports.startsWith = startsWith;\n/**\n * Determines if `listA` is less than `listB`.\n *\n * @param listA - a byte sequence\n * @param listB - a byte sequence\n */\nfunction byteLessThan(listA, listB) {\n    /**\n     * 1. If b starts with a, then return false.\n     * 2. If a starts with b, then return true.\n     * 3. Let n be the smallest index such that the nth byte of a is different\n     * from the nth byte of b. (There has to be such an index, since neither byte\n     * sequence starts with the other.)\n     * 4. If the nth byte of a is less than the nth byte of b, then return true.\n     * 5. Return false.\n     */\n    var i = 0;\n    while (true) {\n        if (i >= listA.length)\n            return false;\n        if (i >= listB.length)\n            return true;\n        var a = listA[i];\n        var b = listB[i];\n        if (a < b)\n            return true;\n        else if (a > b)\n            return false;\n        i++;\n    }\n}\nexports.byteLessThan = byteLessThan;\n/**\n * Decodes a byte sequence into a string.\n *\n * @param list - a byte sequence\n */\nfunction isomorphicDecode(list) {\n    /**\n     * To isomorphic decode a byte sequence input, return a string whose length is\n     * equal to input’s length and whose code points have the same values as\n     * input’s bytes, in the same order.\n     */\n    return String.fromCodePoint.apply(String, __spread(list));\n}\nexports.isomorphicDecode = isomorphicDecode;\n//# sourceMappingURL=ByteSequence.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar util_1 = require(\"../util\");\nvar util_2 = require(\"@oozcitak/util\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar CustomElementAlgorithm_1 = require(\"./CustomElementAlgorithm\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar NodeIteratorAlgorithm_1 = require(\"./NodeIteratorAlgorithm\");\nvar ShadowTreeAlgorithm_1 = require(\"./ShadowTreeAlgorithm\");\nvar MutationObserverAlgorithm_1 = require(\"./MutationObserverAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\nvar DocumentAlgorithm_1 = require(\"./DocumentAlgorithm\");\n/**\n * Ensures pre-insertion validity of a node into a parent before a\n * child.\n *\n * @param node - node to insert\n * @param parent - parent node to receive node\n * @param child - child node to insert node before\n */\nfunction mutation_ensurePreInsertionValidity(node, parent, child) {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n    var parentNodeType = parent._nodeType;\n    var nodeNodeType = node._nodeType;\n    var childNodeType = child ? child._nodeType : null;\n    /**\n     * 1. If parent is not a Document, DocumentFragment, or Element node,\n     * throw a \"HierarchyRequestError\" DOMException.\n     */\n    if (parentNodeType !== interfaces_1.NodeType.Document &&\n        parentNodeType !== interfaces_1.NodeType.DocumentFragment &&\n        parentNodeType !== interfaces_1.NodeType.Element)\n        throw new DOMException_1.HierarchyRequestError(\"Only document, document fragment and element nodes can contain child nodes. Parent node is \" + parent.nodeName + \".\");\n    /**\n     * 2. If node is a host-including inclusive ancestor of parent, throw a\n     * \"HierarchyRequestError\" DOMException.\n     */\n    if (TreeAlgorithm_1.tree_isHostIncludingAncestorOf(parent, node, true))\n        throw new DOMException_1.HierarchyRequestError(\"The node to be inserted cannot be an inclusive ancestor of parent node. Node is \" + node.nodeName + \", parent node is \" + parent.nodeName + \".\");\n    /**\n     * 3. If child is not null and its parent is not parent, then throw a\n     * \"NotFoundError\" DOMException.\n     */\n    if (child !== null && child._parent !== parent)\n        throw new DOMException_1.NotFoundError(\"The reference child node cannot be found under parent node. Child node is \" + child.nodeName + \", parent node is \" + parent.nodeName + \".\");\n    /**\n     * 4. If node is not a DocumentFragment, DocumentType, Element, Text,\n     * ProcessingInstruction, or Comment node, throw a \"HierarchyRequestError\"\n     * DOMException.\n     */\n    if (nodeNodeType !== interfaces_1.NodeType.DocumentFragment &&\n        nodeNodeType !== interfaces_1.NodeType.DocumentType &&\n        nodeNodeType !== interfaces_1.NodeType.Element &&\n        nodeNodeType !== interfaces_1.NodeType.Text &&\n        nodeNodeType !== interfaces_1.NodeType.ProcessingInstruction &&\n        nodeNodeType !== interfaces_1.NodeType.CData &&\n        nodeNodeType !== interfaces_1.NodeType.Comment)\n        throw new DOMException_1.HierarchyRequestError(\"Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is \" + node.nodeName + \".\");\n    /**\n     * 5. If either node is a Text node and parent is a document, or node is a\n     * doctype and parent is not a document, throw a \"HierarchyRequestError\"\n     * DOMException.\n     */\n    if (nodeNodeType === interfaces_1.NodeType.Text &&\n        parentNodeType === interfaces_1.NodeType.Document)\n        throw new DOMException_1.HierarchyRequestError(\"Cannot insert a text node as a child of a document node. Node is \" + node.nodeName + \".\");\n    if (nodeNodeType === interfaces_1.NodeType.DocumentType &&\n        parentNodeType !== interfaces_1.NodeType.Document)\n        throw new DOMException_1.HierarchyRequestError(\"A document type node can only be inserted under a document node. Parent node is \" + parent.nodeName + \".\");\n    /**\n     * 6. If parent is a document, and any of the statements below, switched on\n     * node, are true, throw a \"HierarchyRequestError\" DOMException.\n     * - DocumentFragment node\n     * If node has more than one element child or has a Text node child.\n     * Otherwise, if node has one element child and either parent has an element\n     * child, child is a doctype, or child is not null and a doctype is\n     * following child.\n     * - element\n     * parent has an element child, child is a doctype, or child is not null and\n     * a doctype is following child.\n     * - doctype\n     * parent has a doctype child, child is non-null and an element is preceding\n     * child, or child is null and parent has an element child.\n     */\n    if (parentNodeType === interfaces_1.NodeType.Document) {\n        if (nodeNodeType === interfaces_1.NodeType.DocumentFragment) {\n            var eleCount = 0;\n            try {\n                for (var _e = __values(node._children), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var childNode = _f.value;\n                    if (childNode._nodeType === interfaces_1.NodeType.Element)\n                        eleCount++;\n                    else if (childNode._nodeType === interfaces_1.NodeType.Text)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert text a node as a child of a document node. Node is \" + childNode.nodeName + \".\");\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (eleCount > 1) {\n                throw new DOMException_1.HierarchyRequestError(\"A document node can only have one document element node. Document fragment to be inserted has \" + eleCount + \" element nodes.\");\n            }\n            else if (eleCount === 1) {\n                try {\n                    for (var _g = __values(parent._children), _h = _g.next(); !_h.done; _h = _g.next()) {\n                        var ele = _h.value;\n                        if (ele._nodeType === interfaces_1.NodeType.Element)\n                            throw new DOMException_1.HierarchyRequestError(\"The document node already has a document element node.\");\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                if (child) {\n                    if (childNodeType === interfaces_1.NodeType.DocumentType)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert an element node before a document type node.\");\n                    var doctypeChild = child._nextSibling;\n                    while (doctypeChild) {\n                        if (doctypeChild._nodeType === interfaces_1.NodeType.DocumentType)\n                            throw new DOMException_1.HierarchyRequestError(\"Cannot insert an element node before a document type node.\");\n                        doctypeChild = doctypeChild._nextSibling;\n                    }\n                }\n            }\n        }\n        else if (nodeNodeType === interfaces_1.NodeType.Element) {\n            try {\n                for (var _j = __values(parent._children), _k = _j.next(); !_k.done; _k = _j.next()) {\n                    var ele = _k.value;\n                    if (ele._nodeType === interfaces_1.NodeType.Element)\n                        throw new DOMException_1.HierarchyRequestError(\"Document already has a document element node. Node is \" + node.nodeName + \".\");\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            if (child) {\n                if (childNodeType === interfaces_1.NodeType.DocumentType)\n                    throw new DOMException_1.HierarchyRequestError(\"Cannot insert an element node before a document type node. Node is \" + node.nodeName + \".\");\n                var doctypeChild = child._nextSibling;\n                while (doctypeChild) {\n                    if (doctypeChild._nodeType === interfaces_1.NodeType.DocumentType)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert an element node before a document type node. Node is \" + node.nodeName + \".\");\n                    doctypeChild = doctypeChild._nextSibling;\n                }\n            }\n        }\n        else if (nodeNodeType === interfaces_1.NodeType.DocumentType) {\n            try {\n                for (var _l = __values(parent._children), _m = _l.next(); !_m.done; _m = _l.next()) {\n                    var ele = _m.value;\n                    if (ele._nodeType === interfaces_1.NodeType.DocumentType)\n                        throw new DOMException_1.HierarchyRequestError(\"Document already has a document type node. Node is \" + node.nodeName + \".\");\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            if (child) {\n                var elementChild = child._previousSibling;\n                while (elementChild) {\n                    if (elementChild._nodeType === interfaces_1.NodeType.Element)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert a document type node before an element node. Node is \" + node.nodeName + \".\");\n                    elementChild = elementChild._previousSibling;\n                }\n            }\n            else {\n                var elementChild = parent._firstChild;\n                while (elementChild) {\n                    if (elementChild._nodeType === interfaces_1.NodeType.Element)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert a document type node before an element node. Node is \" + node.nodeName + \".\");\n                    elementChild = elementChild._nextSibling;\n                }\n            }\n        }\n    }\n}\nexports.mutation_ensurePreInsertionValidity = mutation_ensurePreInsertionValidity;\n/**\n * Ensures pre-insertion validity of a node into a parent before a\n * child, then adopts the node to the tree and inserts it.\n *\n * @param node - node to insert\n * @param parent - parent node to receive node\n * @param child - child node to insert node before\n */\nfunction mutation_preInsert(node, parent, child) {\n    /**\n     * 1. Ensure pre-insertion validity of node into parent before child.\n     * 2. Let reference child be child.\n     * 3. If reference child is node, set it to node’s next sibling.\n     * 4. Adopt node into parent’s node document.\n     * 5. Insert node into parent before reference child.\n     * 6. Return node.\n     */\n    mutation_ensurePreInsertionValidity(node, parent, child);\n    var referenceChild = child;\n    if (referenceChild === node)\n        referenceChild = node._nextSibling;\n    DocumentAlgorithm_1.document_adopt(node, parent._nodeDocument);\n    mutation_insert(node, parent, referenceChild);\n    return node;\n}\nexports.mutation_preInsert = mutation_preInsert;\n/**\n * Inserts a node into a parent node before the given child node.\n *\n * @param node - node to insert\n * @param parent - parent node to receive node\n * @param child - child node to insert node before\n * @param suppressObservers - whether to notify observers\n */\nfunction mutation_insert(node, parent, child, suppressObservers) {\n    var e_5, _a;\n    // Optimized common case\n    if (child === null && node._nodeType !== interfaces_1.NodeType.DocumentFragment) {\n        mutation_insert_single(node, parent, suppressObservers);\n        return;\n    }\n    /**\n     * 1. Let count be the number of children of node if it is a\n     * DocumentFragment node, and one otherwise.\n     */\n    var count = (node._nodeType === interfaces_1.NodeType.DocumentFragment ?\n        node._children.size : 1);\n    /**\n     * 2. If child is non-null, then:\n     */\n    if (child !== null) {\n        /**\n         * 2.1. For each live range whose start node is parent and start\n         * offset is greater than child's index, increase its start\n         * offset by count.\n         * 2.2. For each live range whose end node is parent and end\n         * offset is greater than child's index, increase its end\n         * offset by count.\n         */\n        if (DOMImpl_1.dom.rangeList.size !== 0) {\n            var index_1 = TreeAlgorithm_1.tree_index(child);\n            try {\n                for (var _b = __values(DOMImpl_1.dom.rangeList), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var range = _c.value;\n                    if (range._start[0] === parent && range._start[1] > index_1) {\n                        range._start[1] += count;\n                    }\n                    if (range._end[0] === parent && range._end[1] > index_1) {\n                        range._end[1] += count;\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    /**\n     * 3. Let nodes be node’s children, if node is a DocumentFragment node;\n     * otherwise « node ».\n     */\n    var nodes = node._nodeType === interfaces_1.NodeType.DocumentFragment ? new (Array.bind.apply(Array, __spread([void 0], node._children)))() : [node];\n    /**\n     * 4. If node is a DocumentFragment node, remove its children with the\n     * suppress observers flag set.\n     */\n    if (node._nodeType === interfaces_1.NodeType.DocumentFragment) {\n        while (node._firstChild) {\n            mutation_remove(node._firstChild, node, true);\n        }\n    }\n    /**\n     * 5. If node is a DocumentFragment node, then queue a tree mutation record\n     * for node with « », nodes, null, and null.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        if (node._nodeType === interfaces_1.NodeType.DocumentFragment) {\n            MutationObserverAlgorithm_1.observer_queueTreeMutationRecord(node, [], nodes, null, null);\n        }\n    }\n    /**\n     * 6. Let previousSibling be child’s previous sibling or parent’s last\n     * child if child is null.\n     */\n    var previousSibling = (child ? child._previousSibling : parent._lastChild);\n    var index = child === null ? -1 : TreeAlgorithm_1.tree_index(child);\n    /**\n     * 7. For each node in nodes, in tree order:\n     */\n    for (var i = 0; i < nodes.length; i++) {\n        var node_1 = nodes[i];\n        if (util_1.Guard.isElementNode(node_1)) {\n            // set document element node\n            if (util_1.Guard.isDocumentNode(parent)) {\n                parent._documentElement = node_1;\n            }\n            // mark that the document has namespaces\n            if (!node_1._nodeDocument._hasNamespaces && (node_1._namespace !== null ||\n                node_1._namespacePrefix !== null)) {\n                node_1._nodeDocument._hasNamespaces = true;\n            }\n        }\n        /**\n         * 7.1. If child is null, then append node to parent’s children.\n         * 7.2. Otherwise, insert node into parent’s children before child’s\n         * index.\n         */\n        node_1._parent = parent;\n        if (child === null) {\n            infra_1.set.append(parent._children, node_1);\n        }\n        else {\n            infra_1.set.insert(parent._children, node_1, index);\n            index++;\n        }\n        // assign siblings and children for quick lookups\n        if (parent._firstChild === null) {\n            node_1._previousSibling = null;\n            node_1._nextSibling = null;\n            parent._firstChild = node_1;\n            parent._lastChild = node_1;\n        }\n        else {\n            var prev = (child ? child._previousSibling : parent._lastChild);\n            var next = (child ? child : null);\n            node_1._previousSibling = prev;\n            node_1._nextSibling = next;\n            if (prev)\n                prev._nextSibling = node_1;\n            if (next)\n                next._previousSibling = node_1;\n            if (!prev)\n                parent._firstChild = node_1;\n            if (!next)\n                parent._lastChild = node_1;\n        }\n        /**\n         * 7.3. If parent is a shadow host and node is a slotable, then\n         * assign a slot for node.\n         */\n        if (DOMImpl_1.dom.features.slots) {\n            if (parent._shadowRoot !== null && util_1.Guard.isSlotable(node_1)) {\n                ShadowTreeAlgorithm_1.shadowTree_assignASlot(node_1);\n            }\n        }\n        /**\n         * 7.4. If node is a Text node, run the child text content change\n         * steps for parent.\n         */\n        if (DOMImpl_1.dom.features.steps) {\n            if (util_1.Guard.isTextNode(node_1)) {\n                DOMAlgorithm_1.dom_runChildTextContentChangeSteps(parent);\n            }\n        }\n        /**\n         * 7.5. If parent's root is a shadow root, and parent is a slot\n         * whose assigned nodes is the empty list, then run signal\n         * a slot change for parent.\n         */\n        if (DOMImpl_1.dom.features.slots) {\n            if (util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(parent)) &&\n                util_1.Guard.isSlot(parent) && util_2.isEmpty(parent._assignedNodes)) {\n                ShadowTreeAlgorithm_1.shadowTree_signalASlotChange(parent);\n            }\n        }\n        /**\n         * 7.6. Run assign slotables for a tree with node's root.\n         */\n        if (DOMImpl_1.dom.features.slots) {\n            ShadowTreeAlgorithm_1.shadowTree_assignSlotablesForATree(TreeAlgorithm_1.tree_rootNode(node_1));\n        }\n        /**\n         * 7.7. For each shadow-including inclusive descendant\n         * inclusiveDescendant of node, in shadow-including tree\n         * order:\n         */\n        var inclusiveDescendant = TreeAlgorithm_1.tree_getFirstDescendantNode(node_1, true, true);\n        while (inclusiveDescendant !== null) {\n            /**\n             * 7.7.1. Run the insertion steps with inclusiveDescendant.\n             */\n            if (DOMImpl_1.dom.features.steps) {\n                DOMAlgorithm_1.dom_runInsertionSteps(inclusiveDescendant);\n            }\n            if (DOMImpl_1.dom.features.customElements) {\n                /**\n                 * 7.7.2. If inclusiveDescendant is connected, then:\n                 */\n                if (util_1.Guard.isElementNode(inclusiveDescendant) &&\n                    ShadowTreeAlgorithm_1.shadowTree_isConnected(inclusiveDescendant)) {\n                    if (util_1.Guard.isCustomElementNode(inclusiveDescendant)) {\n                        /**\n                         * 7.7.2.1. If inclusiveDescendant is custom, then enqueue a custom\n                         * element callback reaction with inclusiveDescendant, callback name\n                         * \"connectedCallback\", and an empty argument list.\n                         */\n                        CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(inclusiveDescendant, \"connectedCallback\", []);\n                    }\n                    else {\n                        /**\n                         * 7.7.2.2. Otherwise, try to upgrade inclusiveDescendant.\n                         */\n                        CustomElementAlgorithm_1.customElement_tryToUpgrade(inclusiveDescendant);\n                    }\n                }\n            }\n            inclusiveDescendant = TreeAlgorithm_1.tree_getNextDescendantNode(node_1, inclusiveDescendant, true, true);\n        }\n    }\n    /**\n     * 8. If suppress observers flag is unset, then queue a tree mutation record\n     * for parent with nodes, « », previousSibling, and child.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        if (!suppressObservers) {\n            MutationObserverAlgorithm_1.observer_queueTreeMutationRecord(parent, nodes, [], previousSibling, child);\n        }\n    }\n}\nexports.mutation_insert = mutation_insert;\n/**\n * Inserts a node into a parent node. Optimized routine for the common case where\n * node is not a document fragment node and it has no child nodes.\n *\n * @param node - node to insert\n * @param parent - parent node to receive node\n * @param suppressObservers - whether to notify observers\n */\nfunction mutation_insert_single(node, parent, suppressObservers) {\n    /**\n     * 1. Let count be the number of children of node if it is a\n     * DocumentFragment node, and one otherwise.\n     * 2. If child is non-null, then:\n     * 2.1. For each live range whose start node is parent and start\n     * offset is greater than child's index, increase its start\n     * offset by count.\n     * 2.2. For each live range whose end node is parent and end\n     * offset is greater than child's index, increase its end\n     * offset by count.\n     * 3. Let nodes be node’s children, if node is a DocumentFragment node;\n     * otherwise « node ».\n     * 4. If node is a DocumentFragment node, remove its children with the\n     * suppress observers flag set.\n     * 5. If node is a DocumentFragment node, then queue a tree mutation record\n     * for node with « », nodes, null, and null.\n     */\n    /**\n     * 6. Let previousSibling be child’s previous sibling or parent’s last\n     * child if child is null.\n     */\n    var previousSibling = parent._lastChild;\n    // set document element node\n    if (util_1.Guard.isElementNode(node)) {\n        // set document element node\n        if (util_1.Guard.isDocumentNode(parent)) {\n            parent._documentElement = node;\n        }\n        // mark that the document has namespaces\n        if (!node._nodeDocument._hasNamespaces && (node._namespace !== null ||\n            node._namespacePrefix !== null)) {\n            node._nodeDocument._hasNamespaces = true;\n        }\n    }\n    /**\n     * 7. For each node in nodes, in tree order:\n     * 7.1. If child is null, then append node to parent’s children.\n     * 7.2. Otherwise, insert node into parent’s children before child’s\n     * index.\n     */\n    node._parent = parent;\n    parent._children.add(node);\n    // assign siblings and children for quick lookups\n    if (parent._firstChild === null) {\n        node._previousSibling = null;\n        node._nextSibling = null;\n        parent._firstChild = node;\n        parent._lastChild = node;\n    }\n    else {\n        var prev = parent._lastChild;\n        node._previousSibling = prev;\n        node._nextSibling = null;\n        if (prev)\n            prev._nextSibling = node;\n        if (!prev)\n            parent._firstChild = node;\n        parent._lastChild = node;\n    }\n    /**\n     * 7.3. If parent is a shadow host and node is a slotable, then\n     * assign a slot for node.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        if (parent._shadowRoot !== null && util_1.Guard.isSlotable(node)) {\n            ShadowTreeAlgorithm_1.shadowTree_assignASlot(node);\n        }\n    }\n    /**\n     * 7.4. If node is a Text node, run the child text content change\n     * steps for parent.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        if (util_1.Guard.isTextNode(node)) {\n            DOMAlgorithm_1.dom_runChildTextContentChangeSteps(parent);\n        }\n    }\n    /**\n     * 7.5. If parent's root is a shadow root, and parent is a slot\n     * whose assigned nodes is the empty list, then run signal\n     * a slot change for parent.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        if (util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(parent)) &&\n            util_1.Guard.isSlot(parent) && util_2.isEmpty(parent._assignedNodes)) {\n            ShadowTreeAlgorithm_1.shadowTree_signalASlotChange(parent);\n        }\n    }\n    /**\n     * 7.6. Run assign slotables for a tree with node's root.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        ShadowTreeAlgorithm_1.shadowTree_assignSlotablesForATree(TreeAlgorithm_1.tree_rootNode(node));\n    }\n    /**\n     * 7.7. For each shadow-including inclusive descendant\n     * inclusiveDescendant of node, in shadow-including tree\n     * order:\n     * 7.7.1. Run the insertion steps with inclusiveDescendant.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runInsertionSteps(node);\n    }\n    if (DOMImpl_1.dom.features.customElements) {\n        /**\n         * 7.7.2. If inclusiveDescendant is connected, then:\n         */\n        if (util_1.Guard.isElementNode(node) &&\n            ShadowTreeAlgorithm_1.shadowTree_isConnected(node)) {\n            if (util_1.Guard.isCustomElementNode(node)) {\n                /**\n                 * 7.7.2.1. If inclusiveDescendant is custom, then enqueue a custom\n                 * element callback reaction with inclusiveDescendant, callback name\n                 * \"connectedCallback\", and an empty argument list.\n                 */\n                CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(node, \"connectedCallback\", []);\n            }\n            else {\n                /**\n                 * 7.7.2.2. Otherwise, try to upgrade inclusiveDescendant.\n                 */\n                CustomElementAlgorithm_1.customElement_tryToUpgrade(node);\n            }\n        }\n    }\n    /**\n     * 8. If suppress observers flag is unset, then queue a tree mutation record\n     * for parent with nodes, « », previousSibling, and child.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        if (!suppressObservers) {\n            MutationObserverAlgorithm_1.observer_queueTreeMutationRecord(parent, [node], [], previousSibling, null);\n        }\n    }\n}\n/**\n * Appends a node to the children of a parent node.\n *\n * @param node - a node\n * @param parent - the parent to receive node\n */\nfunction mutation_append(node, parent) {\n    /**\n     * To append a node to a parent, pre-insert node into parent before null.\n     */\n    return mutation_preInsert(node, parent, null);\n}\nexports.mutation_append = mutation_append;\n/**\n * Replaces a node with another node.\n *\n * @param child - child node to remove\n * @param node - node to insert\n * @param parent - parent node to receive node\n */\nfunction mutation_replace(child, node, parent) {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d;\n    /**\n     * 1. If parent is not a Document, DocumentFragment, or Element node,\n     * throw a \"HierarchyRequestError\" DOMException.\n     */\n    if (parent._nodeType !== interfaces_1.NodeType.Document &&\n        parent._nodeType !== interfaces_1.NodeType.DocumentFragment &&\n        parent._nodeType !== interfaces_1.NodeType.Element)\n        throw new DOMException_1.HierarchyRequestError(\"Only document, document fragment and element nodes can contain child nodes. Parent node is \" + parent.nodeName + \".\");\n    /**\n     * 2. If node is a host-including inclusive ancestor of parent, throw a\n     * \"HierarchyRequestError\" DOMException.\n     */\n    if (TreeAlgorithm_1.tree_isHostIncludingAncestorOf(parent, node, true))\n        throw new DOMException_1.HierarchyRequestError(\"The node to be inserted cannot be an ancestor of parent node. Node is \" + node.nodeName + \", parent node is \" + parent.nodeName + \".\");\n    /**\n     * 3. If child’s parent is not parent, then throw a \"NotFoundError\"\n     * DOMException.\n     */\n    if (child._parent !== parent)\n        throw new DOMException_1.NotFoundError(\"The reference child node cannot be found under parent node. Child node is \" + child.nodeName + \", parent node is \" + parent.nodeName + \".\");\n    /**\n     * 4. If node is not a DocumentFragment, DocumentType, Element, Text,\n     * ProcessingInstruction, or Comment node, throw a \"HierarchyRequestError\"\n     * DOMException.\n     */\n    if (node._nodeType !== interfaces_1.NodeType.DocumentFragment &&\n        node._nodeType !== interfaces_1.NodeType.DocumentType &&\n        node._nodeType !== interfaces_1.NodeType.Element &&\n        node._nodeType !== interfaces_1.NodeType.Text &&\n        node._nodeType !== interfaces_1.NodeType.ProcessingInstruction &&\n        node._nodeType !== interfaces_1.NodeType.CData &&\n        node._nodeType !== interfaces_1.NodeType.Comment)\n        throw new DOMException_1.HierarchyRequestError(\"Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is \" + node.nodeName + \".\");\n    /**\n     * 5. If either node is a Text node and parent is a document, or node is a\n     * doctype and parent is not a document, throw a \"HierarchyRequestError\"\n     * DOMException.\n     */\n    if (node._nodeType === interfaces_1.NodeType.Text &&\n        parent._nodeType === interfaces_1.NodeType.Document)\n        throw new DOMException_1.HierarchyRequestError(\"Cannot insert a text node as a child of a document node. Node is \" + node.nodeName + \".\");\n    if (node._nodeType === interfaces_1.NodeType.DocumentType &&\n        parent._nodeType !== interfaces_1.NodeType.Document)\n        throw new DOMException_1.HierarchyRequestError(\"A document type node can only be inserted under a document node. Parent node is \" + parent.nodeName + \".\");\n    /**\n     * 6. If parent is a document, and any of the statements below, switched on\n     * node, are true, throw a \"HierarchyRequestError\" DOMException.\n     * - DocumentFragment node\n     * If node has more than one element child or has a Text node child.\n     * Otherwise, if node has one element child and either parent has an element\n     * child that is not child or a doctype is following child.\n     * - element\n     * parent has an element child that is not child or a doctype is\n     * following child.\n     * - doctype\n     * parent has a doctype child that is not child, or an element is\n     * preceding child.\n     */\n    if (parent._nodeType === interfaces_1.NodeType.Document) {\n        if (node._nodeType === interfaces_1.NodeType.DocumentFragment) {\n            var eleCount = 0;\n            try {\n                for (var _e = __values(node._children), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var childNode = _f.value;\n                    if (childNode._nodeType === interfaces_1.NodeType.Element)\n                        eleCount++;\n                    else if (childNode._nodeType === interfaces_1.NodeType.Text)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert text a node as a child of a document node. Node is \" + childNode.nodeName + \".\");\n                }\n            }\n            catch (e_6_1) { e_6 = { error: e_6_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n                }\n                finally { if (e_6) throw e_6.error; }\n            }\n            if (eleCount > 1) {\n                throw new DOMException_1.HierarchyRequestError(\"A document node can only have one document element node. Document fragment to be inserted has \" + eleCount + \" element nodes.\");\n            }\n            else if (eleCount === 1) {\n                try {\n                    for (var _g = __values(parent._children), _h = _g.next(); !_h.done; _h = _g.next()) {\n                        var ele = _h.value;\n                        if (ele._nodeType === interfaces_1.NodeType.Element && ele !== child)\n                            throw new DOMException_1.HierarchyRequestError(\"The document node already has a document element node.\");\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n                var doctypeChild = child._nextSibling;\n                while (doctypeChild) {\n                    if (doctypeChild._nodeType === interfaces_1.NodeType.DocumentType)\n                        throw new DOMException_1.HierarchyRequestError(\"Cannot insert an element node before a document type node.\");\n                    doctypeChild = doctypeChild._nextSibling;\n                }\n            }\n        }\n        else if (node._nodeType === interfaces_1.NodeType.Element) {\n            try {\n                for (var _j = __values(parent._children), _k = _j.next(); !_k.done; _k = _j.next()) {\n                    var ele = _k.value;\n                    if (ele._nodeType === interfaces_1.NodeType.Element && ele !== child)\n                        throw new DOMException_1.HierarchyRequestError(\"Document already has a document element node. Node is \" + node.nodeName + \".\");\n                }\n            }\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\n            finally {\n                try {\n                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n                }\n                finally { if (e_8) throw e_8.error; }\n            }\n            var doctypeChild = child._nextSibling;\n            while (doctypeChild) {\n                if (doctypeChild._nodeType === interfaces_1.NodeType.DocumentType)\n                    throw new DOMException_1.HierarchyRequestError(\"Cannot insert an element node before a document type node. Node is \" + node.nodeName + \".\");\n                doctypeChild = doctypeChild._nextSibling;\n            }\n        }\n        else if (node._nodeType === interfaces_1.NodeType.DocumentType) {\n            try {\n                for (var _l = __values(parent._children), _m = _l.next(); !_m.done; _m = _l.next()) {\n                    var ele = _m.value;\n                    if (ele._nodeType === interfaces_1.NodeType.DocumentType && ele !== child)\n                        throw new DOMException_1.HierarchyRequestError(\"Document already has a document type node. Node is \" + node.nodeName + \".\");\n                }\n            }\n            catch (e_9_1) { e_9 = { error: e_9_1 }; }\n            finally {\n                try {\n                    if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n                }\n                finally { if (e_9) throw e_9.error; }\n            }\n            var elementChild = child._previousSibling;\n            while (elementChild) {\n                if (elementChild._nodeType === interfaces_1.NodeType.Element)\n                    throw new DOMException_1.HierarchyRequestError(\"Cannot insert a document type node before an element node. Node is \" + node.nodeName + \".\");\n                elementChild = elementChild._previousSibling;\n            }\n        }\n    }\n    /**\n     * 7. Let reference child be child’s next sibling.\n     * 8. If reference child is node, set it to node’s next sibling.\n     * 8. Let previousSibling be child’s previous sibling.\n     */\n    var referenceChild = child._nextSibling;\n    if (referenceChild === node)\n        referenceChild = node._nextSibling;\n    var previousSibling = child._previousSibling;\n    /**\n     * 10. Adopt node into parent’s node document.\n     * 11. Let removedNodes be the empty list.\n     */\n    DocumentAlgorithm_1.document_adopt(node, parent._nodeDocument);\n    var removedNodes = [];\n    /**\n     * 12. If child’s parent is not null, then:\n     */\n    if (child._parent !== null) {\n        /**\n         * 12.1. Set removedNodes to [child].\n         * 12.2. Remove child from its parent with the suppress observers flag\n         * set.\n         */\n        removedNodes.push(child);\n        mutation_remove(child, child._parent, true);\n    }\n    /**\n     * 13. Let nodes be node’s children if node is a DocumentFragment node;\n     * otherwise [node].\n     */\n    var nodes = [];\n    if (node._nodeType === interfaces_1.NodeType.DocumentFragment) {\n        nodes = Array.from(node._children);\n    }\n    else {\n        nodes.push(node);\n    }\n    /**\n     * 14. Insert node into parent before reference child with the suppress\n     * observers flag set.\n     */\n    mutation_insert(node, parent, referenceChild, true);\n    /**\n     * 15. Queue a tree mutation record for parent with nodes, removedNodes,\n     * previousSibling, and reference child.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueTreeMutationRecord(parent, nodes, removedNodes, previousSibling, referenceChild);\n    }\n    /**\n     * 16. Return child.\n     */\n    return child;\n}\nexports.mutation_replace = mutation_replace;\n/**\n * Replaces all nodes of a parent with the given node.\n *\n * @param node - node to insert\n * @param parent - parent node to receive node\n */\nfunction mutation_replaceAll(node, parent) {\n    var e_10, _a;\n    /**\n     * 1. If node is not null, adopt node into parent’s node document.\n     */\n    if (node !== null) {\n        DocumentAlgorithm_1.document_adopt(node, parent._nodeDocument);\n    }\n    /**\n     * 2. Let removedNodes be parent’s children.\n     */\n    var removedNodes = Array.from(parent._children);\n    /**\n     * 3. Let addedNodes be the empty list.\n     * 4. If node is DocumentFragment node, then set addedNodes to node’s\n     * children.\n     * 5. Otherwise, if node is non-null, set addedNodes to [node].\n     */\n    var addedNodes = [];\n    if (node && node._nodeType === interfaces_1.NodeType.DocumentFragment) {\n        addedNodes = Array.from(node._children);\n    }\n    else if (node !== null) {\n        addedNodes.push(node);\n    }\n    try {\n        /**\n         * 6. Remove all parent’s children, in tree order, with the suppress\n         * observers flag set.\n         */\n        for (var removedNodes_1 = __values(removedNodes), removedNodes_1_1 = removedNodes_1.next(); !removedNodes_1_1.done; removedNodes_1_1 = removedNodes_1.next()) {\n            var childNode = removedNodes_1_1.value;\n            mutation_remove(childNode, parent, true);\n        }\n    }\n    catch (e_10_1) { e_10 = { error: e_10_1 }; }\n    finally {\n        try {\n            if (removedNodes_1_1 && !removedNodes_1_1.done && (_a = removedNodes_1.return)) _a.call(removedNodes_1);\n        }\n        finally { if (e_10) throw e_10.error; }\n    }\n    /**\n     * 7. If node is not null, then insert node into parent before null with the\n     * suppress observers flag set.\n     */\n    if (node !== null) {\n        mutation_insert(node, parent, null, true);\n    }\n    /**\n     * 8. Queue a tree mutation record for parent with addedNodes, removedNodes,\n     * null, and null.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        MutationObserverAlgorithm_1.observer_queueTreeMutationRecord(parent, addedNodes, removedNodes, null, null);\n    }\n}\nexports.mutation_replaceAll = mutation_replaceAll;\n/**\n * Ensures pre-removal validity of a child node from a parent, then\n * removes it.\n *\n * @param child - child node to remove\n * @param parent - parent node\n */\nfunction mutation_preRemove(child, parent) {\n    /**\n     * 1. If child’s parent is not parent, then throw a \"NotFoundError\"\n     * DOMException.\n     * 2. Remove child from parent.\n     * 3. Return child.\n     */\n    if (child._parent !== parent)\n        throw new DOMException_1.NotFoundError(\"The child node cannot be found under parent node. Child node is \" + child.nodeName + \", parent node is \" + parent.nodeName + \".\");\n    mutation_remove(child, parent);\n    return child;\n}\nexports.mutation_preRemove = mutation_preRemove;\n/**\n * Removes a child node from its parent.\n *\n * @param node - node to remove\n * @param parent - parent node\n * @param suppressObservers - whether to notify observers\n */\nfunction mutation_remove(node, parent, suppressObservers) {\n    var e_11, _a, e_12, _b, e_13, _c, e_14, _d;\n    if (DOMImpl_1.dom.rangeList.size !== 0) {\n        /**\n         * 1. Let index be node’s index.\n         */\n        var index = TreeAlgorithm_1.tree_index(node);\n        try {\n            /**\n             * 2. For each live range whose start node is an inclusive descendant of\n             * node, set its start to (parent, index).\n             * 3. For each live range whose end node is an inclusive descendant of\n             * node, set its end to (parent, index).\n             */\n            for (var _e = __values(DOMImpl_1.dom.rangeList), _f = _e.next(); !_f.done; _f = _e.next()) {\n                var range = _f.value;\n                if (TreeAlgorithm_1.tree_isDescendantOf(node, range._start[0], true)) {\n                    range._start = [parent, index];\n                }\n                if (TreeAlgorithm_1.tree_isDescendantOf(node, range._end[0], true)) {\n                    range._end = [parent, index];\n                }\n                if (range._start[0] === parent && range._start[1] > index) {\n                    range._start[1]--;\n                }\n                if (range._end[0] === parent && range._end[1] > index) {\n                    range._end[1]--;\n                }\n            }\n        }\n        catch (e_11_1) { e_11 = { error: e_11_1 }; }\n        finally {\n            try {\n                if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n            }\n            finally { if (e_11) throw e_11.error; }\n        }\n        try {\n            /**\n             * 4. For each live range whose start node is parent and start offset is\n             * greater than index, decrease its start offset by 1.\n             * 5. For each live range whose end node is parent and end offset is greater\n             * than index, decrease its end offset by 1.\n             */\n            for (var _g = __values(DOMImpl_1.dom.rangeList), _h = _g.next(); !_h.done; _h = _g.next()) {\n                var range = _h.value;\n                if (range._start[0] === parent && range._start[1] > index) {\n                    range._start[1] -= 1;\n                }\n                if (range._end[0] === parent && range._end[1] > index) {\n                    range._end[1] -= 1;\n                }\n            }\n        }\n        catch (e_12_1) { e_12 = { error: e_12_1 }; }\n        finally {\n            try {\n                if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n            }\n            finally { if (e_12) throw e_12.error; }\n        }\n    }\n    /**\n     * 6. For each NodeIterator object iterator whose root’s node document is\n     * node’s node document, run the NodeIterator pre-removing steps given node\n     * and iterator.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        try {\n            for (var _j = __values(NodeIteratorAlgorithm_1.nodeIterator_iteratorList()), _k = _j.next(); !_k.done; _k = _j.next()) {\n                var iterator = _k.value;\n                if (iterator._root._nodeDocument === node._nodeDocument) {\n                    DOMAlgorithm_1.dom_runNodeIteratorPreRemovingSteps(iterator, node);\n                }\n            }\n        }\n        catch (e_13_1) { e_13 = { error: e_13_1 }; }\n        finally {\n            try {\n                if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n            }\n            finally { if (e_13) throw e_13.error; }\n        }\n    }\n    /**\n     * 7. Let oldPreviousSibling be node’s previous sibling.\n     * 8. Let oldNextSibling be node’s next sibling.\n     */\n    var oldPreviousSibling = node._previousSibling;\n    var oldNextSibling = node._nextSibling;\n    // set document element node\n    if (util_1.Guard.isDocumentNode(parent) && util_1.Guard.isElementNode(node)) {\n        parent._documentElement = null;\n    }\n    /**\n     * 9. Remove node from its parent’s children.\n     */\n    node._parent = null;\n    parent._children.delete(node);\n    // assign siblings and children for quick lookups\n    var prev = node._previousSibling;\n    var next = node._nextSibling;\n    node._previousSibling = null;\n    node._nextSibling = null;\n    if (prev)\n        prev._nextSibling = next;\n    if (next)\n        next._previousSibling = prev;\n    if (!prev)\n        parent._firstChild = next;\n    if (!next)\n        parent._lastChild = prev;\n    /**\n     * 10. If node is assigned, then run assign slotables for node’s assigned\n     * slot.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        if (util_1.Guard.isSlotable(node) && node._assignedSlot !== null && ShadowTreeAlgorithm_1.shadowTree_isAssigned(node)) {\n            ShadowTreeAlgorithm_1.shadowTree_assignSlotables(node._assignedSlot);\n        }\n    }\n    /**\n     * 11. If parent’s root is a shadow root, and parent is a slot whose\n     * assigned nodes is the empty list, then run signal a slot change for\n     * parent.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        if (util_1.Guard.isShadowRoot(TreeAlgorithm_1.tree_rootNode(parent)) &&\n            util_1.Guard.isSlot(parent) && util_2.isEmpty(parent._assignedNodes)) {\n            ShadowTreeAlgorithm_1.shadowTree_signalASlotChange(parent);\n        }\n    }\n    /**\n     * 12. If node has an inclusive descendant that is a slot, then:\n     * 12.1. Run assign slotables for a tree with parent's root.\n     * 12.2. Run assign slotables for a tree with node.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        var descendant_1 = TreeAlgorithm_1.tree_getFirstDescendantNode(node, true, false, function (e) { return util_1.Guard.isSlot(e); });\n        if (descendant_1 !== null) {\n            ShadowTreeAlgorithm_1.shadowTree_assignSlotablesForATree(TreeAlgorithm_1.tree_rootNode(parent));\n            ShadowTreeAlgorithm_1.shadowTree_assignSlotablesForATree(node);\n        }\n    }\n    /**\n     * 13. Run the removing steps with node and parent.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runRemovingSteps(node, parent);\n    }\n    /**\n     * 14. If node is custom, then enqueue a custom element callback\n     * reaction with node, callback name \"disconnectedCallback\",\n     * and an empty argument list.\n     */\n    if (DOMImpl_1.dom.features.customElements) {\n        if (util_1.Guard.isCustomElementNode(node)) {\n            CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(node, \"disconnectedCallback\", []);\n        }\n    }\n    /**\n     * 15. For each shadow-including descendant descendant of node,\n     * in shadow-including tree order, then:\n     */\n    var descendant = TreeAlgorithm_1.tree_getFirstDescendantNode(node, false, true);\n    while (descendant !== null) {\n        /**\n         * 15.1. Run the removing steps with descendant.\n         */\n        if (DOMImpl_1.dom.features.steps) {\n            DOMAlgorithm_1.dom_runRemovingSteps(descendant, node);\n        }\n        /**\n         * 15.2. If descendant is custom, then enqueue a custom element\n         * callback reaction with descendant, callback name\n         * \"disconnectedCallback\", and an empty argument list.\n         */\n        if (DOMImpl_1.dom.features.customElements) {\n            if (util_1.Guard.isCustomElementNode(descendant)) {\n                CustomElementAlgorithm_1.customElement_enqueueACustomElementCallbackReaction(descendant, \"disconnectedCallback\", []);\n            }\n        }\n        descendant = TreeAlgorithm_1.tree_getNextDescendantNode(node, descendant, false, true);\n    }\n    /**\n     * 16. For each inclusive ancestor inclusiveAncestor of parent, and\n     * then for each registered of inclusiveAncestor's registered\n     * observer list, if registered's options's subtree is true,\n     * then append a new transient registered observer whose\n     * observer is registered's observer, options is registered's\n     * options, and source is registered to node's registered\n     * observer list.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        var inclusiveAncestor = TreeAlgorithm_1.tree_getFirstAncestorNode(parent, true);\n        while (inclusiveAncestor !== null) {\n            try {\n                for (var _l = (e_14 = void 0, __values(inclusiveAncestor._registeredObserverList)), _m = _l.next(); !_m.done; _m = _l.next()) {\n                    var registered = _m.value;\n                    if (registered.options.subtree) {\n                        node._registeredObserverList.push({\n                            observer: registered.observer,\n                            options: registered.options,\n                            source: registered\n                        });\n                    }\n                }\n            }\n            catch (e_14_1) { e_14 = { error: e_14_1 }; }\n            finally {\n                try {\n                    if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n                }\n                finally { if (e_14) throw e_14.error; }\n            }\n            inclusiveAncestor = TreeAlgorithm_1.tree_getNextAncestorNode(parent, inclusiveAncestor, true);\n        }\n    }\n    /**\n     * 17. If suppress observers flag is unset, then queue a tree mutation\n     * record for parent with « », « node », oldPreviousSibling, and\n     * oldNextSibling.\n     */\n    if (DOMImpl_1.dom.features.mutationObservers) {\n        if (!suppressObservers) {\n            MutationObserverAlgorithm_1.observer_queueTreeMutationRecord(parent, [], [node], oldPreviousSibling, oldNextSibling);\n        }\n    }\n    /**\n     * 18. If node is a Text node, then run the child text content change steps\n     * for parent.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        if (util_1.Guard.isTextNode(node)) {\n            DOMAlgorithm_1.dom_runChildTextContentChangeSteps(parent);\n        }\n    }\n}\nexports.mutation_remove = mutation_remove;\n//# sourceMappingURL=MutationAlgorithm.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar ObjectWriter_1 = require(\"./ObjectWriter\");\nvar BaseWriter_1 = require(\"./BaseWriter\");\n/**\n * Serializes XML nodes into ES6 maps and arrays.\n */\nvar MapWriter = /** @class */ (function (_super) {\n    __extends(MapWriter, _super);\n    /**\n     * Initializes a new instance of `MapWriter`.\n     *\n     * @param builderOptions - XML builder options\n     * @param writerOptions - serialization options\n     */\n    function MapWriter(builderOptions, writerOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        // provide default options\n        _this._writerOptions = util_1.applyDefaults(writerOptions, {\n            format: \"map\",\n            wellFormed: false,\n            group: false,\n            verbose: false\n        });\n        return _this;\n    }\n    /**\n     * Produces an XML serialization of the given node.\n     *\n     * @param node - node to serialize\n     */\n    MapWriter.prototype.serialize = function (node) {\n        // convert to object\n        var objectWriterOptions = util_1.applyDefaults(this._writerOptions, {\n            format: \"object\",\n            wellFormed: false,\n            verbose: false\n        });\n        var objectWriter = new ObjectWriter_1.ObjectWriter(this._builderOptions, objectWriterOptions);\n        var val = objectWriter.serialize(node);\n        // recursively convert object into Map\n        return this._convertObject(val);\n    };\n    /**\n     * Recursively converts a JS object into an ES5 map.\n     *\n     * @param obj - a JS object\n     */\n    MapWriter.prototype._convertObject = function (obj) {\n        if (util_1.isArray(obj)) {\n            for (var i = 0; i < obj.length; i++) {\n                obj[i] = this._convertObject(obj[i]);\n            }\n            return obj;\n        }\n        else if (util_1.isObject(obj)) {\n            var map = new Map();\n            for (var key in obj) {\n                map.set(key, this._convertObject(obj[key]));\n            }\n            return map;\n        }\n        else {\n            return obj;\n        }\n    };\n    return MapWriter;\n}(BaseWriter_1.BaseWriter));\nexports.MapWriter = MapWriter;\n//# sourceMappingURL=MapWriter.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a mixin that extends parent nodes that can have children.\n * This mixin is implemented by {@link Element}, {@link Document} and\n * {@link DocumentFragment}.\n */\nvar ParentNodeImpl = /** @class */ (function () {\n    function ParentNodeImpl() {\n    }\n    Object.defineProperty(ParentNodeImpl.prototype, \"children\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The children attribute’s getter must return an HTMLCollection collection\n             * rooted at context object matching only element children.\n             */\n            return algorithm_1.create_htmlCollection(util_1.Cast.asNode(this));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ParentNodeImpl.prototype, \"firstElementChild\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The firstElementChild attribute’s getter must return the first child\n             * that is an element, and null otherwise.\n             */\n            var node = util_1.Cast.asNode(this)._firstChild;\n            while (node) {\n                if (util_1.Guard.isElementNode(node))\n                    return node;\n                else\n                    node = node._nextSibling;\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ParentNodeImpl.prototype, \"lastElementChild\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The lastElementChild attribute’s getter must return the last child that\n             * is an element, and null otherwise.\n             */\n            var node = util_1.Cast.asNode(this)._lastChild;\n            while (node) {\n                if (util_1.Guard.isElementNode(node))\n                    return node;\n                else\n                    node = node._previousSibling;\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ParentNodeImpl.prototype, \"childElementCount\", {\n        /** @inheritdoc */\n        get: function () {\n            var e_1, _a;\n            /**\n             * The childElementCount attribute’s getter must return the number of\n             * children of context object that are elements.\n             */\n            var count = 0;\n            try {\n                for (var _b = __values(util_1.Cast.asNode(this)._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var childNode = _c.value;\n                    if (util_1.Guard.isElementNode(childNode))\n                        count++;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    ParentNodeImpl.prototype.prepend = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        /**\n         * 1. Let node be the result of converting nodes into a node given nodes\n         * and context object’s node document.\n         * 2. Pre-insert node into context object before the context object’s first\n         * child.\n         */\n        var node = util_1.Cast.asNode(this);\n        var childNode = algorithm_1.parentNode_convertNodesIntoANode(nodes, node._nodeDocument);\n        algorithm_1.mutation_preInsert(childNode, node, node._firstChild);\n    };\n    /** @inheritdoc */\n    ParentNodeImpl.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        /**\n         * 1. Let node be the result of converting nodes into a node given nodes\n         * and context object’s node document.\n         * 2. Append node to context object.\n         */\n        var node = util_1.Cast.asNode(this);\n        var childNode = algorithm_1.parentNode_convertNodesIntoANode(nodes, node._nodeDocument);\n        algorithm_1.mutation_append(childNode, node);\n    };\n    /** @inheritdoc */\n    ParentNodeImpl.prototype.querySelector = function (selectors) {\n        /**\n         * The querySelector(selectors) method, when invoked, must return the first\n         * result of running scope-match a selectors string selectors against\n         * context object, if the result is not an empty list, and null otherwise.\n         */\n        var node = util_1.Cast.asNode(this);\n        var result = algorithm_1.selectors_scopeMatchASelectorsString(selectors, node);\n        return (result.length === 0 ? null : result[0]);\n    };\n    /** @inheritdoc */\n    ParentNodeImpl.prototype.querySelectorAll = function (selectors) {\n        /**\n         * The querySelectorAll(selectors) method, when invoked, must return the\n         * static result of running scope-match a selectors string selectors against\n         * context object.\n         */\n        var node = util_1.Cast.asNode(this);\n        var result = algorithm_1.selectors_scopeMatchASelectorsString(selectors, node);\n        return algorithm_1.create_nodeListStatic(node, result);\n    };\n    return ParentNodeImpl;\n}());\nexports.ParentNodeImpl = ParentNodeImpl;\n//# sourceMappingURL=ParentNodeImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\nvar interfaces_1 = require(\"@oozcitak/dom/lib/dom/interfaces\");\nvar BaseWriter_1 = require(\"./BaseWriter\");\n/**\n * Serializes XML nodes into objects and arrays.\n */\nvar ObjectWriter = /** @class */ (function (_super) {\n    __extends(ObjectWriter, _super);\n    /**\n     * Initializes a new instance of `ObjectWriter`.\n     *\n     * @param builderOptions - XML builder options\n     * @param writerOptions - serialization options\n     */\n    function ObjectWriter(builderOptions, writerOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        _this._writerOptions = util_1.applyDefaults(writerOptions, {\n            format: \"object\",\n            wellFormed: false,\n            group: false,\n            verbose: false\n        });\n        return _this;\n    }\n    /**\n     * Produces an XML serialization of the given node.\n     *\n     * @param node - node to serialize\n     */\n    ObjectWriter.prototype.serialize = function (node) {\n        this._currentList = [];\n        this._currentIndex = 0;\n        this._listRegister = [this._currentList];\n        /**\n         * First pass, serialize nodes\n         * This creates a list of nodes grouped under node types while preserving\n         * insertion order. For example:\n         * [\n         *   root: [\n         *     node: [\n         *       { \"@\" : { \"att1\": \"val1\", \"att2\": \"val2\" }\n         *       { \"#\": \"node text\" }\n         *       { childNode: [] }\n         *       { \"#\": \"more text\" }\n         *     ],\n         *     node: [\n         *       { \"@\" : { \"att\": \"val\" }\n         *       { \"#\": [ \"text line1\", \"text line2\" ] }\n         *     ]\n         *   ]\n         * ]\n         */\n        this.serializeNode(node, this._writerOptions.wellFormed);\n        /**\n         * Second pass, process node lists. Above example becomes:\n         * {\n         *   root: {\n         *     node: [\n         *       {\n         *         \"@att1\": \"val1\",\n         *         \"@att2\": \"val2\",\n         *         \"#1\": \"node text\",\n         *         childNode: {},\n         *         \"#2\": \"more text\"\n         *       },\n         *       {\n         *         \"@att\": \"val\",\n         *         \"#\": [ \"text line1\", \"text line2\" ]\n         *       }\n         *     ]\n         *   }\n         * }\n         */\n        return this._process(this._currentList, this._writerOptions);\n    };\n    ObjectWriter.prototype._process = function (items, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (items.length === 0)\n            return {};\n        // determine if there are non-unique element names\n        var namesSeen = {};\n        var hasNonUniqueNames = false;\n        var textCount = 0;\n        var commentCount = 0;\n        var instructionCount = 0;\n        var cdataCount = 0;\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var key = Object.keys(item)[0];\n            switch (key) {\n                case \"@\":\n                    continue;\n                case \"#\":\n                    textCount++;\n                    break;\n                case \"!\":\n                    commentCount++;\n                    break;\n                case \"?\":\n                    instructionCount++;\n                    break;\n                case \"$\":\n                    cdataCount++;\n                    break;\n                default:\n                    if (namesSeen[key]) {\n                        hasNonUniqueNames = true;\n                    }\n                    else {\n                        namesSeen[key] = true;\n                    }\n                    break;\n            }\n        }\n        var defAttrKey = this._getAttrKey();\n        var defTextKey = this._getNodeKey(interfaces_1.NodeType.Text);\n        var defCommentKey = this._getNodeKey(interfaces_1.NodeType.Comment);\n        var defInstructionKey = this._getNodeKey(interfaces_1.NodeType.ProcessingInstruction);\n        var defCdataKey = this._getNodeKey(interfaces_1.NodeType.CData);\n        if (textCount === 1 && items.length === 1 && util_1.isString(items[0][\"#\"])) {\n            // special case of an element node with a single text node\n            return items[0][\"#\"];\n        }\n        else if (hasNonUniqueNames) {\n            var obj = {};\n            // process attributes first\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var key = Object.keys(item)[0];\n                if (key === \"@\") {\n                    var attrs = item[\"@\"];\n                    var attrKeys = Object.keys(attrs);\n                    if (attrKeys.length === 1) {\n                        obj[defAttrKey + attrKeys[0]] = attrs[attrKeys[0]];\n                    }\n                    else {\n                        obj[defAttrKey] = item[\"@\"];\n                    }\n                }\n            }\n            // list contains element nodes with non-unique names\n            // return an array with mixed content notation\n            var result = [];\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var key = Object.keys(item)[0];\n                switch (key) {\n                    case \"@\":\n                        // attributes were processed above\n                        break;\n                    case \"#\":\n                        result.push((_a = {}, _a[defTextKey] = item[\"#\"], _a));\n                        break;\n                    case \"!\":\n                        result.push((_b = {}, _b[defCommentKey] = item[\"!\"], _b));\n                        break;\n                    case \"?\":\n                        result.push((_c = {}, _c[defInstructionKey] = item[\"?\"], _c));\n                        break;\n                    case \"$\":\n                        result.push((_d = {}, _d[defCdataKey] = item[\"$\"], _d));\n                        break;\n                    default:\n                        // element node\n                        var ele = item;\n                        if (ele[key].length !== 0 && util_1.isArray(ele[key][0])) {\n                            // group of element nodes\n                            var eleGroup = [];\n                            var listOfLists = ele[key];\n                            for (var i_1 = 0; i_1 < listOfLists.length; i_1++) {\n                                eleGroup.push(this._process(listOfLists[i_1], options));\n                            }\n                            result.push((_e = {}, _e[key] = eleGroup, _e));\n                        }\n                        else {\n                            // single element node\n                            if (options.verbose) {\n                                result.push((_f = {}, _f[key] = [this._process(ele[key], options)], _f));\n                            }\n                            else {\n                                result.push((_g = {}, _g[key] = this._process(ele[key], options), _g));\n                            }\n                        }\n                        break;\n                }\n            }\n            obj[defTextKey] = result;\n            return obj;\n        }\n        else {\n            // all element nodes have unique names\n            // return an object while prefixing data node keys\n            var textId = 1;\n            var commentId = 1;\n            var instructionId = 1;\n            var cdataId = 1;\n            var obj = {};\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var key = Object.keys(item)[0];\n                switch (key) {\n                    case \"@\":\n                        var attrs = item[\"@\"];\n                        var attrKeys = Object.keys(attrs);\n                        if (!options.group || attrKeys.length === 1) {\n                            for (var attrName in attrs) {\n                                obj[defAttrKey + attrName] = attrs[attrName];\n                            }\n                        }\n                        else {\n                            obj[defAttrKey] = attrs;\n                        }\n                        break;\n                    case \"#\":\n                        textId = this._processSpecItem(item[\"#\"], obj, options.group, defTextKey, textCount, textId);\n                        break;\n                    case \"!\":\n                        commentId = this._processSpecItem(item[\"!\"], obj, options.group, defCommentKey, commentCount, commentId);\n                        break;\n                    case \"?\":\n                        instructionId = this._processSpecItem(item[\"?\"], obj, options.group, defInstructionKey, instructionCount, instructionId);\n                        break;\n                    case \"$\":\n                        cdataId = this._processSpecItem(item[\"$\"], obj, options.group, defCdataKey, cdataCount, cdataId);\n                        break;\n                    default:\n                        // element node\n                        var ele = item;\n                        if (ele[key].length !== 0 && util_1.isArray(ele[key][0])) {\n                            // group of element nodes\n                            var eleGroup = [];\n                            var listOfLists = ele[key];\n                            for (var i_2 = 0; i_2 < listOfLists.length; i_2++) {\n                                eleGroup.push(this._process(listOfLists[i_2], options));\n                            }\n                            obj[key] = eleGroup;\n                        }\n                        else {\n                            // single element node\n                            if (options.verbose) {\n                                obj[key] = [this._process(ele[key], options)];\n                            }\n                            else {\n                                obj[key] = this._process(ele[key], options);\n                            }\n                        }\n                        break;\n                }\n            }\n            return obj;\n        }\n    };\n    ObjectWriter.prototype._processSpecItem = function (item, obj, group, defKey, count, id) {\n        var e_1, _a;\n        if (!group && util_1.isArray(item) && count + item.length > 2) {\n            try {\n                for (var item_1 = __values(item), item_1_1 = item_1.next(); !item_1_1.done; item_1_1 = item_1.next()) {\n                    var subItem = item_1_1.value;\n                    var key = defKey + (id++).toString();\n                    obj[key] = subItem;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (item_1_1 && !item_1_1.done && (_a = item_1.return)) _a.call(item_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        else {\n            var key = count > 1 ? defKey + (id++).toString() : defKey;\n            obj[key] = item;\n        }\n        return id;\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.beginElement = function (name) {\n        var _a, _b;\n        var childItems = [];\n        if (this._currentList.length === 0) {\n            this._currentList.push((_a = {}, _a[name] = childItems, _a));\n        }\n        else {\n            var lastItem = this._currentList[this._currentList.length - 1];\n            if (this._isElementNode(lastItem, name)) {\n                if (lastItem[name].length !== 0 && util_1.isArray(lastItem[name][0])) {\n                    var listOfLists = lastItem[name];\n                    listOfLists.push(childItems);\n                }\n                else {\n                    lastItem[name] = [lastItem[name], childItems];\n                }\n            }\n            else {\n                this._currentList.push((_b = {}, _b[name] = childItems, _b));\n            }\n        }\n        this._currentIndex++;\n        if (this._listRegister.length > this._currentIndex) {\n            this._listRegister[this._currentIndex] = childItems;\n        }\n        else {\n            this._listRegister.push(childItems);\n        }\n        this._currentList = childItems;\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.endElement = function () {\n        this._currentList = this._listRegister[--this._currentIndex];\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.attribute = function (name, value) {\n        var _a, _b;\n        if (this._currentList.length === 0) {\n            this._currentList.push({ \"@\": (_a = {}, _a[name] = value, _a) });\n        }\n        else {\n            var lastItem = this._currentList[this._currentList.length - 1];\n            /* istanbul ignore else */\n            if (this._isAttrNode(lastItem)) {\n                lastItem[\"@\"][name] = value;\n            }\n            else {\n                this._currentList.push({ \"@\": (_b = {}, _b[name] = value, _b) });\n            }\n        }\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.comment = function (data) {\n        if (this._currentList.length === 0) {\n            this._currentList.push({ \"!\": data });\n        }\n        else {\n            var lastItem = this._currentList[this._currentList.length - 1];\n            if (this._isCommentNode(lastItem)) {\n                if (util_1.isArray(lastItem[\"!\"])) {\n                    lastItem[\"!\"].push(data);\n                }\n                else {\n                    lastItem[\"!\"] = [lastItem[\"!\"], data];\n                }\n            }\n            else {\n                this._currentList.push({ \"!\": data });\n            }\n        }\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.text = function (data) {\n        if (this._currentList.length === 0) {\n            this._currentList.push({ \"#\": data });\n        }\n        else {\n            var lastItem = this._currentList[this._currentList.length - 1];\n            if (this._isTextNode(lastItem)) {\n                if (util_1.isArray(lastItem[\"#\"])) {\n                    lastItem[\"#\"].push(data);\n                }\n                else {\n                    lastItem[\"#\"] = [lastItem[\"#\"], data];\n                }\n            }\n            else {\n                this._currentList.push({ \"#\": data });\n            }\n        }\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.instruction = function (target, data) {\n        var value = (data === \"\" ? target : target + \" \" + data);\n        if (this._currentList.length === 0) {\n            this._currentList.push({ \"?\": value });\n        }\n        else {\n            var lastItem = this._currentList[this._currentList.length - 1];\n            if (this._isInstructionNode(lastItem)) {\n                if (util_1.isArray(lastItem[\"?\"])) {\n                    lastItem[\"?\"].push(value);\n                }\n                else {\n                    lastItem[\"?\"] = [lastItem[\"?\"], value];\n                }\n            }\n            else {\n                this._currentList.push({ \"?\": value });\n            }\n        }\n    };\n    /** @inheritdoc */\n    ObjectWriter.prototype.cdata = function (data) {\n        if (this._currentList.length === 0) {\n            this._currentList.push({ \"$\": data });\n        }\n        else {\n            var lastItem = this._currentList[this._currentList.length - 1];\n            if (this._isCDATANode(lastItem)) {\n                if (util_1.isArray(lastItem[\"$\"])) {\n                    lastItem[\"$\"].push(data);\n                }\n                else {\n                    lastItem[\"$\"] = [lastItem[\"$\"], data];\n                }\n            }\n            else {\n                this._currentList.push({ \"$\": data });\n            }\n        }\n    };\n    ObjectWriter.prototype._isAttrNode = function (x) {\n        return \"@\" in x;\n    };\n    ObjectWriter.prototype._isTextNode = function (x) {\n        return \"#\" in x;\n    };\n    ObjectWriter.prototype._isCommentNode = function (x) {\n        return \"!\" in x;\n    };\n    ObjectWriter.prototype._isInstructionNode = function (x) {\n        return \"?\" in x;\n    };\n    ObjectWriter.prototype._isCDATANode = function (x) {\n        return \"$\" in x;\n    };\n    ObjectWriter.prototype._isElementNode = function (x, name) {\n        return name in x;\n    };\n    /**\n     * Returns an object key for an attribute or namespace declaration.\n     */\n    ObjectWriter.prototype._getAttrKey = function () {\n        return this._builderOptions.convert.att;\n    };\n    /**\n     * Returns an object key for the given node type.\n     *\n     * @param nodeType - node type to get a key for\n     */\n    ObjectWriter.prototype._getNodeKey = function (nodeType) {\n        switch (nodeType) {\n            case interfaces_1.NodeType.Comment:\n                return this._builderOptions.convert.comment;\n            case interfaces_1.NodeType.Text:\n                return this._builderOptions.convert.text;\n            case interfaces_1.NodeType.ProcessingInstruction:\n                return this._builderOptions.convert.ins;\n            case interfaces_1.NodeType.CData:\n                return this._builderOptions.convert.cdata;\n            /* istanbul ignore next */\n            default:\n                throw new Error(\"Invalid node type.\");\n        }\n    };\n    return ObjectWriter;\n}(BaseWriter_1.BaseWriter));\nexports.ObjectWriter = ObjectWriter;\n//# sourceMappingURL=ObjectWriter.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar util_1 = require(\"../util\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar CreateAlgorithm_1 = require(\"./CreateAlgorithm\");\nvar OrderedSetAlgorithm_1 = require(\"./OrderedSetAlgorithm\");\nvar DOMAlgorithm_1 = require(\"./DOMAlgorithm\");\nvar MutationAlgorithm_1 = require(\"./MutationAlgorithm\");\nvar ElementAlgorithm_1 = require(\"./ElementAlgorithm\");\n/**\n * Replaces the contents of the given node with a single text node.\n *\n * @param string - node contents\n * @param parent - a node\n */\nfunction node_stringReplaceAll(str, parent) {\n    /**\n     * 1. Let node be null.\n     * 2. If string is not the empty string, then set node to a new Text node\n     * whose data is string and node document is parent’s node document.\n     * 3. Replace all with node within parent.\n     */\n    var node = null;\n    if (str !== '') {\n        node = CreateAlgorithm_1.create_text(parent._nodeDocument, str);\n    }\n    MutationAlgorithm_1.mutation_replaceAll(node, parent);\n}\nexports.node_stringReplaceAll = node_stringReplaceAll;\n/**\n * Clones a node.\n *\n * @param node - a node to clone\n * @param document - the document to own the cloned node\n * @param cloneChildrenFlag - whether to clone node's children\n */\nfunction node_clone(node, document, cloneChildrenFlag) {\n    var e_1, _a, e_2, _b;\n    if (document === void 0) { document = null; }\n    if (cloneChildrenFlag === void 0) { cloneChildrenFlag = false; }\n    /**\n     * 1. If document is not given, let document be node’s node document.\n     */\n    if (document === null)\n        document = node._nodeDocument;\n    var copy;\n    if (util_1.Guard.isElementNode(node)) {\n        /**\n         * 2. If node is an element, then:\n         * 2.1. Let copy be the result of creating an element, given document,\n         * node’s local name, node’s namespace, node’s namespace prefix,\n         * and node’s is value, with the synchronous custom elements flag unset.\n         * 2.2. For each attribute in node’s attribute list:\n         * 2.2.1. Let copyAttribute be a clone of attribute.\n         * 2.2.2. Append copyAttribute to copy.\n         */\n        copy = ElementAlgorithm_1.element_createAnElement(document, node._localName, node._namespace, node._namespacePrefix, node._is, false);\n        try {\n            for (var _c = __values(node._attributeList), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var attribute = _d.value;\n                var copyAttribute = node_clone(attribute, document);\n                ElementAlgorithm_1.element_append(copyAttribute, copy);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    else {\n        /**\n         * 3. Otherwise, let copy be a node that implements the same interfaces as\n         * node, and fulfills these additional requirements, switching on node:\n         * - Document\n         * Set copy’s encoding, content type, URL, origin, type, and mode, to those\n         * of node.\n         * - DocumentType\n         * Set copy’s name, public ID, and system ID, to those of node.\n         * - Attr\n         * Set copy’s namespace, namespace prefix, local name, and value, to\n         * those of node.\n         * - Text\n         * - Comment\n         * Set copy’s data, to that of node.\n         * - ProcessingInstruction\n         * Set copy’s target and data to those of node.\n         * - Any other node\n         */\n        if (util_1.Guard.isDocumentNode(node)) {\n            var doc = CreateAlgorithm_1.create_document();\n            doc._encoding = node._encoding;\n            doc._contentType = node._contentType;\n            doc._URL = node._URL;\n            doc._origin = node._origin;\n            doc._type = node._type;\n            doc._mode = node._mode;\n            copy = doc;\n        }\n        else if (util_1.Guard.isDocumentTypeNode(node)) {\n            var doctype = CreateAlgorithm_1.create_documentType(document, node._name, node._publicId, node._systemId);\n            copy = doctype;\n        }\n        else if (util_1.Guard.isAttrNode(node)) {\n            var attr = CreateAlgorithm_1.create_attr(document, node.localName);\n            attr._namespace = node._namespace;\n            attr._namespacePrefix = node._namespacePrefix;\n            attr._value = node._value;\n            copy = attr;\n        }\n        else if (util_1.Guard.isExclusiveTextNode(node)) {\n            copy = CreateAlgorithm_1.create_text(document, node._data);\n        }\n        else if (util_1.Guard.isCDATASectionNode(node)) {\n            copy = CreateAlgorithm_1.create_cdataSection(document, node._data);\n        }\n        else if (util_1.Guard.isCommentNode(node)) {\n            copy = CreateAlgorithm_1.create_comment(document, node._data);\n        }\n        else if (util_1.Guard.isProcessingInstructionNode(node)) {\n            copy = CreateAlgorithm_1.create_processingInstruction(document, node._target, node._data);\n        }\n        else if (util_1.Guard.isDocumentFragmentNode(node)) {\n            copy = CreateAlgorithm_1.create_documentFragment(document);\n        }\n        else {\n            copy = Object.create(node);\n        }\n    }\n    /**\n     * 4. Set copy’s node document and document to copy, if copy is a document,\n     * and set copy’s node document to document otherwise.\n     */\n    if (util_1.Guard.isDocumentNode(copy)) {\n        copy._nodeDocument = copy;\n        document = copy;\n    }\n    else {\n        copy._nodeDocument = document;\n    }\n    /**\n     * 5. Run any cloning steps defined for node in other applicable\n     * specifications and pass copy, node, document and the clone children flag\n     * if set, as parameters.\n     */\n    if (DOMImpl_1.dom.features.steps) {\n        DOMAlgorithm_1.dom_runCloningSteps(copy, node, document, cloneChildrenFlag);\n    }\n    /**\n     * 6. If the clone children flag is set, clone all the children of node and\n     * append them to copy, with document as specified and the clone children\n     * flag being set.\n     */\n    if (cloneChildrenFlag) {\n        try {\n            for (var _e = __values(node._children), _f = _e.next(); !_f.done; _f = _e.next()) {\n                var child = _f.value;\n                var childCopy = node_clone(child, document, true);\n                MutationAlgorithm_1.mutation_append(childCopy, copy);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    /**\n     * 7. Return copy.\n     */\n    return copy;\n}\nexports.node_clone = node_clone;\n/**\n * Determines if two nodes can be considered equal.\n *\n * @param a - node to compare\n * @param b - node to compare\n */\nfunction node_equals(a, b) {\n    var e_3, _a, e_4, _b;\n    /**\n     * 1. A and B’s nodeType attribute value is identical.\n     */\n    if (a._nodeType !== b._nodeType)\n        return false;\n    /**\n     * 2. The following are also equal, depending on A:\n     * - DocumentType\n     * Its name, public ID, and system ID.\n     * - Element\n     * Its namespace, namespace prefix, local name, and its attribute list’s size.\n     * - Attr\n     * Its namespace, local name, and value.\n     * - ProcessingInstruction\n     * Its target and data.\n     * - Text\n     * - Comment\n     * Its data.\n     */\n    if (util_1.Guard.isDocumentTypeNode(a) && util_1.Guard.isDocumentTypeNode(b)) {\n        if (a._name !== b._name || a._publicId !== b._publicId ||\n            a._systemId !== b._systemId)\n            return false;\n    }\n    else if (util_1.Guard.isElementNode(a) && util_1.Guard.isElementNode(b)) {\n        if (a._namespace !== b._namespace || a._namespacePrefix !== b._namespacePrefix ||\n            a._localName !== b._localName ||\n            a._attributeList.length !== b._attributeList.length)\n            return false;\n    }\n    else if (util_1.Guard.isAttrNode(a) && util_1.Guard.isAttrNode(b)) {\n        if (a._namespace !== b._namespace || a._localName !== b._localName ||\n            a._value !== b._value)\n            return false;\n    }\n    else if (util_1.Guard.isProcessingInstructionNode(a) && util_1.Guard.isProcessingInstructionNode(b)) {\n        if (a._target !== b._target || a._data !== b._data)\n            return false;\n    }\n    else if (util_1.Guard.isCharacterDataNode(a) && util_1.Guard.isCharacterDataNode(b)) {\n        if (a._data !== b._data)\n            return false;\n    }\n    /**\n     * 3. If A is an element, each attribute in its attribute list has an attribute\n     * that equals an attribute in B’s attribute list.\n     */\n    if (util_1.Guard.isElementNode(a) && util_1.Guard.isElementNode(b)) {\n        var attrMap = {};\n        try {\n            for (var _c = __values(a._attributeList), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var attrA = _d.value;\n                attrMap[attrA._localName] = attrA;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        try {\n            for (var _e = __values(b._attributeList), _f = _e.next(); !_f.done; _f = _e.next()) {\n                var attrB = _f.value;\n                var attrA = attrMap[attrB._localName];\n                if (!attrA)\n                    return false;\n                if (!node_equals(attrA, attrB))\n                    return false;\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    }\n    /**\n     * 4. A and B have the same number of children.\n     * 5. Each child of A equals the child of B at the identical index.\n     */\n    if (a._children.size !== b._children.size)\n        return false;\n    var itA = a._children[Symbol.iterator]();\n    var itB = b._children[Symbol.iterator]();\n    var resultA = itA.next();\n    var resultB = itB.next();\n    while (!resultA.done && !resultB.done) {\n        var child1 = resultA.value;\n        var child2 = resultB.value;\n        if (!node_equals(child1, child2))\n            return false;\n        resultA = itA.next();\n        resultB = itB.next();\n    }\n    return true;\n}\nexports.node_equals = node_equals;\n/**\n * Returns a collection of elements with the given qualified name which are\n * descendants of the given root node.\n * See: https://dom.spec.whatwg.org/#concept-getelementsbytagname\n *\n * @param qualifiedName - qualified name\n * @param root - root node\n */\nfunction node_listOfElementsWithQualifiedName(qualifiedName, root) {\n    /**\n     * 1. If qualifiedName is \"*\" (U+002A), return a HTMLCollection rooted at\n     * root, whose filter matches only descendant elements.\n     * 2. Otherwise, if root’s node document is an HTML document, return a\n     * HTMLCollection rooted at root, whose filter matches the following\n     * descendant elements:\n     * 2.1. Whose namespace is the HTML namespace and whose qualified name is\n     * qualifiedName, in ASCII lowercase.\n     * 2.2. Whose namespace is not the HTML namespace and whose qualified name\n     * is qualifiedName.\n     * 3. Otherwise, return a HTMLCollection rooted at root, whose filter\n     * matches descendant elements whose qualified name is qualifiedName.\n     */\n    if (qualifiedName === \"*\") {\n        return CreateAlgorithm_1.create_htmlCollection(root);\n    }\n    else if (root._nodeDocument._type === \"html\") {\n        return CreateAlgorithm_1.create_htmlCollection(root, function (ele) {\n            if (ele._namespace === infra_1.namespace.HTML &&\n                ele._qualifiedName === qualifiedName.toLowerCase()) {\n                return true;\n            }\n            else if (ele._namespace !== infra_1.namespace.HTML &&\n                ele._qualifiedName === qualifiedName) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        });\n    }\n    else {\n        return CreateAlgorithm_1.create_htmlCollection(root, function (ele) {\n            return (ele._qualifiedName === qualifiedName);\n        });\n    }\n}\nexports.node_listOfElementsWithQualifiedName = node_listOfElementsWithQualifiedName;\n/**\n * Returns a collection of elements with the given namespace which are\n * descendants of the given root node.\n * See: https://dom.spec.whatwg.org/#concept-getelementsbytagnamens\n *\n * @param namespace - element namespace\n * @param localName - local name\n * @param root - root node\n */\nfunction node_listOfElementsWithNamespace(namespace, localName, root) {\n    /**\n     * 1. If namespace is the empty string, set it to null.\n     * 2. If both namespace and localName are \"*\" (U+002A), return a\n     * HTMLCollection rooted at root, whose filter matches descendant elements.\n     * 3. Otherwise, if namespace is \"*\" (U+002A), return a HTMLCollection\n     * rooted at root, whose filter matches descendant elements whose local\n     * name is localName.\n     * 4. Otherwise, if localName is \"*\" (U+002A), return a HTMLCollection\n     * rooted at root, whose filter matches descendant elements whose\n     * namespace is namespace.\n     * 5. Otherwise, return a HTMLCollection rooted at root, whose filter\n     * matches descendant elements whose namespace is namespace and local\n     * name is localName.\n     */\n    if (namespace === '')\n        namespace = null;\n    if (namespace === \"*\" && localName === \"*\") {\n        return CreateAlgorithm_1.create_htmlCollection(root);\n    }\n    else if (namespace === \"*\") {\n        return CreateAlgorithm_1.create_htmlCollection(root, function (ele) {\n            return (ele._localName === localName);\n        });\n    }\n    else if (localName === \"*\") {\n        return CreateAlgorithm_1.create_htmlCollection(root, function (ele) {\n            return (ele._namespace === namespace);\n        });\n    }\n    else {\n        return CreateAlgorithm_1.create_htmlCollection(root, function (ele) {\n            return (ele._localName === localName && ele._namespace === namespace);\n        });\n    }\n}\nexports.node_listOfElementsWithNamespace = node_listOfElementsWithNamespace;\n/**\n * Returns a collection of elements with the given class names which are\n * descendants of the given root node.\n * See: https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n *\n * @param namespace - element namespace\n * @param localName - local name\n * @param root - root node\n */\nfunction node_listOfElementsWithClassNames(classNames, root) {\n    /**\n     * 1. Let classes be the result of running the ordered set parser\n     * on classNames.\n     * 2. If classes is the empty set, return an empty HTMLCollection.\n     * 3. Return a HTMLCollection rooted at root, whose filter matches\n     * descendant elements that have all their classes in classes.\n     * The comparisons for the classes must be done in an ASCII case-insensitive\n     * manner if root’s node document’s mode is \"quirks\", and in a\n     * case-sensitive manner otherwise.\n     */\n    var classes = OrderedSetAlgorithm_1.orderedSet_parse(classNames);\n    if (classes.size === 0) {\n        return CreateAlgorithm_1.create_htmlCollection(root, function () { return false; });\n    }\n    var caseSensitive = (root._nodeDocument._mode !== \"quirks\");\n    return CreateAlgorithm_1.create_htmlCollection(root, function (ele) {\n        var eleClasses = ele.classList;\n        return OrderedSetAlgorithm_1.orderedSet_contains(eleClasses._tokenSet, classes, caseSensitive);\n    });\n}\nexports.node_listOfElementsWithClassNames = node_listOfElementsWithClassNames;\n/**\n * Searches for a namespace prefix associated with the given namespace\n * starting from the given element through its ancestors.\n *\n * @param element - an element node to start searching at\n * @param namespace - namespace to search for\n */\nfunction node_locateANamespacePrefix(element, namespace) {\n    /**\n     * 1. If element’s namespace is namespace and its namespace prefix is not\n     * null, then return its namespace prefix.\n     */\n    if (element._namespace === namespace && element._namespacePrefix !== null) {\n        return element._namespacePrefix;\n    }\n    /**\n     * 2. If element has an attribute whose namespace prefix is \"xmlns\" and\n     * value is namespace, then return element’s first such attribute’s\n     * local name.\n     */\n    for (var i = 0; i < element._attributeList.length; i++) {\n        var attr = element._attributeList[i];\n        if (attr._namespacePrefix === \"xmlns\" && attr._value === namespace) {\n            return attr._localName;\n        }\n    }\n    /**\n     * 3. If element’s parent element is not null, then return the result of\n     * running locate a namespace prefix on that element using namespace.\n     */\n    if (element._parent && util_1.Guard.isElementNode(element._parent)) {\n        return node_locateANamespacePrefix(element._parent, namespace);\n    }\n    /**\n     * 4. Return null.\n     */\n    return null;\n}\nexports.node_locateANamespacePrefix = node_locateANamespacePrefix;\n/**\n * Searches for a namespace associated with the given namespace prefix\n * starting from the given node through its ancestors.\n *\n * @param node - a node to start searching at\n * @param prefix - namespace prefix to search for\n */\nfunction node_locateANamespace(node, prefix) {\n    if (util_1.Guard.isElementNode(node)) {\n        /**\n         * 1. If its namespace is not null and its namespace prefix is prefix,\n         * then return namespace.\n         */\n        if (node._namespace !== null && node._namespacePrefix === prefix) {\n            return node._namespace;\n        }\n        /**\n         * 2. If it has an attribute whose namespace is the XMLNS namespace,\n         * namespace prefix is \"xmlns\", and local name is prefix, or if prefix\n         * is null and it has an attribute whose namespace is the XMLNS namespace,\n         * namespace prefix is null, and local name is \"xmlns\", then return its\n         * value if it is not the empty string, and null otherwise.\n         */\n        for (var i = 0; i < node._attributeList.length; i++) {\n            var attr = node._attributeList[i];\n            if (attr._namespace === infra_1.namespace.XMLNS &&\n                attr._namespacePrefix === \"xmlns\" &&\n                attr._localName === prefix) {\n                return attr._value || null;\n            }\n            if (prefix === null && attr._namespace === infra_1.namespace.XMLNS &&\n                attr._namespacePrefix === null && attr._localName === \"xmlns\") {\n                return attr._value || null;\n            }\n        }\n        /**\n         * 3. If its parent element is null, then return null.\n         */\n        if (node.parentElement === null)\n            return null;\n        /**\n         * 4. Return the result of running locate a namespace on its parent\n         * element using prefix.\n         */\n        return node_locateANamespace(node.parentElement, prefix);\n    }\n    else if (util_1.Guard.isDocumentNode(node)) {\n        /**\n         * 1. If its document element is null, then return null.\n         * 2. Return the result of running locate a namespace on its document\n         * element using prefix.\n         */\n        if (node.documentElement === null)\n            return null;\n        return node_locateANamespace(node.documentElement, prefix);\n    }\n    else if (util_1.Guard.isDocumentTypeNode(node) || util_1.Guard.isDocumentFragmentNode(node)) {\n        return null;\n    }\n    else if (util_1.Guard.isAttrNode(node)) {\n        /**\n         * 1. If its element is null, then return null.\n         * 2. Return the result of running locate a namespace on its element\n         * using prefix.\n         */\n        if (node._element === null)\n            return null;\n        return node_locateANamespace(node._element, prefix);\n    }\n    else {\n        /**\n         * 1. If its parent element is null, then return null.\n         * 2. Return the result of running locate a namespace on its parent\n         * element using prefix.\n         */\n        if (!node._parent || !util_1.Guard.isElementNode(node._parent))\n            return null;\n        return node_locateANamespace(node._parent, prefix);\n    }\n}\nexports.node_locateANamespace = node_locateANamespace;\n//# sourceMappingURL=NodeAlgorithm.js.map","'use strict';\n\n\nvar loader = require('./js-yaml/loader');\nvar dumper = require('./js-yaml/dumper');\n\n\nfunction deprecated(name) {\n  return function () {\n    throw new Error('Function ' + name + ' is deprecated and cannot be used.');\n  };\n}\n\n\nmodule.exports.Type                = require('./js-yaml/type');\nmodule.exports.Schema              = require('./js-yaml/schema');\nmodule.exports.FAILSAFE_SCHEMA     = require('./js-yaml/schema/failsafe');\nmodule.exports.JSON_SCHEMA         = require('./js-yaml/schema/json');\nmodule.exports.CORE_SCHEMA         = require('./js-yaml/schema/core');\nmodule.exports.DEFAULT_SAFE_SCHEMA = require('./js-yaml/schema/default_safe');\nmodule.exports.DEFAULT_FULL_SCHEMA = require('./js-yaml/schema/default_full');\nmodule.exports.load                = loader.load;\nmodule.exports.loadAll             = loader.loadAll;\nmodule.exports.safeLoad            = loader.safeLoad;\nmodule.exports.safeLoadAll         = loader.safeLoadAll;\nmodule.exports.dump                = dumper.dump;\nmodule.exports.safeDump            = dumper.safeDump;\nmodule.exports.YAMLException       = require('./js-yaml/exception');\n\n// Deprecated schema names from JS-YAML 2.0.x\nmodule.exports.MINIMAL_SCHEMA = require('./js-yaml/schema/failsafe');\nmodule.exports.SAFE_SCHEMA    = require('./js-yaml/schema/default_safe');\nmodule.exports.DEFAULT_SCHEMA = require('./js-yaml/schema/default_full');\n\n// Deprecated functions from JS-YAML 1.x.x\nmodule.exports.scan           = deprecated('scan');\nmodule.exports.parse          = deprecated('parse');\nmodule.exports.compose        = deprecated('compose');\nmodule.exports.addConstructor = deprecated('addConstructor');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCBWriter_1 = require(\"./BaseCBWriter\");\n/**\n * Serializes XML nodes.\n */\nvar XMLCBWriter = /** @class */ (function (_super) {\n    __extends(XMLCBWriter, _super);\n    /**\n     * Initializes a new instance of `XMLCBWriter`.\n     *\n     * @param builderOptions - XML builder options\n     */\n    function XMLCBWriter(builderOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        _this._lineLength = 0;\n        return _this;\n    }\n    /** @inheritdoc */\n    XMLCBWriter.prototype.frontMatter = function () {\n        return \"\";\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.declaration = function (version, encoding, standalone) {\n        var markup = this._beginLine() + \"<?xml\";\n        markup += \" version=\\\"\" + version + \"\\\"\";\n        if (encoding !== undefined) {\n            markup += \" encoding=\\\"\" + encoding + \"\\\"\";\n        }\n        if (standalone !== undefined) {\n            markup += \" standalone=\\\"\" + (standalone ? \"yes\" : \"no\") + \"\\\"\";\n        }\n        markup += \"?>\";\n        return markup;\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.docType = function (name, publicId, systemId) {\n        var markup = this._beginLine();\n        if (publicId && systemId) {\n            markup += \"<!DOCTYPE \" + name + \" PUBLIC \\\"\" + publicId + \"\\\" \\\"\" + systemId + \"\\\">\";\n        }\n        else if (publicId) {\n            markup += \"<!DOCTYPE \" + name + \" PUBLIC \\\"\" + publicId + \"\\\">\";\n        }\n        else if (systemId) {\n            markup += \"<!DOCTYPE \" + name + \" SYSTEM \\\"\" + systemId + \"\\\">\";\n        }\n        else {\n            markup += \"<!DOCTYPE \" + name + \">\";\n        }\n        return markup;\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.comment = function (data) {\n        return this._beginLine() + \"<!--\" + data + \"-->\";\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.text = function (data) {\n        return this._beginLine() + data;\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.instruction = function (target, data) {\n        if (data) {\n            return this._beginLine() + \"<?\" + target + \" \" + data + \"?>\";\n        }\n        else {\n            return this._beginLine() + \"<?\" + target + \"?>\";\n        }\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.cdata = function (data) {\n        return this._beginLine() + \"<![CDATA[\" + data + \"]]>\";\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.openTagBegin = function (name) {\n        this._lineLength += 1 + name.length;\n        return this._beginLine() + \"<\" + name;\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.openTagEnd = function (name, selfClosing, voidElement) {\n        if (voidElement) {\n            return \" />\";\n        }\n        else if (selfClosing) {\n            if (this._writerOptions.allowEmptyTags) {\n                return \"></\" + name + \">\";\n            }\n            else if (this._writerOptions.spaceBeforeSlash) {\n                return \" />\";\n            }\n            else {\n                return \"/>\";\n            }\n        }\n        else {\n            return \">\";\n        }\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.closeTag = function (name) {\n        return this._beginLine() + \"</\" + name + \">\";\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.attribute = function (name, value) {\n        var str = name + \"=\\\"\" + value + \"\\\"\";\n        if (this._writerOptions.prettyPrint && this._writerOptions.width > 0 &&\n            this._lineLength + 1 + str.length > this._writerOptions.width) {\n            str = this._beginLine() + this._indent(1) + str;\n            this._lineLength = str.length;\n            return str;\n        }\n        else {\n            this._lineLength += 1 + str.length;\n            return \" \" + str;\n        }\n    };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.beginElement = function (name) { };\n    /** @inheritdoc */\n    XMLCBWriter.prototype.endElement = function (name) { };\n    /**\n     * Produces characters to be prepended to a line of string in pretty-print\n     * mode.\n     */\n    XMLCBWriter.prototype._beginLine = function () {\n        if (this._writerOptions.prettyPrint) {\n            var str = (this.hasData ? this._writerOptions.newline : \"\") +\n                this._indent(this._writerOptions.offset + this.level);\n            this._lineLength = str.length;\n            return str;\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Produces an indentation string.\n     *\n     * @param level - depth of the tree\n     */\n    XMLCBWriter.prototype._indent = function (level) {\n        if (level <= 0) {\n            return \"\";\n        }\n        else {\n            return this._writerOptions.indent.repeat(level);\n        }\n    };\n    return XMLCBWriter;\n}(BaseCBWriter_1.BaseCBWriter));\nexports.XMLCBWriter = XMLCBWriter;\n//# sourceMappingURL=XMLCBWriter.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Represents an ordered list of nodes.\n * This is a static implementation of `NodeList`.\n */\nvar NodeListStaticImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `NodeList`.\n     *\n     * @param root - root node\n     */\n    function NodeListStaticImpl(root) {\n        this._live = false;\n        this._items = [];\n        this._length = 0;\n        this._root = root;\n        this._items = [];\n        this._filter = function (node) { return true; };\n        return new Proxy(this, this);\n    }\n    Object.defineProperty(NodeListStaticImpl.prototype, \"length\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The length attribute must return the number of nodes represented by\n             * the collection.\n             */\n            return this._items.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    NodeListStaticImpl.prototype.item = function (index) {\n        /**\n         * The item(index) method must return the indexth node in the collection.\n         * If there is no indexth node in the collection, then the method must\n         * return null.\n         */\n        if (index < 0 || index > this.length - 1)\n            return null;\n        return this._items[index];\n    };\n    /** @inheritdoc */\n    NodeListStaticImpl.prototype.keys = function () {\n        var _a;\n        return _a = {},\n            _a[Symbol.iterator] = function () {\n                var index = 0;\n                return {\n                    next: function () {\n                        if (index === this.length) {\n                            return { done: true, value: null };\n                        }\n                        else {\n                            return { done: false, value: index++ };\n                        }\n                    }.bind(this)\n                };\n            }.bind(this),\n            _a;\n    };\n    /** @inheritdoc */\n    NodeListStaticImpl.prototype.values = function () {\n        var _a;\n        return _a = {},\n            _a[Symbol.iterator] = function () {\n                var it = this[Symbol.iterator]();\n                return {\n                    next: function () {\n                        return it.next();\n                    }\n                };\n            }.bind(this),\n            _a;\n    };\n    /** @inheritdoc */\n    NodeListStaticImpl.prototype.entries = function () {\n        var _a;\n        return _a = {},\n            _a[Symbol.iterator] = function () {\n                var it = this[Symbol.iterator]();\n                var index = 0;\n                return {\n                    next: function () {\n                        var itResult = it.next();\n                        if (itResult.done) {\n                            return { done: true, value: null };\n                        }\n                        else {\n                            return { done: false, value: [index++, itResult.value] };\n                        }\n                    }\n                };\n            }.bind(this),\n            _a;\n    };\n    /** @inheritdoc */\n    NodeListStaticImpl.prototype[Symbol.iterator] = function () {\n        var it = this._items[Symbol.iterator]();\n        return {\n            next: function () {\n                return it.next();\n            }\n        };\n    };\n    /** @inheritdoc */\n    NodeListStaticImpl.prototype.forEach = function (callback, thisArg) {\n        var e_1, _a;\n        if (thisArg === undefined) {\n            thisArg = DOMImpl_1.dom.window;\n        }\n        var index = 0;\n        try {\n            for (var _b = __values(this._items), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node = _c.value;\n                callback.call(thisArg, node, index++, this);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Implements a proxy get trap to provide array-like access.\n     */\n    NodeListStaticImpl.prototype.get = function (target, key, receiver) {\n        if (!util_1.isString(key)) {\n            return Reflect.get(target, key, receiver);\n        }\n        var index = Number(key);\n        if (isNaN(index)) {\n            return Reflect.get(target, key, receiver);\n        }\n        return target._items[index] || undefined;\n    };\n    /**\n     * Implements a proxy set trap to provide array-like access.\n     */\n    NodeListStaticImpl.prototype.set = function (target, key, value, receiver) {\n        if (!util_1.isString(key)) {\n            return Reflect.set(target, key, value, receiver);\n        }\n        var index = Number(key);\n        if (isNaN(index)) {\n            return Reflect.set(target, key, value, receiver);\n        }\n        if (index >= 0 && index < target._items.length) {\n            target._items[index] = value;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Creates a new `NodeList`.\n     *\n     * @param root - root node\n     * @param items - a list of items to initialize the list\n     */\n    NodeListStaticImpl._create = function (root, items) {\n        var list = new NodeListStaticImpl(root);\n        list._items = items;\n        return list;\n    };\n    return NodeListStaticImpl;\n}());\nexports.NodeListStaticImpl = NodeListStaticImpl;\n//# sourceMappingURL=NodeListStaticImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar CharacterDataImpl_1 = require(\"./CharacterDataImpl\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a processing instruction node.\n */\nvar ProcessingInstructionImpl = /** @class */ (function (_super) {\n    __extends(ProcessingInstructionImpl, _super);\n    /**\n     * Initializes a new instance of `ProcessingInstruction`.\n     */\n    function ProcessingInstructionImpl(target, data) {\n        var _this = _super.call(this, data) || this;\n        _this._target = target;\n        return _this;\n    }\n    Object.defineProperty(ProcessingInstructionImpl.prototype, \"target\", {\n        /**\n         * Gets the target of the {@link ProcessingInstruction} node.\n         */\n        get: function () { return this._target; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new `ProcessingInstruction`.\n     *\n     * @param document - owner document\n     * @param target - instruction target\n     * @param data - node contents\n     */\n    ProcessingInstructionImpl._create = function (document, target, data) {\n        var node = new ProcessingInstructionImpl(target, data);\n        node._nodeDocument = document;\n        return node;\n    };\n    return ProcessingInstructionImpl;\n}(CharacterDataImpl_1.CharacterDataImpl));\nexports.ProcessingInstructionImpl = ProcessingInstructionImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(ProcessingInstructionImpl.prototype, \"_nodeType\", interfaces_1.NodeType.ProcessingInstruction);\n//# sourceMappingURL=ProcessingInstructionImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PotentialCustomElementName = /[a-z]([\\0-\\t\\x2D\\._a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*-([\\0-\\t\\x2D\\._a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*/;\nvar NamesWithHyphen = new Set(['annotation-xml', 'color-profile',\n    'font-face', 'font-face-src', 'font-face-uri', 'font-face-format',\n    'font-face-name', 'missing-glyph']);\nvar ElementNames = new Set(['article', 'aside', 'blockquote',\n    'body', 'div', 'footer', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n    'header', 'main', 'nav', 'p', 'section', 'span']);\nvar VoidElementNames = new Set(['area', 'base', 'basefont',\n    'bgsound', 'br', 'col', 'embed', 'frame', 'hr', 'img', 'input', 'keygen',\n    'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']);\nvar ShadowHostNames = new Set(['article', 'aside', 'blockquote', 'body',\n    'div', 'footer', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'main',\n    'nav', 'p', 'section', 'span']);\n/**\n * Determines if the given string is a valid custom element name.\n *\n * @param name - a name string\n */\nfunction customElement_isValidCustomElementName(name) {\n    if (!PotentialCustomElementName.test(name))\n        return false;\n    if (NamesWithHyphen.has(name))\n        return false;\n    return true;\n}\nexports.customElement_isValidCustomElementName = customElement_isValidCustomElementName;\n/**\n * Determines if the given string is a valid element name.\n *\n * @param name - a name string\n */\nfunction customElement_isValidElementName(name) {\n    return (ElementNames.has(name));\n}\nexports.customElement_isValidElementName = customElement_isValidElementName;\n/**\n * Determines if the given string is a void element name.\n *\n * @param name - a name string\n */\nfunction customElement_isVoidElementName(name) {\n    return (VoidElementNames.has(name));\n}\nexports.customElement_isVoidElementName = customElement_isVoidElementName;\n/**\n * Determines if the given string is a valid shadow host element name.\n *\n * @param name - a name string\n */\nfunction customElement_isValidShadowHostName(name) {\n    return (ShadowHostNames.has(name));\n}\nexports.customElement_isValidShadowHostName = customElement_isValidShadowHostName;\n/**\n * Enqueues an upgrade reaction for a custom element.\n *\n * @param element - a custom element\n * @param definition - a custom element definition\n */\nfunction customElement_enqueueACustomElementUpgradeReaction(element, definition) {\n    // TODO: Implement in HTML DOM\n}\nexports.customElement_enqueueACustomElementUpgradeReaction = customElement_enqueueACustomElementUpgradeReaction;\n/**\n * Enqueues a callback reaction for a custom element.\n *\n * @param element - a custom element\n * @param callbackName - name of the callback\n * @param args - callback arguments\n */\nfunction customElement_enqueueACustomElementCallbackReaction(element, callbackName, args) {\n    // TODO: Implement in HTML DOM\n}\nexports.customElement_enqueueACustomElementCallbackReaction = customElement_enqueueACustomElementCallbackReaction;\n/**\n * Upgrade a custom element.\n *\n * @param element - a custom element\n */\nfunction customElement_upgrade(definition, element) {\n    // TODO: Implement in HTML DOM\n}\nexports.customElement_upgrade = customElement_upgrade;\n/**\n * Tries to upgrade a custom element.\n *\n * @param element - a custom element\n */\nfunction customElement_tryToUpgrade(element) {\n    // TODO: Implement in HTML DOM\n}\nexports.customElement_tryToUpgrade = customElement_tryToUpgrade;\n/**\n * Looks up a custom element definition.\n *\n * @param document - a document\n * @param namespace - element namespace\n * @param localName - element local name\n * @param is - an `is` value\n */\nfunction customElement_lookUpACustomElementDefinition(document, namespace, localName, is) {\n    // TODO: Implement in HTML DOM\n    return null;\n}\nexports.customElement_lookUpACustomElementDefinition = customElement_lookUpACustomElementDefinition;\n//# sourceMappingURL=CustomElementAlgorithm.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar TraverserImpl_1 = require(\"./TraverserImpl\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents the nodes of a subtree and a position within them.\n */\nvar TreeWalkerImpl = /** @class */ (function (_super) {\n    __extends(TreeWalkerImpl, _super);\n    /**\n     * Initializes a new instance of `TreeWalker`.\n     */\n    function TreeWalkerImpl(root, current) {\n        var _this = _super.call(this, root) || this;\n        _this._current = current;\n        return _this;\n    }\n    Object.defineProperty(TreeWalkerImpl.prototype, \"currentNode\", {\n        /** @inheritdoc */\n        get: function () { return this._current; },\n        set: function (value) { this._current = value; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.parentNode = function () {\n        /**\n         * 1. Let node be the context object’s current.\n         * 2. While node is non-null and is not the context object’s root:\n         */\n        var node = this._current;\n        while (node !== null && node !== this._root) {\n            /**\n             * 2.1. Set node to node’s parent.\n             * 2.2. If node is non-null and filtering node within the context object\n             * returns FILTER_ACCEPT, then set the context object’s current to node\n             * and return node.\n             */\n            node = node._parent;\n            if (node !== null &&\n                algorithm_1.traversal_filter(this, node) === interfaces_1.FilterResult.Accept) {\n                this._current = node;\n                return node;\n            }\n        }\n        /**\n         * 3. Return null.\n         */\n        return null;\n    };\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.firstChild = function () {\n        /**\n         * The firstChild() method, when invoked, must traverse children with the\n         * context object and first.\n         */\n        return algorithm_1.treeWalker_traverseChildren(this, true);\n    };\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.lastChild = function () {\n        /**\n         * The lastChild() method, when invoked, must traverse children with the\n         * context object and last.\n         */\n        return algorithm_1.treeWalker_traverseChildren(this, false);\n    };\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.nextSibling = function () {\n        /**\n         * The nextSibling() method, when invoked, must traverse siblings with the\n         * context object and next.\n         */\n        return algorithm_1.treeWalker_traverseSiblings(this, true);\n    };\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.previousNode = function () {\n        /**\n         * 1. Let node be the context object’s current.\n         * 2. While node is not the context object’s root:\n         */\n        var node = this._current;\n        while (node !== this._root) {\n            /**\n             * 2.1. Let sibling be node’s previous sibling.\n             * 2.2. While sibling is non-null:\n             */\n            var sibling = node._previousSibling;\n            while (sibling) {\n                /**\n                 * 2.2.1. Set node to sibling.\n                 * 2.2.2. Let result be the result of filtering node within the context\n                 * object.\n                 */\n                node = sibling;\n                var result = algorithm_1.traversal_filter(this, node);\n                /**\n                 * 2.2.3. While result is not FILTER_REJECT and node has a child:\n                 */\n                while (result !== interfaces_1.FilterResult.Reject && node._lastChild) {\n                    /**\n                     * 2.2.3.1. Set node to node’s last child.\n                     * 2.2.3.2. Set result to the result of filtering node within the\n                     * context object.\n                     */\n                    node = node._lastChild;\n                    result = algorithm_1.traversal_filter(this, node);\n                }\n                /**\n                 * 2.2.4. If result is FILTER_ACCEPT, then set the context object’s\n                 * current to node and return node.\n                 */\n                if (result === interfaces_1.FilterResult.Accept) {\n                    this._current = node;\n                    return node;\n                }\n                /**\n                 * 2.2.5. Set sibling to node’s previous sibling.\n                 */\n                sibling = node._previousSibling;\n            }\n            /**\n             * 2.3. If node is the context object’s root or node’s parent is null,\n             * then return null.\n             */\n            if (node === this._root || node._parent === null) {\n                return null;\n            }\n            /**\n             * 2.4. Set node to node’s parent.\n             */\n            node = node._parent;\n            /**\n             * 2.5. If the return value of filtering node within the context object is\n             * FILTER_ACCEPT, then set the context object’s current to node and\n             * return node.\n             */\n            if (algorithm_1.traversal_filter(this, node) === interfaces_1.FilterResult.Accept) {\n                this._current = node;\n                return node;\n            }\n        }\n        /**\n         * 3. Return null.\n         */\n        return null;\n    };\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.previousSibling = function () {\n        /**\n         * The previousSibling() method, when invoked, must traverse siblings with\n         * the context object and previous.\n         */\n        return algorithm_1.treeWalker_traverseSiblings(this, false);\n    };\n    /** @inheritdoc */\n    TreeWalkerImpl.prototype.nextNode = function () {\n        /**\n         * 1. Let node be the context object’s current.\n         * 2. Let result be FILTER_ACCEPT.\n         * 3. While true:\n         */\n        var node = this._current;\n        var result = interfaces_1.FilterResult.Accept;\n        while (true) {\n            /**\n             * 3.1. While result is not FILTER_REJECT and node has a child:\n             */\n            while (result !== interfaces_1.FilterResult.Reject && node._firstChild) {\n                /**\n                 * 3.1.1. Set node to its first child.\n                 * 3.1.2. Set result to the result of filtering node within the context\n                 * object.\n                 * 3.1.3. If result is FILTER_ACCEPT, then set the context object’s\n                 * current to node and return node.\n                 */\n                node = node._firstChild;\n                result = algorithm_1.traversal_filter(this, node);\n                if (result === interfaces_1.FilterResult.Accept) {\n                    this._current = node;\n                    return node;\n                }\n            }\n            /**\n             * 3.2. Let sibling be null.\n             * 3.3. Let temporary be node.\n             * 3.4. While temporary is non-null:\n             */\n            var sibling = null;\n            var temporary = node;\n            while (temporary !== null) {\n                /**\n                 * 3.4.1. If temporary is the context object’s root, then return null.\n                 */\n                if (temporary === this._root) {\n                    return null;\n                }\n                /**\n                 * 3.4.2. Set sibling to temporary’s next sibling.\n                 * 3.4.3. If sibling is non-null, then break.\n                 */\n                sibling = temporary._nextSibling;\n                if (sibling !== null) {\n                    node = sibling;\n                    break;\n                }\n                /**\n                 * 3.4.4. Set temporary to temporary’s parent.\n                 */\n                temporary = temporary._parent;\n            }\n            /**\n             * 3.5. Set result to the result of filtering node within the context object.\n             * 3.6. If result is FILTER_ACCEPT, then set the context object’s current\n             * to node and return node.\n             */\n            result = algorithm_1.traversal_filter(this, node);\n            if (result === interfaces_1.FilterResult.Accept) {\n                this._current = node;\n                return node;\n            }\n        }\n    };\n    /**\n     * Creates a new `TreeWalker`.\n     *\n     * @param root - iterator's root node\n     * @param current - current node\n     */\n    TreeWalkerImpl._create = function (root, current) {\n        return new TreeWalkerImpl(root, current);\n    };\n    return TreeWalkerImpl;\n}(TraverserImpl_1.TraverserImpl));\nexports.TreeWalkerImpl = TreeWalkerImpl;\n//# sourceMappingURL=TreeWalkerImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MapWriter_1 = require(\"./MapWriter\");\nexports.MapWriter = MapWriter_1.MapWriter;\nvar XMLWriter_1 = require(\"./XMLWriter\");\nexports.XMLWriter = XMLWriter_1.XMLWriter;\nvar ObjectWriter_1 = require(\"./ObjectWriter\");\nexports.ObjectWriter = ObjectWriter_1.ObjectWriter;\nvar JSONWriter_1 = require(\"./JSONWriter\");\nexports.JSONWriter = JSONWriter_1.JSONWriter;\nvar YAMLWriter_1 = require(\"./YAMLWriter\");\nexports.YAMLWriter = YAMLWriter_1.YAMLWriter;\n//# sourceMappingURL=index.js.map","module.exports = require(\"child_process\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar CharacterDataImpl_1 = require(\"./CharacterDataImpl\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a comment node.\n */\nvar CommentImpl = /** @class */ (function (_super) {\n    __extends(CommentImpl, _super);\n    /**\n     * Initializes a new instance of `Comment`.\n     *\n     * @param data - the text content\n     */\n    function CommentImpl(data) {\n        if (data === void 0) { data = ''; }\n        return _super.call(this, data) || this;\n    }\n    /**\n     * Creates a new `Comment`.\n     *\n     * @param document - owner document\n     * @param data - node contents\n     */\n    CommentImpl._create = function (document, data) {\n        if (data === void 0) { data = ''; }\n        var node = new CommentImpl(data);\n        node._nodeDocument = document;\n        return node;\n    };\n    return CommentImpl;\n}(CharacterDataImpl_1.CharacterDataImpl));\nexports.CommentImpl = CommentImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(CommentImpl.prototype, \"_nodeType\", interfaces_1.NodeType.Comment);\n//# sourceMappingURL=CommentImpl.js.map","import { app, BrowserWindow, ipcMain } from 'electron';\nimport { mkdir, copyFile, writeFile } from 'fs/promises';\nimport { join } from 'path';\nimport { create } from 'xmlbuilder2';\nimport os from 'os';\n\nconst BACKGROUND_PROPERTIES_DIR = join(os.homedir(), '.local/share/gnome-background-properties/');\nconst WALLPAPER_DIR = join(os.homedir(), '.local/share/backgrounds/');\n\nasync function createDynamicWallpaper(imagePaths: { path: string, name: string }[]) {\n  try {\n    await mkdir(BACKGROUND_PROPERTIES_DIR, { recursive: true });\n    await mkdir(WALLPAPER_DIR, { recursive: true });\n\n    const validImagePaths = imagePaths.filter(img => img && img.path && img.name);\n    if (validImagePaths.length !== 2) {\n      throw new Error('Exactly two valid image paths are required for light/dark mode.');\n    }\n\n    const lightImage = validImagePaths[0];\n    const darkImage = validImagePaths[1];\n\n    console.log('Light Image:', lightImage);\n    console.log('Dark Image:', darkImage);\n\n    const lightDest = join(WALLPAPER_DIR, lightImage.name);\n    const darkDest = join(WALLPAPER_DIR, darkImage.name);\n\n    await copyFile(lightImage.path, lightDest);\n    await copyFile(darkImage.path, darkDest);\n\n    const xmlRoot = create({ version: '1.0', encoding: 'UTF-8' })\n      .ele('wallpapers')\n      .ele('wallpaper');\n\n    xmlRoot.ele('name').txt('Dynamic Light/Dark Wallpaper');\n    xmlRoot.ele('filename').txt(lightDest);\n    xmlRoot.ele('filename-dark').txt(darkDest);\n    xmlRoot.ele('options').txt('zoom');\n    xmlRoot.ele('pcolor').txt('#2c001e');\n    xmlRoot.ele('scolor').txt('#2c001e');\n    xmlRoot.ele('shade_type').txt('solid');\n\n    const xmlString = xmlRoot.end({ prettyPrint: true });\n    const xmlFileName = `my_wallpaper_${Date.now()}.xml`;\n    const xmlPath = join(BACKGROUND_PROPERTIES_DIR, xmlFileName);\n\n    await writeFile(xmlPath, xmlString);\n\n    return { success: true, xmlPath };\n  } catch (err) {\n    return { success: false, error: (err as Error).message };\n  }\n}\n\n// IPC handler to expose to preload → renderer\nipcMain.handle('create-wallpaper', async (_, imagePaths) => {\n  console.log('Received image paths:', imagePaths);\n  return await createDynamicWallpaper(imagePaths);\n});\n\n// Boilerplate window creation\ndeclare const MAIN_WINDOW_WEBPACK_ENTRY: string;\ndeclare const MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY: string;\n\nconst createWindow = (): void => {\n  let mainWindow = new BrowserWindow({\n    width: 800,\n    height: 600,\n    frame: false,\n    webPreferences: {\n      preload: MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY,\n      contextIsolation: true,\n      nodeIntegration: false,\n    },\n  });\n\n  mainWindow.loadURL(MAIN_WINDOW_WEBPACK_ENTRY);\n\n  mainWindow.on('closed', () => {\n    mainWindow = null!;\n  });\n};\n\nif (require('electron-squirrel-startup')) app.quit();\n\napp.whenReady().then(createWindow);\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') app.quit();\n});\n\napp.on('activate', () => {\n  if (BrowserWindow.getAllWindows().length === 0) createWindow();\n});\n","'use strict';\n\nvar Type = require('../type');\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../interfaces\");\nvar util_1 = require(\"@oozcitak/util\");\nvar util_2 = require(\"@oozcitak/dom/lib/util\");\nvar _1 = require(\".\");\nvar dom_1 = require(\"../builder/dom\");\n/** @inheritdoc */\nfunction builder(p1, p2) {\n    var options = formatBuilderOptions(isXMLBuilderCreateOptions(p1) ? p1 : interfaces_1.DefaultBuilderOptions);\n    var nodes = util_2.Guard.isNode(p1) || util_1.isArray(p1) ? p1 : p2;\n    if (nodes === undefined) {\n        throw new Error(\"Invalid arguments.\");\n    }\n    if (util_1.isArray(nodes)) {\n        var builders = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var builder_1 = new _1.XMLBuilderImpl(nodes[i]);\n            builder_1.set(options);\n            builders.push(builder_1);\n        }\n        return builders;\n    }\n    else {\n        var builder_2 = new _1.XMLBuilderImpl(nodes);\n        builder_2.set(options);\n        return builder_2;\n    }\n}\nexports.builder = builder;\n/** @inheritdoc */\nfunction create(p1, p2) {\n    var options = formatBuilderOptions(p1 === undefined || isXMLBuilderCreateOptions(p1) ?\n        p1 : interfaces_1.DefaultBuilderOptions);\n    var contents = isXMLBuilderCreateOptions(p1) ? p2 : p1;\n    var doc = dom_1.createDocument();\n    setOptions(doc, options);\n    var builder = new _1.XMLBuilderImpl(doc);\n    if (contents !== undefined) {\n        // parse contents\n        builder.ele(contents);\n    }\n    return builder;\n}\nexports.create = create;\n/** @inheritdoc */\nfunction fragment(p1, p2) {\n    var options = formatBuilderOptions(p1 === undefined || isXMLBuilderCreateOptions(p1) ?\n        p1 : interfaces_1.DefaultBuilderOptions);\n    var contents = isXMLBuilderCreateOptions(p1) ? p2 : p1;\n    var doc = dom_1.createDocument();\n    setOptions(doc, options, true);\n    var builder = new _1.XMLBuilderImpl(doc.createDocumentFragment());\n    if (contents !== undefined) {\n        // parse contents\n        builder.ele(contents);\n    }\n    return builder;\n}\nexports.fragment = fragment;\n/** @inheritdoc */\nfunction convert(p1, p2, p3) {\n    var builderOptions;\n    var contents;\n    var convertOptions;\n    if (isXMLBuilderCreateOptions(p1) && p2 !== undefined) {\n        builderOptions = p1;\n        contents = p2;\n        convertOptions = p3;\n    }\n    else {\n        builderOptions = interfaces_1.DefaultBuilderOptions;\n        contents = p1;\n        convertOptions = p2 || undefined;\n    }\n    return create(builderOptions, contents).end(convertOptions);\n}\nexports.convert = convert;\nfunction isXMLBuilderCreateOptions(obj) {\n    if (!util_1.isPlainObject(obj))\n        return false;\n    for (var key in obj) {\n        /* istanbul ignore else */\n        if (obj.hasOwnProperty(key)) {\n            if (!interfaces_1.XMLBuilderOptionKeys.has(key))\n                return false;\n        }\n    }\n    return true;\n}\nfunction formatBuilderOptions(createOptions) {\n    if (createOptions === void 0) { createOptions = {}; }\n    var options = util_1.applyDefaults(createOptions, interfaces_1.DefaultBuilderOptions);\n    if (options.convert.att.length === 0 ||\n        options.convert.ins.length === 0 ||\n        options.convert.text.length === 0 ||\n        options.convert.cdata.length === 0 ||\n        options.convert.comment.length === 0) {\n        throw new Error(\"JS object converter strings cannot be zero length.\");\n    }\n    return options;\n}\nfunction setOptions(doc, options, isFragment) {\n    var docWithSettings = doc;\n    docWithSettings._xmlBuilderOptions = options;\n    docWithSettings._isFragment = isFragment;\n}\n//# sourceMappingURL=BuilderFunctions.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"@oozcitak/dom/lib/dom/interfaces\");\nvar LocalNameSet_1 = require(\"@oozcitak/dom/lib/serializer/LocalNameSet\");\nvar NamespacePrefixMap_1 = require(\"@oozcitak/dom/lib/serializer/NamespacePrefixMap\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"@oozcitak/dom/lib/algorithm\");\nvar constants_1 = require(\"../constants\");\n/**\n * Pre-serializes XML nodes.\n */\nvar BaseWriter = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `BaseWriter`.\n     *\n     * @param builderOptions - XML builder options\n     */\n    function BaseWriter(builderOptions) {\n        /**\n         * Gets the current depth of the XML tree.\n         */\n        this.level = 0;\n        this._builderOptions = builderOptions;\n    }\n    /**\n     * Used by derived classes to serialize the XML declaration.\n     *\n     * @param version - a version number string\n     * @param encoding - encoding declaration\n     * @param standalone - standalone document declaration\n     */\n    BaseWriter.prototype.declaration = function (version, encoding, standalone) { };\n    /**\n     * Used by derived classes to serialize a DocType node.\n     *\n     * @param name - node name\n     * @param publicId - public identifier\n     * @param systemId - system identifier\n     */\n    BaseWriter.prototype.docType = function (name, publicId, systemId) { };\n    /**\n     * Used by derived classes to serialize a comment node.\n     *\n     * @param data - node data\n     */\n    BaseWriter.prototype.comment = function (data) { };\n    /**\n     * Used by derived classes to serialize a text node.\n     *\n     * @param data - node data\n     */\n    BaseWriter.prototype.text = function (data) { };\n    /**\n     * Used by derived classes to serialize a processing instruction node.\n     *\n     * @param target - instruction target\n     * @param data - node data\n     */\n    BaseWriter.prototype.instruction = function (target, data) { };\n    /**\n     * Used by derived classes to serialize a CData section node.\n     *\n     * @param data - node data\n     */\n    BaseWriter.prototype.cdata = function (data) { };\n    /**\n     * Used by derived classes to serialize the beginning of the opening tag of an\n     * element node.\n     *\n     * @param name - node name\n     */\n    BaseWriter.prototype.openTagBegin = function (name) { };\n    /**\n     * Used by derived classes to serialize the ending of the opening tag of an\n     * element node.\n     *\n     * @param name - node name\n     * @param selfClosing - whether the element node is self closing\n     * @param voidElement - whether the element node is a HTML void element\n     */\n    BaseWriter.prototype.openTagEnd = function (name, selfClosing, voidElement) { };\n    /**\n     * Used by derived classes to serialize the closing tag of an element node.\n     *\n     * @param name - node name\n     */\n    BaseWriter.prototype.closeTag = function (name) { };\n    /**\n     * Used by derived classes to serialize attributes or namespace declarations.\n     *\n     * @param attributes - attribute array\n     */\n    BaseWriter.prototype.attributes = function (attributes) {\n        var e_1, _a;\n        try {\n            for (var attributes_1 = __values(attributes), attributes_1_1 = attributes_1.next(); !attributes_1_1.done; attributes_1_1 = attributes_1.next()) {\n                var attr = attributes_1_1.value;\n                this.attribute(attr[1] === null ? attr[2] : attr[1] + ':' + attr[2], attr[3]);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (attributes_1_1 && !attributes_1_1.done && (_a = attributes_1.return)) _a.call(attributes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Used by derived classes to serialize an attribute or namespace declaration.\n     *\n     * @param name - node name\n     * @param value - node value\n     */\n    BaseWriter.prototype.attribute = function (name, value) { };\n    /**\n     * Used by derived classes to perform any pre-processing steps before starting\n     * serializing an element node.\n     *\n     * @param name - node name\n     */\n    BaseWriter.prototype.beginElement = function (name) { };\n    /**\n     * Used by derived classes to perform any post-processing steps after\n     * completing serializing an element node.\n     *\n     * @param name - node name\n     */\n    BaseWriter.prototype.endElement = function (name) { };\n    /**\n     * Produces an XML serialization of the given node. The pre-serializer inserts\n     * namespace declarations where necessary and produces qualified names for\n     * nodes and attributes.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype.serializeNode = function (node, requireWellFormed) {\n        var hasNamespaces = (node._nodeDocument !== undefined && node._nodeDocument._hasNamespaces);\n        this.level = 0;\n        this.currentNode = node;\n        if (hasNamespaces) {\n            /** From: https://w3c.github.io/DOM-Parsing/#xml-serialization\n             *\n             * 1. Let namespace be a context namespace with value null.\n             * The context namespace tracks the XML serialization algorithm's current\n             * default namespace. The context namespace is changed when either an Element\n             * Node has a default namespace declaration, or the algorithm generates a\n             * default namespace declaration for the Element Node to match its own\n             * namespace. The algorithm assumes no namespace (null) to start.\n             * 2. Let prefix map be a new namespace prefix map.\n             * 3. Add the XML namespace with prefix value \"xml\" to prefix map.\n             * 4. Let prefix index be a generated namespace prefix index with value 1.\n             * The generated namespace prefix index is used to generate a new unique\n             * prefix value when no suitable existing namespace prefix is available to\n             * serialize a node's namespaceURI (or the namespaceURI of one of node's\n             * attributes). See the generate a prefix algorithm.\n             */\n            var namespace = null;\n            var prefixMap = new NamespacePrefixMap_1.NamespacePrefixMap();\n            prefixMap.set(\"xml\", infra_1.namespace.XML);\n            var prefixIndex = { value: 1 };\n            /**\n             * 5. Return the result of running the XML serialization algorithm on node\n             * passing the context namespace namespace, namespace prefix map prefix map,\n             * generated namespace prefix index reference to prefix index, and the\n             * flag require well-formed. If an exception occurs during the execution\n             * of the algorithm, then catch that exception and throw an\n             * \"InvalidStateError\" DOMException.\n             */\n            this._serializeNodeNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n        }\n        else {\n            this._serializeNode(node, requireWellFormed);\n        }\n    };\n    /**\n     * Produces an XML serialization of a node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeNodeNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        this.currentNode = node;\n        switch (node.nodeType) {\n            case interfaces_1.NodeType.Element:\n                this._serializeElementNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.Document:\n                this._serializeDocumentNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.Comment:\n                this._serializeComment(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.Text:\n                this._serializeText(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.DocumentFragment:\n                this._serializeDocumentFragmentNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.DocumentType:\n                this._serializeDocumentType(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.ProcessingInstruction:\n                this._serializeProcessingInstruction(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.CData:\n                this._serializeCData(node, requireWellFormed);\n                break;\n            default:\n                throw new Error(\"Unknown node type: \" + node.nodeType);\n        }\n    };\n    /**\n     * Produces an XML serialization of a node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeNode = function (node, requireWellFormed) {\n        this.currentNode = node;\n        switch (node.nodeType) {\n            case interfaces_1.NodeType.Element:\n                this._serializeElement(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.Document:\n                this._serializeDocument(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.Comment:\n                this._serializeComment(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.Text:\n                this._serializeText(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.DocumentFragment:\n                this._serializeDocumentFragment(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.DocumentType:\n                this._serializeDocumentType(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.ProcessingInstruction:\n                this._serializeProcessingInstruction(node, requireWellFormed);\n                break;\n            case interfaces_1.NodeType.CData:\n                this._serializeCData(node, requireWellFormed);\n                break;\n            default:\n                throw new Error(\"Unknown node type: \" + node.nodeType);\n        }\n    };\n    /**\n     * Produces an XML serialization of an element node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeElementNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        var e_2, _a;\n        var attributes = [];\n        /**\n         * From: https://w3c.github.io/DOM-Parsing/#xml-serializing-an-element-node\n         *\n         * 1. If the require well-formed flag is set (its value is true), and this\n         * node's localName attribute contains the character \":\" (U+003A COLON) or\n         * does not match the XML Name production, then throw an exception; the\n         * serialization of this node would not be a well-formed element.\n         */\n        if (requireWellFormed && (node.localName.indexOf(\":\") !== -1 ||\n            !algorithm_1.xml_isName(node.localName))) {\n            throw new Error(\"Node local name contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. Let markup be the string \"<\" (U+003C LESS-THAN SIGN).\n         * 3. Let qualified name be an empty string.\n         * 4. Let skip end tag be a boolean flag with value false.\n         * 5. Let ignore namespace definition attribute be a boolean flag with value\n         * false.\n         * 6. Given prefix map, copy a namespace prefix map and let map be the\n         * result.\n         * 7. Let local prefixes map be an empty map. The map has unique Node prefix\n         * strings as its keys, with corresponding namespaceURI Node values as the\n         * map's key values (in this map, the null namespace is represented by the\n         * empty string).\n         *\n         * _Note:_ This map is local to each element. It is used to ensure there\n         * are no conflicting prefixes should a new namespace prefix attribute need\n         * to be generated. It is also used to enable skipping of duplicate prefix\n         * definitions when writing an element's attributes: the map allows the\n         * algorithm to distinguish between a prefix in the namespace prefix map\n         * that might be locally-defined (to the current Element) and one that is\n         * not.\n         * 8. Let local default namespace be the result of recording the namespace\n         * information for node given map and local prefixes map.\n         *\n         * _Note:_ The above step will update map with any found namespace prefix\n         * definitions, add the found prefix definitions to the local prefixes map\n         * and return a local default namespace value defined by a default namespace\n         * attribute if one exists. Otherwise it returns null.\n         * 9. Let inherited ns be a copy of namespace.\n         * 10. Let ns be the value of node's namespaceURI attribute.\n         */\n        var qualifiedName = '';\n        var skipEndTag = false;\n        var ignoreNamespaceDefinitionAttribute = false;\n        var map = prefixMap.copy();\n        var localPrefixesMap = {};\n        var localDefaultNamespace = this._recordNamespaceInformation(node, map, localPrefixesMap);\n        var inheritedNS = namespace;\n        var ns = node.namespaceURI;\n        /** 11. If inherited ns is equal to ns, then: */\n        if (inheritedNS === ns) {\n            /**\n             * 11.1. If local default namespace is not null, then set ignore\n             * namespace definition attribute to true.\n             */\n            if (localDefaultNamespace !== null) {\n                ignoreNamespaceDefinitionAttribute = true;\n            }\n            /**\n             * 11.2. If ns is the XML namespace, then append to qualified name the\n             * concatenation of the string \"xml:\" and the value of node's localName.\n             * 11.3. Otherwise, append to qualified name the value of node's\n             * localName. The node's prefix if it exists, is dropped.\n             */\n            if (ns === infra_1.namespace.XML) {\n                qualifiedName = 'xml:' + node.localName;\n            }\n            else {\n                qualifiedName = node.localName;\n            }\n            /** 11.4. Append the value of qualified name to markup. */\n            this.beginElement(qualifiedName);\n            this.openTagBegin(qualifiedName);\n        }\n        else {\n            /**\n             * 12. Otherwise, inherited ns is not equal to ns (the node's own\n             * namespace is different from the context namespace of its parent).\n             * Run these sub-steps:\n             *\n             * 12.1. Let prefix be the value of node's prefix attribute.\n             * 12.2. Let candidate prefix be the result of retrieving a preferred\n             * prefix string prefix from map given namespace ns. The above may return\n             * null if no namespace key ns exists in map.\n             */\n            var prefix = node.prefix;\n            /**\n             * We don't need to run \"retrieving a preferred prefix string\" algorithm if\n             * the element has no prefix and its namespace matches to the default\n             * namespace.\n             * See: https://github.com/web-platform-tests/wpt/pull/16703\n             */\n            var candidatePrefix = null;\n            if (prefix !== null || ns !== localDefaultNamespace) {\n                candidatePrefix = map.get(prefix, ns);\n            }\n            /**\n             * 12.3. If the value of prefix matches \"xmlns\", then run the following\n             * steps:\n             */\n            if (prefix === \"xmlns\") {\n                /**\n                 * 12.3.1. If the require well-formed flag is set, then throw an error.\n                 * An Element with prefix \"xmlns\" will not legally round-trip in a\n                 * conforming XML parser.\n                 */\n                if (requireWellFormed) {\n                    throw new Error(\"An element cannot have the 'xmlns' prefix (well-formed required).\");\n                }\n                /**\n                 * 12.3.2. Let candidate prefix be the value of prefix.\n                 */\n                candidatePrefix = prefix;\n            }\n            /**\n             * 12.4.Found a suitable namespace prefix: if candidate prefix is not\n             * null (a namespace prefix is defined which maps to ns), then:\n             */\n            if (candidatePrefix !== null) {\n                /**\n                 * The following may serialize a different prefix than the Element's\n                 * existing prefix if it already had one. However, the retrieving a\n                 * preferred prefix string algorithm already tried to match the\n                 * existing prefix if possible.\n                 *\n                 * 12.4.1. Append to qualified name the concatenation of candidate\n                 * prefix, \":\" (U+003A COLON), and node's localName. There exists on\n                 * this node or the node's ancestry a namespace prefix definition that\n                 * defines the node's namespace.\n                 * 12.4.2. If the local default namespace is not null (there exists a\n                 * locally-defined default namespace declaration attribute) and its\n                 * value is not the XML namespace, then let inherited ns get the value\n                 * of local default namespace unless the local default namespace is the\n                 * empty string in which case let it get null (the context namespace\n                 * is changed to the declared default, rather than this node's own\n                 * namespace).\n                 *\n                 * _Note:_ Any default namespace definitions or namespace prefixes that\n                 * define the XML namespace are omitted when serializing this node's\n                 * attributes.\n                 */\n                qualifiedName = candidatePrefix + ':' + node.localName;\n                if (localDefaultNamespace !== null && localDefaultNamespace !== infra_1.namespace.XML) {\n                    inheritedNS = localDefaultNamespace || null;\n                }\n                /**\n                 * 12.4.3. Append the value of qualified name to markup.\n                 */\n                this.beginElement(qualifiedName);\n                this.openTagBegin(qualifiedName);\n                /** 12.5. Otherwise, if prefix is not null, then: */\n            }\n            else if (prefix !== null) {\n                /**\n                 * _Note:_ By this step, there is no namespace or prefix mapping\n                 * declaration in this node (or any parent node visited by this\n                 * algorithm) that defines prefix otherwise the step labelled Found\n                 * a suitable namespace prefix would have been followed. The sub-steps\n                 * that follow will create a new namespace prefix declaration for prefix\n                 * and ensure that prefix does not conflict with an existing namespace\n                 * prefix declaration of the same localName in node's attribute list.\n                 *\n                 * 12.5.1. If the local prefixes map contains a key matching prefix,\n                 * then let prefix be the result of generating a prefix providing as\n                 * input map, ns, and prefix index.\n                 */\n                if (prefix in localPrefixesMap) {\n                    prefix = this._generatePrefix(ns, map, prefixIndex);\n                }\n                /**\n                 * 12.5.2. Add prefix to map given namespace ns.\n                 * 12.5.3. Append to qualified name the concatenation of prefix, \":\"\n                 * (U+003A COLON), and node's localName.\n                 * 12.5.4. Append the value of qualified name to markup.\n                 */\n                map.set(prefix, ns);\n                qualifiedName += prefix + ':' + node.localName;\n                this.beginElement(qualifiedName);\n                this.openTagBegin(qualifiedName);\n                /**\n                 * 12.5.5. Append the following to markup, in the order listed:\n                 *\n                 * _Note:_ The following serializes a namespace prefix declaration for\n                 * prefix which was just added to the map.\n                 *\n                 * 12.5.5.1. \" \" (U+0020 SPACE);\n                 * 12.5.5.2. The string \"xmlns:\";\n                 * 12.5.5.3. The value of prefix;\n                 * 12.5.5.4. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 12.5.5.5. The result of serializing an attribute value given ns and\n                 * the require well-formed flag as input;\n                 * 12.5.5.6. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                attributes.push([null, 'xmlns', prefix,\n                    this._serializeAttributeValue(ns, requireWellFormed)]);\n                /**\n                 * 12.5.5.7. If local default namespace is not null (there exists a\n                 * locally-defined default namespace declaration attribute), then\n                 * let inherited ns get the value of local default namespace unless the\n                 * local default namespace is the empty string in which case let it get\n                 * null.\n                 */\n                if (localDefaultNamespace !== null) {\n                    inheritedNS = localDefaultNamespace || null;\n                }\n                /**\n                 * 12.6. Otherwise, if local default namespace is null, or local\n                 * default namespace is not null and its value is not equal to ns, then:\n                 */\n            }\n            else if (localDefaultNamespace === null ||\n                (localDefaultNamespace !== null && localDefaultNamespace !== ns)) {\n                /**\n                 * _Note:_ At this point, the namespace for this node still needs to be\n                 * serialized, but there's no prefix (or candidate prefix) available; the\n                 * following uses the default namespace declaration to define the\n                 * namespace--optionally replacing an existing default declaration\n                 * if present.\n                 *\n                 * 12.6.1. Set the ignore namespace definition attribute flag to true.\n                 * 12.6.2. Append to qualified name the value of node's localName.\n                 * 12.6.3. Let the value of inherited ns be ns.\n                 *\n                 * _Note:_ The new default namespace will be used in the serialization\n                 * to define this node's namespace and act as the context namespace for\n                 * its children.\n                 */\n                ignoreNamespaceDefinitionAttribute = true;\n                qualifiedName += node.localName;\n                inheritedNS = ns;\n                /**\n                 * 12.6.4. Append the value of qualified name to markup.\n                 */\n                this.beginElement(qualifiedName);\n                this.openTagBegin(qualifiedName);\n                /**\n                 * 12.6.5. Append the following to markup, in the order listed:\n                 *\n                 * _Note:_ The following serializes the new (or replacement) default\n                 * namespace definition.\n                 *\n                 * 12.6.5.1. \" \" (U+0020 SPACE);\n                 * 12.6.5.2. The string \"xmlns\";\n                 * 12.6.5.3. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 12.6.5.4. The result of serializing an attribute value given ns\n                 * and the require well-formed flag as input;\n                 * 12.6.5.5. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                attributes.push([null, null, 'xmlns',\n                    this._serializeAttributeValue(ns, requireWellFormed)]);\n                /**\n                 * 12.7. Otherwise, the node has a local default namespace that matches\n                 * ns. Append to qualified name the value of node's localName, let the\n                 * value of inherited ns be ns, and append the value of qualified name\n                 * to markup.\n                 */\n            }\n            else {\n                qualifiedName += node.localName;\n                inheritedNS = ns;\n                this.beginElement(qualifiedName);\n                this.openTagBegin(qualifiedName);\n            }\n        }\n        /**\n         * 13. Append to markup the result of the XML serialization of node's\n         * attributes given map, prefix index, local prefixes map, ignore namespace\n         * definition attribute flag, and require well-formed flag.\n         */\n        attributes.push.apply(attributes, __spread(this._serializeAttributesNS(node, map, prefixIndex, localPrefixesMap, ignoreNamespaceDefinitionAttribute, requireWellFormed)));\n        this.attributes(attributes);\n        /**\n         * 14. If ns is the HTML namespace, and the node's list of children is\n         * empty, and the node's localName matches any one of the following void\n         * elements: \"area\", \"base\", \"basefont\", \"bgsound\", \"br\", \"col\", \"embed\",\n         * \"frame\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"menuitem\", \"meta\",\n         * \"param\", \"source\", \"track\", \"wbr\"; then append the following to markup,\n         * in the order listed:\n         * 14.1. \" \" (U+0020 SPACE);\n         * 14.2. \"/\" (U+002F SOLIDUS).\n         * and set the skip end tag flag to true.\n         * 15. If ns is not the HTML namespace, and the node's list of children is\n         * empty, then append \"/\" (U+002F SOLIDUS) to markup and set the skip end\n         * tag flag to true.\n         * 16. Append \">\" (U+003E GREATER-THAN SIGN) to markup.\n         */\n        var isHTML = (ns === infra_1.namespace.HTML);\n        if (isHTML && node.childNodes.length === 0 &&\n            BaseWriter._VoidElementNames.has(node.localName)) {\n            this.openTagEnd(qualifiedName, true, true);\n            this.endElement(qualifiedName);\n            skipEndTag = true;\n        }\n        else if (!isHTML && node.childNodes.length === 0) {\n            this.openTagEnd(qualifiedName, true, false);\n            this.endElement(qualifiedName);\n            skipEndTag = true;\n        }\n        else {\n            this.openTagEnd(qualifiedName, false, false);\n        }\n        /**\n         * 17. If the value of skip end tag is true, then return the value of markup\n         * and skip the remaining steps. The node is a leaf-node.\n         */\n        if (skipEndTag)\n            return;\n        /**\n         * 18. If ns is the HTML namespace, and the node's localName matches the\n         * string \"template\", then this is a template element. Append to markup the\n         * result of XML serializing a DocumentFragment node given the template\n         * element's template contents (a DocumentFragment), providing inherited\n         * ns, map, prefix index, and the require well-formed flag.\n         *\n         * _Note:_ This allows template content to round-trip, given the rules for\n         * parsing XHTML documents.\n         *\n         * 19. Otherwise, append to markup the result of running the XML\n         * serialization algorithm on each of node's children, in tree order,\n         * providing inherited ns, map, prefix index, and the require well-formed\n         * flag.\n         */\n        if (isHTML && node.localName === \"template\") {\n            // TODO: serialize template contents\n        }\n        else {\n            try {\n                for (var _b = __values(node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var childNode = _c.value;\n                    this.level++;\n                    this._serializeNodeNS(childNode, inheritedNS, map, prefixIndex, requireWellFormed);\n                    this.level--;\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        /**\n         * 20. Append the following to markup, in the order listed:\n         * 20.1. \"</\" (U+003C LESS-THAN SIGN, U+002F SOLIDUS);\n         * 20.2. The value of qualified name;\n         * 20.3. \">\" (U+003E GREATER-THAN SIGN).\n         * 21. Return the value of markup.\n         */\n        this.closeTag(qualifiedName);\n        this.endElement(qualifiedName);\n    };\n    /**\n     * Produces an XML serialization of an element node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeElement = function (node, requireWellFormed) {\n        var e_3, _a;\n        /**\n         * From: https://w3c.github.io/DOM-Parsing/#xml-serializing-an-element-node\n         *\n         * 1. If the require well-formed flag is set (its value is true), and this\n         * node's localName attribute contains the character \":\" (U+003A COLON) or\n         * does not match the XML Name production, then throw an exception; the\n         * serialization of this node would not be a well-formed element.\n         */\n        if (requireWellFormed && (node.localName.indexOf(\":\") !== -1 ||\n            !algorithm_1.xml_isName(node.localName))) {\n            throw new Error(\"Node local name contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. Let markup be the string \"<\" (U+003C LESS-THAN SIGN).\n         * 3. Let qualified name be an empty string.\n         * 4. Let skip end tag be a boolean flag with value false.\n         * 5. Let ignore namespace definition attribute be a boolean flag with value\n         * false.\n         * 6. Given prefix map, copy a namespace prefix map and let map be the\n         * result.\n         * 7. Let local prefixes map be an empty map. The map has unique Node prefix\n         * strings as its keys, with corresponding namespaceURI Node values as the\n         * map's key values (in this map, the null namespace is represented by the\n         * empty string).\n         *\n         * _Note:_ This map is local to each element. It is used to ensure there\n         * are no conflicting prefixes should a new namespace prefix attribute need\n         * to be generated. It is also used to enable skipping of duplicate prefix\n         * definitions when writing an element's attributes: the map allows the\n         * algorithm to distinguish between a prefix in the namespace prefix map\n         * that might be locally-defined (to the current Element) and one that is\n         * not.\n         * 8. Let local default namespace be the result of recording the namespace\n         * information for node given map and local prefixes map.\n         *\n         * _Note:_ The above step will update map with any found namespace prefix\n         * definitions, add the found prefix definitions to the local prefixes map\n         * and return a local default namespace value defined by a default namespace\n         * attribute if one exists. Otherwise it returns null.\n         * 9. Let inherited ns be a copy of namespace.\n         * 10. Let ns be the value of node's namespaceURI attribute.\n         */\n        var skipEndTag = false;\n        /** 11. If inherited ns is equal to ns, then: */\n        /**\n         * 11.1. If local default namespace is not null, then set ignore\n         * namespace definition attribute to true.\n         */\n        /**\n         * 11.2. If ns is the XML namespace, then append to qualified name the\n         * concatenation of the string \"xml:\" and the value of node's localName.\n         * 11.3. Otherwise, append to qualified name the value of node's\n         * localName. The node's prefix if it exists, is dropped.\n         */\n        var qualifiedName = node.localName;\n        /** 11.4. Append the value of qualified name to markup. */\n        this.beginElement(qualifiedName);\n        this.openTagBegin(qualifiedName);\n        /**\n         * 13. Append to markup the result of the XML serialization of node's\n         * attributes given map, prefix index, local prefixes map, ignore namespace\n         * definition attribute flag, and require well-formed flag.\n         */\n        var attributes = this._serializeAttributes(node, requireWellFormed);\n        this.attributes(attributes);\n        /**\n         * 14. If ns is the HTML namespace, and the node's list of children is\n         * empty, and the node's localName matches any one of the following void\n         * elements: \"area\", \"base\", \"basefont\", \"bgsound\", \"br\", \"col\", \"embed\",\n         * \"frame\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"menuitem\", \"meta\",\n         * \"param\", \"source\", \"track\", \"wbr\"; then append the following to markup,\n         * in the order listed:\n         * 14.1. \" \" (U+0020 SPACE);\n         * 14.2. \"/\" (U+002F SOLIDUS).\n         * and set the skip end tag flag to true.\n         * 15. If ns is not the HTML namespace, and the node's list of children is\n         * empty, then append \"/\" (U+002F SOLIDUS) to markup and set the skip end\n         * tag flag to true.\n         * 16. Append \">\" (U+003E GREATER-THAN SIGN) to markup.\n         */\n        if (!node.hasChildNodes()) {\n            this.openTagEnd(qualifiedName, true, false);\n            this.endElement(qualifiedName);\n            skipEndTag = true;\n        }\n        else {\n            this.openTagEnd(qualifiedName, false, false);\n        }\n        /**\n         * 17. If the value of skip end tag is true, then return the value of markup\n         * and skip the remaining steps. The node is a leaf-node.\n         */\n        if (skipEndTag)\n            return;\n        try {\n            /**\n             * 18. If ns is the HTML namespace, and the node's localName matches the\n             * string \"template\", then this is a template element. Append to markup the\n             * result of XML serializing a DocumentFragment node given the template\n             * element's template contents (a DocumentFragment), providing inherited\n             * ns, map, prefix index, and the require well-formed flag.\n             *\n             * _Note:_ This allows template content to round-trip, given the rules for\n             * parsing XHTML documents.\n             *\n             * 19. Otherwise, append to markup the result of running the XML\n             * serialization algorithm on each of node's children, in tree order,\n             * providing inherited ns, map, prefix index, and the require well-formed\n             * flag.\n             */\n            for (var _b = __values(node._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                this.level++;\n                this._serializeNode(childNode, requireWellFormed);\n                this.level--;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        /**\n         * 20. Append the following to markup, in the order listed:\n         * 20.1. \"</\" (U+003C LESS-THAN SIGN, U+002F SOLIDUS);\n         * 20.2. The value of qualified name;\n         * 20.3. \">\" (U+003E GREATER-THAN SIGN).\n         * 21. Return the value of markup.\n         */\n        this.closeTag(qualifiedName);\n        this.endElement(qualifiedName);\n    };\n    /**\n     * Produces an XML serialization of a document node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeDocumentNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        var e_4, _a;\n        /**\n         * If the require well-formed flag is set (its value is true), and this node\n         * has no documentElement (the documentElement attribute's value is null),\n         * then throw an exception; the serialization of this node would not be a\n         * well-formed document.\n         */\n        if (requireWellFormed && node.documentElement === null) {\n            throw new Error(\"Missing document element (well-formed required).\");\n        }\n        try {\n            /**\n             * Otherwise, run the following steps:\n             * 1. Let serialized document be an empty string.\n             * 2. For each child child of node, in tree order, run the XML\n             * serialization algorithm on the child passing along the provided\n             * arguments, and append the result to serialized document.\n             *\n             * _Note:_ This will serialize any number of ProcessingInstruction and\n             * Comment nodes both before and after the Document's documentElement node,\n             * including at most one DocumentType node. (Text nodes are not allowed as\n             * children of the Document.)\n             *\n             * 3. Return the value of serialized document.\n            */\n            for (var _b = __values(node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                this._serializeNodeNS(childNode, namespace, prefixMap, prefixIndex, requireWellFormed);\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    };\n    /**\n     * Produces an XML serialization of a document node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeDocument = function (node, requireWellFormed) {\n        var e_5, _a;\n        /**\n         * If the require well-formed flag is set (its value is true), and this node\n         * has no documentElement (the documentElement attribute's value is null),\n         * then throw an exception; the serialization of this node would not be a\n         * well-formed document.\n         */\n        if (requireWellFormed && node.documentElement === null) {\n            throw new Error(\"Missing document element (well-formed required).\");\n        }\n        try {\n            /**\n             * Otherwise, run the following steps:\n             * 1. Let serialized document be an empty string.\n             * 2. For each child child of node, in tree order, run the XML\n             * serialization algorithm on the child passing along the provided\n             * arguments, and append the result to serialized document.\n             *\n             * _Note:_ This will serialize any number of ProcessingInstruction and\n             * Comment nodes both before and after the Document's documentElement node,\n             * including at most one DocumentType node. (Text nodes are not allowed as\n             * children of the Document.)\n             *\n             * 3. Return the value of serialized document.\n            */\n            for (var _b = __values(node._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                this._serializeNode(childNode, requireWellFormed);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    /**\n     * Produces an XML serialization of a comment node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeComment = function (node, requireWellFormed) {\n        /**\n         * If the require well-formed flag is set (its value is true), and node's\n         * data contains characters that are not matched by the XML Char production\n         * or contains \"--\" (two adjacent U+002D HYPHEN-MINUS characters) or that\n         * ends with a \"-\" (U+002D HYPHEN-MINUS) character, then throw an exception;\n         * the serialization of this node's data would not be well-formed.\n         */\n        if (requireWellFormed && (!algorithm_1.xml_isLegalChar(node.data) ||\n            node.data.indexOf(\"--\") !== -1 || node.data.endsWith(\"-\"))) {\n            throw new Error(\"Comment data contains invalid characters (well-formed required).\");\n        }\n        /**\n         * Otherwise, return the concatenation of \"<!--\", node's data, and \"-->\".\n         */\n        this.comment(node.data);\n    };\n    /**\n     * Produces an XML serialization of a text node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     * @param level - current depth of the XML tree\n     */\n    BaseWriter.prototype._serializeText = function (node, requireWellFormed) {\n        /**\n         * 1. If the require well-formed flag is set (its value is true), and\n         * node's data contains characters that are not matched by the XML Char\n         * production, then throw an exception; the serialization of this node's\n         * data would not be well-formed.\n         */\n        if (requireWellFormed && !algorithm_1.xml_isLegalChar(node.data)) {\n            throw new Error(\"Text data contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. Let markup be the value of node's data.\n         * 3. Replace any occurrences of \"&\" in markup by \"&amp;\".\n         * 4. Replace any occurrences of \"<\" in markup by \"&lt;\".\n         * 5. Replace any occurrences of \">\" in markup by \"&gt;\".\n         * 6. Return the value of markup.\n         */\n        var markup = node.data.replace(constants_1.nonEntityAmpersandRegex, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;');\n        this.text(markup);\n    };\n    /**\n     * Produces an XML serialization of a document fragment node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeDocumentFragmentNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        var e_6, _a;\n        try {\n            /**\n             * 1. Let markup the empty string.\n             * 2. For each child child of node, in tree order, run the XML serialization\n             * algorithm on the child given namespace, prefix map, a reference to prefix\n             * index, and flag require well-formed. Concatenate the result to markup.\n             * 3. Return the value of markup.\n             */\n            for (var _b = __values(node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                this._serializeNodeNS(childNode, namespace, prefixMap, prefixIndex, requireWellFormed);\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n    };\n    /**\n     * Produces an XML serialization of a document fragment node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeDocumentFragment = function (node, requireWellFormed) {\n        var e_7, _a;\n        try {\n            /**\n             * 1. Let markup the empty string.\n             * 2. For each child child of node, in tree order, run the XML serialization\n             * algorithm on the child given namespace, prefix map, a reference to prefix\n             * index, and flag require well-formed. Concatenate the result to markup.\n             * 3. Return the value of markup.\n             */\n            for (var _b = __values(node._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                this._serializeNode(childNode, requireWellFormed);\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n    };\n    /**\n     * Produces an XML serialization of a document type node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeDocumentType = function (node, requireWellFormed) {\n        /**\n         * 1. If the require well-formed flag is true and the node's publicId\n         * attribute contains characters that are not matched by the XML PubidChar\n         *  production, then throw an exception; the serialization of this node\n         * would not be a well-formed document type declaration.\n         */\n        if (requireWellFormed && !algorithm_1.xml_isPubidChar(node.publicId)) {\n            throw new Error(\"DocType public identifier does not match PubidChar construct (well-formed required).\");\n        }\n        /**\n         * 2. If the require well-formed flag is true and the node's systemId\n         * attribute contains characters that are not matched by the XML Char\n         * production or that contains both a \"\"\" (U+0022 QUOTATION MARK) and a\n         * \"'\" (U+0027 APOSTROPHE), then throw an exception; the serialization\n         * of this node would not be a well-formed document type declaration.\n         */\n        if (requireWellFormed &&\n            (!algorithm_1.xml_isLegalChar(node.systemId) ||\n                (node.systemId.indexOf('\"') !== -1 && node.systemId.indexOf(\"'\") !== -1))) {\n            throw new Error(\"DocType system identifier contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 3. Let markup be an empty string.\n         * 4. Append the string \"<!DOCTYPE\" to markup.\n         * 5. Append \" \" (U+0020 SPACE) to markup.\n         * 6. Append the value of the node's name attribute to markup. For a node\n         * belonging to an HTML document, the value will be all lowercase.\n         * 7. If the node's publicId is not the empty string then append the\n         * following, in the order listed, to markup:\n         * 7.1. \" \" (U+0020 SPACE);\n         * 7.2. The string \"PUBLIC\";\n         * 7.3. \" \" (U+0020 SPACE);\n         * 7.4. \"\"\" (U+0022 QUOTATION MARK);\n         * 7.5. The value of the node's publicId attribute;\n         * 7.6. \"\"\" (U+0022 QUOTATION MARK).\n         * 8. If the node's systemId is not the empty string and the node's publicId\n         * is set to the empty string, then append the following, in the order\n         * listed, to markup:\n         * 8.1. \" \" (U+0020 SPACE);\n         * 8.2. The string \"SYSTEM\".\n         * 9. If the node's systemId is not the empty string then append the\n         * following, in the order listed, to markup:\n         * 9.2. \" \" (U+0020 SPACE);\n         * 9.3. \"\"\" (U+0022 QUOTATION MARK);\n         * 9.3. The value of the node's systemId attribute;\n         * 9.4. \"\"\" (U+0022 QUOTATION MARK).\n         * 10. Append \">\" (U+003E GREATER-THAN SIGN) to markup.\n         * 11. Return the value of markup.\n         */\n        this.docType(node.name, node.publicId, node.systemId);\n    };\n    /**\n     * Produces an XML serialization of a processing instruction node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeProcessingInstruction = function (node, requireWellFormed) {\n        /**\n         * 1. If the require well-formed flag is set (its value is true), and node's\n         * target contains a \":\" (U+003A COLON) character or is an ASCII\n         * case-insensitive match for the string \"xml\", then throw an exception;\n         * the serialization of this node's target would not be well-formed.\n         */\n        if (requireWellFormed && (node.target.indexOf(\":\") !== -1 || (/^xml$/i).test(node.target))) {\n            throw new Error(\"Processing instruction target contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. If the require well-formed flag is set (its value is true), and node's\n         * data contains characters that are not matched by the XML Char production\n         * or contains the string \"?>\" (U+003F QUESTION MARK,\n         * U+003E GREATER-THAN SIGN), then throw an exception; the serialization of\n         * this node's data would not be well-formed.\n         */\n        if (requireWellFormed && (!algorithm_1.xml_isLegalChar(node.data) ||\n            node.data.indexOf(\"?>\") !== -1)) {\n            throw new Error(\"Processing instruction data contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 3. Let markup be the concatenation of the following, in the order listed:\n         * 3.1. \"<?\" (U+003C LESS-THAN SIGN, U+003F QUESTION MARK);\n         * 3.2. The value of node's target;\n         * 3.3. \" \" (U+0020 SPACE);\n         * 3.4. The value of node's data;\n         * 3.5. \"?>\" (U+003F QUESTION MARK, U+003E GREATER-THAN SIGN).\n         * 4. Return the value of markup.\n         */\n        this.instruction(node.target, node.data);\n    };\n    /**\n     * Produces an XML serialization of a CDATA node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeCData = function (node, requireWellFormed) {\n        if (requireWellFormed && (node.data.indexOf(\"]]>\") !== -1)) {\n            throw new Error(\"CDATA contains invalid characters (well-formed required).\");\n        }\n        this.cdata(node.data);\n    };\n    /**\n    * Produces an XML serialization of the attributes of an element node.\n    *\n     * @param node - node to serialize\n     * @param map - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param localPrefixesMap - local prefixes map\n     * @param ignoreNamespaceDefinitionAttribute - whether to ignore namespace\n     * attributes\n     * @param requireWellFormed - whether to check conformance\n    */\n    BaseWriter.prototype._serializeAttributesNS = function (node, map, prefixIndex, localPrefixesMap, ignoreNamespaceDefinitionAttribute, requireWellFormed) {\n        var e_8, _a;\n        /**\n         * 1. Let result be the empty string.\n         * 2. Let localname set be a new empty namespace localname set. This\n         * localname set will contain tuples of unique attribute namespaceURI and\n         * localName pairs, and is populated as each attr is processed. This set is\n         * used to [optionally] enforce the well-formed constraint that an element\n         * cannot have two attributes with the same namespaceURI and localName.\n         * This can occur when two otherwise identical attributes on the same\n         * element differ only by their prefix values.\n         */\n        var result = [];\n        var localNameSet = requireWellFormed ? new LocalNameSet_1.LocalNameSet() : undefined;\n        try {\n            /**\n             * 3. Loop: For each attribute attr in element's attributes, in the order\n             * they are specified in the element's attribute list:\n             */\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                // Optimize common case\n                if (!requireWellFormed && !ignoreNamespaceDefinitionAttribute && attr.namespaceURI === null) {\n                    result.push([null, null, attr.localName,\n                        this._serializeAttributeValue(attr.value, requireWellFormed)]);\n                    continue;\n                }\n                /**\n                 * 3.1. If the require well-formed flag is set (its value is true), and the\n                 * localname set contains a tuple whose values match those of a new tuple\n                 * consisting of attr's namespaceURI attribute and localName attribute,\n                 * then throw an exception; the serialization of this attr would fail to\n                 * produce a well-formed element serialization.\n                 */\n                if (requireWellFormed && localNameSet && localNameSet.has(attr.namespaceURI, attr.localName)) {\n                    throw new Error(\"Element contains duplicate attributes (well-formed required).\");\n                }\n                /**\n                 * 3.2. Create a new tuple consisting of attr's namespaceURI attribute and\n                 * localName attribute, and add it to the localname set.\n                 * 3.3. Let attribute namespace be the value of attr's namespaceURI value.\n                 * 3.4. Let candidate prefix be null.\n                 */\n                if (requireWellFormed && localNameSet)\n                    localNameSet.set(attr.namespaceURI, attr.localName);\n                var attributeNamespace = attr.namespaceURI;\n                var candidatePrefix = null;\n                /** 3.5. If attribute namespace is not null, then run these sub-steps: */\n                if (attributeNamespace !== null) {\n                    /**\n                     * 3.5.1. Let candidate prefix be the result of retrieving a preferred\n                     * prefix string from map given namespace attribute namespace with\n                     * preferred prefix being attr's prefix value.\n                     */\n                    candidatePrefix = map.get(attr.prefix, attributeNamespace);\n                    /**\n                     * 3.5.2. If the value of attribute namespace is the XMLNS namespace,\n                     * then run these steps:\n                     */\n                    if (attributeNamespace === infra_1.namespace.XMLNS) {\n                        /**\n                         * 3.5.2.1. If any of the following are true, then stop running these\n                         * steps and goto Loop to visit the next attribute:\n                         * - the attr's value is the XML namespace;\n                         * _Note:_ The XML namespace cannot be redeclared and survive\n                         * round-tripping (unless it defines the prefix \"xml\"). To avoid this\n                         * problem, this algorithm always prefixes elements in the XML\n                         * namespace with \"xml\" and drops any related definitions as seen\n                         * in the above condition.\n                         * - the attr's prefix is null and the ignore namespace definition\n                         * attribute flag is true (the Element's default namespace attribute\n                         * should be skipped);\n                         * - the attr's prefix is not null and either\n                         *   * the attr's localName is not a key contained in the local\n                         *     prefixes map, or\n                         *   * the attr's localName is present in the local prefixes map but\n                         *     the value of the key does not match attr's value\n                         * and furthermore that the attr's localName (as the prefix to find)\n                         * is found in the namespace prefix map given the namespace consisting\n                         * of the attr's value (the current namespace prefix definition was\n                         * exactly defined previously--on an ancestor element not the current\n                         * element whose attributes are being processed).\n                         */\n                        if (attr.value === infra_1.namespace.XML ||\n                            (attr.prefix === null && ignoreNamespaceDefinitionAttribute) ||\n                            (attr.prefix !== null && (!(attr.localName in localPrefixesMap) ||\n                                localPrefixesMap[attr.localName] !== attr.value) &&\n                                map.has(attr.localName, attr.value)))\n                            continue;\n                        /**\n                         * 3.5.2.2. If the require well-formed flag is set (its value is true),\n                         * and the value of attr's value attribute matches the XMLNS\n                         * namespace, then throw an exception; the serialization of this\n                         * attribute would produce invalid XML because the XMLNS namespace\n                         * is reserved and cannot be applied as an element's namespace via\n                         * XML parsing.\n                         *\n                         * _Note:_ DOM APIs do allow creation of elements in the XMLNS\n                         * namespace but with strict qualifications.\n                         */\n                        if (requireWellFormed && attr.value === infra_1.namespace.XMLNS) {\n                            throw new Error(\"XMLNS namespace is reserved (well-formed required).\");\n                        }\n                        /**\n                         * 3.5.2.3. If the require well-formed flag is set (its value is true),\n                         * and the value of attr's value attribute is the empty string, then\n                         * throw an exception; namespace prefix declarations cannot be used\n                         * to undeclare a namespace (use a default namespace declaration\n                         * instead).\n                         */\n                        if (requireWellFormed && attr.value === '') {\n                            throw new Error(\"Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).\");\n                        }\n                        /**\n                         * 3.5.2.4. the attr's prefix matches the string \"xmlns\", then let\n                         * candidate prefix be the string \"xmlns\".\n                         */\n                        if (attr.prefix === 'xmlns')\n                            candidatePrefix = 'xmlns';\n                        /**\n                         * 3.5.3. Otherwise, the attribute namespace is not the XMLNS namespace.\n                         * Run these steps:\n                         *\n                         * _Note:_ The (candidatePrefix === null) check is not in the spec.\n                         * We deviate from the spec here. Otherwise a prefix is generated for\n                         * all attributes with namespaces.\n                         */\n                    }\n                    else if (candidatePrefix === null) {\n                        if (attr.prefix !== null &&\n                            (!map.hasPrefix(attr.prefix) ||\n                                map.has(attr.prefix, attributeNamespace))) {\n                            /**\n                             * Check if we can use the attribute's own prefix.\n                             * We deviate from the spec here.\n                             * TODO: This is not an efficient way of searching for prefixes.\n                             * Follow developments to the spec.\n                             */\n                            candidatePrefix = attr.prefix;\n                        }\n                        else {\n                            /**\n                             * 3.5.3.1. Let candidate prefix be the result of generating a prefix\n                             * providing map, attribute namespace, and prefix index as input.\n                             */\n                            candidatePrefix = this._generatePrefix(attributeNamespace, map, prefixIndex);\n                        }\n                        /**\n                         * 3.5.3.2. Append the following to result, in the order listed:\n                         * 3.5.3.2.1. \" \" (U+0020 SPACE);\n                         * 3.5.3.2.2. The string \"xmlns:\";\n                         * 3.5.3.2.3. The value of candidate prefix;\n                         * 3.5.3.2.4. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                         * 3.5.3.2.5. The result of serializing an attribute value given\n                         * attribute namespace and the require well-formed flag as input;\n                         * 3.5.3.2.6. \"\"\" (U+0022 QUOTATION MARK).\n                        */\n                        result.push([null, \"xmlns\", candidatePrefix,\n                            this._serializeAttributeValue(attributeNamespace, requireWellFormed)]);\n                    }\n                }\n                /**\n                 * 3.6. Append a \" \" (U+0020 SPACE) to result.\n                 * 3.7. If candidate prefix is not null, then append to result the\n                 * concatenation of candidate prefix with \":\" (U+003A COLON).\n                 */\n                var attrName = '';\n                if (candidatePrefix !== null) {\n                    attrName = candidatePrefix;\n                }\n                /**\n                 * 3.8. If the require well-formed flag is set (its value is true), and\n                 * this attr's localName attribute contains the character\n                 * \":\" (U+003A COLON) or does not match the XML Name production or\n                 * equals \"xmlns\" and attribute namespace is null, then throw an\n                 * exception; the serialization of this attr would not be a\n                 * well-formed attribute.\n                 */\n                if (requireWellFormed && (attr.localName.indexOf(\":\") !== -1 ||\n                    !algorithm_1.xml_isName(attr.localName) ||\n                    (attr.localName === \"xmlns\" && attributeNamespace === null))) {\n                    throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");\n                }\n                /**\n                 * 3.9. Append the following strings to result, in the order listed:\n                 * 3.9.1. The value of attr's localName;\n                 * 3.9.2. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 3.9.3. The result of serializing an attribute value given attr's value\n                 * attribute and the require well-formed flag as input;\n                 * 3.9.4. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                result.push([attributeNamespace, candidatePrefix, attr.localName,\n                    this._serializeAttributeValue(attr.value, requireWellFormed)]);\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        /**\n         * 4. Return the value of result.\n         */\n        return result;\n    };\n    /**\n    * Produces an XML serialization of the attributes of an element node.\n    *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n    */\n    BaseWriter.prototype._serializeAttributes = function (node, requireWellFormed) {\n        var e_9, _a;\n        /**\n         * 1. Let result be the empty string.\n         * 2. Let localname set be a new empty namespace localname set. This\n         * localname set will contain tuples of unique attribute namespaceURI and\n         * localName pairs, and is populated as each attr is processed. This set is\n         * used to [optionally] enforce the well-formed constraint that an element\n         * cannot have two attributes with the same namespaceURI and localName.\n         * This can occur when two otherwise identical attributes on the same\n         * element differ only by their prefix values.\n         */\n        var result = [];\n        var localNameSet = requireWellFormed ? {} : undefined;\n        try {\n            /**\n             * 3. Loop: For each attribute attr in element's attributes, in the order\n             * they are specified in the element's attribute list:\n             */\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                // Optimize common case\n                if (!requireWellFormed) {\n                    result.push([null, null, attr.localName,\n                        this._serializeAttributeValue(attr.value, requireWellFormed)]);\n                    continue;\n                }\n                /**\n                 * 3.1. If the require well-formed flag is set (its value is true), and the\n                 * localname set contains a tuple whose values match those of a new tuple\n                 * consisting of attr's namespaceURI attribute and localName attribute,\n                 * then throw an exception; the serialization of this attr would fail to\n                 * produce a well-formed element serialization.\n                 */\n                if (requireWellFormed && localNameSet && (attr.localName in localNameSet)) {\n                    throw new Error(\"Element contains duplicate attributes (well-formed required).\");\n                }\n                /**\n                 * 3.2. Create a new tuple consisting of attr's namespaceURI attribute and\n                 * localName attribute, and add it to the localname set.\n                 * 3.3. Let attribute namespace be the value of attr's namespaceURI value.\n                 * 3.4. Let candidate prefix be null.\n                 */\n                /* istanbul ignore else */\n                if (requireWellFormed && localNameSet)\n                    localNameSet[attr.localName] = true;\n                /** 3.5. If attribute namespace is not null, then run these sub-steps: */\n                /**\n                 * 3.6. Append a \" \" (U+0020 SPACE) to result.\n                 * 3.7. If candidate prefix is not null, then append to result the\n                 * concatenation of candidate prefix with \":\" (U+003A COLON).\n                 */\n                /**\n                 * 3.8. If the require well-formed flag is set (its value is true), and\n                 * this attr's localName attribute contains the character\n                 * \":\" (U+003A COLON) or does not match the XML Name production or\n                 * equals \"xmlns\" and attribute namespace is null, then throw an\n                 * exception; the serialization of this attr would not be a\n                 * well-formed attribute.\n                 */\n                if (requireWellFormed && (attr.localName.indexOf(\":\") !== -1 ||\n                    !algorithm_1.xml_isName(attr.localName))) {\n                    throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");\n                }\n                /**\n                 * 3.9. Append the following strings to result, in the order listed:\n                 * 3.9.1. The value of attr's localName;\n                 * 3.9.2. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 3.9.3. The result of serializing an attribute value given attr's value\n                 * attribute and the require well-formed flag as input;\n                 * 3.9.4. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                result.push([null, null, attr.localName,\n                    this._serializeAttributeValue(attr.value, requireWellFormed)]);\n            }\n        }\n        catch (e_9_1) { e_9 = { error: e_9_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_9) throw e_9.error; }\n        }\n        /**\n         * 4. Return the value of result.\n         */\n        return result;\n    };\n    /**\n    * Records namespace information for the given element and returns the\n    * default namespace attribute value.\n    *\n    * @param node - element node to process\n    * @param map - namespace prefix map\n    * @param localPrefixesMap - local prefixes map\n    */\n    BaseWriter.prototype._recordNamespaceInformation = function (node, map, localPrefixesMap) {\n        var e_10, _a;\n        /**\n         * 1. Let default namespace attr value be null.\n         */\n        var defaultNamespaceAttrValue = null;\n        try {\n            /**\n             * 2. Main: For each attribute attr in element's attributes, in the order\n             * they are specified in the element's attribute list:\n             */\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                /**\n                 * _Note:_ The following conditional steps find namespace prefixes. Only\n                 * attributes in the XMLNS namespace are considered (e.g., attributes made\n                 * to look like namespace declarations via\n                 * setAttribute(\"xmlns:pretend-prefix\", \"pretend-namespace\") are not\n                 * included).\n                 */\n                /** 2.1. Let attribute namespace be the value of attr's namespaceURI value. */\n                var attributeNamespace = attr.namespaceURI;\n                /** 2.2. Let attribute prefix be the value of attr's prefix. */\n                var attributePrefix = attr.prefix;\n                /** 2.3. If the attribute namespace is the XMLNS namespace, then: */\n                if (attributeNamespace === infra_1.namespace.XMLNS) {\n                    /**\n                     * 2.3.1. If attribute prefix is null, then attr is a default namespace\n                     * declaration. Set the default namespace attr value to attr's value and\n                     * stop running these steps, returning to Main to visit the next\n                     * attribute.\n                     */\n                    if (attributePrefix === null) {\n                        defaultNamespaceAttrValue = attr.value;\n                        continue;\n                        /**\n                         * 2.3.2. Otherwise, the attribute prefix is not null and attr is a\n                         * namespace prefix definition. Run the following steps:\n                         */\n                    }\n                    else {\n                        /** 2.3.2.1. Let prefix definition be the value of attr's localName. */\n                        var prefixDefinition = attr.localName;\n                        /** 2.3.2.2. Let namespace definition be the value of attr's value. */\n                        var namespaceDefinition = attr.value;\n                        /**\n                         * 2.3.2.3. If namespace definition is the XML namespace, then stop\n                         * running these steps, and return to Main to visit the next\n                         * attribute.\n                         *\n                         * _Note:_ XML namespace definitions in prefixes are completely\n                         * ignored (in order to avoid unnecessary work when there might be\n                         * prefix conflicts). XML namespaced elements are always handled\n                         * uniformly by prefixing (and overriding if necessary) the element's\n                         * localname with the reserved \"xml\" prefix.\n                         */\n                        if (namespaceDefinition === infra_1.namespace.XML) {\n                            continue;\n                        }\n                        /**\n                         * 2.3.2.4. If namespace definition is the empty string (the\n                         * declarative form of having no namespace), then let namespace\n                         * definition be null instead.\n                         */\n                        if (namespaceDefinition === '') {\n                            namespaceDefinition = null;\n                        }\n                        /**\n                         * 2.3.2.5. If prefix definition is found in map given the namespace\n                         * namespace definition, then stop running these steps, and return to\n                         * Main to visit the next attribute.\n                         *\n                         * _Note:_ This step avoids adding duplicate prefix definitions for\n                         * the same namespace in the map. This has the side-effect of avoiding\n                         * later serialization of duplicate namespace prefix declarations in\n                         * any descendant nodes.\n                         */\n                        if (map.has(prefixDefinition, namespaceDefinition)) {\n                            continue;\n                        }\n                        /**\n                         * 2.3.2.6. Add the prefix prefix definition to map given namespace\n                         * namespace definition.\n                         */\n                        map.set(prefixDefinition, namespaceDefinition);\n                        /**\n                         * 2.3.2.7. Add the value of prefix definition as a new key to the\n                         * local prefixes map, with the namespace definition as the key's\n                         * value replacing the value of null with the empty string if\n                         * applicable.\n                         */\n                        localPrefixesMap[prefixDefinition] = namespaceDefinition || '';\n                    }\n                }\n            }\n        }\n        catch (e_10_1) { e_10 = { error: e_10_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_10) throw e_10.error; }\n        }\n        /**\n         * 3. Return the value of default namespace attr value.\n         *\n         * _Note:_ The empty string is a legitimate return value and is not\n         * converted to null.\n         */\n        return defaultNamespaceAttrValue;\n    };\n    /**\n    * Generates a new prefix for the given namespace.\n    *\n    * @param newNamespace - a namespace to generate prefix for\n    * @param prefixMap - namespace prefix map\n    * @param prefixIndex - generated namespace prefix index\n    */\n    BaseWriter.prototype._generatePrefix = function (newNamespace, prefixMap, prefixIndex) {\n        /**\n         * 1. Let generated prefix be the concatenation of the string \"ns\" and the\n         * current numerical value of prefix index.\n         * 2. Let the value of prefix index be incremented by one.\n         * 3. Add to map the generated prefix given the new namespace namespace.\n         * 4. Return the value of generated prefix.\n         */\n        var generatedPrefix = \"ns\" + prefixIndex.value.toString();\n        prefixIndex.value++;\n        prefixMap.set(generatedPrefix, newNamespace);\n        return generatedPrefix;\n    };\n    /**\n     * Produces an XML serialization of an attribute value.\n     *\n     * @param value - attribute value\n     * @param requireWellFormed - whether to check conformance\n     */\n    BaseWriter.prototype._serializeAttributeValue = function (value, requireWellFormed) {\n        /**\n         * From: https://w3c.github.io/DOM-Parsing/#dfn-serializing-an-attribute-value\n         *\n         * 1. If the require well-formed flag is set (its value is true), and\n         * attribute value contains characters that are not matched by the XML Char\n         * production, then throw an exception; the serialization of this attribute\n         * value would fail to produce a well-formed element serialization.\n         */\n        if (requireWellFormed && value !== null && !algorithm_1.xml_isLegalChar(value)) {\n            throw new Error(\"Invalid characters in attribute value.\");\n        }\n        /**\n         * 2. If attribute value is null, then return the empty string.\n         */\n        if (value === null)\n            return \"\";\n        /**\n         * 3. Otherwise, attribute value is a string. Return the value of attribute\n         * value, first replacing any occurrences of the following:\n         * - \"&\" with \"&amp;\"\n         * - \"\"\" with \"&quot;\"\n         * - \"<\" with \"&lt;\"\n         * - \">\" with \"&gt;\"\n         * NOTE\n         * This matches behavior present in browsers, and goes above and beyond the\n         * grammar requirement in the XML specification's AttValue production by\n         * also replacing \">\" characters.\n         */\n        return value.replace(constants_1.nonEntityAmpersandRegex, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;');\n    };\n    BaseWriter._VoidElementNames = new Set(['area', 'base', 'basefont',\n        'bgsound', 'br', 'col', 'embed', 'frame', 'hr', 'img', 'input', 'keygen',\n        'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']);\n    return BaseWriter;\n}());\nexports.BaseWriter = BaseWriter;\n//# sourceMappingURL=BaseWriter.js.map","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n",null,"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventImpl_1 = require(\"./EventImpl\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents and event that carries custom data.\n */\nvar CustomEventImpl = /** @class */ (function (_super) {\n    __extends(CustomEventImpl, _super);\n    /**\n     * Initializes a new instance of `CustomEvent`.\n     */\n    function CustomEventImpl(type, eventInit) {\n        var _this = _super.call(this, type, eventInit) || this;\n        _this._detail = null;\n        _this._detail = (eventInit && eventInit.detail) || null;\n        return _this;\n    }\n    Object.defineProperty(CustomEventImpl.prototype, \"detail\", {\n        /** @inheritdoc */\n        get: function () { return this._detail; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    CustomEventImpl.prototype.initCustomEvent = function (type, bubbles, cancelable, detail) {\n        if (bubbles === void 0) { bubbles = false; }\n        if (cancelable === void 0) { cancelable = false; }\n        if (detail === void 0) { detail = null; }\n        /**\n         * 1. If the context object’s dispatch flag is set, then return.\n         */\n        if (this._dispatchFlag)\n            return;\n        /**\n         * 2. Initialize the context object with type, bubbles, and cancelable.\n         */\n        algorithm_1.event_initialize(this, type, bubbles, cancelable);\n        /**\n         * 3. Set the context object’s detail attribute to detail.\n         */\n        this._detail = detail;\n    };\n    return CustomEventImpl;\n}(EventImpl_1.EventImpl));\nexports.CustomEventImpl = CustomEventImpl;\n//# sourceMappingURL=CustomEventImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar util_1 = require(\"../util\");\nvar infra_1 = require(\"@oozcitak/infra\");\n/**\n * Represents an object that can be used to observe mutations to the tree of\n * nodes.\n */\nvar MutationObserverImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `MutationObserver`.\n     *\n     * @param callback - the callback function\n     */\n    function MutationObserverImpl(callback) {\n        this._nodeList = [];\n        this._recordQueue = [];\n        /**\n         * 1. Let mo be a new MutationObserver object whose callback is callback.\n         * 2. Append mo to mo’s relevant agent’s mutation observers.\n         * 3. Return mo.\n         */\n        this._callback = callback;\n        var window = DOMImpl_1.dom.window;\n        infra_1.set.append(window._mutationObservers, this);\n    }\n    /** @inheritdoc */\n    MutationObserverImpl.prototype.observe = function (target, options) {\n        var e_1, _a;\n        options = options || {\n            childList: false,\n            subtree: false\n        };\n        /**\n         * 1. If either options’s attributeOldValue or attributeFilter is present\n         * and options’s attributes is omitted, then set options’s attributes\n         * to true.\n         * 2. If options’s characterDataOldValue is present and options’s\n         * characterData is omitted, then set options’s characterData to true.\n         * 3. If none of options’s childList, attributes, and characterData is\n         * true, then throw a TypeError.\n         * 4. If options’s attributeOldValue is true and options’s attributes is\n         * false, then throw a TypeError.\n         * 5. If options’s attributeFilter is present and options’s attributes is\n         *  false, then throw a TypeError.\n         * 6. If options’s characterDataOldValue is true and options’s characterData\n         * is false, then throw a TypeError.\n         */\n        if ((options.attributeOldValue !== undefined || options.attributeFilter !== undefined) &&\n            options.attributes === undefined) {\n            options.attributes = true;\n        }\n        if (options.characterDataOldValue !== undefined && options.characterData === undefined) {\n            options.characterData = true;\n        }\n        if (!options.childList && !options.attributes && !options.characterData) {\n            throw new TypeError();\n        }\n        if (options.attributeOldValue && !options.attributes) {\n            throw new TypeError();\n        }\n        if (options.attributeFilter !== undefined && !options.attributes) {\n            throw new TypeError();\n        }\n        if (options.characterDataOldValue && !options.characterData) {\n            throw new TypeError();\n        }\n        /**\n         * 7. For each registered of target’s registered observer list, if\n         * registered’s observer is the context object:\n         */\n        var isRegistered = false;\n        var coptions = options;\n        var _loop_1 = function (registered) {\n            var e_2, _a;\n            if (registered.observer === this_1) {\n                isRegistered = true;\n                try {\n                    /**\n                     * 7.1. For each node of the context object’s node list, remove all\n                     * transient registered observers whose source is registered from node’s\n                     * registered observer list.\n                     */\n                    for (var _b = (e_2 = void 0, __values(this_1._nodeList)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var node = _c.value;\n                        infra_1.list.remove(node._registeredObserverList, function (ob) {\n                            return util_1.Guard.isTransientRegisteredObserver(ob) && ob.source === registered;\n                        });\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                /**\n                 * 7.2. Set registered’s options to options.\n                 */\n                registered.options = coptions;\n            }\n        };\n        var this_1 = this;\n        try {\n            for (var _b = __values(target._registeredObserverList), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var registered = _c.value;\n                _loop_1(registered);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        /**\n         * 8. Otherwise:\n         * 8.1. Append a new registered observer whose observer is the context\n         * object and options is options to target’s registered observer list.\n         * 8.2. Append target to the context object’s node list.\n         */\n        if (!isRegistered) {\n            target._registeredObserverList.push({ observer: this, options: options });\n            this._nodeList.push(target);\n        }\n    };\n    /** @inheritdoc */\n    MutationObserverImpl.prototype.disconnect = function () {\n        var e_3, _a;\n        var _this = this;\n        try {\n            /**\n             * 1. For each node of the context object’s node list, remove any\n             * registered observer from node’s registered observer list for which the\n             * context object is the observer.\n             */\n            for (var _b = __values(this._nodeList), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node = _c.value;\n                infra_1.list.remove((node)._registeredObserverList, function (ob) {\n                    return ob.observer === _this;\n                });\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        /**\n         * 2. Empty the context object’s record queue.\n         */\n        this._recordQueue = [];\n    };\n    /** @inheritdoc */\n    MutationObserverImpl.prototype.takeRecords = function () {\n        /**\n         * 1. Let records be a clone of the context object’s record queue.\n         * 2. Empty the context object’s record queue.\n         * 3. Return records.\n         */\n        var records = this._recordQueue;\n        this._recordQueue = [];\n        return records;\n    };\n    return MutationObserverImpl;\n}());\nexports.MutationObserverImpl = MutationObserverImpl;\n//# sourceMappingURL=MutationObserverImpl.js.map","/**\n * Detect Electron renderer process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process !== 'undefined' && process.type === 'renderer') {\n  module.exports = require('./browser.js');\n} else {\n  module.exports = require('./node.js');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Defines a WebIDL `Const` property on the given object.\n *\n * @param o - object on which to add the property\n * @param name - property name\n * @param value - property value\n */\nfunction idl_defineConst(o, name, value) {\n    Object.defineProperty(o, name, { writable: false, enumerable: true, configurable: false, value: value });\n}\nexports.idl_defineConst = idl_defineConst;\n//# sourceMappingURL=WebIDLAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a mixin that extends child nodes that can have siblings\n * including doctypes. This mixin is implemented by {@link Element},\n * {@link CharacterData} and {@link DocumentType}.\n */\nvar ChildNodeImpl = /** @class */ (function () {\n    function ChildNodeImpl() {\n    }\n    /** @inheritdoc */\n    ChildNodeImpl.prototype.before = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        /**\n         * 1. Let parent be context object’s parent.\n         * 2. If parent is null, then return.\n         */\n        var context = util_1.Cast.asNode(this);\n        var parent = context._parent;\n        if (parent === null)\n            return;\n        /**\n         * 3. Let viablePreviousSibling be context object’s first preceding\n         * sibling not in nodes, and null otherwise.\n         */\n        var viablePreviousSibling = context._previousSibling;\n        var flag = true;\n        while (flag && viablePreviousSibling) {\n            flag = false;\n            for (var i = 0; i < nodes.length; i++) {\n                var child = nodes[i];\n                if (child === viablePreviousSibling) {\n                    viablePreviousSibling = viablePreviousSibling._previousSibling;\n                    flag = true;\n                    break;\n                }\n            }\n        }\n        /**\n         * 4. Let node be the result of converting nodes into a node, given nodes\n         * and context object’s node document.\n         */\n        var node = algorithm_1.parentNode_convertNodesIntoANode(nodes, context._nodeDocument);\n        /**\n         * 5. If viablePreviousSibling is null, set it to parent’s first child,\n         * and to viablePreviousSibling’s next sibling otherwise.\n         */\n        if (viablePreviousSibling === null)\n            viablePreviousSibling = parent._firstChild;\n        else\n            viablePreviousSibling = viablePreviousSibling._nextSibling;\n        /**\n         * 6. Pre-insert node into parent before viablePreviousSibling.\n         */\n        algorithm_1.mutation_preInsert(node, parent, viablePreviousSibling);\n    };\n    /** @inheritdoc */\n    ChildNodeImpl.prototype.after = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        /**\n         * 1. Let parent be context object’s parent.\n         * 2. If parent is null, then return.\n         */\n        var context = util_1.Cast.asNode(this);\n        var parent = context._parent;\n        if (!parent)\n            return;\n        /**\n         * 3. Let viableNextSibling be context object’s first following sibling not\n         * in nodes, and null otherwise.\n         */\n        var viableNextSibling = context._nextSibling;\n        var flag = true;\n        while (flag && viableNextSibling) {\n            flag = false;\n            for (var i = 0; i < nodes.length; i++) {\n                var child = nodes[i];\n                if (child === viableNextSibling) {\n                    viableNextSibling = viableNextSibling._nextSibling;\n                    flag = true;\n                    break;\n                }\n            }\n        }\n        /**\n         * 4. Let node be the result of converting nodes into a node, given nodes\n         * and context object’s node document.\n         */\n        var node = algorithm_1.parentNode_convertNodesIntoANode(nodes, context._nodeDocument);\n        /**\n         * 5. Pre-insert node into parent before viableNextSibling.\n         */\n        algorithm_1.mutation_preInsert(node, parent, viableNextSibling);\n    };\n    /** @inheritdoc */\n    ChildNodeImpl.prototype.replaceWith = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        /**\n         * 1. Let parent be context object’s parent.\n         * 2. If parent is null, then return.\n         */\n        var context = util_1.Cast.asNode(this);\n        var parent = context._parent;\n        if (!parent)\n            return;\n        /**\n         * 3. Let viableNextSibling be context object’s first following sibling not\n         * in nodes, and null otherwise.\n         */\n        var viableNextSibling = context._nextSibling;\n        var flag = true;\n        while (flag && viableNextSibling) {\n            flag = false;\n            for (var i = 0; i < nodes.length; i++) {\n                var child = nodes[i];\n                if (child === viableNextSibling) {\n                    viableNextSibling = viableNextSibling._nextSibling;\n                    flag = true;\n                    break;\n                }\n            }\n        }\n        /**\n         * 4. Let node be the result of converting nodes into a node, given nodes\n         * and context object’s node document.\n         */\n        var node = algorithm_1.parentNode_convertNodesIntoANode(nodes, context._nodeDocument);\n        /**\n         * 5. If context object’s parent is parent, replace the context object with\n         * node within parent.\n         * _Note:_ Context object could have been inserted into node.\n         * 6. Otherwise, pre-insert node into parent before viableNextSibling.\n         */\n        if (context._parent === parent)\n            algorithm_1.mutation_replace(context, node, parent);\n        else\n            algorithm_1.mutation_preInsert(node, parent, viableNextSibling);\n    };\n    /** @inheritdoc */\n    ChildNodeImpl.prototype.remove = function () {\n        /**\n         * 1. If context object’s parent is null, then return.\n         * 2. Remove the context object from context object’s parent.\n         */\n        var context = util_1.Cast.asNode(this);\n        var parent = context._parent;\n        if (!parent)\n            return;\n        algorithm_1.mutation_remove(context, parent);\n    };\n    return ChildNodeImpl;\n}());\nexports.ChildNodeImpl = ChildNodeImpl;\n//# sourceMappingURL=ChildNodeImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar builder_1 = require(\"./builder\");\nexports.builder = builder_1.builder;\nexports.create = builder_1.create;\nexports.fragment = builder_1.fragment;\nexports.convert = builder_1.convert;\nexports.createCB = builder_1.createCB;\nexports.fragmentCB = builder_1.fragmentCB;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EmptySet = /** @class */ (function () {\n    function EmptySet() {\n    }\n    Object.defineProperty(EmptySet.prototype, \"size\", {\n        get: function () {\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EmptySet.prototype.add = function (value) {\n        throw new Error(\"Cannot add to an empty set.\");\n    };\n    EmptySet.prototype.clear = function () {\n        // no-op\n    };\n    EmptySet.prototype.delete = function (value) {\n        return false;\n    };\n    EmptySet.prototype.forEach = function (callbackfn, thisArg) {\n        // no-op\n    };\n    EmptySet.prototype.has = function (value) {\n        return false;\n    };\n    EmptySet.prototype[Symbol.iterator] = function () {\n        return new EmptySetIterator();\n    };\n    EmptySet.prototype.entries = function () {\n        return new EmptySetIterator();\n    };\n    EmptySet.prototype.keys = function () {\n        return new EmptySetIterator();\n    };\n    EmptySet.prototype.values = function () {\n        return new EmptySetIterator();\n    };\n    Object.defineProperty(EmptySet.prototype, Symbol.toStringTag, {\n        get: function () {\n            return \"EmptySet\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EmptySet;\n}());\nexports.EmptySet = EmptySet;\nvar EmptySetIterator = /** @class */ (function () {\n    function EmptySetIterator() {\n    }\n    EmptySetIterator.prototype[Symbol.iterator] = function () {\n        return this;\n    };\n    EmptySetIterator.prototype.next = function () {\n        return { done: true, value: null };\n    };\n    return EmptySetIterator;\n}());\n//# sourceMappingURL=EmptySet.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DocumentImpl_1 = require(\"./DocumentImpl\");\n/**\n * Represents an XML document.\n */\nvar XMLDocumentImpl = /** @class */ (function (_super) {\n    __extends(XMLDocumentImpl, _super);\n    /**\n     * Initializes a new instance of `XMLDocument`.\n     */\n    function XMLDocumentImpl() {\n        return _super.call(this) || this;\n    }\n    return XMLDocumentImpl;\n}(DocumentImpl_1.DocumentImpl));\nexports.XMLDocumentImpl = XMLDocumentImpl;\n//# sourceMappingURL=XMLDocumentImpl.js.map","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents a set of objects with a size limit.\n */\nvar FixedSizeSet = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `FixedSizeSet`.\n     *\n     * @param limit - maximum number of items to keep in the set. When the limit\n     * is exceeded the first item is removed from the set.\n     */\n    function FixedSizeSet(limit) {\n        if (limit === void 0) { limit = 1000; }\n        this._items = new Set();\n        this._limit = limit;\n    }\n    /**\n     * Adds a new item to the set.\n     *\n     * @param item - an item\n     */\n    FixedSizeSet.prototype.add = function (item) {\n        this._items.add(item);\n        if (this._items.size > this._limit) {\n            var it_1 = this._items.values().next();\n            /* istanbul ignore else */\n            if (!it_1.done) {\n                this._items.delete(it_1.value);\n            }\n        }\n        return this;\n    };\n    /**\n     * Removes an item from the set.\n     *\n     * @param item - an item\n     */\n    FixedSizeSet.prototype.delete = function (item) {\n        return this._items.delete(item);\n    };\n    /**\n     * Determines if an item is in the set.\n     *\n     * @param item - an item\n     */\n    FixedSizeSet.prototype.has = function (item) {\n        return this._items.has(item);\n    };\n    /**\n     * Removes all items from the set.\n     */\n    FixedSizeSet.prototype.clear = function () {\n        this._items.clear();\n    };\n    Object.defineProperty(FixedSizeSet.prototype, \"size\", {\n        /**\n         * Gets the number of items in the set.\n         */\n        get: function () { return this._items.size; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Applies the given callback function to all elements of the set.\n     */\n    FixedSizeSet.prototype.forEach = function (callback, thisArg) {\n        var _this = this;\n        this._items.forEach(function (e) { return callback.call(thisArg, e, e, _this); });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    FixedSizeSet.prototype.keys = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items.keys())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    FixedSizeSet.prototype.values = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items.values())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    FixedSizeSet.prototype.entries = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items.entries())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    /**\n     * Iterates through the items in the set.\n     */\n    FixedSizeSet.prototype[Symbol.iterator] = function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [5 /*yield**/, __values(this._items)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    Object.defineProperty(FixedSizeSet.prototype, Symbol.toStringTag, {\n        /**\n         * Returns the string tag of the set.\n         */\n        get: function () {\n            return \"FixedSizeSet\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FixedSizeSet;\n}());\nexports.FixedSizeSet = FixedSizeSet;\n//# sourceMappingURL=FixedSizeSet.js.map","'use strict';\n\nvar Type = require('../type');\n\nmodule.exports = new Type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n","'use strict';\n\nvar Type = require('../type');\n\nmodule.exports = new Type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents the state of the URL parser.\n */\nvar ParserState;\n(function (ParserState) {\n    ParserState[ParserState[\"SchemeStart\"] = 0] = \"SchemeStart\";\n    ParserState[ParserState[\"Scheme\"] = 1] = \"Scheme\";\n    ParserState[ParserState[\"NoScheme\"] = 2] = \"NoScheme\";\n    ParserState[ParserState[\"SpecialRelativeOrAuthority\"] = 3] = \"SpecialRelativeOrAuthority\";\n    ParserState[ParserState[\"PathOrAuthority\"] = 4] = \"PathOrAuthority\";\n    ParserState[ParserState[\"Relative\"] = 5] = \"Relative\";\n    ParserState[ParserState[\"RelativeSlash\"] = 6] = \"RelativeSlash\";\n    ParserState[ParserState[\"SpecialAuthoritySlashes\"] = 7] = \"SpecialAuthoritySlashes\";\n    ParserState[ParserState[\"SpecialAuthorityIgnoreSlashes\"] = 8] = \"SpecialAuthorityIgnoreSlashes\";\n    ParserState[ParserState[\"Authority\"] = 9] = \"Authority\";\n    ParserState[ParserState[\"Host\"] = 10] = \"Host\";\n    ParserState[ParserState[\"Hostname\"] = 11] = \"Hostname\";\n    ParserState[ParserState[\"Port\"] = 12] = \"Port\";\n    ParserState[ParserState[\"File\"] = 13] = \"File\";\n    ParserState[ParserState[\"FileSlash\"] = 14] = \"FileSlash\";\n    ParserState[ParserState[\"FileHost\"] = 15] = \"FileHost\";\n    ParserState[ParserState[\"PathStart\"] = 16] = \"PathStart\";\n    ParserState[ParserState[\"Path\"] = 17] = \"Path\";\n    ParserState[ParserState[\"CannotBeABaseURLPath\"] = 18] = \"CannotBeABaseURLPath\";\n    ParserState[ParserState[\"Query\"] = 19] = \"Query\";\n    ParserState[ParserState[\"Fragment\"] = 20] = \"Fragment\";\n})(ParserState = exports.ParserState || (exports.ParserState = {}));\nexports.OpaqueOrigin = [\"\", \"\", null, null];\n//# sourceMappingURL=interfaces.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar util_1 = require(\"../util\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar CreateAlgorithm_1 = require(\"./CreateAlgorithm\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar EventAlgorithm_1 = require(\"./EventAlgorithm\");\n/**\n * Queues a mutation observer microtask to the surrounding agent’s mutation\n * observers.\n */\nfunction observer_queueAMutationObserverMicrotask() {\n    /**\n     * 1. If the surrounding agent’s mutation observer microtask queued is true,\n     * then return.\n     * 2. Set the surrounding agent’s mutation observer microtask queued to true.\n     * 3. Queue a microtask to notify mutation observers.\n     */\n    var window = DOMImpl_1.dom.window;\n    if (window._mutationObserverMicrotaskQueued)\n        return;\n    window._mutationObserverMicrotaskQueued = true;\n    Promise.resolve().then(function () { observer_notifyMutationObservers(); });\n}\nexports.observer_queueAMutationObserverMicrotask = observer_queueAMutationObserverMicrotask;\n/**\n * Notifies the surrounding agent’s mutation observers.\n */\nfunction observer_notifyMutationObservers() {\n    var e_1, _a, e_2, _b;\n    /**\n     * 1. Set the surrounding agent’s mutation observer microtask queued to false.\n     * 2. Let notifySet be a clone of the surrounding agent’s mutation observers.\n     * 3. Let signalSet be a clone of the surrounding agent’s signal slots.\n     * 4. Empty the surrounding agent’s signal slots.\n     */\n    var window = DOMImpl_1.dom.window;\n    window._mutationObserverMicrotaskQueued = false;\n    var notifySet = infra_1.set.clone(window._mutationObservers);\n    var signalSet = infra_1.set.clone(window._signalSlots);\n    infra_1.set.empty(window._signalSlots);\n    var _loop_1 = function (mo) {\n        /**\n         * 5.1. Let records be a clone of mo’s record queue.\n         * 5.2. Empty mo’s record queue.\n         */\n        var records = infra_1.list.clone(mo._recordQueue);\n        infra_1.list.empty(mo._recordQueue);\n        /**\n         * 5.3. For each node of mo’s node list, remove all transient registered\n         * observers whose observer is mo from node’s registered observer list.\n         */\n        for (var i = 0; i < mo._nodeList.length; i++) {\n            var node = mo._nodeList[i];\n            infra_1.list.remove(node._registeredObserverList, function (observer) {\n                return util_1.Guard.isTransientRegisteredObserver(observer) && observer.observer === mo;\n            });\n        }\n        /**\n         * 5.4. If records is not empty, then invoke mo’s callback with « records,\n         * mo », and mo. If this throws an exception, then report the exception.\n         */\n        if (!infra_1.list.isEmpty(records)) {\n            try {\n                mo._callback.call(mo, records, mo);\n            }\n            catch (err) {\n                // TODO: Report the exception\n            }\n        }\n    };\n    try {\n        /**\n         * 5. For each mo of notifySet:\n         */\n        for (var notifySet_1 = __values(notifySet), notifySet_1_1 = notifySet_1.next(); !notifySet_1_1.done; notifySet_1_1 = notifySet_1.next()) {\n            var mo = notifySet_1_1.value;\n            _loop_1(mo);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (notifySet_1_1 && !notifySet_1_1.done && (_a = notifySet_1.return)) _a.call(notifySet_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    /**\n     * 6. For each slot of signalSet, fire an event named slotchange, with its\n     * bubbles attribute set to true, at slot.\n     */\n    if (DOMImpl_1.dom.features.slots) {\n        try {\n            for (var signalSet_1 = __values(signalSet), signalSet_1_1 = signalSet_1.next(); !signalSet_1_1.done; signalSet_1_1 = signalSet_1.next()) {\n                var slot = signalSet_1_1.value;\n                EventAlgorithm_1.event_fireAnEvent(\"slotchange\", slot, undefined, { bubbles: true });\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (signalSet_1_1 && !signalSet_1_1.done && (_b = signalSet_1.return)) _b.call(signalSet_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n}\nexports.observer_notifyMutationObservers = observer_notifyMutationObservers;\n/**\n * Queues a mutation record of the given type for target.\n *\n * @param type - mutation record type\n * @param target - target node\n * @param name - name before mutation\n * @param namespace - namespace before mutation\n * @param oldValue - attribute value before mutation\n * @param addedNodes - a list od added nodes\n * @param removedNodes - a list of removed nodes\n * @param previousSibling - previous sibling of target before mutation\n * @param nextSibling - next sibling of target before mutation\n */\nfunction observer_queueMutationRecord(type, target, name, namespace, oldValue, addedNodes, removedNodes, previousSibling, nextSibling) {\n    var e_3, _a;\n    /**\n     * 1. Let interestedObservers be an empty map.\n     * 2. Let nodes be the inclusive ancestors of target.\n     * 3. For each node in nodes, and then for each registered of node’s\n     * registered observer list:\n     */\n    var interestedObservers = new Map();\n    var node = TreeAlgorithm_1.tree_getFirstAncestorNode(target, true);\n    while (node !== null) {\n        for (var i = 0; i < node._registeredObserverList.length; i++) {\n            var registered = node._registeredObserverList[i];\n            /**\n             * 3.1. Let options be registered’s options.\n             * 3.2. If none of the following are true\n             * - node is not target and options’s subtree is false\n             * - type is \"attributes\" and options’s attributes is not true\n             * - type is \"attributes\", options’s attributeFilter is present, and\n             * options’s attributeFilter does not contain name or namespace is\n             * non-null\n             * - type is \"characterData\" and options’s characterData is not true\n             * - type is \"childList\" and options’s childList is false\n             */\n            var options = registered.options;\n            if (node !== target && !options.subtree)\n                continue;\n            if (type === \"attributes\" && !options.attributes)\n                continue;\n            if (type === \"attributes\" && options.attributeFilter &&\n                (!options.attributeFilter.indexOf(name || '') || namespace !== null))\n                continue;\n            if (type === \"characterData\" && !options.characterData)\n                continue;\n            if (type === \"childList\" && !options.childList)\n                continue;\n            /**\n             * then:\n             * 3.2.1. Let mo be registered’s observer.\n             * 3.2.2. If interestedObservers[mo] does not exist, then set\n             * interestedObservers[mo] to null.\n             * 3.2.3. If either type is \"attributes\" and options’s attributeOldValue\n             * is true, or type is \"characterData\" and options’s\n             * characterDataOldValue is true, then set interestedObservers[mo]\n             * to oldValue.\n             */\n            var mo = registered.observer;\n            if (!interestedObservers.has(mo)) {\n                interestedObservers.set(mo, null);\n            }\n            if ((type === \"attributes\" && options.attributeOldValue) ||\n                (type === \"characterData\" && options.characterDataOldValue)) {\n                interestedObservers.set(mo, oldValue);\n            }\n        }\n        node = TreeAlgorithm_1.tree_getNextAncestorNode(target, node, true);\n    }\n    try {\n        /**\n         * 4. For each observer → mappedOldValue of interestedObservers:\n         */\n        for (var interestedObservers_1 = __values(interestedObservers), interestedObservers_1_1 = interestedObservers_1.next(); !interestedObservers_1_1.done; interestedObservers_1_1 = interestedObservers_1.next()) {\n            var _b = __read(interestedObservers_1_1.value, 2), observer = _b[0], mappedOldValue = _b[1];\n            /**\n             * 4.1. Let record be a new MutationRecord object with its type set to\n             * type, target set to target, attributeName set to name,\n             * attributeNamespace set to namespace, oldValue set to mappedOldValue,\n             * addedNodes set to addedNodes, removedNodes set to removedNodes,\n             * previousSibling set to previousSibling, and nextSibling set to\n             * nextSibling.\n             * 4.2. Enqueue record to observer’s record queue.\n             */\n            var record = CreateAlgorithm_1.create_mutationRecord(type, target, CreateAlgorithm_1.create_nodeListStatic(target, addedNodes), CreateAlgorithm_1.create_nodeListStatic(target, removedNodes), previousSibling, nextSibling, name, namespace, mappedOldValue);\n            var queue = observer._recordQueue;\n            queue.push(record);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (interestedObservers_1_1 && !interestedObservers_1_1.done && (_a = interestedObservers_1.return)) _a.call(interestedObservers_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    /**\n     * 5. Queue a mutation observer microtask.\n     */\n    observer_queueAMutationObserverMicrotask();\n}\nexports.observer_queueMutationRecord = observer_queueMutationRecord;\n/**\n * Queues a tree mutation record for target.\n *\n * @param target - target node\n * @param addedNodes - a list od added nodes\n * @param removedNodes - a list of removed nodes\n * @param previousSibling - previous sibling of target before mutation\n * @param nextSibling - next sibling of target before mutation\n */\nfunction observer_queueTreeMutationRecord(target, addedNodes, removedNodes, previousSibling, nextSibling) {\n    /**\n     * To queue a tree mutation record for target with addedNodes, removedNodes,\n     * previousSibling, and nextSibling, queue a mutation record of \"childList\"\n     * for target with null, null, null, addedNodes, removedNodes,\n     * previousSibling, and nextSibling.\n     */\n    observer_queueMutationRecord(\"childList\", target, null, null, null, addedNodes, removedNodes, previousSibling, nextSibling);\n}\nexports.observer_queueTreeMutationRecord = observer_queueTreeMutationRecord;\n/**\n * Queues an attribute mutation record for target.\n *\n * @param target - target node\n * @param name - name before mutation\n * @param namespace - namespace before mutation\n * @param oldValue - attribute value before mutation\n */\nfunction observer_queueAttributeMutationRecord(target, name, namespace, oldValue) {\n    /**\n     * To queue an attribute mutation record for target with name, namespace,\n     * and oldValue, queue a mutation record of \"attributes\" for target with\n     * name, namespace, oldValue, « », « », null, and null.\n     */\n    observer_queueMutationRecord(\"attributes\", target, name, namespace, oldValue, [], [], null, null);\n}\nexports.observer_queueAttributeMutationRecord = observer_queueAttributeMutationRecord;\n//# sourceMappingURL=MutationObserverAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A surrogate is a code point that is in the range U+D800 to U+DFFF, inclusive.\n */\nexports.Surrogate = /[\\uD800-\\uDFFF]/;\n/**\n * A scalar value is a code point that is not a surrogate.\n */\nexports.ScalarValue = /[\\uD800-\\uDFFF]/;\n/**\n * A noncharacter is a code point that is in the range U+FDD0 to U+FDEF,\n * inclusive, or U+FFFE, U+FFFF, U+1FFFE, U+1FFFF, U+2FFFE, U+2FFFF, U+3FFFE,\n * U+3FFFF, U+4FFFE, U+4FFFF, U+5FFFE, U+5FFFF, U+6FFFE, U+6FFFF, U+7FFFE,\n * U+7FFFF, U+8FFFE, U+8FFFF, U+9FFFE, U+9FFFF, U+AFFFE, U+AFFFF, U+BFFFE,\n * U+BFFFF, U+CFFFE, U+CFFFF, U+DFFFE, U+DFFFF, U+EFFFE, U+EFFFF, U+FFFFE,\n * U+FFFFF, U+10FFFE, or U+10FFFF.\n */\nexports.NonCharacter = /[\\uFDD0-\\uFDEF\\uFFFE\\uFFFF]|[\\uD83F\\uD87F\\uD8BF\\uD8FF\\uD93F\\uD97F\\uD9BF\\uD9FF\\uDA3F\\uDA7F\\uDABF\\uDAFF\\uDB3F\\uDB7F\\uDBBF\\uDBFF][\\uDFFE\\uDFFF]/;\n/**\n * An ASCII code point is a code point in the range U+0000 NULL to U+007F\n * DELETE, inclusive.\n */\nexports.ASCIICodePoint = /[\\u0000-\\u007F]/;\n/**\n * An ASCII tab or newline is U+0009 TAB, U+000A LF, or U+000D CR.\n */\nexports.ASCIITabOrNewLine = /[\\t\\n\\r]/;\n/**\n * ASCII whitespace is U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, or\n * U+0020 SPACE.\n */\nexports.ASCIIWhiteSpace = /[\\t\\n\\f\\r ]/;\n/**\n * A C0 control is a code point in the range U+0000 NULL to U+001F\n * INFORMATION SEPARATOR ONE, inclusive.\n */\nexports.C0Control = /[\\u0000-\\u001F]/;\n/**\n * A C0 control or space is a C0 control or U+0020 SPACE.\n */\nexports.C0ControlOrSpace = /[\\u0000-\\u001F ]/;\n/**\n * A control is a C0 control or a code point in the range U+007F DELETE to\n * U+009F APPLICATION PROGRAM COMMAND, inclusive.\n */\nexports.Control = /[\\u0000-\\u001F\\u007F-\\u009F]/;\n/**\n * An ASCII digit is a code point in the range U+0030 (0) to U+0039 (9),\n * inclusive.\n */\nexports.ASCIIDigit = /[0-9]/;\n/**\n * An ASCII upper hex digit is an ASCII digit or a code point in the range\n * U+0041 (A) to U+0046 (F), inclusive.\n */\nexports.ASCIIUpperHexDigit = /[0-9A-F]/;\n/**\n * An ASCII lower hex digit is an ASCII digit or a code point in the range\n * U+0061 (a) to U+0066 (f), inclusive.\n */\nexports.ASCIILowerHexDigit = /[0-9a-f]/;\n/**\n * An ASCII hex digit is an ASCII upper hex digit or ASCII lower hex digit.\n */\nexports.ASCIIHexDigit = /[0-9A-Fa-f]/;\n/**\n * An ASCII upper alpha is a code point in the range U+0041 (A) to U+005A (Z),\n * inclusive.\n */\nexports.ASCIIUpperAlpha = /[A-Z]/;\n/**\n * An ASCII lower alpha is a code point in the range U+0061 (a) to U+007A (z),\n * inclusive.\n */\nexports.ASCIILowerAlpha = /[a-z]/;\n/**\n * An ASCII alpha is an ASCII upper alpha or ASCII lower alpha.\n */\nexports.ASCIIAlpha = /[A-Za-z]/;\n/**\n * An ASCII alphanumeric is an ASCII digit or ASCII alpha.\n */\nexports.ASCIIAlphanumeric = /[0-9A-Za-z]/;\n//# sourceMappingURL=CodePoints.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Export classes\nvar DOMParserImpl_1 = require(\"./DOMParserImpl\");\nexports.DOMParser = DOMParserImpl_1.DOMParserImpl;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventAlgorithm_1 = require(\"./EventAlgorithm\");\n/**\n * Adds an algorithm to the given abort signal.\n *\n * @param algorithm - an algorithm\n * @param signal - abort signal\n */\nfunction abort_add(algorithm, signal) {\n    /**\n     * 1. If signal’s aborted flag is set, then return.\n     * 2. Append algorithm to signal’s abort algorithms.\n     */\n    if (signal._abortedFlag)\n        return;\n    signal._abortAlgorithms.add(algorithm);\n}\nexports.abort_add = abort_add;\n/**\n * Removes an algorithm from the given abort signal.\n *\n * @param algorithm - an algorithm\n * @param signal - abort signal\n */\nfunction abort_remove(algorithm, signal) {\n    /**\n     * To remove an algorithm algorithm from an AbortSignal signal, remove\n     * algorithm from signal’s abort algorithms.\n     */\n    signal._abortAlgorithms.delete(algorithm);\n}\nexports.abort_remove = abort_remove;\n/**\n * Signals abort on the given abort signal.\n *\n * @param signal - abort signal\n */\nfunction abort_signalAbort(signal) {\n    var e_1, _a;\n    /**\n     * 1. If signal’s aborted flag is set, then return.\n     * 2. Set signal’s aborted flag.\n     * 3. For each algorithm in signal’s abort algorithms: run algorithm.\n     * 4. Empty signal’s abort algorithms.\n     * 5. Fire an event named abort at signal.\n     */\n    if (signal._abortedFlag)\n        return;\n    signal._abortedFlag = true;\n    try {\n        for (var _b = __values(signal._abortAlgorithms), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var algorithm = _c.value;\n            algorithm.call(signal);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    signal._abortAlgorithms.clear();\n    EventAlgorithm_1.event_fireAnEvent(\"abort\", signal);\n}\nexports.abort_signalAbort = abort_signalAbort;\n//# sourceMappingURL=AbortAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Cast_1 = require(\"./Cast\");\nexports.Cast = Cast_1.Cast;\nvar Guard_1 = require(\"./Guard\");\nexports.Guard = Guard_1.Guard;\nvar EmptySet_1 = require(\"./EmptySet\");\nexports.EmptySet = EmptySet_1.EmptySet;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar TraversalAlgorithm_1 = require(\"./TraversalAlgorithm\");\n/**\n * Returns the first or last child node, or `null` if there are none.\n *\n * @param walker - the `TreeWalker` instance\n * @param first - `true` to return the first child node, or `false` to\n * return the last child node.\n */\nfunction treeWalker_traverseChildren(walker, first) {\n    /**\n     * 1. Let node be walker’s current.\n     * 2. Set node to node’s first child if type is first, and node’s last child\n     * if type is last.\n     * 3. While node is non-null:\n     */\n    var node = (first ? walker._current._firstChild : walker._current._lastChild);\n    while (node !== null) {\n        /**\n         * 3.1. Let result be the result of filtering node within walker.\n         */\n        var result = TraversalAlgorithm_1.traversal_filter(walker, node);\n        if (result === interfaces_1.FilterResult.Accept) {\n            /**\n             * 3.2. If result is FILTER_ACCEPT, then set walker’s current to node and\n             * return node.\n             */\n            walker._current = node;\n            return node;\n        }\n        else if (result === interfaces_1.FilterResult.Skip) {\n            /**\n             * 3.3. If result is FILTER_SKIP, then:\n             * 3.3.1. Let child be node’s first child if type is first, and node’s\n             * last child if type is last.\n             * 3.3.2. If child is non-null, then set node to child and continue.\n             */\n            var child = (first ? node._firstChild : node._lastChild);\n            if (child !== null) {\n                node = child;\n                continue;\n            }\n        }\n        /**\n         * 3.4. While node is non-null:\n         */\n        while (node !== null) {\n            /**\n             * 3.4.1. Let sibling be node’s next sibling if type is first, and\n             * node’s previous sibling if type is last.\n             * 3.4.2. If sibling is non-null, then set node to sibling and break.\n             */\n            var sibling = (first ? node._nextSibling : node._previousSibling);\n            if (sibling !== null) {\n                node = sibling;\n                break;\n            }\n            /**\n             * 3.4.3. Let parent be node’s parent.\n             * 3.4.4. If parent is null, walker’s root, or walker’s current, then\n             * return null.\n             */\n            var parent = node._parent;\n            if (parent === null || parent === walker._root || parent === walker._current) {\n                return null;\n            }\n            /**\n             * 3.4.5. Set node to parent.\n             */\n            node = parent;\n        }\n    }\n    /**\n     * 5. Return null\n     */\n    return null;\n}\nexports.treeWalker_traverseChildren = treeWalker_traverseChildren;\n/**\n * Returns the next or previous sibling node, or `null` if there are none.\n *\n * @param walker - the `TreeWalker` instance\n * @param next - `true` to return the next sibling node, or `false` to\n * return the previous sibling node.\n */\nfunction treeWalker_traverseSiblings(walker, next) {\n    /**\n     * 1. Let node be walker’s current.\n     * 2. If node is root, then return null.\n     * 3. While node is non-null:\n     */\n    var node = walker._current;\n    if (node === walker._root)\n        return null;\n    while (true) {\n        /**\n         * 3.1. Let sibling be node’s next sibling if type is next, and node’s\n         * previous sibling if type is previous.\n         * 3.2. While sibling is non-null:\n         */\n        var sibling = (next ? node._nextSibling : node._previousSibling);\n        while (sibling !== null) {\n            /**\n             * 3.2.1. Set node to sibling.\n             * 3.2.2. Let result be the result of filtering node within walker.\n             * 3.2.3. If result is FILTER_ACCEPT, then set walker’s current to node\n             * and return node.\n             */\n            node = sibling;\n            var result = TraversalAlgorithm_1.traversal_filter(walker, node);\n            if (result === interfaces_1.FilterResult.Accept) {\n                walker._current = node;\n                return node;\n            }\n            /**\n             * 3.2.4. Set sibling to node’s first child if type is next, and node’s\n             * last child if type is previous.\n             * 3.2.5. If result is FILTER_REJECT or sibling is null, then set\n             * sibling to node’s next sibling if type is next, and node’s previous\n             * sibling if type is previous.\n             */\n            sibling = (next ? node._firstChild : node._lastChild);\n            if (result === interfaces_1.FilterResult.Reject || sibling === null) {\n                sibling = (next ? node._nextSibling : node._previousSibling);\n            }\n        }\n        /**\n         * 3.3. Set node to node’s parent.\n         * 3.4. If node is null or walker’s root, then return null.\n         */\n        node = node._parent;\n        if (node === null || node === walker._root) {\n            return null;\n        }\n        /**\n         * 3.5. If the return value of filtering node within walker is FILTER_ACCEPT,\n         * then return null.\n         */\n        if (TraversalAlgorithm_1.traversal_filter(walker, node) === interfaces_1.FilterResult.Accept) {\n            return null;\n        }\n    }\n}\nexports.treeWalker_traverseSiblings = treeWalker_traverseSiblings;\n//# sourceMappingURL=TreeWalkerAlgorithm.js.map","module.exports = require(\"path\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar XMLStringLexer_1 = require(\"@oozcitak/dom/lib/parser/XMLStringLexer\");\nvar interfaces_1 = require(\"@oozcitak/dom/lib/parser/interfaces\");\nvar interfaces_2 = require(\"@oozcitak/dom/lib/dom/interfaces\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"@oozcitak/dom/lib/algorithm\");\nvar BaseReader_1 = require(\"./BaseReader\");\n/**\n * Parses XML nodes from an XML document string.\n */\nvar XMLReader = /** @class */ (function (_super) {\n    __extends(XMLReader, _super);\n    function XMLReader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Parses the given document representation.\n     *\n     * @param node - node receive parsed XML nodes\n     * @param str - XML document string to parse\n     */\n    XMLReader.prototype._parse = function (node, str) {\n        var e_1, _a, e_2, _b;\n        var lexer = new XMLStringLexer_1.XMLStringLexer(str, { skipWhitespaceOnlyText: this._builderOptions.skipWhitespaceOnlyText });\n        var lastChild = node;\n        var context = node;\n        var token = lexer.nextToken();\n        while (token.type !== interfaces_1.TokenType.EOF) {\n            switch (token.type) {\n                case interfaces_1.TokenType.Declaration:\n                    var declaration = token;\n                    var version = this.sanitize(declaration.version);\n                    if (version !== \"1.0\") {\n                        throw new Error(\"Invalid xml version: \" + version);\n                    }\n                    var builderOptions = {\n                        version: version\n                    };\n                    if (declaration.encoding) {\n                        builderOptions.encoding = this.sanitize(declaration.encoding);\n                    }\n                    if (declaration.standalone) {\n                        builderOptions.standalone = (this.sanitize(declaration.standalone) === \"yes\");\n                    }\n                    context.set(builderOptions);\n                    break;\n                case interfaces_1.TokenType.DocType:\n                    var doctype = token;\n                    context = this.docType(context, this.sanitize(doctype.name), this.sanitize(doctype.pubId), this.sanitize(doctype.sysId)) || context;\n                    break;\n                case interfaces_1.TokenType.CDATA:\n                    var cdata = token;\n                    context = this.cdata(context, this.sanitize(cdata.data)) || context;\n                    break;\n                case interfaces_1.TokenType.Comment:\n                    var comment = token;\n                    context = this.comment(context, this.sanitize(comment.data)) || context;\n                    break;\n                case interfaces_1.TokenType.PI:\n                    var pi = token;\n                    context = this.instruction(context, this.sanitize(pi.target), this.sanitize(pi.data)) || context;\n                    break;\n                case interfaces_1.TokenType.Text:\n                    if (context.node.nodeType === interfaces_2.NodeType.Document)\n                        break;\n                    var text = token;\n                    context = this.text(context, this._decodeText(this.sanitize(text.data))) || context;\n                    break;\n                case interfaces_1.TokenType.Element:\n                    var element = token;\n                    var elementName = this.sanitize(element.name);\n                    // inherit namespace from parent\n                    var _c = __read(algorithm_1.namespace_extractQName(elementName), 1), prefix = _c[0];\n                    var namespace = context.node.lookupNamespaceURI(prefix);\n                    // override namespace if there is a namespace declaration\n                    // attribute\n                    // also lookup namespace declaration attributes\n                    var nsDeclarations = {};\n                    try {\n                        for (var _d = (e_1 = void 0, __values(element.attributes)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                            var _f = __read(_e.value, 2), attName = _f[0], attValue = _f[1];\n                            attName = this.sanitize(attName);\n                            attValue = this.sanitize(attValue);\n                            if (attName === \"xmlns\") {\n                                namespace = attValue;\n                            }\n                            else {\n                                var _g = __read(algorithm_1.namespace_extractQName(attName), 2), attPrefix = _g[0], attLocalName = _g[1];\n                                if (attPrefix === \"xmlns\") {\n                                    if (attLocalName === prefix) {\n                                        namespace = attValue;\n                                    }\n                                    nsDeclarations[attLocalName] = attValue;\n                                }\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    // create the DOM element node\n                    var elementNode = (namespace !== null ?\n                        this.element(context, namespace, elementName) :\n                        this.element(context, undefined, elementName));\n                    if (elementNode === undefined)\n                        break;\n                    if (context.node === node.node)\n                        lastChild = elementNode;\n                    try {\n                        // assign attributes\n                        for (var _h = (e_2 = void 0, __values(element.attributes)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                            var _k = __read(_j.value, 2), attName = _k[0], attValue = _k[1];\n                            attName = this.sanitize(attName);\n                            attValue = this.sanitize(attValue);\n                            var _l = __read(algorithm_1.namespace_extractQName(attName), 2), attPrefix = _l[0], attLocalName = _l[1];\n                            var attNamespace = null;\n                            if (attPrefix === \"xmlns\" || (attPrefix === null && attLocalName === \"xmlns\")) {\n                                // namespace declaration attribute\n                                attNamespace = infra_1.namespace.XMLNS;\n                            }\n                            else {\n                                attNamespace = elementNode.node.lookupNamespaceURI(attPrefix);\n                                if (attNamespace !== null && elementNode.node.isDefaultNamespace(attNamespace)) {\n                                    attNamespace = null;\n                                }\n                                else if (attNamespace === null && attPrefix !== null) {\n                                    attNamespace = nsDeclarations[attPrefix] || null;\n                                }\n                            }\n                            if (attNamespace !== null)\n                                this.attribute(elementNode, attNamespace, attName, this._decodeAttributeValue(attValue));\n                            else\n                                this.attribute(elementNode, undefined, attName, this._decodeAttributeValue(attValue));\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                    if (!element.selfClosing) {\n                        context = elementNode;\n                    }\n                    break;\n                case interfaces_1.TokenType.ClosingTag:\n                    /* istanbul ignore else */\n                    if (context.node.parentNode) {\n                        context = context.up();\n                    }\n                    break;\n            }\n            token = lexer.nextToken();\n        }\n        return lastChild;\n    };\n    return XMLReader;\n}(BaseReader_1.BaseReader));\nexports.XMLReader = XMLReader;\n//# sourceMappingURL=XMLReader.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar NodeImpl_1 = require(\"./NodeImpl\");\nvar DOMException_1 = require(\"./DOMException\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents an element node.\n */\nvar ElementImpl = /** @class */ (function (_super) {\n    __extends(ElementImpl, _super);\n    /**\n     * Initializes a new instance of `Element`.\n     */\n    function ElementImpl() {\n        var _this = _super.call(this) || this;\n        _this._children = new Set();\n        _this._namespace = null;\n        _this._namespacePrefix = null;\n        _this._localName = \"\";\n        _this._customElementState = \"undefined\";\n        _this._customElementDefinition = null;\n        _this._is = null;\n        _this._shadowRoot = null;\n        _this._attributeList = algorithm_1.create_namedNodeMap(_this);\n        _this._attributeChangeSteps = [];\n        _this._name = '';\n        _this._assignedSlot = null;\n        return _this;\n    }\n    Object.defineProperty(ElementImpl.prototype, \"namespaceURI\", {\n        /** @inheritdoc */\n        get: function () { return this._namespace; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"prefix\", {\n        /** @inheritdoc */\n        get: function () { return this._namespacePrefix; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"localName\", {\n        /** @inheritdoc */\n        get: function () { return this._localName; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"tagName\", {\n        /** @inheritdoc */\n        get: function () { return this._htmlUppercasedQualifiedName; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"id\", {\n        /** @inheritdoc */\n        get: function () {\n            return algorithm_1.element_getAnAttributeValue(this, \"id\");\n        },\n        set: function (value) {\n            algorithm_1.element_setAnAttributeValue(this, \"id\", value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"className\", {\n        /** @inheritdoc */\n        get: function () {\n            return algorithm_1.element_getAnAttributeValue(this, \"class\");\n        },\n        set: function (value) {\n            algorithm_1.element_setAnAttributeValue(this, \"class\", value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"classList\", {\n        /** @inheritdoc */\n        get: function () {\n            var attr = algorithm_1.element_getAnAttributeByName(\"class\", this);\n            if (attr === null) {\n                attr = algorithm_1.create_attr(this._nodeDocument, \"class\");\n            }\n            return algorithm_1.create_domTokenList(this, attr);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"slot\", {\n        /** @inheritdoc */\n        get: function () {\n            return algorithm_1.element_getAnAttributeValue(this, \"slot\");\n        },\n        set: function (value) {\n            algorithm_1.element_setAnAttributeValue(this, \"slot\", value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    ElementImpl.prototype.hasAttributes = function () {\n        return this._attributeList.length !== 0;\n    };\n    Object.defineProperty(ElementImpl.prototype, \"attributes\", {\n        /** @inheritdoc */\n        get: function () { return this._attributeList; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    ElementImpl.prototype.getAttributeNames = function () {\n        var e_1, _a;\n        /**\n         * The getAttributeNames() method, when invoked, must return the qualified\n         * names of the attributes in context object’s attribute list, in order,\n         * and a new list otherwise.\n         */\n        var names = [];\n        try {\n            for (var _b = __values(this._attributeList), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                names.push(attr._qualifiedName);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return names;\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getAttribute = function (qualifiedName) {\n        /**\n         * 1. Let attr be the result of getting an attribute given qualifiedName\n         * and the context object.\n         * 2. If attr is null, return null.\n         * 3. Return attr’s value.\n         */\n        var attr = algorithm_1.element_getAnAttributeByName(qualifiedName, this);\n        return (attr ? attr._value : null);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getAttributeNS = function (namespace, localName) {\n        /**\n         * 1. Let attr be the result of getting an attribute given namespace,\n         * localName, and the context object.\n         * 2. If attr is null, return null.\n         * 3. Return attr’s value.\n         */\n        var attr = algorithm_1.element_getAnAttributeByNamespaceAndLocalName(namespace, localName, this);\n        return (attr ? attr._value : null);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.setAttribute = function (qualifiedName, value) {\n        /**\n         * 1. If qualifiedName does not match the Name production in XML, then\n         * throw an \"InvalidCharacterError\" DOMException.\n         */\n        if (!algorithm_1.xml_isName(qualifiedName))\n            throw new DOMException_1.InvalidCharacterError();\n        /**\n         * 2. If the context object is in the HTML namespace and its node document\n         * is an HTML document, then set qualifiedName to qualifiedName in ASCII\n         * lowercase.\n         */\n        if (this._namespace === infra_1.namespace.HTML && this._nodeDocument._type === \"html\") {\n            qualifiedName = qualifiedName.toLowerCase();\n        }\n        /**\n         * 3. Let attribute be the first attribute in context object’s attribute\n         * list whose qualified name is qualifiedName, and null otherwise.\n         */\n        var attribute = null;\n        for (var i = 0; i < this._attributeList.length; i++) {\n            var attr = this._attributeList[i];\n            if (attr._qualifiedName === qualifiedName) {\n                attribute = attr;\n                break;\n            }\n        }\n        /**\n         * 4. If attribute is null, create an attribute whose local name is\n         * qualifiedName, value is value, and node document is context object’s\n         * node document, then append this attribute to context object, and\n         * then return.\n         */\n        if (attribute === null) {\n            attribute = algorithm_1.create_attr(this._nodeDocument, qualifiedName);\n            attribute._value = value;\n            algorithm_1.element_append(attribute, this);\n            return;\n        }\n        /**\n         * 5. Change attribute from context object to value.\n         */\n        algorithm_1.element_change(attribute, this, value);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.setAttributeNS = function (namespace, qualifiedName, value) {\n        /**\n         * 1. Let namespace, prefix, and localName be the result of passing\n         * namespace and qualifiedName to validate and extract.\n         * 2. Set an attribute value for the context object using localName, value,\n         * and also prefix and namespace.\n         */\n        var _a = __read(algorithm_1.namespace_validateAndExtract(namespace, qualifiedName), 3), ns = _a[0], prefix = _a[1], localName = _a[2];\n        algorithm_1.element_setAnAttributeValue(this, localName, value, prefix, ns);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.removeAttribute = function (qualifiedName) {\n        /**\n         * The removeAttribute(qualifiedName) method, when invoked, must remove an\n         * attribute given qualifiedName and the context object, and then return\n         * undefined.\n         */\n        algorithm_1.element_removeAnAttributeByName(qualifiedName, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.removeAttributeNS = function (namespace, localName) {\n        /**\n         * The removeAttributeNS(namespace, localName) method, when invoked, must\n         * remove an attribute given namespace, localName, and context object, and\n         * then return undefined.\n         */\n        algorithm_1.element_removeAnAttributeByNamespaceAndLocalName(namespace, localName, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.hasAttribute = function (qualifiedName) {\n        /**\n         * 1. If the context object is in the HTML namespace and its node document\n         * is an HTML document, then set qualifiedName to qualifiedName in ASCII\n         * lowercase.\n         * 2. Return true if the context object has an attribute whose qualified\n         * name is qualifiedName, and false otherwise.\n         */\n        if (this._namespace === infra_1.namespace.HTML && this._nodeDocument._type === \"html\") {\n            qualifiedName = qualifiedName.toLowerCase();\n        }\n        for (var i = 0; i < this._attributeList.length; i++) {\n            var attr = this._attributeList[i];\n            if (attr._qualifiedName === qualifiedName) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.toggleAttribute = function (qualifiedName, force) {\n        /**\n         * 1. If qualifiedName does not match the Name production in XML, then\n         * throw an \"InvalidCharacterError\" DOMException.\n         */\n        if (!algorithm_1.xml_isName(qualifiedName))\n            throw new DOMException_1.InvalidCharacterError();\n        /**\n         * 2. If the context object is in the HTML namespace and its node document\n         * is an HTML document, then set qualifiedName to qualifiedName in ASCII\n         * lowercase.\n         */\n        if (this._namespace === infra_1.namespace.HTML && this._nodeDocument._type === \"html\") {\n            qualifiedName = qualifiedName.toLowerCase();\n        }\n        /**\n         * 3. Let attribute be the first attribute in the context object’s attribute\n         * list whose qualified name is qualifiedName, and null otherwise.\n         */\n        var attribute = null;\n        for (var i = 0; i < this._attributeList.length; i++) {\n            var attr = this._attributeList[i];\n            if (attr._qualifiedName === qualifiedName) {\n                attribute = attr;\n                break;\n            }\n        }\n        if (attribute === null) {\n            /**\n             * 4. If attribute is null, then:\n             * 4.1. If force is not given or is true, create an attribute whose local\n             * name is qualifiedName, value is the empty string, and node document is\n             * the context object’s node document, then append this attribute to the\n             * context object, and then return true.\n             * 4.2. Return false.\n             */\n            if (force === undefined || force === true) {\n                attribute = algorithm_1.create_attr(this._nodeDocument, qualifiedName);\n                attribute._value = '';\n                algorithm_1.element_append(attribute, this);\n                return true;\n            }\n            return false;\n        }\n        else if (force === undefined || force === false) {\n            /**\n             * 5. Otherwise, if force is not given or is false, remove an attribute\n             * given qualifiedName and the context object, and then return false.\n             */\n            algorithm_1.element_removeAnAttributeByName(qualifiedName, this);\n            return false;\n        }\n        /**\n         * 6. Return true.\n         */\n        return true;\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.hasAttributeNS = function (namespace, localName) {\n        /**\n         * 1. If namespace is the empty string, set it to null.\n         * 2. Return true if the context object has an attribute whose namespace is\n         * namespace and local name is localName, and false otherwise.\n         */\n        var ns = namespace || null;\n        for (var i = 0; i < this._attributeList.length; i++) {\n            var attr = this._attributeList[i];\n            if (attr._namespace === ns && attr._localName === localName) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getAttributeNode = function (qualifiedName) {\n        /**\n         * The getAttributeNode(qualifiedName) method, when invoked, must return the\n         * result of getting an attribute given qualifiedName and context object.\n         */\n        return algorithm_1.element_getAnAttributeByName(qualifiedName, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getAttributeNodeNS = function (namespace, localName) {\n        /**\n         * The getAttributeNodeNS(namespace, localName) method, when invoked, must\n         * return the result of getting an attribute given namespace, localName, and\n         * the context object.\n         */\n        return algorithm_1.element_getAnAttributeByNamespaceAndLocalName(namespace, localName, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.setAttributeNode = function (attr) {\n        /**\n         * The setAttributeNode(attr) and setAttributeNodeNS(attr) methods, when\n         * invoked, must return the result of setting an attribute given attr and\n         * the context object.\n         */\n        return algorithm_1.element_setAnAttribute(attr, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.setAttributeNodeNS = function (attr) {\n        return algorithm_1.element_setAnAttribute(attr, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.removeAttributeNode = function (attr) {\n        /**\n         * 1. If context object’s attribute list does not contain attr, then throw\n         * a \"NotFoundError\" DOMException.\n         * 2. Remove attr from context object.\n         * 3. Return attr.\n         */\n        var found = false;\n        for (var i = 0; i < this._attributeList.length; i++) {\n            var attribute = this._attributeList[i];\n            if (attribute === attr) {\n                found = true;\n                break;\n            }\n        }\n        if (!found)\n            throw new DOMException_1.NotFoundError();\n        algorithm_1.element_remove(attr, this);\n        return attr;\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.attachShadow = function (init) {\n        /**\n         * 1. If context object’s namespace is not the HTML namespace, then throw a\n         * \"NotSupportedError\" DOMException.\n         */\n        if (this._namespace !== infra_1.namespace.HTML)\n            throw new DOMException_1.NotSupportedError();\n        /**\n         * 2. If context object’s local name is not a valid custom element name,\n         * \"article\", \"aside\", \"blockquote\", \"body\", \"div\", \"footer\", \"h1\", \"h2\",\n         * \"h3\", \"h4\", \"h5\", \"h6\", \"header\", \"main\" \"nav\", \"p\", \"section\",\n         * or \"span\", then throw a \"NotSupportedError\" DOMException.\n         */\n        if (!algorithm_1.customElement_isValidCustomElementName(this._localName) &&\n            !algorithm_1.customElement_isValidShadowHostName(this._localName))\n            throw new DOMException_1.NotSupportedError();\n        /**\n         * 3. If context object’s local name is a valid custom element name,\n         * or context object’s is value is not null, then:\n         * 3.1. Let definition be the result of looking up a custom element\n         * definition given context object’s node document, its namespace, its\n         * local name, and its is value.\n         * 3.2. If definition is not null and definition’s disable shadow is true,\n         *  then throw a \"NotSupportedError\" DOMException.\n         */\n        if (algorithm_1.customElement_isValidCustomElementName(this._localName) || this._is !== null) {\n            var definition = algorithm_1.customElement_lookUpACustomElementDefinition(this._nodeDocument, this._namespace, this._localName, this._is);\n            if (definition !== null && definition.disableShadow === true) {\n                throw new DOMException_1.NotSupportedError();\n            }\n        }\n        /**\n         * 4. If context object is a shadow host, then throw an \"NotSupportedError\"\n         * DOMException.\n         */\n        if (this._shadowRoot !== null)\n            throw new DOMException_1.NotSupportedError();\n        /**\n         * 5. Let shadow be a new shadow root whose node document is context\n         * object’s node document, host is context object, and mode is init’s mode.\n         * 6. Set context object’s shadow root to shadow.\n         * 7. Return shadow.\n         */\n        var shadow = algorithm_1.create_shadowRoot(this._nodeDocument, this);\n        shadow._mode = init.mode;\n        this._shadowRoot = shadow;\n        return shadow;\n    };\n    Object.defineProperty(ElementImpl.prototype, \"shadowRoot\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * 1. Let shadow be context object’s shadow root.\n             * 2. If shadow is null or its mode is \"closed\", then return null.\n             * 3. Return shadow.\n             */\n            var shadow = this._shadowRoot;\n            if (shadow === null || shadow.mode === \"closed\")\n                return null;\n            else\n                return shadow;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    ElementImpl.prototype.closest = function (selectors) {\n        /**\n         * TODO: Selectors\n         * 1. Let s be the result of parse a selector from selectors. [SELECTORS4]\n         * 2. If s is failure, throw a \"SyntaxError\" DOMException.\n         * 3. Let elements be context object’s inclusive ancestors that are\n         * elements, in reverse tree order.\n         * 4. For each element in elements, if match a selector against an element,\n         * using s, element, and :scope element context object, returns success,\n         * return element. [SELECTORS4]\n         * 5. Return null.\n         */\n        throw new DOMException_1.NotImplementedError();\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.matches = function (selectors) {\n        /**\n         * TODO: Selectors\n         * 1. Let s be the result of parse a selector from selectors. [SELECTORS4]\n         * 2. If s is failure, throw a \"SyntaxError\" DOMException.\n         * 3. Return true if the result of match a selector against an element,\n         * using s, element, and :scope element context object, returns success,\n         * and false otherwise. [SELECTORS4]\n         */\n        throw new DOMException_1.NotImplementedError();\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.webkitMatchesSelector = function (selectors) {\n        return this.matches(selectors);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getElementsByTagName = function (qualifiedName) {\n        /**\n         * The getElementsByTagName(qualifiedName) method, when invoked, must return\n         * the list of elements with qualified name qualifiedName for context\n         * object.\n         */\n        return algorithm_1.node_listOfElementsWithQualifiedName(qualifiedName, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getElementsByTagNameNS = function (namespace, localName) {\n        /**\n         * The getElementsByTagNameNS(namespace, localName) method, when invoked,\n         * must return the list of elements with namespace namespace and local name\n         * localName for context object.\n         */\n        return algorithm_1.node_listOfElementsWithNamespace(namespace, localName, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.getElementsByClassName = function (classNames) {\n        /**\n         * The getElementsByClassName(classNames) method, when invoked, must return\n         * the list of elements with class names classNames for context object.\n         */\n        return algorithm_1.node_listOfElementsWithClassNames(classNames, this);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.insertAdjacentElement = function (where, element) {\n        /**\n         * The insertAdjacentElement(where, element) method, when invoked, must\n         * return the result of running insert adjacent, given context object,\n         *  where, and element.\n         */\n        return algorithm_1.element_insertAdjacent(this, where, element);\n    };\n    /** @inheritdoc */\n    ElementImpl.prototype.insertAdjacentText = function (where, data) {\n        /**\n         * 1. Let text be a new Text node whose data is data and node document is\n         * context object’s node document.\n         * 2. Run insert adjacent, given context object, where, and text.\n         */\n        var text = algorithm_1.create_text(this._nodeDocument, data);\n        algorithm_1.element_insertAdjacent(this, where, text);\n    };\n    Object.defineProperty(ElementImpl.prototype, \"_qualifiedName\", {\n        /**\n         * Returns the qualified name.\n         */\n        get: function () {\n            /**\n             * An element’s qualified name is its local name if its namespace prefix is\n             * null, and its namespace prefix, followed by \":\", followed by its\n             * local name, otherwise.\n             */\n            return (this._namespacePrefix ?\n                this._namespacePrefix + ':' + this._localName :\n                this._localName);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"_htmlUppercasedQualifiedName\", {\n        /**\n         * Returns the upper-cased qualified name for a html element.\n         */\n        get: function () {\n            /**\n             * 1. Let qualifiedName be context object’s qualified name.\n             * 2. If the context object is in the HTML namespace and its node document\n             * is an HTML document, then set qualifiedName to qualifiedName in ASCII\n             * uppercase.\n             * 3. Return qualifiedName.\n             */\n            var qualifiedName = this._qualifiedName;\n            if (this._namespace === infra_1.namespace.HTML && this._nodeDocument._type === \"html\") {\n                qualifiedName = qualifiedName.toUpperCase();\n            }\n            return qualifiedName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"children\", {\n        // MIXIN: ParentNode\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"firstElementChild\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"lastElementChild\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"childElementCount\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    /* istanbul ignore next */\n    ElementImpl.prototype.prepend = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ParentNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    ElementImpl.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ParentNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    ElementImpl.prototype.querySelector = function (selectors) { throw new Error(\"Mixin: ParentNode not implemented.\"); };\n    /* istanbul ignore next */\n    ElementImpl.prototype.querySelectorAll = function (selectors) { throw new Error(\"Mixin: ParentNode not implemented.\"); };\n    Object.defineProperty(ElementImpl.prototype, \"previousElementSibling\", {\n        // MIXIN: NonDocumentTypeChildNode\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ElementImpl.prototype, \"nextElementSibling\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    // MIXIN: ChildNode\n    /* istanbul ignore next */\n    ElementImpl.prototype.before = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    ElementImpl.prototype.after = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    ElementImpl.prototype.replaceWith = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    ElementImpl.prototype.remove = function () { throw new Error(\"Mixin: ChildNode not implemented.\"); };\n    Object.defineProperty(ElementImpl.prototype, \"assignedSlot\", {\n        // MIXIN: Slotable\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: Slotable not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new `Element`.\n     *\n     * @param document - owner document\n     * @param localName - local name\n     * @param namespace - namespace\n     * @param prefix - namespace prefix\n     */\n    ElementImpl._create = function (document, localName, namespace, namespacePrefix) {\n        if (namespace === void 0) { namespace = null; }\n        if (namespacePrefix === void 0) { namespacePrefix = null; }\n        var node = new ElementImpl();\n        node._localName = localName;\n        node._namespace = namespace;\n        node._namespacePrefix = namespacePrefix;\n        node._nodeDocument = document;\n        return node;\n    };\n    return ElementImpl;\n}(NodeImpl_1.NodeImpl));\nexports.ElementImpl = ElementImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(ElementImpl.prototype, \"_nodeType\", interfaces_1.NodeType.Element);\n//# sourceMappingURL=ElementImpl.js.map","module.exports = require(\"url\");","'use strict';\n\n\nvar yaml = require('./lib/js-yaml.js');\n\n\nmodule.exports = yaml;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ObjectWriter_1 = require(\"./ObjectWriter\");\nvar util_1 = require(\"@oozcitak/util\");\nvar BaseWriter_1 = require(\"./BaseWriter\");\n/**\n * Serializes XML nodes into a YAML string.\n */\nvar YAMLWriter = /** @class */ (function (_super) {\n    __extends(YAMLWriter, _super);\n    /**\n     * Initializes a new instance of `YAMLWriter`.\n     *\n     * @param builderOptions - XML builder options\n     * @param writerOptions - serialization options\n     */\n    function YAMLWriter(builderOptions, writerOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        // provide default options\n        _this._writerOptions = util_1.applyDefaults(writerOptions, {\n            wellFormed: false,\n            indent: '  ',\n            newline: '\\n',\n            offset: 0,\n            group: false,\n            verbose: false\n        });\n        if (_this._writerOptions.indent.length < 2) {\n            throw new Error(\"YAML indententation string must be at least two characters long.\");\n        }\n        if (_this._writerOptions.offset < 0) {\n            throw new Error(\"YAML offset should be zero or a positive number.\");\n        }\n        return _this;\n    }\n    /**\n     * Produces an XML serialization of the given node.\n     *\n     * @param node - node to serialize\n     * @param writerOptions - serialization options\n     */\n    YAMLWriter.prototype.serialize = function (node) {\n        // convert to object\n        var objectWriterOptions = util_1.applyDefaults(this._writerOptions, {\n            format: \"object\",\n            wellFormed: false\n        });\n        var objectWriter = new ObjectWriter_1.ObjectWriter(this._builderOptions, objectWriterOptions);\n        var val = objectWriter.serialize(node);\n        var markup = this._beginLine(this._writerOptions, 0) + '---' + this._endLine(this._writerOptions) +\n            this._convertObject(val, this._writerOptions, 0);\n        // remove trailing newline\n        /* istanbul ignore else */\n        if (markup.slice(-this._writerOptions.newline.length) === this._writerOptions.newline) {\n            markup = markup.slice(0, -this._writerOptions.newline.length);\n        }\n        return markup;\n    };\n    /**\n     * Produces an XML serialization of the given object.\n     *\n     * @param obj - object to serialize\n     * @param options - serialization options\n     * @param level - depth of the XML tree\n     * @param indentLeaf - indents leaf nodes\n     */\n    YAMLWriter.prototype._convertObject = function (obj, options, level, suppressIndent) {\n        var e_1, _a;\n        var _this = this;\n        if (suppressIndent === void 0) { suppressIndent = false; }\n        var markup = '';\n        if (util_1.isArray(obj)) {\n            try {\n                for (var obj_1 = __values(obj), obj_1_1 = obj_1.next(); !obj_1_1.done; obj_1_1 = obj_1.next()) {\n                    var val = obj_1_1.value;\n                    markup += this._beginLine(options, level, true);\n                    if (!util_1.isObject(val)) {\n                        markup += this._val(val) + this._endLine(options);\n                    }\n                    else if (util_1.isEmpty(val)) {\n                        markup += '\"\"' + this._endLine(options);\n                    }\n                    else {\n                        markup += this._convertObject(val, options, level, true);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (obj_1_1 && !obj_1_1.done && (_a = obj_1.return)) _a.call(obj_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        else /* if (isObject(obj)) */ {\n            util_1.forEachObject(obj, function (key, val) {\n                if (suppressIndent) {\n                    markup += _this._key(key);\n                    suppressIndent = false;\n                }\n                else {\n                    markup += _this._beginLine(options, level) + _this._key(key);\n                }\n                if (!util_1.isObject(val)) {\n                    markup += ' ' + _this._val(val) + _this._endLine(options);\n                }\n                else if (util_1.isEmpty(val)) {\n                    markup += ' \"\"' + _this._endLine(options);\n                }\n                else {\n                    markup += _this._endLine(options) +\n                        _this._convertObject(val, options, level + 1);\n                }\n            }, this);\n        }\n        return markup;\n    };\n    /**\n     * Produces characters to be prepended to a line of string in pretty-print\n     * mode.\n     *\n     * @param options - serialization options\n     * @param level - current depth of the XML tree\n     * @param isArray - whether this line is an array item\n     */\n    YAMLWriter.prototype._beginLine = function (options, level, isArray) {\n        if (isArray === void 0) { isArray = false; }\n        var indentLevel = options.offset + level + 1;\n        var chars = new Array(indentLevel).join(options.indent);\n        if (isArray) {\n            return chars.substr(0, chars.length - 2) + '-' + chars.substr(-1, 1);\n        }\n        else {\n            return chars;\n        }\n    };\n    /**\n     * Produces characters to be appended to a line of string in pretty-print\n     * mode.\n     *\n     * @param options - serialization options\n     */\n    YAMLWriter.prototype._endLine = function (options) {\n        return options.newline;\n    };\n    /**\n     * Produces a YAML key string delimited with double quotes.\n     */\n    YAMLWriter.prototype._key = function (key) {\n        return \"\\\"\" + key + \"\\\":\";\n    };\n    /**\n     * Produces a YAML value string delimited with double quotes.\n     */\n    YAMLWriter.prototype._val = function (val) {\n        return JSON.stringify(val);\n    };\n    return YAMLWriter;\n}(BaseWriter_1.BaseWriter));\nexports.YAMLWriter = YAMLWriter;\n//# sourceMappingURL=YAMLWriter.js.map","'use strict';\n\nvar Type = require('../type');\n\nmodule.exports = new Type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n","'use strict';\n\nvar YAMLException = require('./exception');\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new YAMLException('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.tag          = tag;\n  this.kind         = options['kind']         || null;\n  this.resolve      = options['resolve']      || function () { return true; };\n  this.construct    = options['construct']    || function (data) { return data; };\n  this.instanceOf   = options['instanceOf']   || null;\n  this.predicate    = options['predicate']    || null;\n  this.represent    = options['represent']    || null;\n  this.defaultStyle = options['defaultStyle'] || null;\n  this.styleAliases = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new YAMLException('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nmodule.exports = Type;\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar util_1 = require(\"../util\");\nvar CreateAlgorithm_1 = require(\"./CreateAlgorithm\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar BoundaryPointAlgorithm_1 = require(\"./BoundaryPointAlgorithm\");\nvar CharacterDataAlgorithm_1 = require(\"./CharacterDataAlgorithm\");\nvar NodeAlgorithm_1 = require(\"./NodeAlgorithm\");\nvar MutationAlgorithm_1 = require(\"./MutationAlgorithm\");\nvar TextAlgorithm_1 = require(\"./TextAlgorithm\");\n/**\n * Determines if the node's start boundary point is at its end boundary\n * point.\n *\n * @param range - a range\n */\nfunction range_collapsed(range) {\n    /**\n     * A range is collapsed if its start node is its end node and its start offset is its end offset.\n     */\n    return (range._startNode === range._endNode && range._startOffset === range._endOffset);\n}\nexports.range_collapsed = range_collapsed;\n/**\n * Gets the root node of a range.\n *\n * @param range - a range\n */\nfunction range_root(range) {\n    /**\n     * The root of a live range is the root of its start node.\n     */\n    return TreeAlgorithm_1.tree_rootNode(range._startNode);\n}\nexports.range_root = range_root;\n/**\n * Determines if a node is fully contained in a range.\n *\n * @param node - a node\n * @param range - a range\n */\nfunction range_isContained(node, range) {\n    /**\n     * A node node is contained in a live range range if node’s root is range’s\n     * root, and (node, 0) is after range’s start, and (node, node’s length) is\n     * before range’s end.\n     */\n    return (TreeAlgorithm_1.tree_rootNode(node) === range_root(range) &&\n        BoundaryPointAlgorithm_1.boundaryPoint_position([node, 0], range._start) === interfaces_1.BoundaryPosition.After &&\n        BoundaryPointAlgorithm_1.boundaryPoint_position([node, TreeAlgorithm_1.tree_nodeLength(node)], range._end) === interfaces_1.BoundaryPosition.Before);\n}\nexports.range_isContained = range_isContained;\n/**\n * Determines if a node is partially contained in a range.\n *\n * @param node - a node\n * @param range - a range\n */\nfunction range_isPartiallyContained(node, range) {\n    /**\n     * A node is partially contained in a live range if it’s an inclusive\n     * ancestor of the live range’s start node but not its end node,\n     * or vice versa.\n     */\n    var startCheck = TreeAlgorithm_1.tree_isAncestorOf(range._startNode, node, true);\n    var endCheck = TreeAlgorithm_1.tree_isAncestorOf(range._endNode, node, true);\n    return (startCheck && !endCheck) || (!startCheck && endCheck);\n}\nexports.range_isPartiallyContained = range_isPartiallyContained;\n/**\n * Sets the start boundary point of a range.\n *\n * @param range - a range\n * @param node - a node\n * @param offset - an offset into node\n */\nfunction range_setTheStart(range, node, offset) {\n    /**\n     * 1. If node is a doctype, then throw an \"InvalidNodeTypeError\" DOMException.\n     * 2. If offset is greater than node’s length, then throw an \"IndexSizeError\"\n     * DOMException.\n     * 3. Let bp be the boundary point (node, offset).\n     * 4. If these steps were invoked as \"set the start\"\n     * 4.1. If bp is after the range’s end, or if range’s root is not equal to\n     * node’s root, set range’s end to bp.\n     * 4.2. Set range’s start to bp.\n     */\n    if (util_1.Guard.isDocumentTypeNode(node)) {\n        throw new DOMException_1.InvalidNodeTypeError();\n    }\n    if (offset > TreeAlgorithm_1.tree_nodeLength(node)) {\n        throw new DOMException_1.IndexSizeError();\n    }\n    var bp = [node, offset];\n    if (range_root(range) !== TreeAlgorithm_1.tree_rootNode(node) ||\n        BoundaryPointAlgorithm_1.boundaryPoint_position(bp, range._end) === interfaces_1.BoundaryPosition.After) {\n        range._end = bp;\n    }\n    range._start = bp;\n}\nexports.range_setTheStart = range_setTheStart;\n/**\n * Sets the end boundary point of a range.\n *\n * @param range - a range\n * @param node - a node\n * @param offset - an offset into node\n */\nfunction range_setTheEnd(range, node, offset) {\n    /**\n     * 1. If node is a doctype, then throw an \"InvalidNodeTypeError\" DOMException.\n     * 2. If offset is greater than node’s length, then throw an \"IndexSizeError\"\n     * DOMException.\n     * 3. Let bp be the boundary point (node, offset).\n     * 4. If these steps were invoked as \"set the end\"\n     * 4.1. If bp is before the range’s start, or if range’s root is not equal\n     * to node’s root, set range’s start to bp.\n     * 4.2. Set range’s end to bp.\n     */\n    if (util_1.Guard.isDocumentTypeNode(node)) {\n        throw new DOMException_1.InvalidNodeTypeError();\n    }\n    if (offset > TreeAlgorithm_1.tree_nodeLength(node)) {\n        throw new DOMException_1.IndexSizeError();\n    }\n    var bp = [node, offset];\n    if (range_root(range) !== TreeAlgorithm_1.tree_rootNode(node) ||\n        BoundaryPointAlgorithm_1.boundaryPoint_position(bp, range._start) === interfaces_1.BoundaryPosition.Before) {\n        range._start = bp;\n    }\n    range._end = bp;\n}\nexports.range_setTheEnd = range_setTheEnd;\n/**\n * Selects a node.\n *\n * @param range - a range\n * @param node - a node\n */\nfunction range_select(node, range) {\n    /**\n     * 1. Let parent be node’s parent.\n     * 2. If parent is null, then throw an \"InvalidNodeTypeError\" DOMException.\n     */\n    var parent = node._parent;\n    if (parent === null)\n        throw new DOMException_1.InvalidNodeTypeError();\n    /**\n     * 3. Let index be node’s index.\n     * 4. Set range’s start to boundary point (parent, index).\n     * 5. Set range’s end to boundary point (parent, index plus 1).\n     */\n    var index = TreeAlgorithm_1.tree_index(node);\n    range._start = [parent, index];\n    range._end = [parent, index + 1];\n}\nexports.range_select = range_select;\n/**\n * EXtracts the contents of range as a document fragment.\n *\n * @param range - a range\n */\nfunction range_extract(range) {\n    var e_1, _a, e_2, _b, e_3, _c;\n    /**\n     * 1. Let fragment be a new DocumentFragment node whose node document is\n     * range’s start node’s node document.\n     * 2. If range is collapsed, then return fragment.\n     */\n    var fragment = CreateAlgorithm_1.create_documentFragment(range._startNode._nodeDocument);\n    if (range_collapsed(range))\n        return fragment;\n    /**\n     * 3. Let original start node, original start offset, original end node,\n     * and original end offset be range’s start node, start offset, end node,\n     * and end offset, respectively.\n     */\n    var originalStartNode = range._startNode;\n    var originalStartOffset = range._startOffset;\n    var originalEndNode = range._endNode;\n    var originalEndOffset = range._endOffset;\n    /**\n     * 4. If original start node is original end node, and they are a Text,\n     * ProcessingInstruction, or Comment node:\n     * 4.1. Let clone be a clone of original start node.\n     * 4.2. Set the data of clone to the result of substringing data with node\n     * original start node, offset original start offset, and count original end\n     * offset minus original start offset.\n     * 4.3. Append clone to fragment.\n     * 4.4. Replace data with node original start node, offset original start\n     * offset, count original end offset minus original start offset, and data\n     * the empty string.\n     * 4.5. Return fragment.\n     */\n    if (originalStartNode === originalEndNode &&\n        util_1.Guard.isCharacterDataNode(originalStartNode)) {\n        var clone = NodeAlgorithm_1.node_clone(originalStartNode);\n        clone._data = CharacterDataAlgorithm_1.characterData_substringData(originalStartNode, originalStartOffset, originalEndOffset - originalStartOffset);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n        CharacterDataAlgorithm_1.characterData_replaceData(originalStartNode, originalStartOffset, originalEndOffset - originalStartOffset, '');\n        return fragment;\n    }\n    /**\n     * 5. Let common ancestor be original start node.\n     * 6. While common ancestor is not an inclusive ancestor of original end\n     * node, set common ancestor to its own parent.\n     */\n    var commonAncestor = originalStartNode;\n    while (!TreeAlgorithm_1.tree_isAncestorOf(originalEndNode, commonAncestor, true)) {\n        if (commonAncestor._parent === null) {\n            throw new Error(\"Parent node  is null.\");\n        }\n        commonAncestor = commonAncestor._parent;\n    }\n    /**\n     * 7. Let first partially contained child be null.\n     * 8. If original start node is not an inclusive ancestor of original end\n     * node, set first partially contained child to the first child of common\n     * ancestor that is partially contained in range.\n     */\n    var firstPartiallyContainedChild = null;\n    if (!TreeAlgorithm_1.tree_isAncestorOf(originalEndNode, originalStartNode, true)) {\n        try {\n            for (var _d = __values(commonAncestor._children), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var node = _e.value;\n                if (range_isPartiallyContained(node, range)) {\n                    firstPartiallyContainedChild = node;\n                    break;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    /**\n     * 9. Let last partially contained child be null.\n     * 10. If original end node is not an inclusive ancestor of original start\n     * node, set last partially contained child to the last child of common\n     * ancestor that is partially contained in range.\n     */\n    var lastPartiallyContainedChild = null;\n    if (!TreeAlgorithm_1.tree_isAncestorOf(originalStartNode, originalEndNode, true)) {\n        var children = __spread(commonAncestor._children);\n        for (var i = children.length - 1; i > 0; i--) {\n            var node = children[i];\n            if (range_isPartiallyContained(node, range)) {\n                lastPartiallyContainedChild = node;\n                break;\n            }\n        }\n    }\n    /**\n     * 11. Let contained children be a list of all children of common ancestor\n     * that are contained in range, in tree order.\n     * 12. If any member of contained children is a doctype, then throw a\n     * \"HierarchyRequestError\" DOMException.\n     */\n    var containedChildren = [];\n    try {\n        for (var _f = __values(commonAncestor._children), _g = _f.next(); !_g.done; _g = _f.next()) {\n            var child = _g.value;\n            if (range_isContained(child, range)) {\n                if (util_1.Guard.isDocumentTypeNode(child)) {\n                    throw new DOMException_1.HierarchyRequestError();\n                }\n                containedChildren.push(child);\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    var newNode;\n    var newOffset;\n    if (TreeAlgorithm_1.tree_isAncestorOf(originalEndNode, originalStartNode, true)) {\n        /**\n         * 13. If original start node is an inclusive ancestor of original end node,\n         * set new node to original start node and new offset to original start\n         * offset.\n         */\n        newNode = originalStartNode;\n        newOffset = originalStartOffset;\n    }\n    else {\n        /**\n         * 14. Otherwise:\n         * 14.1. Let reference node equal original start node.\n         * 14.2. While reference node’s parent is not null and is not an inclusive\n         * ancestor of original end node, set reference node to its parent.\n         * 14.3. Set new node to the parent of reference node, and new offset to\n         * one plus reference node’s index.\n         */\n        var referenceNode = originalStartNode;\n        while (referenceNode._parent !== null &&\n            !TreeAlgorithm_1.tree_isAncestorOf(originalEndNode, referenceNode._parent)) {\n            referenceNode = referenceNode._parent;\n        }\n        /* istanbul ignore next */\n        if (referenceNode._parent === null) {\n            /**\n             * If reference node’s parent is null, it would be the root of range,\n             * so would be an inclusive ancestor of original end node, and we could\n             * not reach this point.\n             */\n            throw new Error(\"Parent node is null.\");\n        }\n        newNode = referenceNode._parent;\n        newOffset = 1 + TreeAlgorithm_1.tree_index(referenceNode);\n    }\n    if (util_1.Guard.isCharacterDataNode(firstPartiallyContainedChild)) {\n        /**\n         * 15. If first partially contained child is a Text, ProcessingInstruction,\n         * or Comment node:\n         * 15.1. Let clone be a clone of original start node.\n         * 15.2. Set the data of clone to the result of substringing data with\n         * node original start node, offset original start offset, and count\n         * original start node’s length minus original start offset.\n         * 15.3. Append clone to fragment.\n         * 15.4. Replace data with node original start node, offset original\n         * start offset, count original start node’s length minus original start\n         * offset, and data the empty string.\n         */\n        var clone = NodeAlgorithm_1.node_clone(originalStartNode);\n        clone._data = CharacterDataAlgorithm_1.characterData_substringData(originalStartNode, originalStartOffset, TreeAlgorithm_1.tree_nodeLength(originalStartNode) - originalStartOffset);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n        CharacterDataAlgorithm_1.characterData_replaceData(originalStartNode, originalStartOffset, TreeAlgorithm_1.tree_nodeLength(originalStartNode) - originalStartOffset, '');\n    }\n    else if (firstPartiallyContainedChild !== null) {\n        /**\n         * 16. Otherwise, if first partially contained child is not null:\n         * 16.1. Let clone be a clone of first partially contained child.\n         * 16.2. Append clone to fragment.\n         * 16.3. Let subrange be a new live range whose start is (original start\n         * node, original start offset) and whose end is (first partially\n         * contained child, first partially contained child’s length).\n         * 16.4. Let subfragment be the result of extracting subrange.\n         * 16.5. Append subfragment to clone.\n         */\n        var clone = NodeAlgorithm_1.node_clone(firstPartiallyContainedChild);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n        var subrange = CreateAlgorithm_1.create_range([originalStartNode, originalStartOffset], [firstPartiallyContainedChild, TreeAlgorithm_1.tree_nodeLength(firstPartiallyContainedChild)]);\n        var subfragment = range_extract(subrange);\n        MutationAlgorithm_1.mutation_append(subfragment, clone);\n    }\n    try {\n        /**\n         * 17. For each contained child in contained children, append contained\n         * child to fragment.\n         */\n        for (var containedChildren_1 = __values(containedChildren), containedChildren_1_1 = containedChildren_1.next(); !containedChildren_1_1.done; containedChildren_1_1 = containedChildren_1.next()) {\n            var child = containedChildren_1_1.value;\n            MutationAlgorithm_1.mutation_append(child, fragment);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (containedChildren_1_1 && !containedChildren_1_1.done && (_c = containedChildren_1.return)) _c.call(containedChildren_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    if (util_1.Guard.isCharacterDataNode(lastPartiallyContainedChild)) {\n        /**\n         * 18. If last partially contained child is a Text, ProcessingInstruction,\n         * or Comment node:\n         * 18.1. Let clone be a clone of original end node.\n         * 18.2. Set the data of clone to the result of substringing data with\n         * node original end node, offset 0, and count original end offset.\n         * 18.3. Append clone to fragment.\n         * 18.4. Replace data with node original end node, offset 0, count\n         * original end offset, and data the empty string.\n         */\n        var clone = NodeAlgorithm_1.node_clone(originalEndNode);\n        clone._data = CharacterDataAlgorithm_1.characterData_substringData(originalEndNode, 0, originalEndOffset);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n        CharacterDataAlgorithm_1.characterData_replaceData(originalEndNode, 0, originalEndOffset, '');\n    }\n    else if (lastPartiallyContainedChild !== null) {\n        /**\n         * 19. Otherwise, if last partially contained child is not null:\n         * 19.1. Let clone be a clone of last partially contained child.\n         * 19.2. Append clone to fragment.\n         * 19.3. Let subrange be a new live range whose start is (last partially\n         * contained child, 0) and whose end is (original end node, original\n         * end offset).\n         * 19.4. Let subfragment be the result of extracting subrange.\n         * 19.5. Append subfragment to clone.\n         */\n        var clone = NodeAlgorithm_1.node_clone(lastPartiallyContainedChild);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n        var subrange = CreateAlgorithm_1.create_range([lastPartiallyContainedChild, 0], [originalEndNode, originalEndOffset]);\n        var subfragment = range_extract(subrange);\n        MutationAlgorithm_1.mutation_append(subfragment, clone);\n    }\n    /**\n     * 20. Set range’s start and end to (new node, new offset).\n     */\n    range._start = [newNode, newOffset];\n    range._end = [newNode, newOffset];\n    /**\n     * 21. Return fragment.\n     */\n    return fragment;\n}\nexports.range_extract = range_extract;\n/**\n * Clones the contents of range as a document fragment.\n *\n * @param range - a range\n */\nfunction range_cloneTheContents(range) {\n    var e_4, _a, e_5, _b, e_6, _c;\n    /**\n     * 1. Let fragment be a new DocumentFragment node whose node document\n     * is range’s start node’s node document.\n     * 2. If range is collapsed, then return fragment.\n     */\n    var fragment = CreateAlgorithm_1.create_documentFragment(range._startNode._nodeDocument);\n    if (range_collapsed(range))\n        return fragment;\n    /**\n     * 3. Let original start node, original start offset, original end node,\n     * and original end offset be range’s start node, start offset, end node,\n     * and end offset, respectively.\n     * 4. If original start node is original end node, and they are a Text,\n     * ProcessingInstruction, or Comment node:\n     * 4.1. Let clone be a clone of original start node.\n     * 4.2. Set the data of clone to the result of substringing data with node\n     * original start node, offset original start offset, and count original end\n     * offset minus original start offset.\n     * 4.3. Append clone to fragment.\n     * 4.5. Return fragment.\n     */\n    var originalStartNode = range._startNode;\n    var originalStartOffset = range._startOffset;\n    var originalEndNode = range._endNode;\n    var originalEndOffset = range._endOffset;\n    if (originalStartNode === originalEndNode &&\n        util_1.Guard.isCharacterDataNode(originalStartNode)) {\n        var clone = NodeAlgorithm_1.node_clone(originalStartNode);\n        clone._data = CharacterDataAlgorithm_1.characterData_substringData(originalStartNode, originalStartOffset, originalEndOffset - originalStartOffset);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n    }\n    /**\n     * 5. Let common ancestor be original start node.\n     * 6. While common ancestor is not an inclusive ancestor of original end\n     * node, set common ancestor to its own parent.\n     */\n    var commonAncestor = originalStartNode;\n    while (!TreeAlgorithm_1.tree_isAncestorOf(originalEndNode, commonAncestor, true)) {\n        if (commonAncestor._parent === null) {\n            throw new Error(\"Parent node  is null.\");\n        }\n        commonAncestor = commonAncestor._parent;\n    }\n    /**\n     * 7. Let first partially contained child be null.\n     * 8. If original start node is not an inclusive ancestor of original end\n     * node, set first partially contained child to the first child of common\n     * ancestor that is partially contained in range.\n     */\n    var firstPartiallyContainedChild = null;\n    if (!TreeAlgorithm_1.tree_isAncestorOf(originalEndNode, originalStartNode, true)) {\n        try {\n            for (var _d = __values(commonAncestor._children), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var node = _e.value;\n                if (range_isPartiallyContained(node, range)) {\n                    firstPartiallyContainedChild = node;\n                    break;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    }\n    /**\n     * 9. Let last partially contained child be null.\n     * 10. If original end node is not an inclusive ancestor of original start\n     * node, set last partially contained child to the last child of common\n     * ancestor that is partially contained in range.\n     */\n    var lastPartiallyContainedChild = null;\n    if (!TreeAlgorithm_1.tree_isAncestorOf(originalStartNode, originalEndNode, true)) {\n        var children = __spread(commonAncestor._children);\n        for (var i = children.length - 1; i > 0; i--) {\n            var node = children[i];\n            if (range_isPartiallyContained(node, range)) {\n                lastPartiallyContainedChild = node;\n                break;\n            }\n        }\n    }\n    /**\n     * 11. Let contained children be a list of all children of common ancestor\n     * that are contained in range, in tree order.\n     * 12. If any member of contained children is a doctype, then throw a\n     * \"HierarchyRequestError\" DOMException.\n     */\n    var containedChildren = [];\n    try {\n        for (var _f = __values(commonAncestor._children), _g = _f.next(); !_g.done; _g = _f.next()) {\n            var child = _g.value;\n            if (range_isContained(child, range)) {\n                if (util_1.Guard.isDocumentTypeNode(child)) {\n                    throw new DOMException_1.HierarchyRequestError();\n                }\n                containedChildren.push(child);\n            }\n        }\n    }\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\n    finally {\n        try {\n            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n        }\n        finally { if (e_5) throw e_5.error; }\n    }\n    if (util_1.Guard.isCharacterDataNode(firstPartiallyContainedChild)) {\n        /**\n         * 13. If first partially contained child is a Text, ProcessingInstruction,\n         * or Comment node:\n         * 13.1. Let clone be a clone of original start node.\n         * 13.2. Set the data of clone to the result of substringing data with\n         * node original start node, offset original start offset, and count\n         * original start node’s length minus original start offset.\n         * 13.3. Append clone to fragment.\n         */\n        var clone = NodeAlgorithm_1.node_clone(originalStartNode);\n        clone._data = CharacterDataAlgorithm_1.characterData_substringData(originalStartNode, originalStartOffset, TreeAlgorithm_1.tree_nodeLength(originalStartNode) - originalStartOffset);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n    }\n    else if (firstPartiallyContainedChild !== null) {\n        /**\n         * 14. Otherwise, if first partially contained child is not null:\n         * 14.1. Let clone be a clone of first partially contained child.\n         * 14.2. Append clone to fragment.\n         * 14.3. Let subrange be a new live range whose start is (original start\n         * node, original start offset) and whose end is (first partially\n         * contained child, first partially contained child’s length).\n         * 14.4. Let subfragment be the result of cloning the contents of\n         * subrange.\n         * 14.5. Append subfragment to clone.\n         */\n        var clone = NodeAlgorithm_1.node_clone(firstPartiallyContainedChild);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n        var subrange = CreateAlgorithm_1.create_range([originalStartNode, originalStartOffset], [firstPartiallyContainedChild, TreeAlgorithm_1.tree_nodeLength(firstPartiallyContainedChild)]);\n        var subfragment = range_cloneTheContents(subrange);\n        MutationAlgorithm_1.mutation_append(subfragment, clone);\n    }\n    try {\n        /**\n         * 15. For each contained child in contained children, append contained\n         * child to fragment.\n         * 15.1. Let clone be a clone of contained child with the clone children\n         * flag set.\n         * 15.2. Append clone to fragment.\n         */\n        for (var containedChildren_2 = __values(containedChildren), containedChildren_2_1 = containedChildren_2.next(); !containedChildren_2_1.done; containedChildren_2_1 = containedChildren_2.next()) {\n            var child = containedChildren_2_1.value;\n            var clone = NodeAlgorithm_1.node_clone(child);\n            MutationAlgorithm_1.mutation_append(clone, fragment);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (containedChildren_2_1 && !containedChildren_2_1.done && (_c = containedChildren_2.return)) _c.call(containedChildren_2);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    if (util_1.Guard.isCharacterDataNode(lastPartiallyContainedChild)) {\n        /**\n         * 16. If last partially contained child is a Text, ProcessingInstruction,\n         * or Comment node:\n         * 16.1. Let clone be a clone of original end node.\n         * 16.2. Set the data of clone to the result of substringing data with\n         * node original end node, offset 0, and count original end offset.\n         * 16.3. Append clone to fragment.\n         */\n        var clone = NodeAlgorithm_1.node_clone(originalEndNode);\n        clone._data = CharacterDataAlgorithm_1.characterData_substringData(originalEndNode, 0, originalEndOffset);\n        MutationAlgorithm_1.mutation_append(clone, fragment);\n    }\n    else if (lastPartiallyContainedChild !== null) {\n        /**\n         * 17. Otherwise, if last partially contained child is not null:\n         * 17.1. Let clone be a clone of last partially contained child.\n         * 17.2. Append clone to fragment.\n         * 17.3. Let subrange be a new live range whose start is (last partially\n         * contained child, 0) and whose end is (original end node, original\n         * end offset).\n         * 17.4. Let subfragment be the result of cloning the contents of subrange.\n         * 17.5. Append subfragment to clone.\n         */\n        var clone = NodeAlgorithm_1.node_clone(lastPartiallyContainedChild);\n        fragment.append(clone);\n        var subrange = CreateAlgorithm_1.create_range([lastPartiallyContainedChild, 0], [originalEndNode, originalEndOffset]);\n        var subfragment = range_extract(subrange);\n        MutationAlgorithm_1.mutation_append(subfragment, clone);\n    }\n    /**\n     * 18. Return fragment.\n     */\n    return fragment;\n}\nexports.range_cloneTheContents = range_cloneTheContents;\n/**\n * Inserts a node into a range at the start boundary point.\n *\n * @param node - node to insert\n * @param range - a range\n */\nfunction range_insert(node, range) {\n    var e_7, _a;\n    /**\n     * 1. If range’s start node is a ProcessingInstruction or Comment node, is a\n     * Text node whose parent is null, or is node, then throw a\n     * \"HierarchyRequestError\" DOMException.\n     */\n    if (util_1.Guard.isProcessingInstructionNode(range._startNode) ||\n        util_1.Guard.isCommentNode(range._startNode) ||\n        (util_1.Guard.isTextNode(range._startNode) && range._startNode._parent === null) ||\n        range._startNode === node) {\n        throw new DOMException_1.HierarchyRequestError();\n    }\n    /**\n     * 2. Let referenceNode be null.\n     * 3. If range’s start node is a Text node, set referenceNode to that Text\n     * node.\n     * 4. Otherwise, set referenceNode to the child of start node whose index is\n     * start offset, and null if there is no such child.\n     */\n    var referenceNode = null;\n    if (util_1.Guard.isTextNode(range._startNode)) {\n        referenceNode = range._startNode;\n    }\n    else {\n        var index = 0;\n        try {\n            for (var _b = __values(range._startNode._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var child = _c.value;\n                if (index === range._startOffset) {\n                    referenceNode = child;\n                    break;\n                }\n                index++;\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n    }\n    /**\n     * 5. Let parent be range’s start node if referenceNode is null, and\n     * referenceNode’s parent otherwise.\n     */\n    var parent;\n    if (referenceNode === null) {\n        parent = range._startNode;\n    }\n    else {\n        if (referenceNode._parent === null) {\n            throw new Error(\"Parent node is null.\");\n        }\n        parent = referenceNode._parent;\n    }\n    /**\n     * 6. Ensure pre-insertion validity of node into parent before referenceNode.\n     */\n    MutationAlgorithm_1.mutation_ensurePreInsertionValidity(node, parent, referenceNode);\n    /**\n     * 7. If range’s start node is a Text node, set referenceNode to the result\n     * of splitting it with offset range’s start offset.\n     */\n    if (util_1.Guard.isTextNode(range._startNode)) {\n        referenceNode = TextAlgorithm_1.text_split(range._startNode, range._startOffset);\n    }\n    /**\n     * 8. If node is referenceNode, set referenceNode to its next sibling.\n     */\n    if (node === referenceNode) {\n        referenceNode = node._nextSibling;\n    }\n    /**\n     * 9. If node’s parent is not null, remove node from its parent.\n     */\n    if (node._parent !== null) {\n        MutationAlgorithm_1.mutation_remove(node, node._parent);\n    }\n    /**\n     * 10. Let newOffset be parent’s length if referenceNode is null, and\n     * referenceNode’s index otherwise.\n     */\n    var newOffset = (referenceNode === null ?\n        TreeAlgorithm_1.tree_nodeLength(parent) : TreeAlgorithm_1.tree_index(referenceNode));\n    /**\n     * 11. Increase newOffset by node’s length if node is a DocumentFragment\n     * node, and one otherwise.\n     */\n    if (util_1.Guard.isDocumentFragmentNode(node)) {\n        newOffset += TreeAlgorithm_1.tree_nodeLength(node);\n    }\n    else {\n        newOffset++;\n    }\n    /**\n     * 12. Pre-insert node into parent before referenceNode.\n     */\n    MutationAlgorithm_1.mutation_preInsert(node, parent, referenceNode);\n    /**\n     * 13. If range is collapsed, then set range’s end to (parent, newOffset).\n     */\n    if (range_collapsed(range)) {\n        range._end = [parent, newOffset];\n    }\n}\nexports.range_insert = range_insert;\n/**\n * Traverses through all contained nodes of a range.\n *\n * @param range - a range\n */\nfunction range_getContainedNodes(range) {\n    var _a;\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var container = range.commonAncestorContainer;\n            var currentNode = TreeAlgorithm_1.tree_getFirstDescendantNode(container);\n            return {\n                next: function () {\n                    while (currentNode && !range_isContained(currentNode, range)) {\n                        currentNode = TreeAlgorithm_1.tree_getNextDescendantNode(container, currentNode);\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        currentNode = TreeAlgorithm_1.tree_getNextDescendantNode(container, currentNode);\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.range_getContainedNodes = range_getContainedNodes;\n/**\n * Traverses through all partially contained nodes of a range.\n *\n * @param range - a range\n */\nfunction range_getPartiallyContainedNodes(range) {\n    var _a;\n    return _a = {},\n        _a[Symbol.iterator] = function () {\n            var container = range.commonAncestorContainer;\n            var currentNode = TreeAlgorithm_1.tree_getFirstDescendantNode(container);\n            return {\n                next: function () {\n                    while (currentNode && !range_isPartiallyContained(currentNode, range)) {\n                        currentNode = TreeAlgorithm_1.tree_getNextDescendantNode(container, currentNode);\n                    }\n                    if (currentNode === null) {\n                        return { done: true, value: null };\n                    }\n                    else {\n                        var result = { done: false, value: currentNode };\n                        currentNode = TreeAlgorithm_1.tree_getNextDescendantNode(container, currentNode);\n                        return result;\n                    }\n                }\n            };\n        },\n        _a;\n}\nexports.range_getPartiallyContainedNodes = range_getPartiallyContainedNodes;\n//# sourceMappingURL=RangeAlgorithm.js.map","'use strict';\n\nvar Type = require('../../type');\n\nfunction resolveJavascriptRegExp(data) {\n  if (data === null) return false;\n  if (data.length === 0) return false;\n\n  var regexp = data,\n      tail   = /\\/([gim]*)$/.exec(data),\n      modifiers = '';\n\n  // if regexp starts with '/' it can have modifiers and must be properly closed\n  // `/foo/gim` - modifiers tail can be maximum 3 chars\n  if (regexp[0] === '/') {\n    if (tail) modifiers = tail[1];\n\n    if (modifiers.length > 3) return false;\n    // if expression starts with /, is should be properly terminated\n    if (regexp[regexp.length - modifiers.length - 1] !== '/') return false;\n  }\n\n  return true;\n}\n\nfunction constructJavascriptRegExp(data) {\n  var regexp = data,\n      tail   = /\\/([gim]*)$/.exec(data),\n      modifiers = '';\n\n  // `/foo/gim` - tail can be maximum 4 chars\n  if (regexp[0] === '/') {\n    if (tail) modifiers = tail[1];\n    regexp = regexp.slice(1, regexp.length - modifiers.length - 1);\n  }\n\n  return new RegExp(regexp, modifiers);\n}\n\nfunction representJavascriptRegExp(object /*, style*/) {\n  var result = '/' + object.source + '/';\n\n  if (object.global) result += 'g';\n  if (object.multiline) result += 'm';\n  if (object.ignoreCase) result += 'i';\n\n  return result;\n}\n\nfunction isRegExp(object) {\n  return Object.prototype.toString.call(object) === '[object RegExp]';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:js/regexp', {\n  kind: 'scalar',\n  resolve: resolveJavascriptRegExp,\n  construct: constructJavascriptRegExp,\n  predicate: isRegExp,\n  represent: representJavascriptRegExp\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextImpl_1 = require(\"./TextImpl\");\nvar interfaces_1 = require(\"./interfaces\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a CDATA node.\n */\nvar CDATASectionImpl = /** @class */ (function (_super) {\n    __extends(CDATASectionImpl, _super);\n    /**\n     * Initializes a new instance of `CDATASection`.\n     *\n     * @param data - node contents\n     */\n    function CDATASectionImpl(data) {\n        return _super.call(this, data) || this;\n    }\n    /**\n     * Creates a new `CDATASection`.\n     *\n     * @param document - owner document\n     * @param data - node contents\n     */\n    CDATASectionImpl._create = function (document, data) {\n        if (data === void 0) { data = ''; }\n        var node = new CDATASectionImpl(data);\n        node._nodeDocument = document;\n        return node;\n    };\n    return CDATASectionImpl;\n}(TextImpl_1.TextImpl));\nexports.CDATASectionImpl = CDATASectionImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(CDATASectionImpl.prototype, \"_nodeType\", interfaces_1.NodeType.CData);\n//# sourceMappingURL=CDATASectionImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\".\");\n/**\n * Creates an XML builder which serializes the document in chunks.\n *\n * @param options - callback builder options\n *\n * @returns callback builder\n */\nfunction createCB(options) {\n    return new _1.XMLBuilderCBImpl(options);\n}\nexports.createCB = createCB;\n/**\n * Creates an XML builder which serializes the fragment in chunks.\n *\n * @param options - callback builder options\n *\n * @returns callback builder\n */\nfunction fragmentCB(options) {\n    return new _1.XMLBuilderCBImpl(options, true);\n}\nexports.fragmentCB = fragmentCB;\n//# sourceMappingURL=BuilderFunctionsCB.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a mixin that allows nodes to become the contents of\n * a <slot> element. This mixin is implemented by {@link Element} and\n * {@link Text}.\n */\nvar SlotableImpl = /** @class */ (function () {\n    function SlotableImpl() {\n    }\n    Object.defineProperty(SlotableImpl.prototype, \"_name\", {\n        get: function () { return this.__name || ''; },\n        set: function (val) { this.__name = val; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SlotableImpl.prototype, \"_assignedSlot\", {\n        get: function () { return this.__assignedSlot || null; },\n        set: function (val) { this.__assignedSlot = val; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SlotableImpl.prototype, \"assignedSlot\", {\n        /** @inheritdoc */\n        get: function () {\n            return algorithm_1.shadowTree_findASlot(this, true);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SlotableImpl;\n}());\nexports.SlotableImpl = SlotableImpl;\n//# sourceMappingURL=SlotableImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar interfaces_1 = require(\"./interfaces\");\nvar DOMException_1 = require(\"./DOMException\");\nvar NodeImpl_1 = require(\"./NodeImpl\");\nvar util_1 = require(\"../util\");\nvar util_2 = require(\"@oozcitak/util\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar URLAlgorithm_1 = require(\"@oozcitak/url/lib/URLAlgorithm\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a document node.\n */\nvar DocumentImpl = /** @class */ (function (_super) {\n    __extends(DocumentImpl, _super);\n    /**\n     * Initializes a new instance of `Document`.\n     */\n    function DocumentImpl() {\n        var _this = _super.call(this) || this;\n        _this._children = new Set();\n        _this._encoding = {\n            name: \"UTF-8\",\n            labels: [\"unicode-1-1-utf-8\", \"utf-8\", \"utf8\"]\n        };\n        _this._contentType = 'application/xml';\n        _this._URL = {\n            scheme: \"about\",\n            username: \"\",\n            password: \"\",\n            host: null,\n            port: null,\n            path: [\"blank\"],\n            query: null,\n            fragment: null,\n            _cannotBeABaseURLFlag: true,\n            _blobURLEntry: null\n        };\n        _this._origin = null;\n        _this._type = \"xml\";\n        _this._mode = \"no-quirks\";\n        _this._documentElement = null;\n        _this._hasNamespaces = false;\n        _this._nodeDocumentOverwrite = null;\n        return _this;\n    }\n    Object.defineProperty(DocumentImpl.prototype, \"_nodeDocument\", {\n        get: function () { return this._nodeDocumentOverwrite || this; },\n        set: function (val) { this._nodeDocumentOverwrite = val; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"implementation\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The implementation attribute’s getter must return the DOMImplementation\n             * object that is associated with the document.\n             */\n            return this._implementation || (this._implementation = algorithm_1.create_domImplementation(this));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"URL\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The URL attribute’s getter and documentURI attribute’s getter must return\n             * the URL, serialized.\n             * See: https://url.spec.whatwg.org/#concept-url-serializer\n             */\n            return URLAlgorithm_1.urlSerializer(this._URL);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"documentURI\", {\n        /** @inheritdoc */\n        get: function () { return this.URL; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"origin\", {\n        /** @inheritdoc */\n        get: function () {\n            return \"null\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"compatMode\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The compatMode attribute’s getter must return \"BackCompat\" if context\n             * object’s mode is \"quirks\", and \"CSS1Compat\" otherwise.\n             */\n            return this._mode === \"quirks\" ? \"BackCompat\" : \"CSS1Compat\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"characterSet\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The characterSet attribute’s getter, charset attribute’s getter, and\n             * inputEncoding attribute’s getter, must return context object’s\n             * encoding’s name.\n             */\n            return this._encoding.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"charset\", {\n        /** @inheritdoc */\n        get: function () { return this._encoding.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"inputEncoding\", {\n        /** @inheritdoc */\n        get: function () { return this._encoding.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"contentType\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The contentType attribute’s getter must return the content type.\n             */\n            return this._contentType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"doctype\", {\n        /** @inheritdoc */\n        get: function () {\n            var e_1, _a;\n            try {\n                /**\n                 * The doctype attribute’s getter must return the child of the document\n                 * that is a doctype, and null otherwise.\n                 */\n                for (var _b = __values(this._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var child = _c.value;\n                    if (util_1.Guard.isDocumentTypeNode(child))\n                        return child;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"documentElement\", {\n        /** @inheritdoc */\n        get: function () {\n            /**\n             * The documentElement attribute’s getter must return the document element.\n             */\n            return this._documentElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    DocumentImpl.prototype.getElementsByTagName = function (qualifiedName) {\n        /**\n         * The getElementsByTagName(qualifiedName) method, when invoked, must return\n         * the list of elements with qualified name qualifiedName for the context object.\n         */\n        return algorithm_1.node_listOfElementsWithQualifiedName(qualifiedName, this);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.getElementsByTagNameNS = function (namespace, localName) {\n        /**\n         * The getElementsByTagNameNS(namespace, localName) method, when invoked,\n         * must return the list of elements with namespace namespace and local name\n         * localName for the context object.\n         */\n        return algorithm_1.node_listOfElementsWithNamespace(namespace, localName, this);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.getElementsByClassName = function (classNames) {\n        /**\n         * The getElementsByClassName(classNames) method, when invoked, must return\n         * the list of elements with class names classNames for the context object.\n         */\n        return algorithm_1.node_listOfElementsWithClassNames(classNames, this);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createElement = function (localName, options) {\n        /**\n         * 1. If localName does not match the Name production, then throw an\n         * \"InvalidCharacterError\" DOMException.\n         * 2. If the context object is an HTML document, then set localName to\n         * localName in ASCII lowercase.\n         * 3. Let is be null.\n         * 4. If options is a dictionary and options’s is is present, then set is\n         * to it.\n         * 5. Let namespace be the HTML namespace, if the context object is an\n         * HTML document or context object’s content type is\n         * \"application/xhtml+xml\", and null otherwise.\n         * 6. Return the result of creating an element given the context object,\n         * localName, namespace, null, is, and with the synchronous custom elements\n         * flag set.\n         */\n        if (!algorithm_1.xml_isName(localName))\n            throw new DOMException_1.InvalidCharacterError();\n        if (this._type === \"html\")\n            localName = localName.toLowerCase();\n        var is = null;\n        if (options !== undefined) {\n            if (util_2.isString(options)) {\n                is = options;\n            }\n            else {\n                is = options.is;\n            }\n        }\n        var namespace = (this._type === \"html\" || this._contentType === \"application/xhtml+xml\") ?\n            infra_1.namespace.HTML : null;\n        return algorithm_1.element_createAnElement(this, localName, namespace, null, is, true);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createElementNS = function (namespace, qualifiedName, options) {\n        /**\n         * The createElementNS(namespace, qualifiedName, options) method, when\n         * invoked, must return the result of running the internal createElementNS\n         * steps, given context object, namespace, qualifiedName, and options.\n         */\n        return algorithm_1.document_internalCreateElementNS(this, namespace, qualifiedName, options);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createDocumentFragment = function () {\n        /**\n         * The createDocumentFragment() method, when invoked, must return a new\n         * DocumentFragment node with its node document set to the context object.\n         */\n        return algorithm_1.create_documentFragment(this);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createTextNode = function (data) {\n        /**\n         * The createTextNode(data) method, when invoked, must return a new Text\n         * node with its data set to data and node document set to the context object.\n         */\n        return algorithm_1.create_text(this, data);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createCDATASection = function (data) {\n        /**\n         * 1. If context object is an HTML document, then throw a\n         * \"NotSupportedError\" DOMException.\n         * 2. If data contains the string \"]]>\", then throw an\n         * \"InvalidCharacterError\" DOMException.\n         * 3. Return a new CDATASection node with its data set to data and node\n         * document set to the context object.\n         */\n        if (this._type === \"html\")\n            throw new DOMException_1.NotSupportedError();\n        if (data.indexOf(']]>') !== -1)\n            throw new DOMException_1.InvalidCharacterError();\n        return algorithm_1.create_cdataSection(this, data);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createComment = function (data) {\n        /**\n         * The createComment(data) method, when invoked, must return a new Comment\n         * node with its data set to data and node document set to the context object.\n         */\n        return algorithm_1.create_comment(this, data);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createProcessingInstruction = function (target, data) {\n        /**\n         * 1. If target does not match the Name production, then throw an\n         * \"InvalidCharacterError\" DOMException.\n         * 2. If data contains the string \"?>\", then throw an\n         * \"InvalidCharacterError\" DOMException.\n         * 3. Return a new ProcessingInstruction node, with target set to target,\n         * data set to data, and node document set to the context object.\n         */\n        if (!algorithm_1.xml_isName(target))\n            throw new DOMException_1.InvalidCharacterError();\n        if (data.indexOf(\"?>\") !== -1)\n            throw new DOMException_1.InvalidCharacterError();\n        return algorithm_1.create_processingInstruction(this, target, data);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.importNode = function (node, deep) {\n        if (deep === void 0) { deep = false; }\n        /**\n         * 1. If node is a document or shadow root, then throw a \"NotSupportedError\" DOMException.\n         */\n        if (util_1.Guard.isDocumentNode(node) || util_1.Guard.isShadowRoot(node))\n            throw new DOMException_1.NotSupportedError();\n        /**\n         * 2. Return a clone of node, with context object and the clone children flag set if deep is true.\n         */\n        return algorithm_1.node_clone(node, this, deep);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.adoptNode = function (node) {\n        /**\n         * 1. If node is a document, then throw a \"NotSupportedError\" DOMException.\n         */\n        if (util_1.Guard.isDocumentNode(node))\n            throw new DOMException_1.NotSupportedError();\n        /**\n         * 2. If node is a shadow root, then throw a \"HierarchyRequestError\" DOMException.\n         */\n        if (util_1.Guard.isShadowRoot(node))\n            throw new DOMException_1.HierarchyRequestError();\n        /**\n         * 3. Adopt node into the context object.\n         * 4. Return node.\n         */\n        algorithm_1.document_adopt(node, this);\n        return node;\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createAttribute = function (localName) {\n        /**\n         * 1. If localName does not match the Name production in XML, then throw\n         * an \"InvalidCharacterError\" DOMException.\n         * 2. If the context object is an HTML document, then set localName to\n         * localName in ASCII lowercase.\n         * 3. Return a new attribute whose local name is localName and node document\n         * is context object.\n         */\n        if (!algorithm_1.xml_isName(localName))\n            throw new DOMException_1.InvalidCharacterError();\n        if (this._type === \"html\") {\n            localName = localName.toLowerCase();\n        }\n        var attr = algorithm_1.create_attr(this, localName);\n        return attr;\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createAttributeNS = function (namespace, qualifiedName) {\n        /**\n         * 1. Let namespace, prefix, and localName be the result of passing\n         * namespace and qualifiedName to validate and extract.\n         * 2. Return a new attribute whose namespace is namespace, namespace prefix\n         * is prefix, local name is localName, and node document is context object.\n         */\n        var _a = __read(algorithm_1.namespace_validateAndExtract(namespace, qualifiedName), 3), ns = _a[0], prefix = _a[1], localName = _a[2];\n        var attr = algorithm_1.create_attr(this, localName);\n        attr._namespace = ns;\n        attr._namespacePrefix = prefix;\n        return attr;\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createEvent = function (eventInterface) {\n        return algorithm_1.event_createLegacyEvent(eventInterface);\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createRange = function () {\n        /**\n         * The createRange() method, when invoked, must return a new live range\n         * with (context object, 0) as its start and end.\n         */\n        var range = algorithm_1.create_range();\n        range._start = [this, 0];\n        range._end = [this, 0];\n        return range;\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createNodeIterator = function (root, whatToShow, filter) {\n        if (whatToShow === void 0) { whatToShow = interfaces_1.WhatToShow.All; }\n        if (filter === void 0) { filter = null; }\n        /**\n         * 1. Let iterator be a new NodeIterator object.\n         * 2. Set iterator’s root and iterator’s reference to root.\n         * 3. Set iterator’s pointer before reference to true.\n         * 4. Set iterator’s whatToShow to whatToShow.\n         * 5. Set iterator’s filter to filter.\n         * 6. Return iterator.\n         */\n        var iterator = algorithm_1.create_nodeIterator(root, root, true);\n        iterator._whatToShow = whatToShow;\n        iterator._iteratorCollection = algorithm_1.create_nodeList(root);\n        if (util_2.isFunction(filter)) {\n            iterator._filter = algorithm_1.create_nodeFilter();\n            iterator._filter.acceptNode = filter;\n        }\n        else {\n            iterator._filter = filter;\n        }\n        return iterator;\n    };\n    /** @inheritdoc */\n    DocumentImpl.prototype.createTreeWalker = function (root, whatToShow, filter) {\n        if (whatToShow === void 0) { whatToShow = interfaces_1.WhatToShow.All; }\n        if (filter === void 0) { filter = null; }\n        /**\n         * 1. Let walker be a new TreeWalker object.\n         * 2. Set walker’s root and walker’s current to root.\n         * 3. Set walker’s whatToShow to whatToShow.\n         * 4. Set walker’s filter to filter.\n         * 5. Return walker.\n         */\n        var walker = algorithm_1.create_treeWalker(root, root);\n        walker._whatToShow = whatToShow;\n        if (util_2.isFunction(filter)) {\n            walker._filter = algorithm_1.create_nodeFilter();\n            walker._filter.acceptNode = filter;\n        }\n        else {\n            walker._filter = filter;\n        }\n        return walker;\n    };\n    /**\n     * Gets the parent event target for the given event.\n     *\n     * @param event - an event\n     */\n    DocumentImpl.prototype._getTheParent = function (event) {\n        /**\n         * TODO: Implement realms\n         * A document’s get the parent algorithm, given an event, returns null if\n         * event’s type attribute value is \"load\" or document does not have a\n         * browsing context, and the document’s relevant global object otherwise.\n         */\n        if (event._type === \"load\") {\n            return null;\n        }\n        else {\n            return DOMImpl_1.dom.window;\n        }\n    };\n    // MIXIN: NonElementParentNode\n    /* istanbul ignore next */\n    DocumentImpl.prototype.getElementById = function (elementId) { throw new Error(\"Mixin: NonElementParentNode not implemented.\"); };\n    Object.defineProperty(DocumentImpl.prototype, \"children\", {\n        // MIXIN: DocumentOrShadowRoot\n        // No elements\n        // MIXIN: ParentNode\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"firstElementChild\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"lastElementChild\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentImpl.prototype, \"childElementCount\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    /* istanbul ignore next */\n    DocumentImpl.prototype.prepend = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ParentNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentImpl.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ParentNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentImpl.prototype.querySelector = function (selectors) { throw new Error(\"Mixin: ParentNode not implemented.\"); };\n    /* istanbul ignore next */\n    DocumentImpl.prototype.querySelectorAll = function (selectors) { throw new Error(\"Mixin: ParentNode not implemented.\"); };\n    return DocumentImpl;\n}(NodeImpl_1.NodeImpl));\nexports.DocumentImpl = DocumentImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(DocumentImpl.prototype, \"_nodeType\", interfaces_1.NodeType.Document);\n//# sourceMappingURL=DocumentImpl.js.map","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Adds the given item to the end of the set.\n *\n * @param set - a set\n * @param item - an item\n */\nfunction append(set, item) {\n    set.add(item);\n}\nexports.append = append;\n/**\n * Extends a set by appending all items from another set.\n *\n * @param setA - a list to extend\n * @param setB - a list containing items to append to `setA`\n */\nfunction extend(setA, setB) {\n    setB.forEach(setA.add, setA);\n}\nexports.extend = extend;\n/**\n * Inserts the given item to the start of the set.\n *\n * @param set - a set\n * @param item - an item\n */\nfunction prepend(set, item) {\n    var cloned = new Set(set);\n    set.clear();\n    set.add(item);\n    cloned.forEach(set.add, set);\n}\nexports.prepend = prepend;\n/**\n * Replaces the given item or all items matching condition with a new item.\n *\n * @param set - a set\n * @param conditionOrItem - an item to replace or a condition matching items\n * to replace\n * @param item - an item\n */\nfunction replace(set, conditionOrItem, newItem) {\n    var e_1, _a;\n    var newSet = new Set();\n    try {\n        for (var set_1 = __values(set), set_1_1 = set_1.next(); !set_1_1.done; set_1_1 = set_1.next()) {\n            var oldItem = set_1_1.value;\n            if (util_1.isFunction(conditionOrItem)) {\n                if (!!conditionOrItem.call(null, oldItem)) {\n                    newSet.add(newItem);\n                }\n                else {\n                    newSet.add(oldItem);\n                }\n            }\n            else if (oldItem === conditionOrItem) {\n                newSet.add(newItem);\n            }\n            else {\n                newSet.add(oldItem);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (set_1_1 && !set_1_1.done && (_a = set_1.return)) _a.call(set_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    set.clear();\n    newSet.forEach(set.add, set);\n}\nexports.replace = replace;\n/**\n * Inserts the given item before the given index.\n *\n * @param set - a set\n * @param item - an item\n */\nfunction insert(set, item, index) {\n    var e_2, _a;\n    var newSet = new Set();\n    var i = 0;\n    try {\n        for (var set_2 = __values(set), set_2_1 = set_2.next(); !set_2_1.done; set_2_1 = set_2.next()) {\n            var oldItem = set_2_1.value;\n            if (i === index)\n                newSet.add(item);\n            newSet.add(oldItem);\n            i++;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (set_2_1 && !set_2_1.done && (_a = set_2.return)) _a.call(set_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    set.clear();\n    newSet.forEach(set.add, set);\n}\nexports.insert = insert;\n/**\n * Removes the given item or all items matching condition.\n *\n * @param set - a set\n * @param conditionOrItem - an item to remove or a condition matching items\n * to remove\n */\nfunction remove(set, conditionOrItem) {\n    var e_3, _a, e_4, _b;\n    if (!util_1.isFunction(conditionOrItem)) {\n        set.delete(conditionOrItem);\n    }\n    else {\n        var toRemove = [];\n        try {\n            for (var set_3 = __values(set), set_3_1 = set_3.next(); !set_3_1.done; set_3_1 = set_3.next()) {\n                var item = set_3_1.value;\n                if (!!conditionOrItem.call(null, item)) {\n                    toRemove.push(item);\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (set_3_1 && !set_3_1.done && (_a = set_3.return)) _a.call(set_3);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        try {\n            for (var toRemove_1 = __values(toRemove), toRemove_1_1 = toRemove_1.next(); !toRemove_1_1.done; toRemove_1_1 = toRemove_1.next()) {\n                var oldItem = toRemove_1_1.value;\n                set.delete(oldItem);\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (toRemove_1_1 && !toRemove_1_1.done && (_b = toRemove_1.return)) _b.call(toRemove_1);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    }\n}\nexports.remove = remove;\n/**\n * Removes all items from the set.\n */\nfunction empty(set) {\n    set.clear();\n}\nexports.empty = empty;\n/**\n * Determines if the set contains the given item or any items matching\n * condition.\n *\n * @param set - a set\n * @param conditionOrItem - an item to a condition to match\n */\nfunction contains(set, conditionOrItem) {\n    var e_5, _a;\n    if (!util_1.isFunction(conditionOrItem)) {\n        return set.has(conditionOrItem);\n    }\n    else {\n        try {\n            for (var set_4 = __values(set), set_4_1 = set_4.next(); !set_4_1.done; set_4_1 = set_4.next()) {\n                var oldItem = set_4_1.value;\n                if (!!conditionOrItem.call(null, oldItem)) {\n                    return true;\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (set_4_1 && !set_4_1.done && (_a = set_4.return)) _a.call(set_4);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    }\n    return false;\n}\nexports.contains = contains;\n/**\n * Returns the count of items in the set matching the given condition.\n *\n * @param set - a set\n * @param condition - an optional condition to match\n */\nfunction size(set, condition) {\n    var e_6, _a;\n    if (condition === undefined) {\n        return set.size;\n    }\n    else {\n        var count = 0;\n        try {\n            for (var set_5 = __values(set), set_5_1 = set_5.next(); !set_5_1.done; set_5_1 = set_5.next()) {\n                var item = set_5_1.value;\n                if (!!condition.call(null, item)) {\n                    count++;\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (set_5_1 && !set_5_1.done && (_a = set_5.return)) _a.call(set_5);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        return count;\n    }\n}\nexports.size = size;\n/**\n * Determines if the set is empty.\n *\n * @param set - a set\n */\nfunction isEmpty(set) {\n    return set.size === 0;\n}\nexports.isEmpty = isEmpty;\n/**\n * Returns an iterator for the items of the set.\n *\n * @param set - a set\n * @param condition - an optional condition to match\n */\nfunction forEach(set, condition) {\n    var set_6, set_6_1, item, e_7_1;\n    var e_7, _a;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (!(condition === undefined)) return [3 /*break*/, 2];\n                return [5 /*yield**/, __values(set)];\n            case 1:\n                _b.sent();\n                return [3 /*break*/, 9];\n            case 2:\n                _b.trys.push([2, 7, 8, 9]);\n                set_6 = __values(set), set_6_1 = set_6.next();\n                _b.label = 3;\n            case 3:\n                if (!!set_6_1.done) return [3 /*break*/, 6];\n                item = set_6_1.value;\n                if (!!!condition.call(null, item)) return [3 /*break*/, 5];\n                return [4 /*yield*/, item];\n            case 4:\n                _b.sent();\n                _b.label = 5;\n            case 5:\n                set_6_1 = set_6.next();\n                return [3 /*break*/, 3];\n            case 6: return [3 /*break*/, 9];\n            case 7:\n                e_7_1 = _b.sent();\n                e_7 = { error: e_7_1 };\n                return [3 /*break*/, 9];\n            case 8:\n                try {\n                    if (set_6_1 && !set_6_1.done && (_a = set_6.return)) _a.call(set_6);\n                }\n                finally { if (e_7) throw e_7.error; }\n                return [7 /*endfinally*/];\n            case 9: return [2 /*return*/];\n        }\n    });\n}\nexports.forEach = forEach;\n/**\n * Creates and returns a shallow clone of set.\n *\n * @param set - a set\n */\nfunction clone(set) {\n    return new Set(set);\n}\nexports.clone = clone;\n/**\n * Returns a new set containing items from the set sorted in ascending\n * order.\n *\n * @param set - a set\n * @param lessThanAlgo - a function that returns `true` if its first argument\n * is less than its second argument, and `false` otherwise.\n */\nfunction sortInAscendingOrder(set, lessThanAlgo) {\n    var list = new (Array.bind.apply(Array, __spread([void 0], set)))();\n    list.sort(function (itemA, itemB) {\n        return lessThanAlgo.call(null, itemA, itemB) ? -1 : 1;\n    });\n    return new Set(list);\n}\nexports.sortInAscendingOrder = sortInAscendingOrder;\n/**\n * Returns a new set containing items from the set sorted in descending\n * order.\n *\n * @param set - a set\n * @param lessThanAlgo - a function that returns `true` if its first argument\n * is less than its second argument, and `false` otherwise.\n */\nfunction sortInDescendingOrder(set, lessThanAlgo) {\n    var list = new (Array.bind.apply(Array, __spread([void 0], set)))();\n    list.sort(function (itemA, itemB) {\n        return lessThanAlgo.call(null, itemA, itemB) ? 1 : -1;\n    });\n    return new Set(list);\n}\nexports.sortInDescendingOrder = sortInDescendingOrder;\n/**\n * Determines if a set is a subset of another set.\n *\n * @param subset - a set\n * @param superset - a superset possibly containing all items from `subset`.\n */\nfunction isSubsetOf(subset, superset) {\n    var e_8, _a;\n    try {\n        for (var subset_1 = __values(subset), subset_1_1 = subset_1.next(); !subset_1_1.done; subset_1_1 = subset_1.next()) {\n            var item = subset_1_1.value;\n            if (!superset.has(item))\n                return false;\n        }\n    }\n    catch (e_8_1) { e_8 = { error: e_8_1 }; }\n    finally {\n        try {\n            if (subset_1_1 && !subset_1_1.done && (_a = subset_1.return)) _a.call(subset_1);\n        }\n        finally { if (e_8) throw e_8.error; }\n    }\n    return true;\n}\nexports.isSubsetOf = isSubsetOf;\n/**\n * Determines if a set is a superset of another set.\n *\n * @param superset - a set\n * @param subset - a subset possibly contained within `superset`.\n */\nfunction isSupersetOf(superset, subset) {\n    return isSubsetOf(subset, superset);\n}\nexports.isSupersetOf = isSupersetOf;\n/**\n * Returns a new set with items that are contained in both sets.\n *\n * @param setA - a set\n * @param setB - a set\n */\nfunction intersection(setA, setB) {\n    var e_9, _a;\n    var newSet = new Set();\n    try {\n        for (var setA_1 = __values(setA), setA_1_1 = setA_1.next(); !setA_1_1.done; setA_1_1 = setA_1.next()) {\n            var item = setA_1_1.value;\n            if (setB.has(item))\n                newSet.add(item);\n        }\n    }\n    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n    finally {\n        try {\n            if (setA_1_1 && !setA_1_1.done && (_a = setA_1.return)) _a.call(setA_1);\n        }\n        finally { if (e_9) throw e_9.error; }\n    }\n    return newSet;\n}\nexports.intersection = intersection;\n/**\n * Returns a new set with items from both sets.\n *\n * @param setA - a set\n * @param setB - a set\n */\nfunction union(setA, setB) {\n    var newSet = new Set(setA);\n    setB.forEach(newSet.add, newSet);\n    return newSet;\n}\nexports.union = union;\n/**\n * Returns a set of integers from `n` to `m` inclusive.\n *\n * @param n - starting number\n * @param m - ending number\n */\nfunction range(n, m) {\n    var newSet = new Set();\n    for (var i = n; i <= m; i++) {\n        newSet.add(i);\n    }\n    return newSet;\n}\nexports.range = range;\n//# sourceMappingURL=Set.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a mixin that extends non-element parent nodes. This mixin\n * is implemented by {@link Document} and {@link DocumentFragment}.\n */\nvar NonElementParentNodeImpl = /** @class */ (function () {\n    function NonElementParentNodeImpl() {\n    }\n    /** @inheritdoc */\n    NonElementParentNodeImpl.prototype.getElementById = function (id) {\n        /**\n         * The getElementById(elementId) method, when invoked, must return the first\n         * element, in tree order, within the context object’s descendants,\n         * whose ID is elementId, and null if there is no such element otherwise.\n         */\n        var ele = algorithm_1.tree_getFirstDescendantNode(util_1.Cast.asNode(this), false, false, function (e) { return util_1.Guard.isElementNode(e); });\n        while (ele !== null) {\n            if (ele._uniqueIdentifier === id) {\n                return ele;\n            }\n            ele = algorithm_1.tree_getNextDescendantNode(util_1.Cast.asNode(this), ele, false, false, function (e) { return util_1.Guard.isElementNode(e); });\n        }\n        return null;\n    };\n    return NonElementParentNodeImpl;\n}());\nexports.NonElementParentNodeImpl = NonElementParentNodeImpl;\n//# sourceMappingURL=NonElementParentNodeImpl.js.map",null,"/**\n * Module dependencies.\n */\n\nvar tty = require('tty');\nvar util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(function (key) {\n  return /^debug_/i.test(key);\n}).reduce(function (obj, key) {\n  // camel-case\n  var prop = key\n    .substring(6)\n    .toLowerCase()\n    .replace(/_([a-z])/g, function (_, k) { return k.toUpperCase() });\n\n  // coerce string value into JS value\n  var val = process.env[key];\n  if (/^(yes|on|true|enabled)$/i.test(val)) val = true;\n  else if (/^(no|off|false|disabled)$/i.test(val)) val = false;\n  else if (val === 'null') val = null;\n  else val = Number(val);\n\n  obj[prop] = val;\n  return obj;\n}, {});\n\n/**\n * The file descriptor to write the `debug()` calls to.\n * Set the `DEBUG_FD` env variable to override with another value. i.e.:\n *\n *   $ DEBUG_FD=3 node script.js 3>debug.log\n */\n\nvar fd = parseInt(process.env.DEBUG_FD, 10) || 2;\n\nif (1 !== fd && 2 !== fd) {\n  util.deprecate(function(){}, 'except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)')()\n}\n\nvar stream = 1 === fd ? process.stdout :\n             2 === fd ? process.stderr :\n             createWritableStdioStream(fd);\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n  return 'colors' in exports.inspectOpts\n    ? Boolean(exports.inspectOpts.colors)\n    : tty.isatty(fd);\n}\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nexports.formatters.o = function(v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts)\n    .split('\\n').map(function(str) {\n      return str.trim()\n    }).join(' ');\n};\n\n/**\n * Map %o to `util.inspect()`, allowing multiple lines if needed.\n */\n\nexports.formatters.O = function(v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts);\n};\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var name = this.namespace;\n  var useColors = this.useColors;\n\n  if (useColors) {\n    var c = this.color;\n    var prefix = '  \\u001b[3' + c + ';1m' + name + ' ' + '\\u001b[0m';\n\n    args[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n    args.push('\\u001b[3' + c + 'm+' + exports.humanize(this.diff) + '\\u001b[0m');\n  } else {\n    args[0] = new Date().toUTCString()\n      + ' ' + name + ' ' + args[0];\n  }\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to `stream`.\n */\n\nfunction log() {\n  return stream.write(util.format.apply(util, arguments) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  if (null == namespaces) {\n    // If you set a process.env field to null or undefined, it gets cast to the\n    // string 'null' or 'undefined'. Just delete instead.\n    delete process.env.DEBUG;\n  } else {\n    process.env.DEBUG = namespaces;\n  }\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  return process.env.DEBUG;\n}\n\n/**\n * Copied from `node/src/node.js`.\n *\n * XXX: It's lame that node doesn't expose this API out-of-the-box. It also\n * relies on the undocumented `tty_wrap.guessHandleType()` which is also lame.\n */\n\nfunction createWritableStdioStream (fd) {\n  var stream;\n  var tty_wrap = process.binding('tty_wrap');\n\n  // Note stream._type is used for test-module-load-list.js\n\n  switch (tty_wrap.guessHandleType(fd)) {\n    case 'TTY':\n      stream = new tty.WriteStream(fd);\n      stream._type = 'tty';\n\n      // Hack to have stream not keep the event loop alive.\n      // See https://github.com/joyent/node/issues/1726\n      if (stream._handle && stream._handle.unref) {\n        stream._handle.unref();\n      }\n      break;\n\n    case 'FILE':\n      var fs = require('fs');\n      stream = new fs.SyncWriteStream(fd, { autoClose: false });\n      stream._type = 'fs';\n      break;\n\n    case 'PIPE':\n    case 'TCP':\n      var net = require('net');\n      stream = new net.Socket({\n        fd: fd,\n        readable: false,\n        writable: true\n      });\n\n      // FIXME Should probably have an option in net.Socket to create a\n      // stream from an existing fd which is writable only. But for now\n      // we'll just add this hack and set the `readable` member to false.\n      // Test: ./node test/fixtures/echo.js < /etc/passwd\n      stream.readable = false;\n      stream.read = null;\n      stream._type = 'pipe';\n\n      // FIXME Hack to have stream not keep the event loop alive.\n      // See https://github.com/joyent/node/issues/1726\n      if (stream._handle && stream._handle.unref) {\n        stream._handle.unref();\n      }\n      break;\n\n    default:\n      // Probably an error on in uv_guess_handle()\n      throw new Error('Implement me. Unknown stream file type!');\n  }\n\n  // For supporting legacy API we put the FD here.\n  stream.fd = fd;\n\n  stream._isStdio = true;\n\n  return stream;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init (debug) {\n  debug.inspectOpts = {};\n\n  var keys = Object.keys(exports.inspectOpts);\n  for (var i = 0; i < keys.length; i++) {\n    debug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n  }\n}\n\n/**\n * Enable namespaces listed in `process.env.DEBUG` initially.\n */\n\nexports.enable(load());\n","'use strict';\n\n\nvar common = require('./common');\n\n\nfunction Mark(name, buffer, position, line, column) {\n  this.name     = name;\n  this.buffer   = buffer;\n  this.position = position;\n  this.line     = line;\n  this.column   = column;\n}\n\n\nMark.prototype.getSnippet = function getSnippet(indent, maxLength) {\n  var head, start, tail, end, snippet;\n\n  if (!this.buffer) return null;\n\n  indent = indent || 4;\n  maxLength = maxLength || 75;\n\n  head = '';\n  start = this.position;\n\n  while (start > 0 && '\\x00\\r\\n\\x85\\u2028\\u2029'.indexOf(this.buffer.charAt(start - 1)) === -1) {\n    start -= 1;\n    if (this.position - start > (maxLength / 2 - 1)) {\n      head = ' ... ';\n      start += 5;\n      break;\n    }\n  }\n\n  tail = '';\n  end = this.position;\n\n  while (end < this.buffer.length && '\\x00\\r\\n\\x85\\u2028\\u2029'.indexOf(this.buffer.charAt(end)) === -1) {\n    end += 1;\n    if (end - this.position > (maxLength / 2 - 1)) {\n      tail = ' ... ';\n      end -= 5;\n      break;\n    }\n  }\n\n  snippet = this.buffer.slice(start, end);\n\n  return common.repeat(' ', indent) + head + snippet + tail + '\\n' +\n         common.repeat(' ', indent + this.position - start + head.length) + '^';\n};\n\n\nMark.prototype.toString = function toString(compact) {\n  var snippet, where = '';\n\n  if (this.name) {\n    where += 'in \"' + this.name + '\" ';\n  }\n\n  where += 'at line ' + (this.line + 1) + ', column ' + (this.column + 1);\n\n  if (!compact) {\n    snippet = this.getSnippet();\n\n    if (snippet) {\n      where += ':\\n' + snippet;\n    }\n  }\n\n  return where;\n};\n\n\nmodule.exports = Mark;\n","// JS-YAML's default schema for `safeLoad` function.\n// It is not described in the YAML specification.\n//\n// This schema is based on standard YAML's Core schema and includes most of\n// extra types described at YAML tag repository. (http://yaml.org/type/)\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  include: [\n    require('./core')\n  ],\n  implicit: [\n    require('../type/timestamp'),\n    require('../type/merge')\n  ],\n  explicit: [\n    require('../type/binary'),\n    require('../type/omap'),\n    require('../type/pairs'),\n    require('../type/set')\n  ]\n});\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CodePoints_1 = require(\"./CodePoints\");\nvar ByteSequence_1 = require(\"./ByteSequence\");\nvar Byte_1 = require(\"./Byte\");\nvar util_1 = require(\"@oozcitak/util\");\n/**\n * Determines if the string `a` is a code unit prefix of string `b`.\n *\n * @param a - a string\n * @param b - a string\n */\nfunction isCodeUnitPrefix(a, b) {\n    /**\n     * 1. Let i be 0.\n     * 2. While true:\n     * 2.1. Let aCodeUnit be the ith code unit of a if i is less than a’s length;\n     * otherwise null.\n     * 2.2. Let bCodeUnit be the ith code unit of b if i is less than b’s length;\n     * otherwise null.\n     * 2.3. If bCodeUnit is null, then return true.\n     * 2.4. Return false if aCodeUnit is different from bCodeUnit.\n     * 2.5. Set i to i + 1.\n     */\n    var i = 0;\n    while (true) {\n        var aCodeUnit = i < a.length ? a.charCodeAt(i) : null;\n        var bCodeUnit = i < b.length ? b.charCodeAt(i) : null;\n        if (aCodeUnit === null)\n            return true;\n        if (aCodeUnit !== bCodeUnit)\n            return false;\n        i++;\n    }\n}\nexports.isCodeUnitPrefix = isCodeUnitPrefix;\n/**\n * Determines if the string `a` is a code unit less than string `b`.\n *\n * @param a - a string\n * @param b - a string\n */\nfunction isCodeUnitLessThan(a, b) {\n    /**\n     * 1. If b is a code unit prefix of a, then return false.\n     * 2. If a is a code unit prefix of b, then return true.\n     * 3. Let n be the smallest index such that the nth code unit of a is\n     * different from the nth code unit of b. (There has to be such an index,\n     * since neither string is a prefix of the other.)\n     * 4. If the nth code unit of a is less than the nth code unit of b, then\n     * return true.\n     * 5. Return false.\n     */\n    if (isCodeUnitPrefix(b, a))\n        return false;\n    if (isCodeUnitPrefix(a, b))\n        return true;\n    for (var i = 0; i < Math.min(a.length, b.length); i++) {\n        var aCodeUnit = a.charCodeAt(i);\n        var bCodeUnit = b.charCodeAt(i);\n        if (aCodeUnit === bCodeUnit)\n            continue;\n        return (aCodeUnit < bCodeUnit);\n    }\n    /* istanbul ignore next */\n    return false;\n}\nexports.isCodeUnitLessThan = isCodeUnitLessThan;\n/**\n * Isomorphic encodes the given string.\n *\n * @param str - a string\n */\nfunction isomorphicEncode(str) {\n    var e_1, _a;\n    /**\n     * 1. Assert: input contains no code points greater than U+00FF.\n     * 2. Return a byte sequence whose length is equal to input’s length and whose\n     * bytes have the same values as input’s code points, in the same order.\n     */\n    var codePoints = Array.from(str);\n    var bytes = new Uint8Array(codePoints.length);\n    var i = 0;\n    try {\n        for (var str_1 = __values(str), str_1_1 = str_1.next(); !str_1_1.done; str_1_1 = str_1.next()) {\n            var codePoint = str_1_1.value;\n            var byte = codePoint.codePointAt(0);\n            console.assert(byte !== undefined && byte <= 0x00FF, \"isomorphicEncode requires string bytes to be less than or equal to 0x00FF.\");\n            if (byte !== undefined && byte <= 0x00FF) {\n                bytes[i++] = byte;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (str_1_1 && !str_1_1.done && (_a = str_1.return)) _a.call(str_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return bytes;\n}\nexports.isomorphicEncode = isomorphicEncode;\n/**\n * Determines if the given string is An ASCII string.\n *\n * @param str - a string\n */\nfunction isASCIIString(str) {\n    /**\n     * An ASCII string is a string whose code points are all ASCII code points.\n     */\n    return /^[\\u0000-\\u007F]*$/.test(str);\n}\nexports.isASCIIString = isASCIIString;\n/**\n * Converts all uppercase ASCII code points to lowercase.\n *\n * @param str - a string\n */\nfunction asciiLowercase(str) {\n    var e_2, _a;\n    /**\n     * To ASCII lowercase a string, replace all ASCII upper alphas in the string\n     * with their corresponding code point in ASCII lower alpha.\n     */\n    var result = \"\";\n    try {\n        for (var str_2 = __values(str), str_2_1 = str_2.next(); !str_2_1.done; str_2_1 = str_2.next()) {\n            var c = str_2_1.value;\n            var code = c.codePointAt(0);\n            if (code !== undefined && code >= 0x41 && code <= 0x5A) {\n                result += String.fromCodePoint(code + 0x20);\n            }\n            else {\n                result += c;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (str_2_1 && !str_2_1.done && (_a = str_2.return)) _a.call(str_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return result;\n}\nexports.asciiLowercase = asciiLowercase;\n/**\n * Converts all uppercase ASCII code points to uppercase.\n *\n * @param str - a string\n */\nfunction asciiUppercase(str) {\n    var e_3, _a;\n    /**\n     * To ASCII uppercase a string, replace all ASCII lower alphas in the string\n     * with their corresponding code point in ASCII upper alpha.\n     */\n    var result = \"\";\n    try {\n        for (var str_3 = __values(str), str_3_1 = str_3.next(); !str_3_1.done; str_3_1 = str_3.next()) {\n            var c = str_3_1.value;\n            var code = c.codePointAt(0);\n            if (code !== undefined && code >= 0x61 && code <= 0x7A) {\n                result += String.fromCodePoint(code - 0x20);\n            }\n            else {\n                result += c;\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (str_3_1 && !str_3_1.done && (_a = str_3.return)) _a.call(str_3);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return result;\n}\nexports.asciiUppercase = asciiUppercase;\n/**\n * Compares two ASCII strings case-insensitively.\n *\n * @param a - a string\n * @param b - a string\n */\nfunction asciiCaseInsensitiveMatch(a, b) {\n    /**\n     * A string A is an ASCII case-insensitive match for a string B, if the ASCII\n     * lowercase of A is the ASCII lowercase of B.\n     */\n    return asciiLowercase(a) === asciiLowercase(b);\n}\nexports.asciiCaseInsensitiveMatch = asciiCaseInsensitiveMatch;\n/**\n * ASCII encodes a string.\n *\n * @param str - a string\n */\nfunction asciiEncode(str) {\n    /**\n     * 1. Assert: input is an ASCII string.\n     * 2. Return the isomorphic encoding of input.\n     */\n    console.assert(isASCIIString(str), \"asciiEncode requires an ASCII string.\");\n    return isomorphicEncode(str);\n}\nexports.asciiEncode = asciiEncode;\n/**\n * ASCII decodes a byte sequence.\n *\n * @param bytes - a byte sequence\n */\nfunction asciiDecode(bytes) {\n    var e_4, _a;\n    try {\n        /**\n         * 1. Assert: All bytes in input are ASCII bytes.\n         * 2. Return the isomorphic decoding of input.\n         */\n        for (var bytes_1 = __values(bytes), bytes_1_1 = bytes_1.next(); !bytes_1_1.done; bytes_1_1 = bytes_1.next()) {\n            var byte = bytes_1_1.value;\n            console.assert(Byte_1.isASCIIByte(byte), \"asciiDecode requires an ASCII byte sequence.\");\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (bytes_1_1 && !bytes_1_1.done && (_a = bytes_1.return)) _a.call(bytes_1);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    return ByteSequence_1.isomorphicDecode(bytes);\n}\nexports.asciiDecode = asciiDecode;\n/**\n * Strips newline characters from a string.\n *\n * @param str - a string\n */\nfunction stripNewlines(str) {\n    /**\n     * To strip newlines from a string, remove any U+000A LF and U+000D CR code\n     * points from the string.\n     */\n    return str.replace(/[\\n\\r]/g, \"\");\n}\nexports.stripNewlines = stripNewlines;\n/**\n * Normalizes newline characters in a string by converting consecutive\n * carriage-return newline characters and also single carriage return characters\n * into a single newline.\n *\n * @param str - a string\n */\nfunction normalizeNewlines(str) {\n    /**\n     * To normalize newlines in a string, replace every U+000D CR U+000A LF code\n     * point pair with a single U+000A LF code point, and then replace every\n     * remaining U+000D CR code point with a U+000A LF code point.\n     */\n    return str.replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\n}\nexports.normalizeNewlines = normalizeNewlines;\n/**\n * Removes leading and trailing whitespace characters from a string.\n *\n * @param str - a string\n */\nfunction stripLeadingAndTrailingASCIIWhitespace(str) {\n    /**\n     * To strip leading and trailing ASCII whitespace from a string, remove all\n     * ASCII whitespace that are at the start or the end of the string.\n     */\n    return str.replace(/^[\\t\\n\\f\\r ]+/, \"\").replace(/[\\t\\n\\f\\r ]+$/, \"\");\n}\nexports.stripLeadingAndTrailingASCIIWhitespace = stripLeadingAndTrailingASCIIWhitespace;\n/**\n * Removes consecutive newline characters from a string.\n *\n * @param str - a string\n */\nfunction stripAndCollapseASCIIWhitespace(str) {\n    /**\n     * To strip and collapse ASCII whitespace in a string, replace any sequence of\n     * one or more consecutive code points that are ASCII whitespace in the string\n     * with a single U+0020 SPACE code point, and then remove any leading and\n     * trailing ASCII whitespace from that string.\n     */\n    return stripLeadingAndTrailingASCIIWhitespace(str.replace(/[\\t\\n\\f\\r ]{2,}/g, \" \"));\n}\nexports.stripAndCollapseASCIIWhitespace = stripAndCollapseASCIIWhitespace;\n/**\n * Collects a sequence of code points matching a given condition from the input\n * string.\n *\n * @param condition - a condition to match\n * @param input - a string\n * @param options - starting position\n */\nfunction collectASequenceOfCodePoints(condition, input, options) {\n    /**\n     * 1. Let result be the empty string.\n     * 2. While position doesn’t point past the end of input and the code point at\n     * position within input meets the condition condition:\n     * 2.1. Append that code point to the end of result.\n     * 2.2. Advance position by 1.\n     * 3. Return result.\n     */\n    if (!util_1.isArray(input))\n        return collectASequenceOfCodePoints(condition, Array.from(input), options);\n    var result = \"\";\n    while (options.position < input.length && !!condition.call(null, input[options.position])) {\n        result += input[options.position];\n        options.position++;\n    }\n    return result;\n}\nexports.collectASequenceOfCodePoints = collectASequenceOfCodePoints;\n/**\n * Skips over ASCII whitespace.\n *\n * @param input - input string\n * @param options - starting position\n */\nfunction skipASCIIWhitespace(input, options) {\n    /**\n     * To skip ASCII whitespace within a string input given a position variable\n     * position, collect a sequence of code points that are ASCII whitespace from\n     * input given position. The collected code points are not used, but position\n     * is still updated.\n     */\n    collectASequenceOfCodePoints(function (str) { return CodePoints_1.ASCIIWhiteSpace.test(str); }, input, options);\n}\nexports.skipASCIIWhitespace = skipASCIIWhitespace;\n/**\n * Solits a string at the given delimiter.\n *\n * @param input - input string\n * @param delimiter - a delimiter string\n */\nfunction strictlySplit(input, delimiter) {\n    /**\n     * 1. Let position be a position variable for input, initially pointing at the\n     * start of input.\n     * 2. Let tokens be a list of strings, initially empty.\n     * 3. Let token be the result of collecting a sequence of code points that are\n     * not equal to delimiter from input, given position.\n     * 4. Append token to tokens.\n     * 5. While position is not past the end of input:\n     * 5.1. Assert: the code point at position within input is delimiter.\n     * 5.2. Advance position by 1.\n     * 5.3. Let token be the result of collecting a sequence of code points that\n     * are not equal to delimiter from input, given position.\n     * 5.4. Append token to tokens.\n     * 6. Return tokens.\n     */\n    if (!util_1.isArray(input))\n        return strictlySplit(Array.from(input), delimiter);\n    var options = { position: 0 };\n    var tokens = [];\n    var token = collectASequenceOfCodePoints(function (str) { return delimiter !== str; }, input, options);\n    tokens.push(token);\n    while (options.position < input.length) {\n        console.assert(input[options.position] === delimiter, \"strictlySplit found no delimiter in input string.\");\n        options.position++;\n        token = collectASequenceOfCodePoints(function (str) { return delimiter !== str; }, input, options);\n        tokens.push(token);\n    }\n    return tokens;\n}\nexports.strictlySplit = strictlySplit;\n/**\n * Splits a string on ASCII whitespace.\n *\n * @param input - a string\n */\nfunction splitAStringOnASCIIWhitespace(input) {\n    /**\n     * 1. Let position be a position variable for input, initially pointing at the\n     * start of input.\n     * 2. Let tokens be a list of strings, initially empty.\n     * 3. Skip ASCII whitespace within input given position.\n     * 4. While position is not past the end of input:\n     * 4.1. Let token be the result of collecting a sequence of code points that\n     * are not ASCII whitespace from input, given position.\n     * 4.2. Append token to tokens.\n     * 4.3. Skip ASCII whitespace within input given position.\n     * 5. Return tokens.\n     */\n    if (!util_1.isArray(input))\n        return splitAStringOnASCIIWhitespace(Array.from(input));\n    var options = { position: 0 };\n    var tokens = [];\n    skipASCIIWhitespace(input, options);\n    while (options.position < input.length) {\n        var token = collectASequenceOfCodePoints(function (str) { return !CodePoints_1.ASCIIWhiteSpace.test(str); }, input, options);\n        tokens.push(token);\n        skipASCIIWhitespace(input, options);\n    }\n    return tokens;\n}\nexports.splitAStringOnASCIIWhitespace = splitAStringOnASCIIWhitespace;\n/**\n * Splits a string on commas.\n *\n * @param input - a string\n */\nfunction splitAStringOnCommas(input) {\n    /**\n     * 1. Let position be a position variable for input, initially pointing at the\n     * start of input.\n     * 2. Let tokens be a list of strings, initially empty.\n     * 3. While position is not past the end of input:\n     * 3.1. Let token be the result of collecting a sequence of code points that\n     * are not U+002C (,) from input, given position.\n     * 3.2. Strip leading and trailing ASCII whitespace from token.\n     * 3.3. Append token to tokens.\n     * 3.4. If position is not past the end of input, then:\n     * 3.4.1. Assert: the code point at position within input is U+002C (,).\n     * 3.4.2. Advance position by 1.\n     * 4. Return tokens.\n     */\n    if (!util_1.isArray(input))\n        return splitAStringOnCommas(Array.from(input));\n    var options = { position: 0 };\n    var tokens = [];\n    while (options.position < input.length) {\n        var token = collectASequenceOfCodePoints(function (str) { return str !== ','; }, input, options);\n        tokens.push(stripLeadingAndTrailingASCIIWhitespace(token));\n        if (options.position < input.length) {\n            console.assert(input[options.position] === ',', \"splitAStringOnCommas found no delimiter in input string.\");\n            options.position++;\n        }\n    }\n    return tokens;\n}\nexports.splitAStringOnCommas = splitAStringOnCommas;\n/**\n * Concatenates a list of strings with the given separator.\n *\n * @param list - a list of strings\n * @param separator - a separator string\n */\nfunction concatenate(list, separator) {\n    if (separator === void 0) { separator = \"\"; }\n    /**\n     * 1. If list is empty, then return the empty string.\n     * 2. If separator is not given, then set separator to the empty string.\n     * 3. Return a string whose contents are list’s items, in order, separated\n     * from each other by separator.\n     */\n    if (list.length === 0)\n        return \"\";\n    return list.join(separator);\n}\nexports.concatenate = concatenate;\n//# sourceMappingURL=String.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\n/**\n * Represents a lexer for XML content in a string.\n */\nvar XMLStringLexer = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `XMLStringLexer`.\n     *\n     * @param str - the string to tokenize and lex\n     * @param options - lexer options\n     */\n    function XMLStringLexer(str, options) {\n        this._options = {\n            skipWhitespaceOnlyText: false\n        };\n        this.err = { line: -1, col: -1, index: -1, str: \"\" };\n        this._str = str;\n        this._index = 0;\n        this._length = str.length;\n        if (options) {\n            this._options.skipWhitespaceOnlyText = options.skipWhitespaceOnlyText || false;\n        }\n    }\n    /**\n     * Returns the next token.\n     */\n    XMLStringLexer.prototype.nextToken = function () {\n        if (this.eof()) {\n            return { type: interfaces_1.TokenType.EOF };\n        }\n        var token = (this.skipIfStartsWith('<') ? this.openBracket() : this.text());\n        if (this._options.skipWhitespaceOnlyText) {\n            if (token.type === interfaces_1.TokenType.Text &&\n                XMLStringLexer.isWhiteSpaceToken(token)) {\n                token = this.nextToken();\n            }\n        }\n        return token;\n    };\n    /**\n     * Branches from an opening bracket (`<`).\n     */\n    XMLStringLexer.prototype.openBracket = function () {\n        if (this.skipIfStartsWith('?')) {\n            if (this.skipIfStartsWith('xml')) {\n                if (XMLStringLexer.isSpace(this._str[this._index])) {\n                    return this.declaration();\n                }\n                else {\n                    // a processing instruction starting with xml. e.g. <?xml-stylesheet href=\"doc.xsl\" type=\"text/xsl\"?>\n                    this.seek(-3);\n                    return this.pi();\n                }\n            }\n            else {\n                return this.pi();\n            }\n        }\n        else if (this.skipIfStartsWith('!')) {\n            if (this.skipIfStartsWith('--')) {\n                return this.comment();\n            }\n            else if (this.skipIfStartsWith('[CDATA[')) {\n                return this.cdata();\n            }\n            else if (this.skipIfStartsWith('DOCTYPE')) {\n                return this.doctype();\n            }\n            else {\n                this.throwError(\"Invalid '!' in opening tag.\");\n            }\n        }\n        else if (this.skipIfStartsWith('/')) {\n            return this.closeTag();\n        }\n        else {\n            return this.openTag();\n        }\n    };\n    /**\n     * Produces an XML declaration token.\n     */\n    XMLStringLexer.prototype.declaration = function () {\n        var version = '';\n        var encoding = '';\n        var standalone = '';\n        while (!this.eof()) {\n            this.skipSpace();\n            if (this.skipIfStartsWith('?>')) {\n                return { type: interfaces_1.TokenType.Declaration, version: version, encoding: encoding, standalone: standalone };\n            }\n            else {\n                // attribute name\n                var _a = __read(this.attribute(), 2), attName = _a[0], attValue = _a[1];\n                if (attName === 'version')\n                    version = attValue;\n                else if (attName === 'encoding')\n                    encoding = attValue;\n                else if (attName === 'standalone')\n                    standalone = attValue;\n                else\n                    this.throwError('Invalid attribute name: ' + attName);\n            }\n        }\n        this.throwError('Missing declaration end symbol `?>`');\n    };\n    /**\n     * Produces a doc type token.\n     */\n    XMLStringLexer.prototype.doctype = function () {\n        var pubId = '';\n        var sysId = '';\n        // name\n        this.skipSpace();\n        var name = this.takeUntil2('[', '>', true);\n        this.skipSpace();\n        if (this.skipIfStartsWith('PUBLIC')) {\n            pubId = this.quotedString();\n            sysId = this.quotedString();\n        }\n        else if (this.skipIfStartsWith('SYSTEM')) {\n            sysId = this.quotedString();\n        }\n        // skip internal subset\n        this.skipSpace();\n        if (this.skipIfStartsWith('[')) {\n            // skip internal subset nodes\n            this.skipUntil(']');\n            if (!this.skipIfStartsWith(']')) {\n                this.throwError('Missing end bracket of DTD internal subset');\n            }\n        }\n        this.skipSpace();\n        if (!this.skipIfStartsWith('>')) {\n            this.throwError('Missing doctype end symbol `>`');\n        }\n        return { type: interfaces_1.TokenType.DocType, name: name, pubId: pubId, sysId: sysId };\n    };\n    /**\n     * Produces a processing instruction token.\n     */\n    XMLStringLexer.prototype.pi = function () {\n        var target = this.takeUntilStartsWith('?>', true);\n        if (this.eof()) {\n            this.throwError('Missing processing instruction end symbol `?>`');\n        }\n        this.skipSpace();\n        if (this.skipIfStartsWith('?>')) {\n            return { type: interfaces_1.TokenType.PI, target: target, data: '' };\n        }\n        var data = this.takeUntilStartsWith('?>');\n        if (this.eof()) {\n            this.throwError('Missing processing instruction end symbol `?>`');\n        }\n        this.seek(2);\n        return { type: interfaces_1.TokenType.PI, target: target, data: data };\n    };\n    /**\n     * Produces a text token.\n     *\n     */\n    XMLStringLexer.prototype.text = function () {\n        var data = this.takeUntil('<');\n        return { type: interfaces_1.TokenType.Text, data: data };\n    };\n    /**\n     * Produces a comment token.\n     *\n     */\n    XMLStringLexer.prototype.comment = function () {\n        var data = this.takeUntilStartsWith('-->');\n        if (this.eof()) {\n            this.throwError('Missing comment end symbol `-->`');\n        }\n        this.seek(3);\n        return { type: interfaces_1.TokenType.Comment, data: data };\n    };\n    /**\n     * Produces a CDATA token.\n     *\n     */\n    XMLStringLexer.prototype.cdata = function () {\n        var data = this.takeUntilStartsWith(']]>');\n        if (this.eof()) {\n            this.throwError('Missing CDATA end symbol `]>`');\n        }\n        this.seek(3);\n        return { type: interfaces_1.TokenType.CDATA, data: data };\n    };\n    /**\n     * Produces an element token.\n     */\n    XMLStringLexer.prototype.openTag = function () {\n        // element name\n        this.skipSpace();\n        var name = this.takeUntil2('>', '/', true);\n        this.skipSpace();\n        if (this.skipIfStartsWith('>')) {\n            return { type: interfaces_1.TokenType.Element, name: name, attributes: [], selfClosing: false };\n        }\n        else if (this.skipIfStartsWith('/>')) {\n            return { type: interfaces_1.TokenType.Element, name: name, attributes: [], selfClosing: true };\n        }\n        // attributes\n        var attributes = [];\n        while (!this.eof()) {\n            // end tag\n            this.skipSpace();\n            if (this.skipIfStartsWith('>')) {\n                return { type: interfaces_1.TokenType.Element, name: name, attributes: attributes, selfClosing: false };\n            }\n            else if (this.skipIfStartsWith('/>')) {\n                return { type: interfaces_1.TokenType.Element, name: name, attributes: attributes, selfClosing: true };\n            }\n            var attr = this.attribute();\n            attributes.push(attr);\n        }\n        this.throwError('Missing opening element tag end symbol `>`');\n    };\n    /**\n     * Produces a closing tag token.\n     *\n     */\n    XMLStringLexer.prototype.closeTag = function () {\n        this.skipSpace();\n        var name = this.takeUntil('>', true);\n        this.skipSpace();\n        if (!this.skipIfStartsWith('>')) {\n            this.throwError('Missing closing element tag end symbol `>`');\n        }\n        return { type: interfaces_1.TokenType.ClosingTag, name: name };\n    };\n    /**\n     * Reads an attribute name, value pair\n     */\n    XMLStringLexer.prototype.attribute = function () {\n        // attribute name\n        this.skipSpace();\n        var name = this.takeUntil('=', true);\n        this.skipSpace();\n        if (!this.skipIfStartsWith('=')) {\n            this.throwError('Missing equals sign before attribute value');\n        }\n        // attribute value\n        var value = this.quotedString();\n        return [name, value];\n    };\n    /**\n     * Reads a string between double or single quotes.\n     */\n    XMLStringLexer.prototype.quotedString = function () {\n        this.skipSpace();\n        var startQuote = this.take(1);\n        if (!XMLStringLexer.isQuote(startQuote)) {\n            this.throwError('Missing start quote character before quoted value');\n        }\n        var value = this.takeUntil(startQuote);\n        if (!this.skipIfStartsWith(startQuote)) {\n            this.throwError('Missing end quote character after quoted value');\n        }\n        return value;\n    };\n    /**\n     * Determines if the current index is at or past the end of input string.\n     */\n    XMLStringLexer.prototype.eof = function () { return this._index >= this._length; };\n    /**\n     * Skips the length of the given string if the string from current position\n     * starts with the given string.\n     *\n     * @param str - the string to match\n     */\n    XMLStringLexer.prototype.skipIfStartsWith = function (str) {\n        var strLength = str.length;\n        if (strLength === 1) {\n            if (this._str[this._index] === str) {\n                this._index++;\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        for (var i = 0; i < strLength; i++) {\n            if (this._str[this._index + i] !== str[i])\n                return false;\n        }\n        this._index += strLength;\n        return true;\n    };\n    /**\n     * Seeks a number of character codes.\n     *\n     * @param count - number of characters to skip\n     */\n    XMLStringLexer.prototype.seek = function (count) {\n        this._index += count;\n        if (this._index < 0)\n            this._index = 0;\n        if (this._index > this._length)\n            this._index = this._length;\n    };\n    /**\n     * Skips space characters.\n     */\n    XMLStringLexer.prototype.skipSpace = function () {\n        while (!this.eof() && (XMLStringLexer.isSpace(this._str[this._index]))) {\n            this._index++;\n        }\n    };\n    /**\n     * Takes a given number of characters.\n     *\n     * @param count - character count\n     */\n    XMLStringLexer.prototype.take = function (count) {\n        if (count === 1) {\n            return this._str[this._index++];\n        }\n        var startIndex = this._index;\n        this.seek(count);\n        return this._str.slice(startIndex, this._index);\n    };\n    /**\n     * Takes characters until the next character matches `char`.\n     *\n     * @param char - a character to match\n     * @param space - whether a space character stops iteration\n     */\n    XMLStringLexer.prototype.takeUntil = function (char, space) {\n        if (space === void 0) { space = false; }\n        var startIndex = this._index;\n        while (this._index < this._length) {\n            var c = this._str[this._index];\n            if (c !== char && (!space || !XMLStringLexer.isSpace(c))) {\n                this._index++;\n            }\n            else {\n                break;\n            }\n        }\n        return this._str.slice(startIndex, this._index);\n    };\n    /**\n     * Takes characters until the next character matches `char1` or `char1`.\n     *\n     * @param char1 - a character to match\n     * @param char2 - a character to match\n     * @param space - whether a space character stops iteration\n     */\n    XMLStringLexer.prototype.takeUntil2 = function (char1, char2, space) {\n        if (space === void 0) { space = false; }\n        var startIndex = this._index;\n        while (this._index < this._length) {\n            var c = this._str[this._index];\n            if (c !== char1 && c !== char2 && (!space || !XMLStringLexer.isSpace(c))) {\n                this._index++;\n            }\n            else {\n                break;\n            }\n        }\n        return this._str.slice(startIndex, this._index);\n    };\n    /**\n     * Takes characters until the next characters matches `str`.\n     *\n     * @param str - a string to match\n     * @param space - whether a space character stops iteration\n     */\n    XMLStringLexer.prototype.takeUntilStartsWith = function (str, space) {\n        if (space === void 0) { space = false; }\n        var startIndex = this._index;\n        var strLength = str.length;\n        while (this._index < this._length) {\n            var match = true;\n            for (var i = 0; i < strLength; i++) {\n                var c = this._str[this._index + i];\n                var char = str[i];\n                if (space && XMLStringLexer.isSpace(c)) {\n                    return this._str.slice(startIndex, this._index);\n                }\n                else if (c !== char) {\n                    this._index++;\n                    match = false;\n                    break;\n                }\n            }\n            if (match)\n                return this._str.slice(startIndex, this._index);\n        }\n        this._index = this._length;\n        return this._str.slice(startIndex);\n    };\n    /**\n     * Skips characters until the next character matches `char`.\n     *\n     * @param char - a character to match\n     */\n    XMLStringLexer.prototype.skipUntil = function (char) {\n        while (this._index < this._length) {\n            var c = this._str[this._index];\n            if (c !== char) {\n                this._index++;\n            }\n            else {\n                break;\n            }\n        }\n    };\n    /**\n     * Determines if the given token is entirely whitespace.\n     *\n     * @param token - the token to check\n     */\n    XMLStringLexer.isWhiteSpaceToken = function (token) {\n        var str = token.data;\n        for (var i = 0; i < str.length; i++) {\n            var c = str[i];\n            if (c !== ' ' && c !== '\\n' && c !== '\\r' && c !== '\\t' && c !== '\\f')\n                return false;\n        }\n        return true;\n    };\n    /**\n     * Determines if the given character is whitespace.\n     *\n     * @param char - the character to check\n     */\n    XMLStringLexer.isSpace = function (char) {\n        return char === ' ' || char === '\\n' || char === '\\r' || char === '\\t';\n    };\n    /**\n     * Determines if the given character is a quote character.\n     *\n     * @param char - the character to check\n     */\n    XMLStringLexer.isQuote = function (char) {\n        return (char === '\"' || char === '\\'');\n    };\n    /**\n     * Throws a parser error and records the line and column numbers in the parsed\n     * string.\n     *\n     * @param msg - error message\n     */\n    XMLStringLexer.prototype.throwError = function (msg) {\n        var regexp = /\\r\\n|\\r|\\n/g;\n        var match = null;\n        var line = 0;\n        var firstNewLineIndex = 0;\n        var lastNewlineIndex = this._str.length;\n        while ((match = regexp.exec(this._str)) !== null) {\n            if (match === null)\n                break;\n            line++;\n            if (match.index < this._index)\n                firstNewLineIndex = regexp.lastIndex;\n            if (match.index > this._index) {\n                lastNewlineIndex = match.index;\n                break;\n            }\n        }\n        this.err = {\n            line: line,\n            col: this._index - firstNewLineIndex,\n            index: this._index,\n            str: this._str.substring(firstNewLineIndex, lastNewlineIndex)\n        };\n        throw new Error(msg + \"\\nIndex: \" + this.err.index +\n            \"\\nLn: \" + this.err.line + \", Col: \" + this.err.col +\n            \"\\nInput: \" + this.err.str);\n    };\n    /**\n     * Returns an iterator for the lexer.\n     */\n    XMLStringLexer.prototype[Symbol.iterator] = function () {\n        this._index = 0;\n        return {\n            next: function () {\n                var token = this.nextToken();\n                if (token.type === interfaces_1.TokenType.EOF) {\n                    return { done: true, value: null };\n                }\n                else {\n                    return { done: false, value: token };\n                }\n            }.bind(this)\n        };\n    };\n    return XMLStringLexer;\n}());\nexports.XMLStringLexer = XMLStringLexer;\n//# sourceMappingURL=XMLStringLexer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\n/**\n * Defines the position of a boundary point relative to another.\n *\n * @param bp - a boundary point\n * @param relativeTo - a boundary point to compare to\n */\nfunction boundaryPoint_position(bp, relativeTo) {\n    var nodeA = bp[0];\n    var offsetA = bp[1];\n    var nodeB = relativeTo[0];\n    var offsetB = relativeTo[1];\n    /**\n     * 1. Assert: nodeA and nodeB have the same root.\n     */\n    console.assert(TreeAlgorithm_1.tree_rootNode(nodeA) === TreeAlgorithm_1.tree_rootNode(nodeB), \"Boundary points must share the same root node.\");\n    /**\n     * 2. If nodeA is nodeB, then return equal if offsetA is offsetB, before\n     * if offsetA is less than offsetB, and after if offsetA is greater than\n     * offsetB.\n     */\n    if (nodeA === nodeB) {\n        if (offsetA === offsetB) {\n            return interfaces_1.BoundaryPosition.Equal;\n        }\n        else if (offsetA < offsetB) {\n            return interfaces_1.BoundaryPosition.Before;\n        }\n        else {\n            return interfaces_1.BoundaryPosition.After;\n        }\n    }\n    /**\n     * 3. If nodeA is following nodeB, then if the position of (nodeB, offsetB)\n     * relative to (nodeA, offsetA) is before, return after, and if it is after,\n     * return before.\n     */\n    if (TreeAlgorithm_1.tree_isFollowing(nodeB, nodeA)) {\n        var pos = boundaryPoint_position([nodeB, offsetB], [nodeA, offsetA]);\n        if (pos === interfaces_1.BoundaryPosition.Before) {\n            return interfaces_1.BoundaryPosition.After;\n        }\n        else if (pos === interfaces_1.BoundaryPosition.After) {\n            return interfaces_1.BoundaryPosition.Before;\n        }\n    }\n    /**\n     * 4. If nodeA is an ancestor of nodeB:\n     */\n    if (TreeAlgorithm_1.tree_isAncestorOf(nodeB, nodeA)) {\n        /**\n         * 4.1. Let child be nodeB.\n         * 4.2. While child is not a child of nodeA, set child to its parent.\n         * 4.3. If child’s index is less than offsetA, then return after.\n         */\n        var child = nodeB;\n        while (!TreeAlgorithm_1.tree_isChildOf(nodeA, child)) {\n            /* istanbul ignore else */\n            if (child._parent !== null) {\n                child = child._parent;\n            }\n        }\n        if (TreeAlgorithm_1.tree_index(child) < offsetA) {\n            return interfaces_1.BoundaryPosition.After;\n        }\n    }\n    /**\n     * 5. Return before.\n     */\n    return interfaces_1.BoundaryPosition.Before;\n}\nexports.boundaryPoint_position = boundaryPoint_position;\n//# sourceMappingURL=BoundaryPointAlgorithm.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar NodeImpl_1 = require(\"./NodeImpl\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a document fragment in the XML tree.\n */\nvar DocumentFragmentImpl = /** @class */ (function (_super) {\n    __extends(DocumentFragmentImpl, _super);\n    /**\n     * Initializes a new instance of `DocumentFragment`.\n     *\n     * @param host - shadow root's host element\n     */\n    function DocumentFragmentImpl(host) {\n        if (host === void 0) { host = null; }\n        var _this = _super.call(this) || this;\n        _this._children = new Set();\n        _this._host = host;\n        return _this;\n    }\n    // MIXIN: NonElementParentNode\n    /* istanbul ignore next */\n    DocumentFragmentImpl.prototype.getElementById = function (elementId) { throw new Error(\"Mixin: NonElementParentNode not implemented.\"); };\n    Object.defineProperty(DocumentFragmentImpl.prototype, \"children\", {\n        // MIXIN: ParentNode\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentFragmentImpl.prototype, \"firstElementChild\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentFragmentImpl.prototype, \"lastElementChild\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentFragmentImpl.prototype, \"childElementCount\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: ParentNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    /* istanbul ignore next */\n    DocumentFragmentImpl.prototype.prepend = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ParentNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentFragmentImpl.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ParentNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentFragmentImpl.prototype.querySelector = function (selectors) { throw new Error(\"Mixin: ParentNode not implemented.\"); };\n    /* istanbul ignore next */\n    DocumentFragmentImpl.prototype.querySelectorAll = function (selectors) { throw new Error(\"Mixin: ParentNode not implemented.\"); };\n    /**\n     * Creates a new `DocumentFragment`.\n     *\n     * @param document - owner document\n     * @param host - shadow root's host element\n     */\n    DocumentFragmentImpl._create = function (document, host) {\n        if (host === void 0) { host = null; }\n        var node = new DocumentFragmentImpl(host);\n        node._nodeDocument = document;\n        return node;\n    };\n    return DocumentFragmentImpl;\n}(NodeImpl_1.NodeImpl));\nexports.DocumentFragmentImpl = DocumentFragmentImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(DocumentFragmentImpl.prototype, \"_nodeType\", interfaces_1.NodeType.DocumentFragment);\n//# sourceMappingURL=DocumentFragmentImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents a mixin for an interface to be used to share APIs between\n * documents and shadow roots. This mixin is implemented by\n * {@link Document} and {@link ShadowRoot}.\n *\n * _Note:_ The DocumentOrShadowRoot mixin is expected to be used by other\n * standards that want to define APIs shared between documents and shadow roots.\n */\nvar DocumentOrShadowRootImpl = /** @class */ (function () {\n    function DocumentOrShadowRootImpl() {\n    }\n    return DocumentOrShadowRootImpl;\n}());\nexports.DocumentOrShadowRootImpl = DocumentOrShadowRootImpl;\n//# sourceMappingURL=DocumentOrShadowRootImpl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Represents a set of unique attribute namespaceURI and localName pairs.\n * This set will contain tuples of unique attribute namespaceURI and\n * localName pairs, and is populated as each attr is processed. This set is\n * used to [optionally] enforce the well-formed constraint that an element\n * cannot have two attributes with the same namespaceURI and localName.\n * This can occur when two otherwise identical attributes on the same\n * element differ only by their prefix values.\n */\nvar LocalNameSet = /** @class */ (function () {\n    function LocalNameSet() {\n        // tuple storage\n        this._items = {};\n        this._nullItems = {};\n    }\n    /**\n     * Adds or replaces a tuple.\n     *\n     * @param ns - namespace URI\n     * @param localName - attribute local name\n     */\n    LocalNameSet.prototype.set = function (ns, localName) {\n        if (ns === null) {\n            this._nullItems[localName] = true;\n        }\n        else if (this._items[ns]) {\n            this._items[ns][localName] = true;\n        }\n        else {\n            this._items[ns] = {};\n            this._items[ns][localName] = true;\n        }\n    };\n    /**\n     * Determines if the given tuple exists in the set.\n     *\n     * @param ns - namespace URI\n     * @param localName - attribute local name\n     */\n    LocalNameSet.prototype.has = function (ns, localName) {\n        if (ns === null) {\n            return this._nullItems[localName] === true;\n        }\n        else if (this._items[ns]) {\n            return this._items[ns][localName] === true;\n        }\n        else {\n            return false;\n        }\n    };\n    return LocalNameSet;\n}());\nexports.LocalNameSet = LocalNameSet;\n//# sourceMappingURL=LocalNameSet.js.map","'use strict';\n\n/*eslint-disable no-use-before-define*/\n\nvar common              = require('./common');\nvar YAMLException       = require('./exception');\nvar DEFAULT_FULL_SCHEMA = require('./schema/default_full');\nvar DEFAULT_SAFE_SCHEMA = require('./schema/default_safe');\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new YAMLException('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\nfunction State(options) {\n  this.schema        = options['schema'] || DEFAULT_FULL_SCHEMA;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isn’t mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== 0xFEFF /* BOM */)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// [24] b-line-feed       ::=     #xA    /* LF */\n// [25] b-carriage-return ::=     #xD    /* CR */\n// [3]  c-byte-order-mark ::=     #xFEFF\nfunction isNsChar(c) {\n  return isPrintable(c) && !isWhitespace(c)\n    // byte-order-mark\n    && c !== 0xFEFF\n    // b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// Simplified test for values allowed after the first character in plain style.\nfunction isPlainSafe(c, prev) {\n  // Uses a subset of nb-char - c-flow-indicator - \":\" - \"#\"\n  // where nb-char ::= c-printable - b-char - c-byte-order-mark.\n  return isPrintable(c) && c !== 0xFEFF\n    // - c-flow-indicator\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // - \":\" - \"#\"\n    // /* An ns-char preceding */ \"#\"\n    && c !== CHAR_COLON\n    && ((c !== CHAR_SHARP) || (prev && isNsChar(prev)));\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  return isPrintable(c) && c !== 0xFEFF\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // “-” | “?” | “:” | “,” | “[” | “]” | “{” | “}”\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | “#” | “&” | “*” | “!” | “|” | “=” | “>” | “'” | “\"”\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | “%” | “@” | “`”)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType) {\n  var i;\n  var char, prev_char;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(string.charCodeAt(0))\n          && !isWhitespace(string.charCodeAt(string.length - 1));\n\n  if (singleLineOnly) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; i++) {\n      char = string.charCodeAt(i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      prev_char = i > 0 ? string.charCodeAt(i - 1) : null;\n      plain = plain && isPlainSafe(char, prev_char);\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; i++) {\n      char = string.charCodeAt(i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      prev_char = i > 0 ? string.charCodeAt(i - 1) : null;\n      plain = plain && isPlainSafe(char, prev_char);\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    return plain && !testAmbiguousType(string)\n      ? STYLE_PLAIN : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//    • No ending newline => unaffected; already using strip \"-\" chomping.\n//    • Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return \"''\";\n    }\n    if (!state.noCompatMode &&\n        DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1) {\n      return \"'\" + string + \"'\";\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth ≤ 40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth, testAmbiguity)) {\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string, lineWidth) + '\"';\n      default:\n        throw new YAMLException('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines—\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char, nextChar;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; i++) {\n    char = string.charCodeAt(i);\n    // Check for surrogate pairs (reference Unicode 3.0 section \"3.7 Surrogates\").\n    if (char >= 0xD800 && char <= 0xDBFF/* high surrogate */) {\n      nextChar = string.charCodeAt(i + 1);\n      if (nextChar >= 0xDC00 && nextChar <= 0xDFFF/* low surrogate */) {\n        // Combine the surrogate pair and store it escaped.\n        result += encodeHex((char - 0xD800) * 0x400 + nextChar - 0xDC00 + 0x10000);\n        // Advance index one extra since we already used that char here.\n        i++; continue;\n      }\n    }\n    escapeSeq = ESCAPE_SEQUENCES[char];\n    result += !escapeSeq && isPrintable(char)\n      ? string[i]\n      : escapeSeq || encodeHex(char);\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    // Write only valid elements.\n    if (writeNode(state, level, object[index], false, false)) {\n      if (index !== 0) _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    // Write only valid elements.\n    if (writeNode(state, level + 1, object[index], true, true)) {\n      if (!compact || index !== 0) {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (index !== 0) pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new YAMLException('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || index !== 0) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      state.tag = explicit ? type.tag : '?';\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new YAMLException('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      var arrayLevel = (state.noArrayIndent && (level > 0)) ? level - 1 : level;\n      if (block && (state.dump.length !== 0)) {\n        writeBlockSequence(state, arrayLevel, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, arrayLevel, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey);\n      }\n    } else {\n      if (state.skipInvalid) return false;\n      throw new YAMLException('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      state.dump = '!<' + state.tag + '> ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  if (writeNode(state, 0, input, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nfunction safeDump(input, options) {\n  return dump(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options));\n}\n\nmodule.exports.dump     = dump;\nmodule.exports.safeDump = safeDump;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar XMLBuilderImpl_1 = require(\"./XMLBuilderImpl\");\nexports.XMLBuilderImpl = XMLBuilderImpl_1.XMLBuilderImpl;\nvar XMLBuilderCBImpl_1 = require(\"./XMLBuilderCBImpl\");\nexports.XMLBuilderCBImpl = XMLBuilderCBImpl_1.XMLBuilderCBImpl;\nvar BuilderFunctions_1 = require(\"./BuilderFunctions\");\nexports.builder = BuilderFunctions_1.builder;\nexports.create = BuilderFunctions_1.create;\nexports.fragment = BuilderFunctions_1.fragment;\nexports.convert = BuilderFunctions_1.convert;\nvar BuilderFunctionsCB_1 = require(\"./BuilderFunctionsCB\");\nexports.createCB = BuilderFunctionsCB_1.createCB;\nexports.fragmentCB = BuilderFunctionsCB_1.fragmentCB;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"./DOMImpl\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents an object providing methods which are not dependent on\n * any particular document.\n */\nvar DOMImplementationImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `DOMImplementation`.\n     *\n     * @param document - the associated document\n     */\n    function DOMImplementationImpl(document) {\n        this._associatedDocument = document || DOMImpl_1.dom.window.document;\n    }\n    /** @inheritdoc */\n    DOMImplementationImpl.prototype.createDocumentType = function (qualifiedName, publicId, systemId) {\n        /**\n         * 1. Validate qualifiedName.\n         * 2. Return a new doctype, with qualifiedName as its name, publicId as its\n         * public ID, and systemId as its system ID, and with its node document set\n         * to the associated document of the context object.\n         */\n        algorithm_1.namespace_validate(qualifiedName);\n        return algorithm_1.create_documentType(this._associatedDocument, qualifiedName, publicId, systemId);\n    };\n    /** @inheritdoc */\n    DOMImplementationImpl.prototype.createDocument = function (namespace, qualifiedName, doctype) {\n        if (doctype === void 0) { doctype = null; }\n        /**\n         * 1. Let document be a new XMLDocument.\n         */\n        var document = algorithm_1.create_xmlDocument();\n        /**\n         * 2. Let element be null.\n         * 3. If qualifiedName is not the empty string, then set element to\n         * the result of running the internal createElementNS steps, given document,\n         * namespace, qualifiedName, and an empty dictionary.\n         */\n        var element = null;\n        if (qualifiedName) {\n            element = algorithm_1.document_internalCreateElementNS(document, namespace, qualifiedName);\n        }\n        /**\n         * 4. If doctype is non-null, append doctype to document.\n         * 5. If element is non-null, append element to document.\n         */\n        if (doctype)\n            document.appendChild(doctype);\n        if (element)\n            document.appendChild(element);\n        /**\n         * 6. document’s origin is context object’s associated document’s origin.\n         */\n        document._origin = this._associatedDocument._origin;\n        /**\n         * 7. document’s content type is determined by namespace:\n         * - HTML namespace\n         * application/xhtml+xml\n         * - SVG namespace\n         * image/svg+xml\n         * - Any other namespace\n         * application/xml\n         */\n        if (namespace === infra_1.namespace.HTML)\n            document._contentType = \"application/xhtml+xml\";\n        else if (namespace === infra_1.namespace.SVG)\n            document._contentType = \"image/svg+xml\";\n        else\n            document._contentType = \"application/xml\";\n        /**\n         * 8. Return document.\n         */\n        return document;\n    };\n    /** @inheritdoc */\n    DOMImplementationImpl.prototype.createHTMLDocument = function (title) {\n        /**\n         * 1. Let doc be a new document that is an HTML document.\n         * 2. Set doc’s content type to \"text/html\".\n         */\n        var doc = algorithm_1.create_document();\n        doc._type = \"html\";\n        doc._contentType = \"text/html\";\n        /**\n         * 3. Append a new doctype, with \"html\" as its name and with its node\n         * document set to doc, to doc.\n         */\n        doc.appendChild(algorithm_1.create_documentType(doc, \"html\", \"\", \"\"));\n        /**\n         * 4. Append the result of creating an element given doc, html, and the\n         * HTML namespace, to doc.\n         */\n        var htmlElement = algorithm_1.element_createAnElement(doc, \"html\", infra_1.namespace.HTML);\n        doc.appendChild(htmlElement);\n        /**\n         * 5. Append the result of creating an element given doc, head, and the\n         * HTML namespace, to the html element created earlier.\n         */\n        var headElement = algorithm_1.element_createAnElement(doc, \"head\", infra_1.namespace.HTML);\n        htmlElement.appendChild(headElement);\n        /**\n         * 6. If title is given:\n         * 6.1. Append the result of creating an element given doc, title, and\n         * the HTML namespace, to the head element created earlier.\n         * 6.2. Append a new Text node, with its data set to title (which could\n         * be the empty string) and its node document set to doc, to the title\n         * element created earlier.\n         */\n        if (title !== undefined) {\n            var titleElement = algorithm_1.element_createAnElement(doc, \"title\", infra_1.namespace.HTML);\n            headElement.appendChild(titleElement);\n            var textElement = algorithm_1.create_text(doc, title);\n            titleElement.appendChild(textElement);\n        }\n        /**\n         * 7. Append the result of creating an element given doc, body, and the\n         * HTML namespace, to the html element created earlier.\n         */\n        var bodyElement = algorithm_1.element_createAnElement(doc, \"body\", infra_1.namespace.HTML);\n        htmlElement.appendChild(bodyElement);\n        /**\n         * 8. doc’s origin is context object’s associated document’s origin.\n         */\n        doc._origin = this._associatedDocument._origin;\n        /**\n         * 9. Return doc.\n         */\n        return doc;\n    };\n    /** @inheritdoc */\n    DOMImplementationImpl.prototype.hasFeature = function () { return true; };\n    /**\n     * Creates a new `DOMImplementation`.\n     *\n     * @param document - owner document\n     */\n    DOMImplementationImpl._create = function (document) {\n        return new DOMImplementationImpl(document);\n    };\n    return DOMImplementationImpl;\n}());\nexports.DOMImplementationImpl = DOMImplementationImpl;\nWebIDLAlgorithm_1.idl_defineConst(DOMImplementationImpl.prototype, \"_ID\", \"@oozcitak/dom\");\n//# sourceMappingURL=DOMImplementationImpl.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"../dom/interfaces\");\nvar LocalNameSet_1 = require(\"./LocalNameSet\");\nvar NamespacePrefixMap_1 = require(\"./NamespacePrefixMap\");\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents an XML serializer.\n *\n * Implements: https://www.w3.org/TR/DOM-Parsing/#serializing\n */\nvar XMLSerializerImpl = /** @class */ (function () {\n    function XMLSerializerImpl() {\n    }\n    /** @inheritdoc */\n    XMLSerializerImpl.prototype.serializeToString = function (root) {\n        /**\n         * The serializeToString(root) method must produce an XML serialization\n         * of root passing a value of false for the require well-formed parameter,\n         * and return the result.\n         */\n        return this._xmlSerialization(root, false);\n    };\n    /**\n     * Produces an XML serialization of the given node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._xmlSerialization = function (node, requireWellFormed) {\n        // To increase performance, use a namespace-aware serializer only if the\n        // document has namespaced elements\n        if (node._nodeDocument === undefined || node._nodeDocument._hasNamespaces) {\n            /** From: https://w3c.github.io/DOM-Parsing/#xml-serialization\n             *\n             * 1. Let namespace be a context namespace with value null.\n             * The context namespace tracks the XML serialization algorithm's current\n             * default namespace. The context namespace is changed when either an Element\n             * Node has a default namespace declaration, or the algorithm generates a\n             * default namespace declaration for the Element Node to match its own\n             * namespace. The algorithm assumes no namespace (null) to start.\n             * 2. Let prefix map be a new namespace prefix map.\n             * 3. Add the XML namespace with prefix value \"xml\" to prefix map.\n             * 4. Let prefix index be a generated namespace prefix index with value 1.\n             * The generated namespace prefix index is used to generate a new unique\n             * prefix value when no suitable existing namespace prefix is available to\n             * serialize a node's namespaceURI (or the namespaceURI of one of node's\n             * attributes). See the generate a prefix algorithm.\n             */\n            var namespace = null;\n            var prefixMap = new NamespacePrefixMap_1.NamespacePrefixMap();\n            prefixMap.set(\"xml\", infra_1.namespace.XML);\n            var prefixIndex = { value: 1 };\n            /**\n             * 5. Return the result of running the XML serialization algorithm on node\n             * passing the context namespace namespace, namespace prefix map prefix map,\n             * generated namespace prefix index reference to prefix index, and the\n             * flag require well-formed. If an exception occurs during the execution\n             * of the algorithm, then catch that exception and throw an\n             * \"InvalidStateError\" DOMException.\n             */\n            try {\n                return this._serializeNodeNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n            }\n            catch (_a) {\n                throw new DOMException_1.InvalidStateError();\n            }\n        }\n        else {\n            try {\n                return this._serializeNode(node, requireWellFormed);\n            }\n            catch (_b) {\n                throw new DOMException_1.InvalidStateError();\n            }\n        }\n    };\n    /**\n     * Produces an XML serialization of a node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeNodeNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        switch (node.nodeType) {\n            case interfaces_1.NodeType.Element:\n                return this._serializeElementNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n            case interfaces_1.NodeType.Document:\n                return this._serializeDocumentNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n            case interfaces_1.NodeType.Comment:\n                return this._serializeComment(node, requireWellFormed);\n            case interfaces_1.NodeType.Text:\n                return this._serializeText(node, requireWellFormed);\n            case interfaces_1.NodeType.DocumentFragment:\n                return this._serializeDocumentFragmentNS(node, namespace, prefixMap, prefixIndex, requireWellFormed);\n            case interfaces_1.NodeType.DocumentType:\n                return this._serializeDocumentType(node, requireWellFormed);\n            case interfaces_1.NodeType.ProcessingInstruction:\n                return this._serializeProcessingInstruction(node, requireWellFormed);\n            case interfaces_1.NodeType.CData:\n                return this._serializeCData(node, requireWellFormed);\n            default:\n                throw new Error(\"Unknown node type: \" + node.nodeType);\n        }\n    };\n    /**\n     * Produces an XML serialization of a node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeNode = function (node, requireWellFormed) {\n        switch (node.nodeType) {\n            case interfaces_1.NodeType.Element:\n                return this._serializeElement(node, requireWellFormed);\n            case interfaces_1.NodeType.Document:\n                return this._serializeDocument(node, requireWellFormed);\n            case interfaces_1.NodeType.Comment:\n                return this._serializeComment(node, requireWellFormed);\n            case interfaces_1.NodeType.Text:\n                return this._serializeText(node, requireWellFormed);\n            case interfaces_1.NodeType.DocumentFragment:\n                return this._serializeDocumentFragment(node, requireWellFormed);\n            case interfaces_1.NodeType.DocumentType:\n                return this._serializeDocumentType(node, requireWellFormed);\n            case interfaces_1.NodeType.ProcessingInstruction:\n                return this._serializeProcessingInstruction(node, requireWellFormed);\n            case interfaces_1.NodeType.CData:\n                return this._serializeCData(node, requireWellFormed);\n            default:\n                throw new Error(\"Unknown node type: \" + node.nodeType);\n        }\n    };\n    /**\n     * Produces an XML serialization of an element node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeElementNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        var e_1, _a;\n        /**\n         * From: https://w3c.github.io/DOM-Parsing/#xml-serializing-an-element-node\n         *\n         * 1. If the require well-formed flag is set (its value is true), and this\n         * node's localName attribute contains the character \":\" (U+003A COLON) or\n         * does not match the XML Name production, then throw an exception; the\n         * serialization of this node would not be a well-formed element.\n         */\n        if (requireWellFormed && (node.localName.indexOf(\":\") !== -1 ||\n            !algorithm_1.xml_isName(node.localName))) {\n            throw new Error(\"Node local name contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. Let markup be the string \"<\" (U+003C LESS-THAN SIGN).\n         * 3. Let qualified name be an empty string.\n         * 4. Let skip end tag be a boolean flag with value false.\n         * 5. Let ignore namespace definition attribute be a boolean flag with value\n         * false.\n         * 6. Given prefix map, copy a namespace prefix map and let map be the\n         * result.\n         * 7. Let local prefixes map be an empty map. The map has unique Node prefix\n         * strings as its keys, with corresponding namespaceURI Node values as the\n         * map's key values (in this map, the null namespace is represented by the\n         * empty string).\n         *\n         * _Note:_ This map is local to each element. It is used to ensure there\n         * are no conflicting prefixes should a new namespace prefix attribute need\n         * to be generated. It is also used to enable skipping of duplicate prefix\n         * definitions when writing an element's attributes: the map allows the\n         * algorithm to distinguish between a prefix in the namespace prefix map\n         * that might be locally-defined (to the current Element) and one that is\n         * not.\n         * 8. Let local default namespace be the result of recording the namespace\n         * information for node given map and local prefixes map.\n         *\n         * _Note:_ The above step will update map with any found namespace prefix\n         * definitions, add the found prefix definitions to the local prefixes map\n         * and return a local default namespace value defined by a default namespace\n         * attribute if one exists. Otherwise it returns null.\n         * 9. Let inherited ns be a copy of namespace.\n         * 10. Let ns be the value of node's namespaceURI attribute.\n         */\n        var markup = \"<\";\n        var qualifiedName = '';\n        var skipEndTag = false;\n        var ignoreNamespaceDefinitionAttribute = false;\n        var map = prefixMap.copy();\n        var localPrefixesMap = {};\n        var localDefaultNamespace = this._recordNamespaceInformation(node, map, localPrefixesMap);\n        var inheritedNS = namespace;\n        var ns = node.namespaceURI;\n        /** 11. If inherited ns is equal to ns, then: */\n        if (inheritedNS === ns) {\n            /**\n             * 11.1. If local default namespace is not null, then set ignore\n             * namespace definition attribute to true.\n             */\n            if (localDefaultNamespace !== null) {\n                ignoreNamespaceDefinitionAttribute = true;\n            }\n            /**\n             * 11.2. If ns is the XML namespace, then append to qualified name the\n             * concatenation of the string \"xml:\" and the value of node's localName.\n             * 11.3. Otherwise, append to qualified name the value of node's\n             * localName. The node's prefix if it exists, is dropped.\n             */\n            if (ns === infra_1.namespace.XML) {\n                qualifiedName = 'xml:' + node.localName;\n            }\n            else {\n                qualifiedName = node.localName;\n            }\n            /** 11.4. Append the value of qualified name to markup. */\n            markup += qualifiedName;\n        }\n        else {\n            /**\n             * 12. Otherwise, inherited ns is not equal to ns (the node's own\n             * namespace is different from the context namespace of its parent).\n             * Run these sub-steps:\n             *\n             * 12.1. Let prefix be the value of node's prefix attribute.\n             * 12.2. Let candidate prefix be the result of retrieving a preferred\n             * prefix string prefix from map given namespace ns. The above may return\n             * null if no namespace key ns exists in map.\n             */\n            var prefix = node.prefix;\n            /**\n             * We don't need to run \"retrieving a preferred prefix string\" algorithm if\n             * the element has no prefix and its namespace matches to the default\n             * namespace.\n             * See: https://github.com/web-platform-tests/wpt/pull/16703\n             */\n            var candidatePrefix = null;\n            if (prefix !== null || ns !== localDefaultNamespace) {\n                candidatePrefix = map.get(prefix, ns);\n            }\n            /**\n             * 12.3. If the value of prefix matches \"xmlns\", then run the following\n             * steps:\n             */\n            if (prefix === \"xmlns\") {\n                /**\n                 * 12.3.1. If the require well-formed flag is set, then throw an error.\n                 * An Element with prefix \"xmlns\" will not legally round-trip in a\n                 * conforming XML parser.\n                 */\n                if (requireWellFormed) {\n                    throw new Error(\"An element cannot have the 'xmlns' prefix (well-formed required).\");\n                }\n                /**\n                 * 12.3.2. Let candidate prefix be the value of prefix.\n                 */\n                candidatePrefix = prefix;\n            }\n            /**\n             * 12.4.Found a suitable namespace prefix: if candidate prefix is not\n             * null (a namespace prefix is defined which maps to ns), then:\n             */\n            if (candidatePrefix !== null) {\n                /**\n                 * The following may serialize a different prefix than the Element's\n                 * existing prefix if it already had one. However, the retrieving a\n                 * preferred prefix string algorithm already tried to match the\n                 * existing prefix if possible.\n                 *\n                 * 12.4.1. Append to qualified name the concatenation of candidate\n                 * prefix, \":\" (U+003A COLON), and node's localName. There exists on\n                 * this node or the node's ancestry a namespace prefix definition that\n                 * defines the node's namespace.\n                 * 12.4.2. If the local default namespace is not null (there exists a\n                 * locally-defined default namespace declaration attribute) and its\n                 * value is not the XML namespace, then let inherited ns get the value\n                 * of local default namespace unless the local default namespace is the\n                 * empty string in which case let it get null (the context namespace\n                 * is changed to the declared default, rather than this node's own\n                 * namespace).\n                 *\n                 * _Note:_ Any default namespace definitions or namespace prefixes that\n                 * define the XML namespace are omitted when serializing this node's\n                 * attributes.\n                 */\n                qualifiedName = candidatePrefix + ':' + node.localName;\n                if (localDefaultNamespace !== null && localDefaultNamespace !== infra_1.namespace.XML) {\n                    inheritedNS = localDefaultNamespace || null;\n                }\n                /**\n                 * 12.4.3. Append the value of qualified name to markup.\n                 */\n                markup += qualifiedName;\n                /** 12.5. Otherwise, if prefix is not null, then: */\n            }\n            else if (prefix !== null) {\n                /**\n                 * _Note:_ By this step, there is no namespace or prefix mapping\n                 * declaration in this node (or any parent node visited by this\n                 * algorithm) that defines prefix otherwise the step labelled Found\n                 * a suitable namespace prefix would have been followed. The sub-steps\n                 * that follow will create a new namespace prefix declaration for prefix\n                 * and ensure that prefix does not conflict with an existing namespace\n                 * prefix declaration of the same localName in node's attribute list.\n                 *\n                 * 12.5.1. If the local prefixes map contains a key matching prefix,\n                 * then let prefix be the result of generating a prefix providing as\n                 * input map, ns, and prefix index.\n                 */\n                if (prefix in localPrefixesMap) {\n                    prefix = this._generatePrefix(ns, map, prefixIndex);\n                }\n                /**\n                 * 12.5.2. Add prefix to map given namespace ns.\n                 * 12.5.3. Append to qualified name the concatenation of prefix, \":\"\n                 * (U+003A COLON), and node's localName.\n                 * 12.5.4. Append the value of qualified name to markup.\n                 */\n                map.set(prefix, ns);\n                qualifiedName += prefix + ':' + node.localName;\n                markup += qualifiedName;\n                /**\n                 * 12.5.5. Append the following to markup, in the order listed:\n                 *\n                 * _Note:_ The following serializes a namespace prefix declaration for\n                 * prefix which was just added to the map.\n                 *\n                 * 12.5.5.1. \" \" (U+0020 SPACE);\n                 * 12.5.5.2. The string \"xmlns:\";\n                 * 12.5.5.3. The value of prefix;\n                 * 12.5.5.4. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 12.5.5.5. The result of serializing an attribute value given ns and\n                 * the require well-formed flag as input;\n                 * 12.5.5.6. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                markup += \" xmlns:\" + prefix + \"=\\\"\" +\n                    this._serializeAttributeValue(ns, requireWellFormed) + \"\\\"\";\n                /**\n                 * 12.5.5.7. If local default namespace is not null (there exists a\n                 * locally-defined default namespace declaration attribute), then\n                 * let inherited ns get the value of local default namespace unless the\n                 * local default namespace is the empty string in which case let it get\n                 * null.\n                 */\n                if (localDefaultNamespace !== null) {\n                    inheritedNS = localDefaultNamespace || null;\n                }\n                /**\n                 * 12.6. Otherwise, if local default namespace is null, or local\n                 * default namespace is not null and its value is not equal to ns, then:\n                 */\n            }\n            else if (localDefaultNamespace === null ||\n                (localDefaultNamespace !== null && localDefaultNamespace !== ns)) {\n                /**\n                 * _Note:_ At this point, the namespace for this node still needs to be\n                 * serialized, but there's no prefix (or candidate prefix) available; the\n                 * following uses the default namespace declaration to define the\n                 * namespace--optionally replacing an existing default declaration\n                 * if present.\n                 *\n                 * 12.6.1. Set the ignore namespace definition attribute flag to true.\n                 * 12.6.2. Append to qualified name the value of node's localName.\n                 * 12.6.3. Let the value of inherited ns be ns.\n                 *\n                 * _Note:_ The new default namespace will be used in the serialization\n                 * to define this node's namespace and act as the context namespace for\n                 * its children.\n                 */\n                ignoreNamespaceDefinitionAttribute = true;\n                qualifiedName += node.localName;\n                inheritedNS = ns;\n                /**\n                 * 12.6.4. Append the value of qualified name to markup.\n                 */\n                markup += qualifiedName;\n                /**\n                 * 12.6.5. Append the following to markup, in the order listed:\n                 *\n                 * _Note:_ The following serializes the new (or replacement) default\n                 * namespace definition.\n                 *\n                 * 12.6.5.1. \" \" (U+0020 SPACE);\n                 * 12.6.5.2. The string \"xmlns\";\n                 * 12.6.5.3. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 12.6.5.4. The result of serializing an attribute value given ns\n                 * and the require well-formed flag as input;\n                 * 12.6.5.5. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                markup += \" xmlns\" + \"=\\\"\" +\n                    this._serializeAttributeValue(ns, requireWellFormed) + \"\\\"\";\n                /**\n                 * 12.7. Otherwise, the node has a local default namespace that matches\n                 * ns. Append to qualified name the value of node's localName, let the\n                 * value of inherited ns be ns, and append the value of qualified name\n                 * to markup.\n                 */\n            }\n            else {\n                qualifiedName += node.localName;\n                inheritedNS = ns;\n                markup += qualifiedName;\n            }\n        }\n        /**\n         * 13. Append to markup the result of the XML serialization of node's\n         * attributes given map, prefix index, local prefixes map, ignore namespace\n         * definition attribute flag, and require well-formed flag.\n         */\n        markup += this._serializeAttributesNS(node, map, prefixIndex, localPrefixesMap, ignoreNamespaceDefinitionAttribute, requireWellFormed);\n        /**\n         * 14. If ns is the HTML namespace, and the node's list of children is\n         * empty, and the node's localName matches any one of the following void\n         * elements: \"area\", \"base\", \"basefont\", \"bgsound\", \"br\", \"col\", \"embed\",\n         * \"frame\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"menuitem\", \"meta\",\n         * \"param\", \"source\", \"track\", \"wbr\"; then append the following to markup,\n         * in the order listed:\n         * 14.1. \" \" (U+0020 SPACE);\n         * 14.2. \"/\" (U+002F SOLIDUS).\n         * and set the skip end tag flag to true.\n         * 15. If ns is not the HTML namespace, and the node's list of children is\n         * empty, then append \"/\" (U+002F SOLIDUS) to markup and set the skip end\n         * tag flag to true.\n         * 16. Append \">\" (U+003E GREATER-THAN SIGN) to markup.\n         */\n        var isHTML = (ns === infra_1.namespace.HTML);\n        if (isHTML && node.childNodes.length === 0 &&\n            XMLSerializerImpl._VoidElementNames.has(node.localName)) {\n            markup += \" /\";\n            skipEndTag = true;\n        }\n        else if (!isHTML && node.childNodes.length === 0) {\n            markup += \"/\";\n            skipEndTag = true;\n        }\n        markup += \">\";\n        /**\n         * 17. If the value of skip end tag is true, then return the value of markup\n         * and skip the remaining steps. The node is a leaf-node.\n         */\n        if (skipEndTag)\n            return markup;\n        /**\n         * 18. If ns is the HTML namespace, and the node's localName matches the\n         * string \"template\", then this is a template element. Append to markup the\n         * result of XML serializing a DocumentFragment node given the template\n         * element's template contents (a DocumentFragment), providing inherited\n         * ns, map, prefix index, and the require well-formed flag.\n         *\n         * _Note:_ This allows template content to round-trip, given the rules for\n         * parsing XHTML documents.\n         *\n         * 19. Otherwise, append to markup the result of running the XML\n         * serialization algorithm on each of node's children, in tree order,\n         * providing inherited ns, map, prefix index, and the require well-formed\n         * flag.\n         */\n        if (isHTML && node.localName === \"template\") {\n            // TODO: serialize template contents\n        }\n        else {\n            try {\n                for (var _b = __values(node._children || node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var childNode = _c.value;\n                    markup += this._serializeNodeNS(childNode, inheritedNS, map, prefixIndex, requireWellFormed);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        /**\n         * 20. Append the following to markup, in the order listed:\n         * 20.1. \"</\" (U+003C LESS-THAN SIGN, U+002F SOLIDUS);\n         * 20.2. The value of qualified name;\n         * 20.3. \">\" (U+003E GREATER-THAN SIGN).\n         */\n        markup += \"</\" + qualifiedName + \">\";\n        /**\n         * 21. Return the value of markup.\n         */\n        return markup;\n    };\n    /**\n     * Produces an XML serialization of a document node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeDocumentNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        var e_2, _a;\n        /**\n         * If the require well-formed flag is set (its value is true), and this node\n         * has no documentElement (the documentElement attribute's value is null),\n         * then throw an exception; the serialization of this node would not be a\n         * well-formed document.\n         */\n        if (requireWellFormed && node.documentElement === null) {\n            throw new Error(\"Missing document element (well-formed required).\");\n        }\n        /**\n         * Otherwise, run the following steps:\n         * 1. Let serialized document be an empty string.\n         * 2. For each child child of node, in tree order, run the XML\n         * serialization algorithm on the child passing along the provided\n         * arguments, and append the result to serialized document.\n         *\n         * _Note:_ This will serialize any number of ProcessingInstruction and\n         * Comment nodes both before and after the Document's documentElement node,\n         * including at most one DocumentType node. (Text nodes are not allowed as\n         * children of the Document.)\n         *\n         * 3. Return the value of serialized document.\n        */\n        var serializedDocument = \"\";\n        try {\n            for (var _b = __values(node._children || node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                serializedDocument += this._serializeNodeNS(childNode, namespace, prefixMap, prefixIndex, requireWellFormed);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return serializedDocument;\n    };\n    /**\n     * Produces an XML serialization of a comment node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeComment = function (node, requireWellFormed) {\n        /**\n         * If the require well-formed flag is set (its value is true), and node's\n         * data contains characters that are not matched by the XML Char production\n         * or contains \"--\" (two adjacent U+002D HYPHEN-MINUS characters) or that\n         * ends with a \"-\" (U+002D HYPHEN-MINUS) character, then throw an exception;\n         * the serialization of this node's data would not be well-formed.\n         */\n        if (requireWellFormed && (!algorithm_1.xml_isLegalChar(node.data) ||\n            node.data.indexOf(\"--\") !== -1 || node.data.endsWith(\"-\"))) {\n            throw new Error(\"Comment data contains invalid characters (well-formed required).\");\n        }\n        /**\n         * Otherwise, return the concatenation of \"<!--\", node's data, and \"-->\".\n         */\n        return \"<!--\" + node.data + \"-->\";\n    };\n    /**\n     * Produces an XML serialization of a text node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     * @param level - current depth of the XML tree\n     */\n    XMLSerializerImpl.prototype._serializeText = function (node, requireWellFormed) {\n        /**\n         * 1. If the require well-formed flag is set (its value is true), and\n         * node's data contains characters that are not matched by the XML Char\n         * production, then throw an exception; the serialization of this node's\n         * data would not be well-formed.\n         */\n        if (requireWellFormed && !algorithm_1.xml_isLegalChar(node.data)) {\n            throw new Error(\"Text data contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. Let markup be the value of node's data.\n         * 3. Replace any occurrences of \"&\" in markup by \"&amp;\".\n         * 4. Replace any occurrences of \"<\" in markup by \"&lt;\".\n         * 5. Replace any occurrences of \">\" in markup by \"&gt;\".\n         * 6. Return the value of markup.\n         */\n        var result = \"\";\n        for (var i = 0; i < node.data.length; i++) {\n            var c = node.data[i];\n            if (c === \"&\")\n                result += \"&amp;\";\n            else if (c === \"<\")\n                result += \"&lt;\";\n            else if (c === \">\")\n                result += \"&gt;\";\n            else\n                result += c;\n        }\n        return result;\n    };\n    /**\n     * Produces an XML serialization of a document fragment node.\n     *\n     * @param node - node to serialize\n     * @param namespace - context namespace\n     * @param prefixMap - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeDocumentFragmentNS = function (node, namespace, prefixMap, prefixIndex, requireWellFormed) {\n        var e_3, _a;\n        /**\n         * 1. Let markup the empty string.\n         * 2. For each child child of node, in tree order, run the XML serialization\n         * algorithm on the child given namespace, prefix map, a reference to prefix\n         * index, and flag require well-formed. Concatenate the result to markup.\n         * 3. Return the value of markup.\n         */\n        var markup = \"\";\n        try {\n            for (var _b = __values(node._children || node.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                markup += this._serializeNodeNS(childNode, namespace, prefixMap, prefixIndex, requireWellFormed);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return markup;\n    };\n    /**\n     * Produces an XML serialization of a document type node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeDocumentType = function (node, requireWellFormed) {\n        /**\n         * 1. If the require well-formed flag is true and the node's publicId\n         * attribute contains characters that are not matched by the XML PubidChar\n         *  production, then throw an exception; the serialization of this node\n         * would not be a well-formed document type declaration.\n         */\n        if (requireWellFormed && !algorithm_1.xml_isPubidChar(node.publicId)) {\n            throw new Error(\"DocType public identifier does not match PubidChar construct (well-formed required).\");\n        }\n        /**\n         * 2. If the require well-formed flag is true and the node's systemId\n         * attribute contains characters that are not matched by the XML Char\n         * production or that contains both a \"\"\" (U+0022 QUOTATION MARK) and a\n         * \"'\" (U+0027 APOSTROPHE), then throw an exception; the serialization\n         * of this node would not be a well-formed document type declaration.\n         */\n        if (requireWellFormed &&\n            (!algorithm_1.xml_isLegalChar(node.systemId) ||\n                (node.systemId.indexOf('\"') !== -1 && node.systemId.indexOf(\"'\") !== -1))) {\n            throw new Error(\"DocType system identifier contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 3. Let markup be an empty string.\n         * 4. Append the string \"<!DOCTYPE\" to markup.\n         * 5. Append \" \" (U+0020 SPACE) to markup.\n         * 6. Append the value of the node's name attribute to markup. For a node\n         * belonging to an HTML document, the value will be all lowercase.\n         * 7. If the node's publicId is not the empty string then append the\n         * following, in the order listed, to markup:\n         * 7.1. \" \" (U+0020 SPACE);\n         * 7.2. The string \"PUBLIC\";\n         * 7.3. \" \" (U+0020 SPACE);\n         * 7.4. \"\"\" (U+0022 QUOTATION MARK);\n         * 7.5. The value of the node's publicId attribute;\n         * 7.6. \"\"\" (U+0022 QUOTATION MARK).\n         * 8. If the node's systemId is not the empty string and the node's publicId\n         * is set to the empty string, then append the following, in the order\n         * listed, to markup:\n         * 8.1. \" \" (U+0020 SPACE);\n         * 8.2. The string \"SYSTEM\".\n         * 9. If the node's systemId is not the empty string then append the\n         * following, in the order listed, to markup:\n         * 9.2. \" \" (U+0020 SPACE);\n         * 9.3. \"\"\" (U+0022 QUOTATION MARK);\n         * 9.3. The value of the node's systemId attribute;\n         * 9.4. \"\"\" (U+0022 QUOTATION MARK).\n         * 10. Append \">\" (U+003E GREATER-THAN SIGN) to markup.\n         * 11. Return the value of markup.\n         */\n        return node.publicId && node.systemId ?\n            \"<!DOCTYPE \" + node.name + \" PUBLIC \\\"\" + node.publicId + \"\\\" \\\"\" + node.systemId + \"\\\">\"\n            : node.publicId ?\n                \"<!DOCTYPE \" + node.name + \" PUBLIC \\\"\" + node.publicId + \"\\\">\"\n                : node.systemId ?\n                    \"<!DOCTYPE \" + node.name + \" SYSTEM \\\"\" + node.systemId + \"\\\">\"\n                    :\n                        \"<!DOCTYPE \" + node.name + \">\";\n    };\n    /**\n     * Produces an XML serialization of a processing instruction node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeProcessingInstruction = function (node, requireWellFormed) {\n        /**\n         * 1. If the require well-formed flag is set (its value is true), and node's\n         * target contains a \":\" (U+003A COLON) character or is an ASCII\n         * case-insensitive match for the string \"xml\", then throw an exception;\n         * the serialization of this node's target would not be well-formed.\n         */\n        if (requireWellFormed && (node.target.indexOf(\":\") !== -1 || (/^xml$/i).test(node.target))) {\n            throw new Error(\"Processing instruction target contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. If the require well-formed flag is set (its value is true), and node's\n         * data contains characters that are not matched by the XML Char production\n         * or contains the string \"?>\" (U+003F QUESTION MARK,\n         * U+003E GREATER-THAN SIGN), then throw an exception; the serialization of\n         * this node's data would not be well-formed.\n         */\n        if (requireWellFormed && (!algorithm_1.xml_isLegalChar(node.data) ||\n            node.data.indexOf(\"?>\") !== -1)) {\n            throw new Error(\"Processing instruction data contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 3. Let markup be the concatenation of the following, in the order listed:\n         * 3.1. \"<?\" (U+003C LESS-THAN SIGN, U+003F QUESTION MARK);\n         * 3.2. The value of node's target;\n         * 3.3. \" \" (U+0020 SPACE);\n         * 3.4. The value of node's data;\n         * 3.5. \"?>\" (U+003F QUESTION MARK, U+003E GREATER-THAN SIGN).\n         * 4. Return the value of markup.\n         */\n        return \"<?\" + (node.data === \"\" ? node.target : node.target + \" \" + node.data) + \"?>\";\n    };\n    /**\n     * Produces an XML serialization of a CDATA node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeCData = function (node, requireWellFormed) {\n        if (requireWellFormed && (node.data.indexOf(\"]]>\") !== -1)) {\n            throw new Error(\"CDATA contains invalid characters (well-formed required).\");\n        }\n        return \"<![CDATA[\" + node.data + \"]]>\";\n    };\n    /**\n    * Produces an XML serialization of the attributes of an element node.\n    *\n     * @param node - node to serialize\n     * @param map - namespace prefix map\n     * @param prefixIndex - generated namespace prefix index\n     * @param localPrefixesMap - local prefixes map\n     * @param ignoreNamespaceDefinitionAttribute - whether to ignore namespace\n     * attributes\n     * @param requireWellFormed - whether to check conformance\n    */\n    XMLSerializerImpl.prototype._serializeAttributesNS = function (node, map, prefixIndex, localPrefixesMap, ignoreNamespaceDefinitionAttribute, requireWellFormed) {\n        var e_4, _a;\n        /**\n         * 1. Let result be the empty string.\n         * 2. Let localname set be a new empty namespace localname set. This\n         * localname set will contain tuples of unique attribute namespaceURI and\n         * localName pairs, and is populated as each attr is processed. This set is\n         * used to [optionally] enforce the well-formed constraint that an element\n         * cannot have two attributes with the same namespaceURI and localName.\n         * This can occur when two otherwise identical attributes on the same\n         * element differ only by their prefix values.\n         */\n        var result = \"\";\n        var localNameSet = requireWellFormed ? new LocalNameSet_1.LocalNameSet() : undefined;\n        try {\n            /**\n             * 3. Loop: For each attribute attr in element's attributes, in the order\n             * they are specified in the element's attribute list:\n             */\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                // Optimize common case\n                if (!ignoreNamespaceDefinitionAttribute && !requireWellFormed && attr.namespaceURI === null) {\n                    result += \" \" + attr.localName + \"=\\\"\" +\n                        this._serializeAttributeValue(attr.value, requireWellFormed) + \"\\\"\";\n                    continue;\n                }\n                /**\n                 * 3.1. If the require well-formed flag is set (its value is true), and the\n                 * localname set contains a tuple whose values match those of a new tuple\n                 * consisting of attr's namespaceURI attribute and localName attribute,\n                 * then throw an exception; the serialization of this attr would fail to\n                 * produce a well-formed element serialization.\n                 */\n                if (requireWellFormed && localNameSet && localNameSet.has(attr.namespaceURI, attr.localName)) {\n                    throw new Error(\"Element contains duplicate attributes (well-formed required).\");\n                }\n                /**\n                 * 3.2. Create a new tuple consisting of attr's namespaceURI attribute and\n                 * localName attribute, and add it to the localname set.\n                 * 3.3. Let attribute namespace be the value of attr's namespaceURI value.\n                 * 3.4. Let candidate prefix be null.\n                 */\n                if (requireWellFormed && localNameSet)\n                    localNameSet.set(attr.namespaceURI, attr.localName);\n                var attributeNamespace = attr.namespaceURI;\n                var candidatePrefix = null;\n                /** 3.5. If attribute namespace is not null, then run these sub-steps: */\n                if (attributeNamespace !== null) {\n                    /**\n                     * 3.5.1. Let candidate prefix be the result of retrieving a preferred\n                     * prefix string from map given namespace attribute namespace with\n                     * preferred prefix being attr's prefix value.\n                     */\n                    candidatePrefix = map.get(attr.prefix, attributeNamespace);\n                    /**\n                     * 3.5.2. If the value of attribute namespace is the XMLNS namespace,\n                     * then run these steps:\n                     */\n                    if (attributeNamespace === infra_1.namespace.XMLNS) {\n                        /**\n                         * 3.5.2.1. If any of the following are true, then stop running these\n                         * steps and goto Loop to visit the next attribute:\n                         * - the attr's value is the XML namespace;\n                         * _Note:_ The XML namespace cannot be redeclared and survive\n                         * round-tripping (unless it defines the prefix \"xml\"). To avoid this\n                         * problem, this algorithm always prefixes elements in the XML\n                         * namespace with \"xml\" and drops any related definitions as seen\n                         * in the above condition.\n                         * - the attr's prefix is null and the ignore namespace definition\n                         * attribute flag is true (the Element's default namespace attribute\n                         * should be skipped);\n                         * - the attr's prefix is not null and either\n                         *   * the attr's localName is not a key contained in the local\n                         *     prefixes map, or\n                         *   * the attr's localName is present in the local prefixes map but\n                         *     the value of the key does not match attr's value\n                         * and furthermore that the attr's localName (as the prefix to find)\n                         * is found in the namespace prefix map given the namespace consisting\n                         * of the attr's value (the current namespace prefix definition was\n                         * exactly defined previously--on an ancestor element not the current\n                         * element whose attributes are being processed).\n                         */\n                        if (attr.value === infra_1.namespace.XML ||\n                            (attr.prefix === null && ignoreNamespaceDefinitionAttribute) ||\n                            (attr.prefix !== null && (!(attr.localName in localPrefixesMap) ||\n                                localPrefixesMap[attr.localName] !== attr.value) &&\n                                map.has(attr.localName, attr.value)))\n                            continue;\n                        /**\n                         * 3.5.2.2. If the require well-formed flag is set (its value is true),\n                         * and the value of attr's value attribute matches the XMLNS\n                         * namespace, then throw an exception; the serialization of this\n                         * attribute would produce invalid XML because the XMLNS namespace\n                         * is reserved and cannot be applied as an element's namespace via\n                         * XML parsing.\n                         *\n                         * _Note:_ DOM APIs do allow creation of elements in the XMLNS\n                         * namespace but with strict qualifications.\n                         */\n                        if (requireWellFormed && attr.value === infra_1.namespace.XMLNS) {\n                            throw new Error(\"XMLNS namespace is reserved (well-formed required).\");\n                        }\n                        /**\n                         * 3.5.2.3. If the require well-formed flag is set (its value is true),\n                         * and the value of attr's value attribute is the empty string, then\n                         * throw an exception; namespace prefix declarations cannot be used\n                         * to undeclare a namespace (use a default namespace declaration\n                         * instead).\n                         */\n                        if (requireWellFormed && attr.value === '') {\n                            throw new Error(\"Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).\");\n                        }\n                        /**\n                         * 3.5.2.4. the attr's prefix matches the string \"xmlns\", then let\n                         * candidate prefix be the string \"xmlns\".\n                         */\n                        if (attr.prefix === 'xmlns')\n                            candidatePrefix = 'xmlns';\n                        /**\n                         * 3.5.3. Otherwise, the attribute namespace is not the XMLNS namespace.\n                         * Run these steps:\n                         *\n                         * _Note:_ The (candidatePrefix === null) check is not in the spec.\n                         * We deviate from the spec here. Otherwise a prefix is generated for\n                         * all attributes with namespaces.\n                         */\n                    }\n                    else if (candidatePrefix === null) {\n                        if (attr.prefix !== null &&\n                            (!map.hasPrefix(attr.prefix) ||\n                                map.has(attr.prefix, attributeNamespace))) {\n                            /**\n                             * Check if we can use the attribute's own prefix.\n                             * We deviate from the spec here.\n                             * TODO: This is not an efficient way of searching for prefixes.\n                             * Follow developments to the spec.\n                             */\n                            candidatePrefix = attr.prefix;\n                        }\n                        else {\n                            /**\n                             * 3.5.3.1. Let candidate prefix be the result of generating a prefix\n                             * providing map, attribute namespace, and prefix index as input.\n                             */\n                            candidatePrefix = this._generatePrefix(attributeNamespace, map, prefixIndex);\n                        }\n                        /**\n                         * 3.5.3.2. Append the following to result, in the order listed:\n                         * 3.5.3.2.1. \" \" (U+0020 SPACE);\n                         * 3.5.3.2.2. The string \"xmlns:\";\n                         * 3.5.3.2.3. The value of candidate prefix;\n                         * 3.5.3.2.4. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                         * 3.5.3.2.5. The result of serializing an attribute value given\n                         * attribute namespace and the require well-formed flag as input;\n                         * 3.5.3.2.6. \"\"\" (U+0022 QUOTATION MARK).\n                        */\n                        result += \" xmlns:\" + candidatePrefix + \"=\\\"\" +\n                            this._serializeAttributeValue(attributeNamespace, requireWellFormed) + \"\\\"\";\n                    }\n                }\n                /**\n                 * 3.6. Append a \" \" (U+0020 SPACE) to result.\n                 * 3.7. If candidate prefix is not null, then append to result the\n                 * concatenation of candidate prefix with \":\" (U+003A COLON).\n                 */\n                result += \" \";\n                if (candidatePrefix !== null) {\n                    result += candidatePrefix + ':';\n                }\n                /**\n                 * 3.8. If the require well-formed flag is set (its value is true), and\n                 * this attr's localName attribute contains the character\n                 * \":\" (U+003A COLON) or does not match the XML Name production or\n                 * equals \"xmlns\" and attribute namespace is null, then throw an\n                 * exception; the serialization of this attr would not be a\n                 * well-formed attribute.\n                 */\n                if (requireWellFormed && (attr.localName.indexOf(\":\") !== -1 ||\n                    !algorithm_1.xml_isName(attr.localName) ||\n                    (attr.localName === \"xmlns\" && attributeNamespace === null))) {\n                    throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");\n                }\n                /**\n                 * 3.9. Append the following strings to result, in the order listed:\n                 * 3.9.1. The value of attr's localName;\n                 * 3.9.2. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 3.9.3. The result of serializing an attribute value given attr's value\n                 * attribute and the require well-formed flag as input;\n                 * 3.9.4. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                result += attr.localName + \"=\\\"\" +\n                    this._serializeAttributeValue(attr.value, requireWellFormed) + \"\\\"\";\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        /**\n         * 4. Return the value of result.\n         */\n        return result;\n    };\n    /**\n    * Records namespace information for the given element and returns the\n    * default namespace attribute value.\n    *\n    * @param node - element node to process\n    * @param map - namespace prefix map\n    * @param localPrefixesMap - local prefixes map\n    */\n    XMLSerializerImpl.prototype._recordNamespaceInformation = function (node, map, localPrefixesMap) {\n        var e_5, _a;\n        /**\n         * 1. Let default namespace attr value be null.\n         */\n        var defaultNamespaceAttrValue = null;\n        try {\n            /**\n             * 2. Main: For each attribute attr in element's attributes, in the order\n             * they are specified in the element's attribute list:\n             */\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                /**\n                 * _Note:_ The following conditional steps find namespace prefixes. Only\n                 * attributes in the XMLNS namespace are considered (e.g., attributes made\n                 * to look like namespace declarations via\n                 * setAttribute(\"xmlns:pretend-prefix\", \"pretend-namespace\") are not\n                 * included).\n                 */\n                /** 2.1. Let attribute namespace be the value of attr's namespaceURI value. */\n                var attributeNamespace = attr.namespaceURI;\n                /** 2.2. Let attribute prefix be the value of attr's prefix. */\n                var attributePrefix = attr.prefix;\n                /** 2.3. If the attribute namespace is the XMLNS namespace, then: */\n                if (attributeNamespace === infra_1.namespace.XMLNS) {\n                    /**\n                     * 2.3.1. If attribute prefix is null, then attr is a default namespace\n                     * declaration. Set the default namespace attr value to attr's value and\n                     * stop running these steps, returning to Main to visit the next\n                     * attribute.\n                     */\n                    if (attributePrefix === null) {\n                        defaultNamespaceAttrValue = attr.value;\n                        continue;\n                        /**\n                         * 2.3.2. Otherwise, the attribute prefix is not null and attr is a\n                         * namespace prefix definition. Run the following steps:\n                         */\n                    }\n                    else {\n                        /** 2.3.2.1. Let prefix definition be the value of attr's localName. */\n                        var prefixDefinition = attr.localName;\n                        /** 2.3.2.2. Let namespace definition be the value of attr's value. */\n                        var namespaceDefinition = attr.value;\n                        /**\n                         * 2.3.2.3. If namespace definition is the XML namespace, then stop\n                         * running these steps, and return to Main to visit the next\n                         * attribute.\n                         *\n                         * _Note:_ XML namespace definitions in prefixes are completely\n                         * ignored (in order to avoid unnecessary work when there might be\n                         * prefix conflicts). XML namespaced elements are always handled\n                         * uniformly by prefixing (and overriding if necessary) the element's\n                         * localname with the reserved \"xml\" prefix.\n                         */\n                        if (namespaceDefinition === infra_1.namespace.XML) {\n                            continue;\n                        }\n                        /**\n                         * 2.3.2.4. If namespace definition is the empty string (the\n                         * declarative form of having no namespace), then let namespace\n                         * definition be null instead.\n                         */\n                        if (namespaceDefinition === '') {\n                            namespaceDefinition = null;\n                        }\n                        /**\n                         * 2.3.2.5. If prefix definition is found in map given the namespace\n                         * namespace definition, then stop running these steps, and return to\n                         * Main to visit the next attribute.\n                         *\n                         * _Note:_ This step avoids adding duplicate prefix definitions for\n                         * the same namespace in the map. This has the side-effect of avoiding\n                         * later serialization of duplicate namespace prefix declarations in\n                         * any descendant nodes.\n                         */\n                        if (map.has(prefixDefinition, namespaceDefinition)) {\n                            continue;\n                        }\n                        /**\n                         * 2.3.2.6. Add the prefix prefix definition to map given namespace\n                         * namespace definition.\n                         */\n                        map.set(prefixDefinition, namespaceDefinition);\n                        /**\n                         * 2.3.2.7. Add the value of prefix definition as a new key to the\n                         * local prefixes map, with the namespace definition as the key's\n                         * value replacing the value of null with the empty string if\n                         * applicable.\n                         */\n                        localPrefixesMap[prefixDefinition] = namespaceDefinition || '';\n                    }\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        /**\n         * 3. Return the value of default namespace attr value.\n         *\n         * _Note:_ The empty string is a legitimate return value and is not\n         * converted to null.\n         */\n        return defaultNamespaceAttrValue;\n    };\n    /**\n    * Generates a new prefix for the given namespace.\n    *\n    * @param newNamespace - a namespace to generate prefix for\n    * @param prefixMap - namespace prefix map\n    * @param prefixIndex - generated namespace prefix index\n    */\n    XMLSerializerImpl.prototype._generatePrefix = function (newNamespace, prefixMap, prefixIndex) {\n        /**\n         * 1. Let generated prefix be the concatenation of the string \"ns\" and the\n         * current numerical value of prefix index.\n         * 2. Let the value of prefix index be incremented by one.\n         * 3. Add to map the generated prefix given the new namespace namespace.\n         * 4. Return the value of generated prefix.\n         */\n        var generatedPrefix = \"ns\" + prefixIndex.value;\n        prefixIndex.value++;\n        prefixMap.set(generatedPrefix, newNamespace);\n        return generatedPrefix;\n    };\n    /**\n     * Produces an XML serialization of an attribute value.\n     *\n     * @param value - attribute value\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeAttributeValue = function (value, requireWellFormed) {\n        /**\n         * From: https://w3c.github.io/DOM-Parsing/#dfn-serializing-an-attribute-value\n         *\n         * 1. If the require well-formed flag is set (its value is true), and\n         * attribute value contains characters that are not matched by the XML Char\n         * production, then throw an exception; the serialization of this attribute\n         * value would fail to produce a well-formed element serialization.\n         */\n        if (requireWellFormed && value !== null && !algorithm_1.xml_isLegalChar(value)) {\n            throw new Error(\"Invalid characters in attribute value.\");\n        }\n        /**\n         * 2. If attribute value is null, then return the empty string.\n         */\n        if (value === null)\n            return \"\";\n        /**\n         * 3. Otherwise, attribute value is a string. Return the value of attribute\n         * value, first replacing any occurrences of the following:\n         * - \"&\" with \"&amp;\"\n         * - \"\"\" with \"&quot;\"\n         * - \"<\" with \"&lt;\"\n         * - \">\" with \"&gt;\"\n         * NOTE\n         * This matches behavior present in browsers, and goes above and beyond the\n         * grammar requirement in the XML specification's AttValue production by\n         * also replacing \">\" characters.\n         */\n        var result = \"\";\n        for (var i = 0; i < value.length; i++) {\n            var c = value[i];\n            if (c === \"\\\"\")\n                result += \"&quot;\";\n            else if (c === \"&\")\n                result += \"&amp;\";\n            else if (c === \"<\")\n                result += \"&lt;\";\n            else if (c === \">\")\n                result += \"&gt;\";\n            else\n                result += c;\n        }\n        return result;\n    };\n    /**\n     * Produces an XML serialization of an element node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeElement = function (node, requireWellFormed) {\n        var e_6, _a;\n        /**\n         * From: https://w3c.github.io/DOM-Parsing/#xml-serializing-an-element-node\n         *\n         * 1. If the require well-formed flag is set (its value is true), and this\n         * node's localName attribute contains the character \":\" (U+003A COLON) or\n         * does not match the XML Name production, then throw an exception; the\n         * serialization of this node would not be a well-formed element.\n         */\n        if (requireWellFormed && (node.localName.indexOf(\":\") !== -1 ||\n            !algorithm_1.xml_isName(node.localName))) {\n            throw new Error(\"Node local name contains invalid characters (well-formed required).\");\n        }\n        /**\n         * 2. Let markup be the string \"<\" (U+003C LESS-THAN SIGN).\n         * 3. Let qualified name be an empty string.\n         * 4. Let skip end tag be a boolean flag with value false.\n         * 5. Let ignore namespace definition attribute be a boolean flag with value\n         * false.\n         * 6. Given prefix map, copy a namespace prefix map and let map be the\n         * result.\n         * 7. Let local prefixes map be an empty map. The map has unique Node prefix\n         * strings as its keys, with corresponding namespaceURI Node values as the\n         * map's key values (in this map, the null namespace is represented by the\n         * empty string).\n         *\n         * _Note:_ This map is local to each element. It is used to ensure there\n         * are no conflicting prefixes should a new namespace prefix attribute need\n         * to be generated. It is also used to enable skipping of duplicate prefix\n         * definitions when writing an element's attributes: the map allows the\n         * algorithm to distinguish between a prefix in the namespace prefix map\n         * that might be locally-defined (to the current Element) and one that is\n         * not.\n         * 8. Let local default namespace be the result of recording the namespace\n         * information for node given map and local prefixes map.\n         *\n         * _Note:_ The above step will update map with any found namespace prefix\n         * definitions, add the found prefix definitions to the local prefixes map\n         * and return a local default namespace value defined by a default namespace\n         * attribute if one exists. Otherwise it returns null.\n         * 9. Let inherited ns be a copy of namespace.\n         * 10. Let ns be the value of node's namespaceURI attribute.\n         */\n        var skipEndTag = false;\n        /** 11. If inherited ns is equal to ns, then: */\n        /**\n         * 11.1. If local default namespace is not null, then set ignore\n         * namespace definition attribute to true.\n         * 11.2. If ns is the XML namespace, then append to qualified name the\n         * concatenation of the string \"xml:\" and the value of node's localName.\n         * 11.3. Otherwise, append to qualified name the value of node's\n         * localName. The node's prefix if it exists, is dropped.\n         */\n        var qualifiedName = node.localName;\n        /** 11.4. Append the value of qualified name to markup. */\n        var markup = \"<\" + qualifiedName;\n        /**\n         * 13. Append to markup the result of the XML serialization of node's\n         * attributes given map, prefix index, local prefixes map, ignore namespace\n         * definition attribute flag, and require well-formed flag.\n         */\n        markup += this._serializeAttributes(node, requireWellFormed);\n        /**\n         * 14. If ns is the HTML namespace, and the node's list of children is\n         * empty, and the node's localName matches any one of the following void\n         * elements: \"area\", \"base\", \"basefont\", \"bgsound\", \"br\", \"col\", \"embed\",\n         * \"frame\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"menuitem\", \"meta\",\n         * \"param\", \"source\", \"track\", \"wbr\"; then append the following to markup,\n         * in the order listed:\n         * 14.1. \" \" (U+0020 SPACE);\n         * 14.2. \"/\" (U+002F SOLIDUS).\n         * and set the skip end tag flag to true.\n         * 15. If ns is not the HTML namespace, and the node's list of children is\n         * empty, then append \"/\" (U+002F SOLIDUS) to markup and set the skip end\n         * tag flag to true.\n         * 16. Append \">\" (U+003E GREATER-THAN SIGN) to markup.\n         */\n        if (node._children.size === 0) {\n            markup += \"/\";\n            skipEndTag = true;\n        }\n        markup += \">\";\n        /**\n         * 17. If the value of skip end tag is true, then return the value of markup\n         * and skip the remaining steps. The node is a leaf-node.\n         */\n        if (skipEndTag)\n            return markup;\n        try {\n            /**\n             * 18. If ns is the HTML namespace, and the node's localName matches the\n             * string \"template\", then this is a template element. Append to markup the\n             * result of XML serializing a DocumentFragment node given the template\n             * element's template contents (a DocumentFragment), providing inherited\n             * ns, map, prefix index, and the require well-formed flag.\n             *\n             * _Note:_ This allows template content to round-trip, given the rules for\n             * parsing XHTML documents.\n             *\n             * 19. Otherwise, append to markup the result of running the XML\n             * serialization algorithm on each of node's children, in tree order,\n             * providing inherited ns, map, prefix index, and the require well-formed\n             * flag.\n             */\n            for (var _b = __values(node._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                markup += this._serializeNode(childNode, requireWellFormed);\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        /**\n         * 20. Append the following to markup, in the order listed:\n         * 20.1. \"</\" (U+003C LESS-THAN SIGN, U+002F SOLIDUS);\n         * 20.2. The value of qualified name;\n         * 20.3. \">\" (U+003E GREATER-THAN SIGN).\n         */\n        markup += \"</\" + qualifiedName + \">\";\n        /**\n         * 21. Return the value of markup.\n         */\n        return markup;\n    };\n    /**\n     * Produces an XML serialization of a document node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeDocument = function (node, requireWellFormed) {\n        var e_7, _a;\n        /**\n         * If the require well-formed flag is set (its value is true), and this node\n         * has no documentElement (the documentElement attribute's value is null),\n         * then throw an exception; the serialization of this node would not be a\n         * well-formed document.\n         */\n        if (requireWellFormed && node.documentElement === null) {\n            throw new Error(\"Missing document element (well-formed required).\");\n        }\n        /**\n         * Otherwise, run the following steps:\n         * 1. Let serialized document be an empty string.\n         * 2. For each child child of node, in tree order, run the XML\n         * serialization algorithm on the child passing along the provided\n         * arguments, and append the result to serialized document.\n         *\n         * _Note:_ This will serialize any number of ProcessingInstruction and\n         * Comment nodes both before and after the Document's documentElement node,\n         * including at most one DocumentType node. (Text nodes are not allowed as\n         * children of the Document.)\n         *\n         * 3. Return the value of serialized document.\n        */\n        var serializedDocument = \"\";\n        try {\n            for (var _b = __values(node._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                serializedDocument += this._serializeNode(childNode, requireWellFormed);\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n        return serializedDocument;\n    };\n    /**\n     * Produces an XML serialization of a document fragment node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeDocumentFragment = function (node, requireWellFormed) {\n        var e_8, _a;\n        /**\n         * 1. Let markup the empty string.\n         * 2. For each child child of node, in tree order, run the XML serialization\n         * algorithm on the child given namespace, prefix map, a reference to prefix\n         * index, and flag require well-formed. Concatenate the result to markup.\n         * 3. Return the value of markup.\n         */\n        var markup = \"\";\n        try {\n            for (var _b = __values(node._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var childNode = _c.value;\n                markup += this._serializeNode(childNode, requireWellFormed);\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        return markup;\n    };\n    /**\n     * Produces an XML serialization of the attributes of an element node.\n     *\n     * @param node - node to serialize\n     * @param requireWellFormed - whether to check conformance\n     */\n    XMLSerializerImpl.prototype._serializeAttributes = function (node, requireWellFormed) {\n        var e_9, _a;\n        /**\n         * 1. Let result be the empty string.\n         * 2. Let localname set be a new empty namespace localname set. This\n         * localname set will contain tuples of unique attribute namespaceURI and\n         * localName pairs, and is populated as each attr is processed. This set is\n         * used to [optionally] enforce the well-formed constraint that an element\n         * cannot have two attributes with the same namespaceURI and localName.\n         * This can occur when two otherwise identical attributes on the same\n         * element differ only by their prefix values.\n         */\n        var result = \"\";\n        var localNameSet = requireWellFormed ? {} : undefined;\n        try {\n            /**\n             * 3. Loop: For each attribute attr in element's attributes, in the order\n             * they are specified in the element's attribute list:\n             */\n            for (var _b = __values(node.attributes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var attr = _c.value;\n                /**\n                 * 3.1. If the require well-formed flag is set (its value is true), and the\n                 * localname set contains a tuple whose values match those of a new tuple\n                 * consisting of attr's namespaceURI attribute and localName attribute,\n                 * then throw an exception; the serialization of this attr would fail to\n                 * produce a well-formed element serialization.\n                 */\n                if (requireWellFormed && localNameSet && (attr.localName in localNameSet)) {\n                    throw new Error(\"Element contains duplicate attributes (well-formed required).\");\n                }\n                /**\n                 * 3.2. Create a new tuple consisting of attr's namespaceURI attribute and\n                 * localName attribute, and add it to the localname set.\n                 * 3.3. Let attribute namespace be the value of attr's namespaceURI value.\n                 * 3.4. Let candidate prefix be null.\n                 */\n                if (requireWellFormed && localNameSet)\n                    localNameSet[attr.localName] = true;\n                /** 3.5. If attribute namespace is not null, then run these sub-steps: */\n                /**\n                 * 3.6. Append a \" \" (U+0020 SPACE) to result.\n                 * 3.7. If candidate prefix is not null, then append to result the\n                 * concatenation of candidate prefix with \":\" (U+003A COLON).\n                 */\n                /**\n                 * 3.8. If the require well-formed flag is set (its value is true), and\n                 * this attr's localName attribute contains the character\n                 * \":\" (U+003A COLON) or does not match the XML Name production or\n                 * equals \"xmlns\" and attribute namespace is null, then throw an\n                 * exception; the serialization of this attr would not be a\n                 * well-formed attribute.\n                 */\n                if (requireWellFormed && (attr.localName.indexOf(\":\") !== -1 ||\n                    !algorithm_1.xml_isName(attr.localName))) {\n                    throw new Error(\"Attribute local name contains invalid characters (well-formed required).\");\n                }\n                /**\n                 * 3.9. Append the following strings to result, in the order listed:\n                 * 3.9.1. The value of attr's localName;\n                 * 3.9.2. \"=\"\" (U+003D EQUALS SIGN, U+0022 QUOTATION MARK);\n                 * 3.9.3. The result of serializing an attribute value given attr's value\n                 * attribute and the require well-formed flag as input;\n                 * 3.9.4. \"\"\" (U+0022 QUOTATION MARK).\n                 */\n                result += \" \" + attr.localName + \"=\\\"\" +\n                    this._serializeAttributeValue(attr.value, requireWellFormed) + \"\\\"\";\n            }\n        }\n        catch (e_9_1) { e_9 = { error: e_9_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_9) throw e_9.error; }\n        }\n        /**\n         * 4. Return the value of result.\n         */\n        return result;\n    };\n    XMLSerializerImpl._VoidElementNames = new Set(['area', 'base', 'basefont',\n        'bgsound', 'br', 'col', 'embed', 'frame', 'hr', 'img', 'input', 'keygen',\n        'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']);\n    return XMLSerializerImpl;\n}());\nexports.XMLSerializerImpl = XMLSerializerImpl;\n//# sourceMappingURL=XMLSerializerImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCBWriter_1 = require(\"./BaseCBWriter\");\n/**\n * Serializes XML nodes.\n */\nvar YAMLCBWriter = /** @class */ (function (_super) {\n    __extends(YAMLCBWriter, _super);\n    /**\n     * Initializes a new instance of `BaseCBWriter`.\n     *\n     * @param builderOptions - XML builder options\n     */\n    function YAMLCBWriter(builderOptions) {\n        var _this = _super.call(this, builderOptions) || this;\n        _this._rootWritten = false;\n        _this._additionalLevel = 0;\n        if (builderOptions.indent.length < 2) {\n            throw new Error(\"YAML indententation string must be at least two characters long.\");\n        }\n        if (builderOptions.offset < 0) {\n            throw new Error(\"YAML offset should be zero or a positive number.\");\n        }\n        return _this;\n    }\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.frontMatter = function () {\n        return this._beginLine() + \"---\";\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.declaration = function (version, encoding, standalone) {\n        return \"\";\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.docType = function (name, publicId, systemId) {\n        return \"\";\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.comment = function (data) {\n        // \"!\": \"hello\"\n        return this._beginLine() +\n            this._key(this._builderOptions.convert.comment) + \" \" +\n            this._val(data);\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.text = function (data) {\n        // \"#\": \"hello\"\n        return this._beginLine() +\n            this._key(this._builderOptions.convert.text) + \" \" +\n            this._val(data);\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.instruction = function (target, data) {\n        // \"?\": \"target hello\"\n        return this._beginLine() +\n            this._key(this._builderOptions.convert.ins) + \" \" +\n            this._val(data ? target + \" \" + data : target);\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.cdata = function (data) {\n        // \"$\": \"hello\"\n        return this._beginLine() +\n            this._key(this._builderOptions.convert.cdata) + \" \" +\n            this._val(data);\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.attribute = function (name, value) {\n        // \"@name\": \"val\"\n        this._additionalLevel++;\n        var str = this._beginLine() +\n            this._key(this._builderOptions.convert.att + name) + \" \" +\n            this._val(value);\n        this._additionalLevel--;\n        return str;\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.openTagBegin = function (name) {\n        // \"node\":\n        //   \"#\":\n        //   -\n        var str = this._beginLine() + this._key(name);\n        if (!this._rootWritten) {\n            this._rootWritten = true;\n        }\n        this.hasData = true;\n        this._additionalLevel++;\n        str += this._beginLine(true) + this._key(this._builderOptions.convert.text);\n        return str;\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.openTagEnd = function (name, selfClosing, voidElement) {\n        if (selfClosing) {\n            return \" \" + this._val(\"\");\n        }\n        return \"\";\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.closeTag = function (name) {\n        this._additionalLevel--;\n        return \"\";\n    };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.beginElement = function (name) { };\n    /** @inheritdoc */\n    YAMLCBWriter.prototype.endElement = function (name) { };\n    /**\n     * Produces characters to be prepended to a line of string in pretty-print\n     * mode.\n     */\n    YAMLCBWriter.prototype._beginLine = function (suppressArray) {\n        if (suppressArray === void 0) { suppressArray = false; }\n        return (this.hasData ? this._writerOptions.newline : \"\") +\n            this._indent(this._writerOptions.offset + this.level, suppressArray);\n    };\n    /**\n     * Produces an indentation string.\n     *\n     * @param level - depth of the tree\n     * @param suppressArray - whether the suppress array marker\n     */\n    YAMLCBWriter.prototype._indent = function (level, suppressArray) {\n        if (level + this._additionalLevel <= 0) {\n            return \"\";\n        }\n        else {\n            var chars = this._writerOptions.indent.repeat(level + this._additionalLevel);\n            if (!suppressArray && this._rootWritten) {\n                return chars.substr(0, chars.length - 2) + '-' + chars.substr(-1, 1);\n            }\n            return chars;\n        }\n    };\n    /**\n     * Produces a YAML key string delimited with double quotes.\n     */\n    YAMLCBWriter.prototype._key = function (key) {\n        return \"\\\"\" + key + \"\\\":\";\n    };\n    /**\n     * Produces a YAML value string delimited with double quotes.\n     */\n    YAMLCBWriter.prototype._val = function (val) {\n        return JSON.stringify(val);\n    };\n    return YAMLCBWriter;\n}(BaseCBWriter_1.BaseCBWriter));\nexports.YAMLCBWriter = YAMLCBWriter;\n//# sourceMappingURL=YAMLCBWriter.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImpl_1 = require(\"../dom/DOMImpl\");\nvar TreeAlgorithm_1 = require(\"./TreeAlgorithm\");\nvar util_1 = require(\"../util\");\nvar ShadowTreeAlgorithm_1 = require(\"./ShadowTreeAlgorithm\");\nvar supportedTokens = new Map();\n/**\n * Runs removing steps for node.\n *\n * @param removedNode - removed node\n * @param oldParent - old parent node\n */\nfunction dom_runRemovingSteps(removedNode, oldParent) {\n    // No steps defined\n}\nexports.dom_runRemovingSteps = dom_runRemovingSteps;\n/**\n * Runs cloning steps for node.\n *\n * @param copy - node clone\n * @param node - node\n * @param document - document to own the cloned node\n * @param cloneChildrenFlag - whether child nodes are cloned\n */\nfunction dom_runCloningSteps(copy, node, document, cloneChildrenFlag) {\n    // No steps defined\n}\nexports.dom_runCloningSteps = dom_runCloningSteps;\n/**\n * Runs adopting steps for node.\n *\n * @param node - node\n * @param oldDocument - old document\n */\nfunction dom_runAdoptingSteps(node, oldDocument) {\n    // No steps defined\n}\nexports.dom_runAdoptingSteps = dom_runAdoptingSteps;\n/**\n * Runs attribute change steps for an element node.\n *\n * @param element - element node owning the attribute\n * @param localName - attribute's local name\n * @param oldValue - attribute's old value\n * @param value - attribute's new value\n * @param namespace - attribute's namespace\n */\nfunction dom_runAttributeChangeSteps(element, localName, oldValue, value, namespace) {\n    var e_1, _a;\n    // run default steps\n    if (DOMImpl_1.dom.features.slots) {\n        updateASlotablesName.call(element, element, localName, oldValue, value, namespace);\n        updateASlotsName.call(element, element, localName, oldValue, value, namespace);\n    }\n    updateAnElementID.call(element, element, localName, value, namespace);\n    try {\n        // run custom steps\n        for (var _b = __values(element._attributeChangeSteps), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var step = _c.value;\n            step.call(element, element, localName, oldValue, value, namespace);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n}\nexports.dom_runAttributeChangeSteps = dom_runAttributeChangeSteps;\n/**\n * Runs insertion steps for a node.\n *\n * @param insertedNode - inserted node\n */\nfunction dom_runInsertionSteps(insertedNode) {\n    // No steps defined\n}\nexports.dom_runInsertionSteps = dom_runInsertionSteps;\n/**\n * Runs pre-removing steps for a node iterator and node.\n *\n * @param nodeIterator - a node iterator\n * @param toBeRemoved - node to be removed\n */\nfunction dom_runNodeIteratorPreRemovingSteps(nodeIterator, toBeRemoved) {\n    removeNodeIterator.call(nodeIterator, nodeIterator, toBeRemoved);\n}\nexports.dom_runNodeIteratorPreRemovingSteps = dom_runNodeIteratorPreRemovingSteps;\n/**\n * Determines if there are any supported tokens defined for the given\n * attribute name.\n *\n * @param attributeName - an attribute name\n */\nfunction dom_hasSupportedTokens(attributeName) {\n    return supportedTokens.has(attributeName);\n}\nexports.dom_hasSupportedTokens = dom_hasSupportedTokens;\n/**\n * Returns the set of supported tokens defined for the given attribute name.\n *\n * @param attributeName - an attribute name\n */\nfunction dom_getSupportedTokens(attributeName) {\n    return supportedTokens.get(attributeName) || new Set();\n}\nexports.dom_getSupportedTokens = dom_getSupportedTokens;\n/**\n * Runs event construction steps.\n *\n * @param event - an event\n */\nfunction dom_runEventConstructingSteps(event) {\n    // No steps defined\n}\nexports.dom_runEventConstructingSteps = dom_runEventConstructingSteps;\n/**\n * Runs child text content change steps for a parent node.\n *\n * @param parent - parent node with text node child nodes\n */\nfunction dom_runChildTextContentChangeSteps(parent) {\n    // No steps defined\n}\nexports.dom_runChildTextContentChangeSteps = dom_runChildTextContentChangeSteps;\n/**\n * Defines pre-removing steps for a node iterator.\n */\nfunction removeNodeIterator(nodeIterator, toBeRemovedNode) {\n    /**\n     * 1. If toBeRemovedNode is not an inclusive ancestor of nodeIterator’s\n     * reference, or toBeRemovedNode is nodeIterator’s root, then return.\n     */\n    if (toBeRemovedNode === nodeIterator._root ||\n        !TreeAlgorithm_1.tree_isAncestorOf(nodeIterator._reference, toBeRemovedNode, true)) {\n        return;\n    }\n    /**\n     * 2. If nodeIterator’s pointer before reference is true, then:\n     */\n    if (nodeIterator._pointerBeforeReference) {\n        /**\n         * 2.1. Let next be toBeRemovedNode’s first following node that is an\n         * inclusive descendant of nodeIterator’s root and is not an inclusive\n         * descendant of toBeRemovedNode, and null if there is no such node.\n         */\n        while (true) {\n            var nextNode = TreeAlgorithm_1.tree_getFollowingNode(nodeIterator._root, toBeRemovedNode);\n            if (nextNode !== null &&\n                TreeAlgorithm_1.tree_isDescendantOf(nodeIterator._root, nextNode, true) &&\n                !TreeAlgorithm_1.tree_isDescendantOf(toBeRemovedNode, nextNode, true)) {\n                /**\n                 * 2.2. If next is non-null, then set nodeIterator’s reference to next\n                 * and return.\n                 */\n                nodeIterator._reference = nextNode;\n                return;\n            }\n            else if (nextNode === null) {\n                /**\n                 * 2.3. Otherwise, set nodeIterator’s pointer before reference to false.\n                 */\n                nodeIterator._pointerBeforeReference = false;\n                return;\n            }\n        }\n    }\n    /**\n     * 3. Set nodeIterator’s reference to toBeRemovedNode’s parent, if\n     * toBeRemovedNode’s previous sibling is null, and to the inclusive\n     * descendant of toBeRemovedNode’s previous sibling that appears last in\n     * tree order otherwise.\n     */\n    if (toBeRemovedNode._previousSibling === null) {\n        if (toBeRemovedNode._parent !== null) {\n            nodeIterator._reference = toBeRemovedNode._parent;\n        }\n    }\n    else {\n        var referenceNode = toBeRemovedNode._previousSibling;\n        var childNode = TreeAlgorithm_1.tree_getFirstDescendantNode(toBeRemovedNode._previousSibling, true, false);\n        while (childNode !== null) {\n            if (childNode !== null) {\n                referenceNode = childNode;\n            }\n            // loop through to get the last descendant node\n            childNode = TreeAlgorithm_1.tree_getNextDescendantNode(toBeRemovedNode._previousSibling, childNode, true, false);\n        }\n        nodeIterator._reference = referenceNode;\n    }\n}\n/**\n * Defines attribute change steps to update a slot’s name.\n */\nfunction updateASlotsName(element, localName, oldValue, value, namespace) {\n    /**\n     * 1. If element is a slot, localName is name, and namespace is null, then:\n     * 1.1. If value is oldValue, then return.\n     * 1.2. If value is null and oldValue is the empty string, then return.\n     * 1.3. If value is the empty string and oldValue is null, then return.\n     * 1.4. If value is null or the empty string, then set element’s name to the\n     * empty string.\n     * 1.5. Otherwise, set element’s name to value.\n     * 1.6. Run assign slotables for a tree with element’s root.\n     */\n    if (util_1.Guard.isSlot(element) && localName === \"name\" && namespace === null) {\n        if (value === oldValue)\n            return;\n        if (value === null && oldValue === '')\n            return;\n        if (value === '' && oldValue === null)\n            return;\n        if ((value === null || value === '')) {\n            element._name = '';\n        }\n        else {\n            element._name = value;\n        }\n        ShadowTreeAlgorithm_1.shadowTree_assignSlotablesForATree(TreeAlgorithm_1.tree_rootNode(element));\n    }\n}\n/**\n * Defines attribute change steps to update a slotable’s name.\n */\nfunction updateASlotablesName(element, localName, oldValue, value, namespace) {\n    /**\n     * 1. If localName is slot and namespace is null, then:\n     * 1.1. If value is oldValue, then return.\n     * 1.2. If value is null and oldValue is the empty string, then return.\n     * 1.3. If value is the empty string and oldValue is null, then return.\n     * 1.4. If value is null or the empty string, then set element’s name to\n     * the empty string.\n     * 1.5. Otherwise, set element’s name to value.\n     * 1.6. If element is assigned, then run assign slotables for element’s\n     * assigned slot.\n     * 1.7. Run assign a slot for element.\n     */\n    if (util_1.Guard.isSlotable(element) && localName === \"slot\" && namespace === null) {\n        if (value === oldValue)\n            return;\n        if (value === null && oldValue === '')\n            return;\n        if (value === '' && oldValue === null)\n            return;\n        if ((value === null || value === '')) {\n            element._name = '';\n        }\n        else {\n            element._name = value;\n        }\n        if (ShadowTreeAlgorithm_1.shadowTree_isAssigned(element)) {\n            ShadowTreeAlgorithm_1.shadowTree_assignSlotables(element._assignedSlot);\n        }\n        ShadowTreeAlgorithm_1.shadowTree_assignASlot(element);\n    }\n}\n/**\n * Defines attribute change steps to update an element's ID.\n */\nfunction updateAnElementID(element, localName, value, namespace) {\n    /**\n     * 1. If localName is id, namespace is null, and value is null or the empty\n     * string, then unset element’s ID.\n     * 2. Otherwise, if localName is id, namespace is null, then set element’s\n     * ID to value.\n     */\n    if (localName === \"id\" && namespace === null) {\n        if (!value)\n            element._uniqueIdentifier = undefined;\n        else\n            element._uniqueIdentifier = value;\n    }\n}\n//# sourceMappingURL=DOMAlgorithm.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMImplementationImpl_1 = require(\"../dom/DOMImplementationImpl\");\nvar WindowImpl_1 = require(\"../dom/WindowImpl\");\nvar XMLDocumentImpl_1 = require(\"../dom/XMLDocumentImpl\");\nvar DocumentImpl_1 = require(\"../dom/DocumentImpl\");\nvar AbortControllerImpl_1 = require(\"../dom/AbortControllerImpl\");\nvar AbortSignalImpl_1 = require(\"../dom/AbortSignalImpl\");\nvar DocumentTypeImpl_1 = require(\"../dom/DocumentTypeImpl\");\nvar ElementImpl_1 = require(\"../dom/ElementImpl\");\nvar DocumentFragmentImpl_1 = require(\"../dom/DocumentFragmentImpl\");\nvar ShadowRootImpl_1 = require(\"../dom/ShadowRootImpl\");\nvar AttrImpl_1 = require(\"../dom/AttrImpl\");\nvar TextImpl_1 = require(\"../dom/TextImpl\");\nvar CDATASectionImpl_1 = require(\"../dom/CDATASectionImpl\");\nvar CommentImpl_1 = require(\"../dom/CommentImpl\");\nvar ProcessingInstructionImpl_1 = require(\"../dom/ProcessingInstructionImpl\");\nvar HTMLCollectionImpl_1 = require(\"../dom/HTMLCollectionImpl\");\nvar NodeListImpl_1 = require(\"../dom/NodeListImpl\");\nvar NodeListStaticImpl_1 = require(\"../dom/NodeListStaticImpl\");\nvar NamedNodeMapImpl_1 = require(\"../dom/NamedNodeMapImpl\");\nvar RangeImpl_1 = require(\"../dom/RangeImpl\");\nvar NodeIteratorImpl_1 = require(\"../dom/NodeIteratorImpl\");\nvar TreeWalkerImpl_1 = require(\"../dom/TreeWalkerImpl\");\nvar NodeFilterImpl_1 = require(\"../dom/NodeFilterImpl\");\nvar MutationRecordImpl_1 = require(\"../dom/MutationRecordImpl\");\nvar DOMTokenListImpl_1 = require(\"../dom/DOMTokenListImpl\");\n/**\n * Creates a `DOMImplementation`.\n *\n * @param document - associated document\n */\nfunction create_domImplementation(document) {\n    return DOMImplementationImpl_1.DOMImplementationImpl._create(document);\n}\nexports.create_domImplementation = create_domImplementation;\n/**\n * Creates a `Window` node.\n */\nfunction create_window() {\n    return WindowImpl_1.WindowImpl._create();\n}\nexports.create_window = create_window;\n/**\n * Creates an `XMLDocument` node.\n */\nfunction create_xmlDocument() {\n    return new XMLDocumentImpl_1.XMLDocumentImpl();\n}\nexports.create_xmlDocument = create_xmlDocument;\n/**\n * Creates a `Document` node.\n */\nfunction create_document() {\n    return new DocumentImpl_1.DocumentImpl();\n}\nexports.create_document = create_document;\n/**\n * Creates an `AbortController`.\n */\nfunction create_abortController() {\n    return new AbortControllerImpl_1.AbortControllerImpl();\n}\nexports.create_abortController = create_abortController;\n/**\n * Creates an `AbortSignal`.\n */\nfunction create_abortSignal() {\n    return AbortSignalImpl_1.AbortSignalImpl._create();\n}\nexports.create_abortSignal = create_abortSignal;\n/**\n * Creates a `DocumentType` node.\n *\n * @param document - owner document\n * @param name - name of the node\n * @param publicId - `PUBLIC` identifier\n * @param systemId - `SYSTEM` identifier\n */\nfunction create_documentType(document, name, publicId, systemId) {\n    return DocumentTypeImpl_1.DocumentTypeImpl._create(document, name, publicId, systemId);\n}\nexports.create_documentType = create_documentType;\n/**\n * Creates a new `Element` node.\n *\n * @param document - owner document\n * @param localName - local name\n * @param namespace - namespace\n * @param prefix - namespace prefix\n */\nfunction create_element(document, localName, namespace, prefix) {\n    return ElementImpl_1.ElementImpl._create(document, localName, namespace, prefix);\n}\nexports.create_element = create_element;\n/**\n * Creates a new `HTMLElement` node.\n *\n * @param document - owner document\n * @param localName - local name\n * @param namespace - namespace\n * @param prefix - namespace prefix\n */\nfunction create_htmlElement(document, localName, namespace, prefix) {\n    // TODO: Implement in HTML DOM\n    return ElementImpl_1.ElementImpl._create(document, localName, namespace, prefix);\n}\nexports.create_htmlElement = create_htmlElement;\n/**\n * Creates a new `HTMLUnknownElement` node.\n *\n * @param document - owner document\n * @param localName - local name\n * @param namespace - namespace\n * @param prefix - namespace prefix\n */\nfunction create_htmlUnknownElement(document, localName, namespace, prefix) {\n    // TODO: Implement in HTML DOM\n    return ElementImpl_1.ElementImpl._create(document, localName, namespace, prefix);\n}\nexports.create_htmlUnknownElement = create_htmlUnknownElement;\n/**\n * Creates a new `DocumentFragment` node.\n *\n * @param document - owner document\n */\nfunction create_documentFragment(document) {\n    return DocumentFragmentImpl_1.DocumentFragmentImpl._create(document);\n}\nexports.create_documentFragment = create_documentFragment;\n/**\n * Creates a new `ShadowRoot` node.\n *\n * @param document - owner document\n * @param host - shadow root's host element node\n */\nfunction create_shadowRoot(document, host) {\n    return ShadowRootImpl_1.ShadowRootImpl._create(document, host);\n}\nexports.create_shadowRoot = create_shadowRoot;\n/**\n * Creates a new `Attr` node.\n *\n * @param document - owner document\n * @param localName - local name\n */\nfunction create_attr(document, localName) {\n    return AttrImpl_1.AttrImpl._create(document, localName);\n}\nexports.create_attr = create_attr;\n/**\n * Creates a new `Text` node.\n *\n * @param document - owner document\n * @param data - node contents\n */\nfunction create_text(document, data) {\n    return TextImpl_1.TextImpl._create(document, data);\n}\nexports.create_text = create_text;\n/**\n * Creates a new `CDATASection` node.\n *\n * @param document - owner document\n * @param data - node contents\n */\nfunction create_cdataSection(document, data) {\n    return CDATASectionImpl_1.CDATASectionImpl._create(document, data);\n}\nexports.create_cdataSection = create_cdataSection;\n/**\n * Creates a new `Comment` node.\n *\n * @param document - owner document\n * @param data - node contents\n */\nfunction create_comment(document, data) {\n    return CommentImpl_1.CommentImpl._create(document, data);\n}\nexports.create_comment = create_comment;\n/**\n * Creates a new `ProcessingInstruction` node.\n *\n * @param document - owner document\n * @param target - instruction target\n * @param data - node contents\n */\nfunction create_processingInstruction(document, target, data) {\n    return ProcessingInstructionImpl_1.ProcessingInstructionImpl._create(document, target, data);\n}\nexports.create_processingInstruction = create_processingInstruction;\n/**\n * Creates a new `HTMLCollection`.\n *\n * @param root - root node\n * @param filter - node filter\n */\nfunction create_htmlCollection(root, filter) {\n    if (filter === void 0) { filter = (function () { return true; }); }\n    return HTMLCollectionImpl_1.HTMLCollectionImpl._create(root, filter);\n}\nexports.create_htmlCollection = create_htmlCollection;\n/**\n * Creates a new live `NodeList`.\n *\n * @param root - root node\n */\nfunction create_nodeList(root) {\n    return NodeListImpl_1.NodeListImpl._create(root);\n}\nexports.create_nodeList = create_nodeList;\n/**\n * Creates a new static `NodeList`.\n *\n * @param root - root node\n * @param items - a list of items to initialize the list\n */\nfunction create_nodeListStatic(root, items) {\n    return NodeListStaticImpl_1.NodeListStaticImpl._create(root, items);\n}\nexports.create_nodeListStatic = create_nodeListStatic;\n/**\n * Creates a new `NamedNodeMap`.\n *\n * @param element - parent element\n */\nfunction create_namedNodeMap(element) {\n    return NamedNodeMapImpl_1.NamedNodeMapImpl._create(element);\n}\nexports.create_namedNodeMap = create_namedNodeMap;\n/**\n * Creates a new `Range`.\n *\n * @param start - start point\n * @param end - end point\n */\nfunction create_range(start, end) {\n    return RangeImpl_1.RangeImpl._create(start, end);\n}\nexports.create_range = create_range;\n/**\n * Creates a new `NodeIterator`.\n *\n * @param root - iterator's root node\n * @param reference - reference node\n * @param pointerBeforeReference - whether the iterator is before or after the\n * reference node\n */\nfunction create_nodeIterator(root, reference, pointerBeforeReference) {\n    return NodeIteratorImpl_1.NodeIteratorImpl._create(root, reference, pointerBeforeReference);\n}\nexports.create_nodeIterator = create_nodeIterator;\n/**\n * Creates a new `TreeWalker`.\n *\n * @param root - iterator's root node\n * @param current - current node\n */\nfunction create_treeWalker(root, current) {\n    return TreeWalkerImpl_1.TreeWalkerImpl._create(root, current);\n}\nexports.create_treeWalker = create_treeWalker;\n/**\n * Creates a new `NodeFilter`.\n */\nfunction create_nodeFilter() {\n    return NodeFilterImpl_1.NodeFilterImpl._create();\n}\nexports.create_nodeFilter = create_nodeFilter;\n/**\n * Creates a new `MutationRecord`.\n *\n * @param type - type of mutation: `\"attributes\"` for an attribute\n * mutation, `\"characterData\"` for a mutation to a CharacterData node\n * and `\"childList\"` for a mutation to the tree of nodes.\n * @param target - node affected by the mutation.\n * @param addedNodes - list of added nodes.\n * @param removedNodes - list of removed nodes.\n * @param previousSibling - previous sibling of added or removed nodes.\n * @param nextSibling - next sibling of added or removed nodes.\n * @param attributeName - local name of the changed attribute,\n * and `null` otherwise.\n * @param attributeNamespace - namespace of the changed attribute,\n * and `null` otherwise.\n * @param oldValue - value before mutation: attribute value for an attribute\n * mutation, node `data` for a mutation to a CharacterData node and `null`\n * for a mutation to the tree of nodes.\n */\nfunction create_mutationRecord(type, target, addedNodes, removedNodes, previousSibling, nextSibling, attributeName, attributeNamespace, oldValue) {\n    return MutationRecordImpl_1.MutationRecordImpl._create(type, target, addedNodes, removedNodes, previousSibling, nextSibling, attributeName, attributeNamespace, oldValue);\n}\nexports.create_mutationRecord = create_mutationRecord;\n/**\n * Creates a new `DOMTokenList`.\n *\n * @param element - associated element\n * @param attribute - associated attribute\n */\nfunction create_domTokenList(element, attribute) {\n    return DOMTokenListImpl_1.DOMTokenListImpl._create(element, attribute);\n}\nexports.create_domTokenList = create_domTokenList;\n//# sourceMappingURL=CreateAlgorithm.js.map","// Standard YAML's Failsafe schema.\n// http://www.yaml.org/spec/1.2/spec.html#id2802346\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  explicit: [\n    require('../type/str'),\n    require('../type/seq'),\n    require('../type/map')\n  ]\n});\n","'use strict';\n\nvar common = require('../common');\nvar Type   = require('../type');\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n    // base 8\n    for (; index < max; index++) {\n      ch = data[index];\n      if (ch === '_') continue;\n      if (!isOctCode(data.charCodeAt(index))) return false;\n      hasDigits = true;\n    }\n    return hasDigits && ch !== '_';\n  }\n\n  // base 10 (except 0) or base 60\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (ch === ':') break;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  // if !base60 - done;\n  if (ch !== ':') return true;\n\n  // base60 almost not used, no needs to optimize\n  return /^(:[0-5]?[0-9])+$/.test(data.slice(index));\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch, base, digits = [];\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value, 16);\n    return sign * parseInt(value, 8);\n  }\n\n  if (value.indexOf(':') !== -1) {\n    value.split(':').forEach(function (v) {\n      digits.unshift(parseInt(v, 10));\n    });\n\n    value = 0;\n    base = 1;\n\n    digits.forEach(function (d) {\n      value += (d * base);\n      base *= 60;\n    });\n\n    return sign * value;\n\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0'  + obj.toString(8) : '-0'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a node filter.\n */\nvar NodeFilterImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `NodeFilter`.\n     */\n    function NodeFilterImpl() {\n    }\n    /**\n     * Callback function.\n     */\n    NodeFilterImpl.prototype.acceptNode = function (node) {\n        return interfaces_1.FilterResult.Accept;\n    };\n    /**\n     * Creates a new `NodeFilter`.\n     */\n    NodeFilterImpl._create = function () {\n        return new NodeFilterImpl();\n    };\n    NodeFilterImpl.FILTER_ACCEPT = 1;\n    NodeFilterImpl.FILTER_REJECT = 2;\n    NodeFilterImpl.FILTER_SKIP = 3;\n    NodeFilterImpl.SHOW_ALL = 0xffffffff;\n    NodeFilterImpl.SHOW_ELEMENT = 0x1;\n    NodeFilterImpl.SHOW_ATTRIBUTE = 0x2;\n    NodeFilterImpl.SHOW_TEXT = 0x4;\n    NodeFilterImpl.SHOW_CDATA_SECTION = 0x8;\n    NodeFilterImpl.SHOW_ENTITY_REFERENCE = 0x10;\n    NodeFilterImpl.SHOW_ENTITY = 0x20;\n    NodeFilterImpl.SHOW_PROCESSING_INSTRUCTION = 0x40;\n    NodeFilterImpl.SHOW_COMMENT = 0x80;\n    NodeFilterImpl.SHOW_DOCUMENT = 0x100;\n    NodeFilterImpl.SHOW_DOCUMENT_TYPE = 0x200;\n    NodeFilterImpl.SHOW_DOCUMENT_FRAGMENT = 0x400;\n    NodeFilterImpl.SHOW_NOTATION = 0x800;\n    return NodeFilterImpl;\n}());\nexports.NodeFilterImpl = NodeFilterImpl;\n/**\n * Define constants on prototype.\n */\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"FILTER_ACCEPT\", 1);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"FILTER_REJECT\", 2);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"FILTER_SKIP\", 3);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_ALL\", 0xffffffff);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_ELEMENT\", 0x1);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_ATTRIBUTE\", 0x2);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_TEXT\", 0x4);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_CDATA_SECTION\", 0x8);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_ENTITY_REFERENCE\", 0x10);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_ENTITY\", 0x20);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_PROCESSING_INSTRUCTION\", 0x40);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_COMMENT\", 0x80);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_DOCUMENT\", 0x100);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_DOCUMENT_TYPE\", 0x200);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_DOCUMENT_FRAGMENT\", 0x400);\nWebIDLAlgorithm_1.idl_defineConst(NodeFilterImpl.prototype, \"SHOW_NOTATION\", 0x800);\n//# sourceMappingURL=NodeFilterImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NodeImpl_1 = require(\"./NodeImpl\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a generic text node.\n */\nvar CharacterDataImpl = /** @class */ (function (_super) {\n    __extends(CharacterDataImpl, _super);\n    /**\n     * Initializes a new instance of `CharacterData`.\n     *\n     * @param data - the text content\n     */\n    function CharacterDataImpl(data) {\n        var _this = _super.call(this) || this;\n        _this._data = data;\n        return _this;\n    }\n    Object.defineProperty(CharacterDataImpl.prototype, \"data\", {\n        /** @inheritdoc */\n        get: function () { return this._data; },\n        set: function (value) {\n            algorithm_1.characterData_replaceData(this, 0, this._data.length, value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharacterDataImpl.prototype, \"length\", {\n        /** @inheritdoc */\n        get: function () { return this._data.length; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    CharacterDataImpl.prototype.substringData = function (offset, count) {\n        /**\n         * The substringData(offset, count) method, when invoked, must return the\n         * result of running substring data with node context object, offset offset, and count count.\n         */\n        return algorithm_1.characterData_substringData(this, offset, count);\n    };\n    /** @inheritdoc */\n    CharacterDataImpl.prototype.appendData = function (data) {\n        /**\n         * The appendData(data) method, when invoked, must replace data with node\n         * context object, offset context object’s length, count 0, and data data.\n         */\n        return algorithm_1.characterData_replaceData(this, this._data.length, 0, data);\n    };\n    /** @inheritdoc */\n    CharacterDataImpl.prototype.insertData = function (offset, data) {\n        /**\n         * The insertData(offset, data) method, when invoked, must replace data with\n         * node context object, offset offset, count 0, and data data.\n         */\n        algorithm_1.characterData_replaceData(this, offset, 0, data);\n    };\n    /** @inheritdoc */\n    CharacterDataImpl.prototype.deleteData = function (offset, count) {\n        /**\n         * The deleteData(offset, count) method, when invoked, must replace data\n         * with node context object, offset offset, count count, and data the\n         * empty string.\n         */\n        algorithm_1.characterData_replaceData(this, offset, count, '');\n    };\n    /** @inheritdoc */\n    CharacterDataImpl.prototype.replaceData = function (offset, count, data) {\n        /**\n         * The replaceData(offset, count, data) method, when invoked, must replace\n         * data with node context object, offset offset, count count, and data data.\n         */\n        algorithm_1.characterData_replaceData(this, offset, count, data);\n    };\n    Object.defineProperty(CharacterDataImpl.prototype, \"previousElementSibling\", {\n        // MIXIN: NonDocumentTypeChildNode\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharacterDataImpl.prototype, \"nextElementSibling\", {\n        /* istanbul ignore next */\n        get: function () { throw new Error(\"Mixin: NonDocumentTypeChildNode not implemented.\"); },\n        enumerable: true,\n        configurable: true\n    });\n    // MIXIN: ChildNode\n    /* istanbul ignore next */\n    CharacterDataImpl.prototype.before = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    CharacterDataImpl.prototype.after = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    CharacterDataImpl.prototype.replaceWith = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    CharacterDataImpl.prototype.remove = function () { throw new Error(\"Mixin: ChildNode not implemented.\"); };\n    return CharacterDataImpl;\n}(NodeImpl_1.NodeImpl));\nexports.CharacterDataImpl = CharacterDataImpl;\n//# sourceMappingURL=CharacterDataImpl.js.map","// YAML error class. http://stackoverflow.com/questions/8458984\n//\n'use strict';\n\nfunction YAMLException(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = (this.reason || '(unknown reason)') + (this.mark ? ' ' + this.mark.toString() : '');\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException.prototype = Object.create(Error.prototype);\nYAMLException.prototype.constructor = YAMLException;\n\n\nYAMLException.prototype.toString = function toString(compact) {\n  var result = this.name + ': ';\n\n  result += this.reason || '(unknown reason)';\n\n  if (!compact && this.mark) {\n    result += ' ' + this.mark.toString();\n  }\n\n  return result;\n};\n\n\nmodule.exports = YAMLException;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DOMException_1 = require(\"../dom/DOMException\");\nvar infra_1 = require(\"@oozcitak/infra\");\nvar XMLAlgorithm_1 = require(\"./XMLAlgorithm\");\n/**\n * Validates the given qualified name.\n *\n * @param qualifiedName - qualified name\n */\nfunction namespace_validate(qualifiedName) {\n    /**\n     * To validate a qualifiedName, throw an \"InvalidCharacterError\"\n     * DOMException if qualifiedName does not match the Name or QName\n     * production.\n     */\n    if (!XMLAlgorithm_1.xml_isName(qualifiedName))\n        throw new DOMException_1.InvalidCharacterError(\"Invalid XML name: \" + qualifiedName);\n    if (!XMLAlgorithm_1.xml_isQName(qualifiedName))\n        throw new DOMException_1.InvalidCharacterError(\"Invalid XML qualified name: \" + qualifiedName + \".\");\n}\nexports.namespace_validate = namespace_validate;\n/**\n * Validates and extracts a namespace, prefix and localName from the\n * given namespace and qualified name.\n * See: https://dom.spec.whatwg.org/#validate-and-extract.\n *\n * @param namespace - namespace\n * @param qualifiedName - qualified name\n *\n * @returns a tuple with `namespace`, `prefix` and `localName`.\n */\nfunction namespace_validateAndExtract(namespace, qualifiedName) {\n    /**\n     * 1. If namespace is the empty string, set it to null.\n     * 2. Validate qualifiedName.\n     * 3. Let prefix be null.\n     * 4. Let localName be qualifiedName.\n     * 5. If qualifiedName contains a \":\" (U+003E), then split the string on it\n     * and set prefix to the part before and localName to the part after.\n     * 6. If prefix is non-null and namespace is null, then throw a\n     * \"NamespaceError\" DOMException.\n     * 7. If prefix is \"xml\" and namespace is not the XML namespace, then throw\n     * a \"NamespaceError\" DOMException.\n     * 8. If either qualifiedName or prefix is \"xmlns\" and namespace is not the\n     * XMLNS namespace, then throw a \"NamespaceError\" DOMException.\n     * 9. If namespace is the XMLNS namespace and neither qualifiedName nor\n     * prefix is \"xmlns\", then throw a \"NamespaceError\" DOMException.\n     * 10. Return namespace, prefix, and localName.\n     */\n    if (!namespace)\n        namespace = null;\n    namespace_validate(qualifiedName);\n    var parts = qualifiedName.split(':');\n    var prefix = (parts.length === 2 ? parts[0] : null);\n    var localName = (parts.length === 2 ? parts[1] : qualifiedName);\n    if (prefix && namespace === null)\n        throw new DOMException_1.NamespaceError(\"Qualified name includes a prefix but the namespace is null.\");\n    if (prefix === \"xml\" && namespace !== infra_1.namespace.XML)\n        throw new DOMException_1.NamespaceError(\"Qualified name includes the \\\"xml\\\" prefix but the namespace is not the XML namespace.\");\n    if (namespace !== infra_1.namespace.XMLNS &&\n        (prefix === \"xmlns\" || qualifiedName === \"xmlns\"))\n        throw new DOMException_1.NamespaceError(\"Qualified name includes the \\\"xmlns\\\" prefix but the namespace is not the XMLNS namespace.\");\n    if (namespace === infra_1.namespace.XMLNS &&\n        (prefix !== \"xmlns\" && qualifiedName !== \"xmlns\"))\n        throw new DOMException_1.NamespaceError(\"Qualified name does not include the \\\"xmlns\\\" prefix but the namespace is the XMLNS namespace.\");\n    return [namespace, prefix, localName];\n}\nexports.namespace_validateAndExtract = namespace_validateAndExtract;\n/**\n * Extracts a prefix and localName from the given qualified name.\n *\n * @param qualifiedName - qualified name\n *\n * @returns an tuple with `prefix` and `localName`.\n */\nfunction namespace_extractQName(qualifiedName) {\n    namespace_validate(qualifiedName);\n    var parts = qualifiedName.split(':');\n    var prefix = (parts.length === 2 ? parts[0] : null);\n    var localName = (parts.length === 2 ? parts[1] : qualifiedName);\n    return [prefix, localName];\n}\nexports.namespace_extractQName = namespace_extractQName;\n//# sourceMappingURL=NamespaceAlgorithm.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./AbortAlgorithm\"));\n__export(require(\"./AttrAlgorithm\"));\n__export(require(\"./BoundaryPointAlgorithm\"));\n__export(require(\"./CharacterDataAlgorithm\"));\n__export(require(\"./CreateAlgorithm\"));\n__export(require(\"./CustomElementAlgorithm\"));\n__export(require(\"./DocumentAlgorithm\"));\n__export(require(\"./DOMAlgorithm\"));\n__export(require(\"./DOMTokenListAlgorithm\"));\n__export(require(\"./ElementAlgorithm\"));\n__export(require(\"./EventAlgorithm\"));\n__export(require(\"./EventTargetAlgorithm\"));\n__export(require(\"./MutationAlgorithm\"));\n__export(require(\"./MutationObserverAlgorithm\"));\n__export(require(\"./NamespaceAlgorithm\"));\n__export(require(\"./NodeAlgorithm\"));\n__export(require(\"./NodeIteratorAlgorithm\"));\n__export(require(\"./OrderedSetAlgorithm\"));\n__export(require(\"./ParentNodeAlgorithm\"));\n__export(require(\"./RangeAlgorithm\"));\n__export(require(\"./SelectorsAlgorithm\"));\n__export(require(\"./ShadowTreeAlgorithm\"));\n__export(require(\"./TextAlgorithm\"));\n__export(require(\"./TraversalAlgorithm\"));\n__export(require(\"./TreeAlgorithm\"));\n__export(require(\"./TreeWalkerAlgorithm\"));\n__export(require(\"./WebIDLAlgorithm\"));\n__export(require(\"./XMLAlgorithm\"));\n//# sourceMappingURL=index.js.map","module.exports = require(\"util\");","'use strict';\n\n\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nmodule.exports.isNothing      = isNothing;\nmodule.exports.isObject       = isObject;\nmodule.exports.toArray        = toArray;\nmodule.exports.repeat         = repeat;\nmodule.exports.isNegativeZero = isNegativeZero;\nmodule.exports.extend         = extend;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Pushes the given item to the stack.\n *\n * @param list - a list\n * @param item - an item\n */\nfunction push(list, item) {\n    list.push(item);\n}\nexports.push = push;\n/**\n * Pops and returns an item from the stack.\n *\n * @param list - a list\n */\nfunction pop(list) {\n    return list.pop() || null;\n}\nexports.pop = pop;\n//# sourceMappingURL=Stack.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar XMLReader_1 = require(\"./XMLReader\");\nexports.XMLReader = XMLReader_1.XMLReader;\nvar ObjectReader_1 = require(\"./ObjectReader\");\nexports.ObjectReader = ObjectReader_1.ObjectReader;\nvar JSONReader_1 = require(\"./JSONReader\");\nexports.JSONReader = JSONReader_1.JSONReader;\nvar YAMLReader_1 = require(\"./YAMLReader\");\nexports.YAMLReader = YAMLReader_1.YAMLReader;\n//# sourceMappingURL=index.js.map","module.exports = require(\"net\");","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FixedSizeSet_1 = require(\"./FixedSizeSet\");\nexports.FixedSizeSet = FixedSizeSet_1.FixedSizeSet;\nvar ObjectCache_1 = require(\"./ObjectCache\");\nexports.ObjectCache = ObjectCache_1.ObjectCache;\nvar CompareCache_1 = require(\"./CompareCache\");\nexports.CompareCache = CompareCache_1.CompareCache;\nvar Lazy_1 = require(\"./Lazy\");\nexports.Lazy = Lazy_1.Lazy;\nvar StringWalker_1 = require(\"./StringWalker\");\nexports.StringWalker = StringWalker_1.StringWalker;\n/**\n * Applies the mixin to a given class.\n *\n * @param baseClass - class to receive the mixin\n * @param mixinClass - mixin class\n * @param overrides - an array with names of function overrides. Base class\n * functions whose names are in this array will be kept by prepending an\n * underscore to their names.\n */\nfunction applyMixin(baseClass, mixinClass) {\n    var overrides = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        overrides[_i - 2] = arguments[_i];\n    }\n    Object.getOwnPropertyNames(mixinClass.prototype).forEach(function (name) {\n        if (name !== \"constructor\") {\n            if (overrides.indexOf(name) !== -1) {\n                var orgPropDesc = Object.getOwnPropertyDescriptor(baseClass.prototype, name);\n                /* istanbul ignore else */\n                if (orgPropDesc) {\n                    Object.defineProperty(baseClass.prototype, \"_\" + name, orgPropDesc);\n                }\n            }\n            var propDesc = Object.getOwnPropertyDescriptor(mixinClass.prototype, name);\n            /* istanbul ignore else */\n            if (propDesc) {\n                Object.defineProperty(baseClass.prototype, name, propDesc);\n            }\n        }\n    });\n}\nexports.applyMixin = applyMixin;\n/**\n * Applies default values to the given object.\n *\n * @param obj - an object\n * @param defaults - an object with default values\n * @param overwrite - if set to `true` defaults object always overwrites object\n * values, whether they are `undefined` or not.\n */\nfunction applyDefaults(obj, defaults, overwrite) {\n    if (overwrite === void 0) { overwrite = false; }\n    var result = clone(obj || {});\n    forEachObject(defaults, function (key, val) {\n        if (isPlainObject(val)) {\n            result[key] = applyDefaults(result[key], val, overwrite);\n        }\n        else if (overwrite || result[key] === undefined) {\n            result[key] = val;\n        }\n    });\n    return result;\n}\nexports.applyDefaults = applyDefaults;\n/**\n * Iterates over items of an array or set.\n *\n * @param arr - array or set to iterate\n * @param callback - a callback function which receives each array item as its\n * single argument\n * @param thisArg - the value of this inside callback\n */\nfunction forEachArray(arr, callback, thisArg) {\n    arr.forEach(callback, thisArg);\n}\nexports.forEachArray = forEachArray;\n/**\n * Iterates over key/value pairs of a map or object.\n *\n * @param obj - map or object to iterate\n * @param callback - a callback function which receives object key as its first\n * argument and object value as its second argument\n * @param thisArg - the value of this inside callback\n */\nfunction forEachObject(obj, callback, thisArg) {\n    if (isMap(obj)) {\n        obj.forEach(function (value, key) { return callback.call(thisArg, key, value); });\n    }\n    else {\n        for (var key in obj) {\n            /* istanbul ignore else */\n            if (obj.hasOwnProperty(key)) {\n                callback.call(thisArg, key, obj[key]);\n            }\n        }\n    }\n}\nexports.forEachObject = forEachObject;\n/**\n * Returns the number of entries in an array or set.\n *\n * @param arr - array or set\n */\nfunction arrayLength(obj) {\n    if (isSet(obj)) {\n        return obj.size;\n    }\n    else {\n        return obj.length;\n    }\n}\nexports.arrayLength = arrayLength;\n/**\n * Returns the number of entries in a map or object.\n *\n * @param obj - map or object\n */\nfunction objectLength(obj) {\n    if (isMap(obj)) {\n        return obj.size;\n    }\n    else {\n        return Object.keys(obj).length;\n    }\n}\nexports.objectLength = objectLength;\n/**\n * Gets the value of a key from a map or object.\n *\n * @param obj - map or object\n * @param key - the key to retrieve\n */\nfunction getObjectValue(obj, key) {\n    if (isMap(obj)) {\n        return obj.get(key);\n    }\n    else {\n        return obj[key];\n    }\n}\nexports.getObjectValue = getObjectValue;\n/**\n * Removes a property from a map or object.\n *\n * @param obj - map or object\n * @param key - the key to remove\n */\nfunction removeObjectValue(obj, key) {\n    if (isMap(obj)) {\n        obj.delete(key);\n    }\n    else {\n        delete obj[key];\n    }\n}\nexports.removeObjectValue = removeObjectValue;\n/**\n * Deep clones the given object.\n *\n * @param obj - an object\n */\nfunction clone(obj) {\n    var e_1, _a;\n    if (isFunction(obj)) {\n        return obj;\n    }\n    else if (isArray(obj)) {\n        var result = [];\n        try {\n            for (var obj_1 = __values(obj), obj_1_1 = obj_1.next(); !obj_1_1.done; obj_1_1 = obj_1.next()) {\n                var item = obj_1_1.value;\n                result.push(clone(item));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (obj_1_1 && !obj_1_1.done && (_a = obj_1.return)) _a.call(obj_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n    }\n    else if (isObject(obj)) {\n        var result = {};\n        for (var key in obj) {\n            /* istanbul ignore next */\n            if (obj.hasOwnProperty(key)) {\n                var val = obj[key];\n                result[key] = clone(val);\n            }\n        }\n        return result;\n    }\n    else {\n        return obj;\n    }\n}\nexports.clone = clone;\n/**\n * Type guard for boolean types\n *\n * @param x - a variable to type check\n */\nfunction isBoolean(x) {\n    return typeof x === \"boolean\";\n}\nexports.isBoolean = isBoolean;\n/**\n * Type guard for numeric types\n *\n * @param x - a variable to type check\n */\nfunction isNumber(x) {\n    return typeof x === \"number\";\n}\nexports.isNumber = isNumber;\n/**\n * Type guard for strings\n *\n * @param x - a variable to type check\n */\nfunction isString(x) {\n    return typeof x === \"string\";\n}\nexports.isString = isString;\n/**\n * Type guard for function objects\n *\n * @param x - a variable to type check\n */\nfunction isFunction(x) {\n    return !!x && Object.prototype.toString.call(x) === '[object Function]';\n}\nexports.isFunction = isFunction;\n/**\n * Type guard for JS objects\n *\n * _Note:_ Functions are objects too\n *\n * @param x - a variable to type check\n */\nfunction isObject(x) {\n    var type = typeof x;\n    return !!x && (type === 'function' || type === 'object');\n}\nexports.isObject = isObject;\n/**\n * Type guard for arrays\n *\n * @param x - a variable to type check\n */\nfunction isArray(x) {\n    return Array.isArray(x);\n}\nexports.isArray = isArray;\n/**\n * Type guard for sets.\n *\n * @param x - a variable to check\n */\nfunction isSet(x) {\n    return x instanceof Set;\n}\nexports.isSet = isSet;\n/**\n * Type guard for maps.\n *\n * @param x - a variable to check\n */\nfunction isMap(x) {\n    return x instanceof Map;\n}\nexports.isMap = isMap;\n/**\n * Determines if `x` is an empty Array or an Object with no own properties.\n *\n * @param x - a variable to check\n */\nfunction isEmpty(x) {\n    if (isArray(x)) {\n        return !x.length;\n    }\n    else if (isSet(x)) {\n        return !x.size;\n    }\n    else if (isMap(x)) {\n        return !x.size;\n    }\n    else if (isObject(x)) {\n        for (var key in x) {\n            if (x.hasOwnProperty(key)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\nexports.isEmpty = isEmpty;\n/**\n * Determines if `x` is a plain Object.\n *\n * @param x - a variable to check\n */\nfunction isPlainObject(x) {\n    if (isObject(x)) {\n        var proto = Object.getPrototypeOf(x);\n        var ctor = proto.constructor;\n        return proto && ctor &&\n            (typeof ctor === 'function') && (ctor instanceof ctor) &&\n            (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n    }\n    return false;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Determines if `x` is an iterable Object.\n *\n * @param x - a variable to check\n */\nfunction isIterable(x) {\n    return x && (typeof x[Symbol.iterator] === 'function');\n}\nexports.isIterable = isIterable;\n/**\n * Gets the primitive value of an object.\n */\nfunction getValue(obj) {\n    if (isFunction(obj.valueOf)) {\n        return obj.valueOf();\n    }\n    else {\n        return obj;\n    }\n}\nexports.getValue = getValue;\n/**\n * UTF-8 encodes the given string.\n *\n * @param input - a string\n */\nfunction utf8Encode(input) {\n    var bytes = new Uint8Array(input.length * 4);\n    var byteIndex = 0;\n    for (var i = 0; i < input.length; i++) {\n        var char = input.charCodeAt(i);\n        if (char < 128) {\n            bytes[byteIndex++] = char;\n            continue;\n        }\n        else if (char < 2048) {\n            bytes[byteIndex++] = char >> 6 | 192;\n        }\n        else {\n            if (char > 0xd7ff && char < 0xdc00) {\n                if (++i >= input.length) {\n                    throw new Error(\"Incomplete surrogate pair.\");\n                }\n                var c2 = input.charCodeAt(i);\n                if (c2 < 0xdc00 || c2 > 0xdfff) {\n                    throw new Error(\"Invalid surrogate character.\");\n                }\n                char = 0x10000 + ((char & 0x03ff) << 10) + (c2 & 0x03ff);\n                bytes[byteIndex++] = char >> 18 | 240;\n                bytes[byteIndex++] = char >> 12 & 63 | 128;\n            }\n            else {\n                bytes[byteIndex++] = char >> 12 | 224;\n            }\n            bytes[byteIndex++] = char >> 6 & 63 | 128;\n        }\n        bytes[byteIndex++] = char & 63 | 128;\n    }\n    return bytes.subarray(0, byteIndex);\n}\nexports.utf8Encode = utf8Encode;\n/**\n * UTF-8 decodes the given byte sequence into a string.\n *\n * @param bytes - a byte sequence\n */\nfunction utf8Decode(bytes) {\n    var result = \"\";\n    var i = 0;\n    while (i < bytes.length) {\n        var c = bytes[i++];\n        if (c > 127) {\n            if (c > 191 && c < 224) {\n                if (i >= bytes.length) {\n                    throw new Error(\"Incomplete 2-byte sequence.\");\n                }\n                c = (c & 31) << 6 | bytes[i++] & 63;\n            }\n            else if (c > 223 && c < 240) {\n                if (i + 1 >= bytes.length) {\n                    throw new Error(\"Incomplete 3-byte sequence.\");\n                }\n                c = (c & 15) << 12 | (bytes[i++] & 63) << 6 | bytes[i++] & 63;\n            }\n            else if (c > 239 && c < 248) {\n                if (i + 2 >= bytes.length) {\n                    throw new Error(\"Incomplete 4-byte sequence.\");\n                }\n                c = (c & 7) << 18 | (bytes[i++] & 63) << 12 | (bytes[i++] & 63) << 6 | bytes[i++] & 63;\n            }\n            else {\n                throw new Error(\"Unknown multi-byte start.\");\n            }\n        }\n        if (c <= 0xffff) {\n            result += String.fromCharCode(c);\n        }\n        else if (c <= 0x10ffff) {\n            c -= 0x10000;\n            result += String.fromCharCode(c >> 10 | 0xd800);\n            result += String.fromCharCode(c & 0x3FF | 0xdc00);\n        }\n        else {\n            throw new Error(\"Code point exceeds UTF-16 limit.\");\n        }\n    }\n    return result;\n}\nexports.utf8Decode = utf8Decode;\n//# sourceMappingURL=index.js.map","'use strict';\n\nvar Type = require('../../type');\n\nfunction resolveJavascriptUndefined() {\n  return true;\n}\n\nfunction constructJavascriptUndefined() {\n  /*eslint-disable no-undefined*/\n  return undefined;\n}\n\nfunction representJavascriptUndefined() {\n  return '';\n}\n\nfunction isUndefined(object) {\n  return typeof object === 'undefined';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:js/undefined', {\n  kind: 'scalar',\n  resolve: resolveJavascriptUndefined,\n  construct: constructJavascriptUndefined,\n  predicate: isUndefined,\n  represent: representJavascriptUndefined\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar algorithm_1 = require(\"../algorithm\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents a DOM event.\n */\nvar EventImpl = /** @class */ (function () {\n    /**\n     * Initializes a new instance of `Event`.\n     */\n    function EventImpl(type, eventInit) {\n        this._target = null;\n        this._relatedTarget = null;\n        this._touchTargetList = [];\n        this._path = [];\n        this._currentTarget = null;\n        this._eventPhase = interfaces_1.EventPhase.None;\n        this._stopPropagationFlag = false;\n        this._stopImmediatePropagationFlag = false;\n        this._canceledFlag = false;\n        this._inPassiveListenerFlag = false;\n        this._composedFlag = false;\n        this._initializedFlag = false;\n        this._dispatchFlag = false;\n        this._isTrusted = false;\n        this._bubbles = false;\n        this._cancelable = false;\n        /**\n         * When a constructor of the Event interface, or of an interface that\n         * inherits from the Event interface, is invoked, these steps must be run,\n         * given the arguments type and eventInitDict:\n         * 1. Let event be the result of running the inner event creation steps with\n         * this interface, null, now, and eventInitDict.\n         * 2. Initialize event’s type attribute to type.\n         * 3. Return event.\n         */\n        this._type = type;\n        if (eventInit) {\n            this._bubbles = eventInit.bubbles || false;\n            this._cancelable = eventInit.cancelable || false;\n            this._composedFlag = eventInit.composed || false;\n        }\n        this._initializedFlag = true;\n        this._timeStamp = new Date().getTime();\n    }\n    Object.defineProperty(EventImpl.prototype, \"type\", {\n        /** @inheritdoc */\n        get: function () { return this._type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"target\", {\n        /** @inheritdoc */\n        get: function () { return this._target; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"srcElement\", {\n        /** @inheritdoc */\n        get: function () { return this._target; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"currentTarget\", {\n        /** @inheritdoc */\n        get: function () { return this._currentTarget; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    EventImpl.prototype.composedPath = function () {\n        /**\n         * 1. Let composedPath be an empty list.\n         * 2. Let path be the context object’s path.\n         * 3. If path is empty, then return composedPath.\n         * 4. Let currentTarget be the context object’s currentTarget attribute\n         * value.\n         * 5. Append currentTarget to composedPath.\n         * 6. Let currentTargetIndex be 0.\n         * 7. Let currentTargetHiddenSubtreeLevel be 0.\n         */\n        var composedPath = [];\n        var path = this._path;\n        if (path.length === 0)\n            return composedPath;\n        var currentTarget = this._currentTarget;\n        if (currentTarget === null) {\n            throw new Error(\"Event currentTarget is null.\");\n        }\n        composedPath.push(currentTarget);\n        var currentTargetIndex = 0;\n        var currentTargetHiddenSubtreeLevel = 0;\n        /**\n         * 8. Let index be path’s size − 1.\n         * 9. While index is greater than or equal to 0:\n         */\n        var index = path.length - 1;\n        while (index >= 0) {\n            /**\n             * 9.1. If path[index]'s root-of-closed-tree is true, then increase\n             * currentTargetHiddenSubtreeLevel by 1.\n             * 9.2. If path[index]'s invocation target is currentTarget, then set\n             * currentTargetIndex to index and break.\n             * 9.3. If path[index]'s slot-in-closed-tree is true, then decrease\n             * currentTargetHiddenSubtreeLevel by 1.\n             * 9.4. Decrease index by 1.\n             */\n            if (path[index].rootOfClosedTree) {\n                currentTargetHiddenSubtreeLevel++;\n            }\n            if (path[index].invocationTarget === currentTarget) {\n                currentTargetIndex = index;\n                break;\n            }\n            if (path[index].slotInClosedTree) {\n                currentTargetHiddenSubtreeLevel--;\n            }\n            index--;\n        }\n        /**\n         * 10. Let currentHiddenLevel and maxHiddenLevel be\n         * currentTargetHiddenSubtreeLevel.\n         */\n        var currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n        var maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n        /**\n         * 11. Set index to currentTargetIndex − 1.\n         * 12. While index is greater than or equal to 0:\n         */\n        index = currentTargetIndex - 1;\n        while (index >= 0) {\n            /**\n             * 12.1. If path[index]'s root-of-closed-tree is true, then increase\n             * currentHiddenLevel by 1.\n             * 12.2. If currentHiddenLevel is less than or equal to maxHiddenLevel,\n             * then prepend path[index]'s invocation target to composedPath.\n             */\n            if (path[index].rootOfClosedTree) {\n                currentHiddenLevel++;\n            }\n            if (currentHiddenLevel <= maxHiddenLevel) {\n                composedPath.unshift(path[index].invocationTarget);\n            }\n            /**\n             * 12.3. If path[index]'s slot-in-closed-tree is true, then:\n             */\n            if (path[index].slotInClosedTree) {\n                /**\n                 * 12.3.1. Decrease currentHiddenLevel by 1.\n                 * 12.3.2. If currentHiddenLevel is less than maxHiddenLevel, then set\n                 * maxHiddenLevel to currentHiddenLevel.\n                 */\n                currentHiddenLevel--;\n                if (currentHiddenLevel < maxHiddenLevel) {\n                    maxHiddenLevel = currentHiddenLevel;\n                }\n            }\n            /**\n             * 12.4. Decrease index by 1.\n             */\n            index--;\n        }\n        /**\n         * 13. Set currentHiddenLevel and maxHiddenLevel to\n         * currentTargetHiddenSubtreeLevel.\n         */\n        currentHiddenLevel = currentTargetHiddenSubtreeLevel;\n        maxHiddenLevel = currentTargetHiddenSubtreeLevel;\n        /**\n         * 14. Set index to currentTargetIndex + 1.\n         * 15. While index is less than path’s size:\n         */\n        index = currentTargetIndex + 1;\n        while (index < path.length) {\n            /**\n             * 15.1. If path[index]'s slot-in-closed-tree is true, then increase\n             * currentHiddenLevel by 1.\n             * 15.2. If currentHiddenLevel is less than or equal to maxHiddenLevel,\n             * then append path[index]'s invocation target to composedPath.\n             */\n            if (path[index].slotInClosedTree) {\n                currentHiddenLevel++;\n            }\n            if (currentHiddenLevel <= maxHiddenLevel) {\n                composedPath.push(path[index].invocationTarget);\n            }\n            /**\n             * 15.3. If path[index]'s root-of-closed-tree is true, then:\n             */\n            if (path[index].rootOfClosedTree) {\n                /**\n                 * 15.3.1. Decrease currentHiddenLevel by 1.\n                 * 15.3.2. If currentHiddenLevel is less than maxHiddenLevel, then set\n                 * maxHiddenLevel to currentHiddenLevel.\n                 */\n                currentHiddenLevel--;\n                if (currentHiddenLevel < maxHiddenLevel) {\n                    maxHiddenLevel = currentHiddenLevel;\n                }\n            }\n            /**\n             * 15.4. Increase index by 1.\n             */\n            index++;\n        }\n        /**\n         * 16. Return composedPath.\n         */\n        return composedPath;\n    };\n    Object.defineProperty(EventImpl.prototype, \"eventPhase\", {\n        /** @inheritdoc */\n        get: function () { return this._eventPhase; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    EventImpl.prototype.stopPropagation = function () { this._stopPropagationFlag = true; };\n    Object.defineProperty(EventImpl.prototype, \"cancelBubble\", {\n        /** @inheritdoc */\n        get: function () { return this._stopPropagationFlag; },\n        set: function (value) { if (value)\n            this.stopPropagation(); },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    EventImpl.prototype.stopImmediatePropagation = function () {\n        this._stopPropagationFlag = true;\n        this._stopImmediatePropagationFlag = true;\n    };\n    Object.defineProperty(EventImpl.prototype, \"bubbles\", {\n        /** @inheritdoc */\n        get: function () { return this._bubbles; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"cancelable\", {\n        /** @inheritdoc */\n        get: function () { return this._cancelable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"returnValue\", {\n        /** @inheritdoc */\n        get: function () { return !this._canceledFlag; },\n        set: function (value) {\n            if (!value) {\n                algorithm_1.event_setTheCanceledFlag(this);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    EventImpl.prototype.preventDefault = function () {\n        algorithm_1.event_setTheCanceledFlag(this);\n    };\n    Object.defineProperty(EventImpl.prototype, \"defaultPrevented\", {\n        /** @inheritdoc */\n        get: function () { return this._canceledFlag; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"composed\", {\n        /** @inheritdoc */\n        get: function () { return this._composedFlag; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"isTrusted\", {\n        /** @inheritdoc */\n        get: function () { return this._isTrusted; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventImpl.prototype, \"timeStamp\", {\n        /** @inheritdoc */\n        get: function () { return this._timeStamp; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @inheritdoc */\n    EventImpl.prototype.initEvent = function (type, bubbles, cancelable) {\n        if (bubbles === void 0) { bubbles = false; }\n        if (cancelable === void 0) { cancelable = false; }\n        /**\n         * 1. If the context object’s dispatch flag is set, then return.\n         */\n        if (this._dispatchFlag)\n            return;\n        /**\n         * 2. Initialize the context object with type, bubbles, and cancelable.\n         */\n        algorithm_1.event_initialize(this, type, bubbles, cancelable);\n    };\n    EventImpl.NONE = 0;\n    EventImpl.CAPTURING_PHASE = 1;\n    EventImpl.AT_TARGET = 2;\n    EventImpl.BUBBLING_PHASE = 3;\n    return EventImpl;\n}());\nexports.EventImpl = EventImpl;\n/**\n * Define constants on prototype.\n */\nWebIDLAlgorithm_1.idl_defineConst(EventImpl.prototype, \"NONE\", 0);\nWebIDLAlgorithm_1.idl_defineConst(EventImpl.prototype, \"CAPTURING_PHASE\", 1);\nWebIDLAlgorithm_1.idl_defineConst(EventImpl.prototype, \"AT_TARGET\", 2);\nWebIDLAlgorithm_1.idl_defineConst(EventImpl.prototype, \"BUBBLING_PHASE\", 3);\n//# sourceMappingURL=EventImpl.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DocumentFragmentImpl_1 = require(\"./DocumentFragmentImpl\");\nvar util_1 = require(\"@oozcitak/util\");\nvar algorithm_1 = require(\"../algorithm\");\n/**\n * Represents a shadow root.\n */\nvar ShadowRootImpl = /** @class */ (function (_super) {\n    __extends(ShadowRootImpl, _super);\n    /**\n     * Initializes a new instance of `ShadowRoot`.\n     *\n     * @param host - shadow root's host element\n     * @param mode - shadow root's mode\n     */\n    function ShadowRootImpl(host, mode) {\n        var _this = _super.call(this) || this;\n        _this._host = host;\n        _this._mode = mode;\n        return _this;\n    }\n    Object.defineProperty(ShadowRootImpl.prototype, \"mode\", {\n        /** @inheritdoc */\n        get: function () { return this._mode; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ShadowRootImpl.prototype, \"host\", {\n        /** @inheritdoc */\n        get: function () { return this._host; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Gets the parent event target for the given event.\n     *\n     * @param event - an event\n     */\n    ShadowRootImpl.prototype._getTheParent = function (event) {\n        /**\n         * A shadow root’s get the parent algorithm, given an event, returns null\n         * if event’s composed flag is unset and shadow root is the root of\n         * event’s path’s first struct’s invocation target, and shadow root’s host\n         * otherwise.\n         */\n        if (!event._composedFlag && !util_1.isEmpty(event._path) &&\n            algorithm_1.tree_rootNode(event._path[0].invocationTarget) === this) {\n            return null;\n        }\n        else {\n            return this._host;\n        }\n    };\n    // MIXIN: DocumentOrShadowRoot\n    // No elements\n    /**\n     * Creates a new `ShadowRoot`.\n     *\n     * @param document - owner document\n     * @param host - shadow root's host element\n     */\n    ShadowRootImpl._create = function (document, host) {\n        return new ShadowRootImpl(host, \"closed\");\n    };\n    return ShadowRootImpl;\n}(DocumentFragmentImpl_1.DocumentFragmentImpl));\nexports.ShadowRootImpl = ShadowRootImpl;\n//# sourceMappingURL=ShadowRootImpl.js.map","// Standard YAML's JSON schema.\n// http://www.yaml.org/spec/1.2/spec.html#id2803231\n//\n// NOTE: JS-YAML does not support schema-specific tag resolution restrictions.\n// So, this schema is not such strict as defined in the YAML specification.\n// It allows numbers in binary notaion, use `Null` and `NULL` as `null`, etc.\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  include: [\n    require('./failsafe')\n  ],\n  implicit: [\n    require('../type/null'),\n    require('../type/bool'),\n    require('../type/int'),\n    require('../type/float')\n  ]\n});\n","'use strict';\n\nvar Type = require('../type');\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ObjectReader_1 = require(\"./ObjectReader\");\nvar BaseReader_1 = require(\"./BaseReader\");\nvar js_yaml_1 = require(\"js-yaml\");\n/**\n * Parses XML nodes from a YAML string.\n */\nvar YAMLReader = /** @class */ (function (_super) {\n    __extends(YAMLReader, _super);\n    function YAMLReader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Parses the given document representation.\n     *\n     * @param node - node receive parsed XML nodes\n     * @param str - YAML string to parse\n     */\n    YAMLReader.prototype._parse = function (node, str) {\n        var result = js_yaml_1.safeLoad(str);\n        /* istanbul ignore next */\n        if (result === undefined) {\n            throw new Error(\"Unable to parse YAML document.\");\n        }\n        return new ObjectReader_1.ObjectReader(this._builderOptions).parse(node, result);\n    };\n    return YAMLReader;\n}(BaseReader_1.BaseReader));\nexports.YAMLReader = YAMLReader;\n//# sourceMappingURL=YAMLReader.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interfaces_1 = require(\"./interfaces\");\nvar NodeImpl_1 = require(\"./NodeImpl\");\nvar WebIDLAlgorithm_1 = require(\"../algorithm/WebIDLAlgorithm\");\n/**\n * Represents an object providing methods which are not dependent on\n * any particular document\n */\nvar DocumentTypeImpl = /** @class */ (function (_super) {\n    __extends(DocumentTypeImpl, _super);\n    /**\n     * Initializes a new instance of `DocumentType`.\n     *\n     * @param name - name of the node\n     * @param publicId - `PUBLIC` identifier\n     * @param systemId - `SYSTEM` identifier\n     */\n    function DocumentTypeImpl(name, publicId, systemId) {\n        var _this = _super.call(this) || this;\n        _this._name = '';\n        _this._publicId = '';\n        _this._systemId = '';\n        _this._name = name;\n        _this._publicId = publicId;\n        _this._systemId = systemId;\n        return _this;\n    }\n    Object.defineProperty(DocumentTypeImpl.prototype, \"name\", {\n        /** @inheritdoc */\n        get: function () { return this._name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentTypeImpl.prototype, \"publicId\", {\n        /** @inheritdoc */\n        get: function () { return this._publicId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DocumentTypeImpl.prototype, \"systemId\", {\n        /** @inheritdoc */\n        get: function () { return this._systemId; },\n        enumerable: true,\n        configurable: true\n    });\n    // MIXIN: ChildNode\n    /* istanbul ignore next */\n    DocumentTypeImpl.prototype.before = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentTypeImpl.prototype.after = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentTypeImpl.prototype.replaceWith = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        throw new Error(\"Mixin: ChildNode not implemented.\");\n    };\n    /* istanbul ignore next */\n    DocumentTypeImpl.prototype.remove = function () { throw new Error(\"Mixin: ChildNode not implemented.\"); };\n    /**\n     * Creates a new `DocumentType`.\n     *\n     * @param document - owner document\n     * @param name - name of the node\n     * @param publicId - `PUBLIC` identifier\n     * @param systemId - `SYSTEM` identifier\n     */\n    DocumentTypeImpl._create = function (document, name, publicId, systemId) {\n        if (publicId === void 0) { publicId = ''; }\n        if (systemId === void 0) { systemId = ''; }\n        var node = new DocumentTypeImpl(name, publicId, systemId);\n        node._nodeDocument = document;\n        return node;\n    };\n    return DocumentTypeImpl;\n}(NodeImpl_1.NodeImpl));\nexports.DocumentTypeImpl = DocumentTypeImpl;\n/**\n * Initialize prototype properties\n */\nWebIDLAlgorithm_1.idl_defineConst(DocumentTypeImpl.prototype, \"_nodeType\", interfaces_1.NodeType.DocumentType);\n//# sourceMappingURL=DocumentTypeImpl.js.map","module.exports = require(\"fs\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Defines default values for builder options.\n */\nexports.DefaultBuilderOptions = {\n    version: \"1.0\",\n    encoding: undefined,\n    standalone: undefined,\n    keepNullNodes: false,\n    keepNullAttributes: false,\n    ignoreConverters: false,\n    skipWhitespaceOnlyText: true,\n    convert: {\n        att: \"@\",\n        ins: \"?\",\n        text: \"#\",\n        cdata: \"$\",\n        comment: \"!\"\n    },\n    defaultNamespace: {\n        ele: undefined,\n        att: undefined\n    },\n    namespaceAlias: {\n        html: \"http://www.w3.org/1999/xhtml\",\n        xml: \"http://www.w3.org/XML/1998/namespace\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\",\n        mathml: \"http://www.w3.org/1998/Math/MathML\",\n        svg: \"http://www.w3.org/2000/svg\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    },\n    invalidCharReplacement: undefined,\n    parser: undefined\n};\n/**\n * Contains keys of `XMLBuilderOptions`.\n */\nexports.XMLBuilderOptionKeys = new Set(Object.keys(exports.DefaultBuilderOptions));\n/**\n * Defines default values for builder options.\n */\nexports.DefaultXMLBuilderCBOptions = {\n    format: \"xml\",\n    wellFormed: false,\n    prettyPrint: false,\n    indent: \"  \",\n    newline: \"\\n\",\n    offset: 0,\n    width: 0,\n    allowEmptyTags: false,\n    spaceBeforeSlash: false,\n    keepNullNodes: false,\n    keepNullAttributes: false,\n    ignoreConverters: false,\n    convert: {\n        att: \"@\",\n        ins: \"?\",\n        text: \"#\",\n        cdata: \"$\",\n        comment: \"!\"\n    },\n    defaultNamespace: {\n        ele: undefined,\n        att: undefined\n    },\n    namespaceAlias: {\n        html: \"http://www.w3.org/1999/xhtml\",\n        xml: \"http://www.w3.org/XML/1998/namespace\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\",\n        mathml: \"http://www.w3.org/1998/Math/MathML\",\n        svg: \"http://www.w3.org/2000/svg\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    }\n};\n//# sourceMappingURL=interfaces.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\nif (typeof __webpack_require__ !== 'undefined') __webpack_require__.ab = __dirname + \"/native_modules/\";","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(5391);\n"],"names":["Object","defineProperty","exports","value","CompareCache","limit","this","_items","Map","_limit","prototype","check","objA","objB","get","result","Math","random","set","size","it_1","keys","next","done","delete","isASCIIByte","byte","Type","module","kind","resolve","data","max","length","construct","predicate","object","toString","call","represent","lowercase","uppercase","camelcase","defaultStyle","StringWalker","input","_pointer","_chars","Array","from","_length","enumerable","configurable","codePoint","undefined","_codePoint","eof","cp","codePointAt","c","_c","remaining","_remaining","slice","join","substring","_substring","val","extendStatics","__extends","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","__values","o","s","Symbol","iterator","m","i","TypeError","interfaces_1","CharacterDataImpl_1","algorithm_1","WebIDLAlgorithm_1","TextImpl","_super","_this","_name","_assignedSlot","e_1","_a","text","_b","text_contiguousTextNodes","_data","e_1_1","error","return","splitText","offset","text_split","Error","_create","document","node","_nodeDocument","CharacterDataImpl","idl_defineConst","NodeType","Text","HTML","XML","XMLNS","MathML","SVG","XLink","AbstractRangeImpl_1","DOMException_1","util_1","StaticRangeImpl","init","Guard","isDocumentTypeNode","startContainer","isAttrNode","endContainer","InvalidNodeTypeError","_start","startOffset","_end","endOffset","AbstractRangeImpl","_getNextDescendantNode","root","shadow","isElementNode","isShadowRoot","shadowRoot","_firstChild","_nextSibling","parent","_parent","_emptyIterator","tree_getFirstDescendantNode","self","filter","firstNode","tree_getNextDescendantNode","currentNode","nextNode","tree_getDescendantNodes","_children","tree_getFirstAncestorNode","tree_getNextAncestorNode","tree_nodeLength","isCharacterDataNode","tree_rootNode","_host","tree_isAncestorOf","other","ancestor","tree_treePosition","pos","childNode","tree_getDescendantElements","it","e","tree_getSiblingNodes","tree_getAncestorNodes","tree_getCommonAncestor","nodeA","nodeB","parentsA","parentsB","pA","push","pB","pos1","pos2","min","parent1","tree_getFollowingNode","tree_getPrecedingNode","_previousSibling","_lastChild","tree_isConstrained","e_2","e_3","_nodeType","Document","hasDocType","hasElement","_d","_e","ProcessingInstruction","Comment","DocumentType","Element","DocumentFragment","_f","_g","CData","e_2_1","hasChildNodes","_h","_j","e_3_1","tree_isEmpty","tree_isDescendantOf","child","tree_isHostIncludingAncestorOf","isDocumentFragmentNode","tree_isSiblingOf","tree_isPreceding","nodePos","otherPos","tree_isFollowing","tree_isParentOf","tree_isChildOf","tree_previousSibling","tree_nextSibling","tree_firstChild","tree_lastChild","tree_index","n","tree_retarget","a","isNode","rootOfA","host","EventTargetImpl_1","WindowImpl","_signalSlots","Set","_mutationObserverMicrotaskQueued","_mutationObservers","_iteratorList","FixedSizeSet","_associatedDocument","create_document","_currentEvent","EventTargetImpl","__read","r","ar","DOMImpl_1","util_2","ElementImpl_1","CustomElementAlgorithm_1","TreeAlgorithm_1","NamespaceAlgorithm_1","DOMAlgorithm_1","ElementAlgorithm_1","MutationAlgorithm_1","document_elementInterface","name","namespace","ElementImpl","document_internalCreateElementNS","qualifiedName","options","namespace_validateAndExtract","ns","prefix","localName","is","isString","element_createAnElement","document_adopt","oldDocument","mutation_remove","inclusiveDescendant","_attributeList","_asArray","dom","features","customElements","_customElementState","customElement_enqueueACustomElementCallbackReaction","steps","dom_runAdoptingSteps","common","YAMLException","Mark","DEFAULT_SAFE_SCHEMA","DEFAULT_FULL_SCHEMA","_hasOwnProperty","PATTERN_NON_PRINTABLE","PATTERN_NON_ASCII_LINE_BREAKS","PATTERN_FLOW_INDICATORS","PATTERN_TAG_HANDLE","PATTERN_TAG_URI","_class","obj","is_EOL","is_WHITE_SPACE","is_WS_OR_EOL","is_FLOW_INDICATOR","fromHexCode","lc","escapedHexLen","fromDecimalCode","simpleEscapeSequence","charFromCodepoint","String","fromCharCode","simpleEscapeCheck","simpleEscapeMap","State","filename","schema","onWarning","legacy","json","listener","implicitTypes","compiledImplicit","typeMap","compiledTypeMap","position","line","lineStart","lineIndent","documents","generateError","state","message","throwError","throwWarning","directiveHandlers","YAML","args","match","major","minor","version","exec","parseInt","checkLineBreaks","TAG","handle","test","tagMap","captureSegment","start","end","checkJson","_position","_character","_result","charCodeAt","mergeMappings","destination","source","overridableKeys","sourceKeys","key","index","quantity","isObject","storeMappingPair","keyTag","keyNode","valueNode","startLine","startPos","isArray","readLineBreak","ch","skipSeparationSpace","allowComments","checkIndent","lineBreaks","testDocumentSeparator","writeFoldedLines","count","repeat","readBlockSequence","nodeIndent","_line","_tag","tag","_anchor","anchor","detected","anchorMap","composeNode","readTagProperty","tagHandle","tagName","isVerbatim","isNamed","readAnchorProperty","parentIndent","nodeContext","allowToSeek","allowCompact","allowBlockStyles","allowBlockScalars","allowBlockCollections","typeIndex","typeQuantity","type","flowIndent","blockIndent","indentStatus","atNewLine","hasContent","following","_pos","atExplicitKey","readBlockMapping","terminator","isPair","isExplicitPair","isMapping","readNext","readFlowCollection","captureStart","folding","tmp","chomping","didReadContent","detectedIndent","textIndent","emptyLines","atMoreIndented","readBlockScalar","captureEnd","readSingleQuotedScalar","hexLength","hexResult","readDoubleQuotedScalar","alias","readAlias","withinFlowCollection","hasPendingContent","_lineStart","_lineIndent","_kind","readPlainScalar","readDocument","directiveName","directiveArgs","documentStart","hasDirectives","loadDocuments","nullpos","indexOf","loadAll","load","safeLoadAll","extend","safeLoad","CodePoints_1","forgivingBase64Encode","Buffer","forgivingBase64Decode","replace","ASCIIWhiteSpace","endsWith","substr","require","BuilderFunctions_1","infra_1","NamespacePrefixMap_1","LocalNameSet_1","XMLCBWriter_1","JSONCBWriter_1","YAMLCBWriter_1","XMLBuilderCBImpl","fragment","_hasDeclaration","_docTypeName","_hasDocumentElement","_currentElementSerialized","_openTags","_ended","_fragment","_options","applyDefaults","DefaultXMLBuilderCBOptions","_builderOptions","defaultNamespace","namespaceAlias","format","_writer","JSONCBWriter","YAMLCBWriter","XMLCBWriter","on","_prefixMap","NamespacePrefixMap","_prefixIndex","_push","frontMatter","ele","p1","p2","p3","frag","err","emit","childNodes","_fromNode","_serializeOpenTag","level","_currentElement","_qualifiedName","att","com","content","first","wellFormed","xml_isLegalChar","comment","txt","markup","ins","target","instruction","dat","cdata","dec","declaration","encoding","standalone","dtd","xml_isPubidChar","publicId","systemId","docType","import","node_1","up","_serializeCloseTag","hasChildren","xml_isName","ignoreNamespaceDefinitionAttribute","map","copy","localPrefixesMap","localDefaultNamespace","_recordNamespaceInformation","inheritedNS","namespaceURI","beginElement","openTagBegin","candidatePrefix","_generatePrefix","attribute","_serializeAttributeValue","_serializeAttributes","isHTML","_VoidElementNames","has","openTagEnd","endElement","_isPrefixMapModified","lastEle","pop","closeTag","hasData","e_4","attributes","attr","name_1","e_4_1","isExclusiveTextNode","isCommentNode","isCDATASectionNode","isProcessingInstructionNode","prefixIndex","requireWellFormed","e_5","localNameSet","LocalNameSet","attributeNamespace","hasPrefix","e_5_1","e_6","defaultNamespaceAttrValue","attributePrefix","prefixDefinition","namespaceDefinition","e_6_1","newNamespace","prefixMap","generatedPrefix","originalMap","newMap","items1","items2","nullItems1","_nullItems","nullItems2","arr1","arr2","EventEmitter","convertAJSONDerivedJavaScriptValueToAnInfraValue","jsValue","isNumber","jsValue_1","jsValue_1_1","jsValueAtIndex","jsValueAtKey","parseJSONFromBytes","bytes","jsonText","utf8Decode","JSON","parse","serializeJSONToBytes","jsonString","stringify","utf8Encode","parseJSONIntoInfraValues","Schema","DEFAULT","include","explicit","enqueue","list","item","dequeue","shift","XMLSerializerImpl_1","XMLSerializer","XMLSerializerImpl","AbortControllerImpl","_signal","create_abortSignal","abort","abort_signalAbort","_validationErrorCallback","url_1","_defaultPorts","_c0ControlPercentEncodeSet","_fragmentPercentEncodeSet","_pathPercentEncodeSet","_userInfoPercentEncodeSet","_urlCodePoints","_forbiddenHostCodePoint","validationError","isSpecialScheme","scheme","isSpecial","url","defaultPort","includesCredentials","username","password","urlSerializer","excludeFragmentFlag","output","hostSerializer","port","_cannotBeABaseURLFlag","path","query","iPv4Serializer","iPv6Serializer","address","floor","compress","lastIndex","lastCount","j","ignore0","pieceIndex","basicURLParser","baseURL","encodingOverride","stateOverride","_blobURLEntry","leadingControlOrSpace","trailingControlOrSpace","tabOrNewline","ParserState","SchemeStart","buffer","atFlag","arrayFlag","passwordTokenSeenFlag","EOF","walker","ASCIIAlpha","toLowerCase","Scheme","NoScheme","pointer","ASCIIAlphanumeric","startsWith","File","SpecialRelativeOrAuthority","SpecialAuthoritySlashes","PathOrAuthority","CannotBeABaseURLPath","clone","Fragment","Relative","SpecialAuthorityIgnoreSlashes","Authority","Path","RelativeSlash","Query","splice","buffer_1","buffer_1_1","encodedCodePoints","utf8PercentEncode","Host","Hostname","FileHost","hostParser","PathStart","Port","ASCIIDigit","pow","FileSlash","startsWithAWindowsDriveLetter","shorten","isNormalizedWindowsDriveLetter","isWindowsDriveLetter","isDoubleDotPathSegment","isSingleDotPathSegment","bufferCodePoints","toUpperCase","subarray","byteSequence","isomorphicDecode","bytes_1","bytes_1_1","percentEncode","str","lowerStr","isNotSpecial","iPv6Parser","opaqueHostParser","asciiDomain","domainToASCII","stringPercentDecode","ipv4Host","iPv4Parser","iPv4NumberParser","validationErrorFlag","R","e_7","parts","split","numbers","parts_1","parts_1_1","part","ipv4","counter","numbers_1","numbers_1_1","e_7_1","ASCIIHexDigit","numbersSeen","ipv4Piece","number","swaps","e_8","input_1","input_1_1","e_8_1","percentDecode","isHexDigit","Uint8Array","bytePoint","of","percentEncodeSet","e_9","bytes_2","bytes_2_1","e_9_1","urlEncodedParser","e_10","e_11","sequences","currentSequence","input_2","input_2_1","e_10_1","sequences_1","sequences_1_1","nameString","valueString","e_11_1","urlEncodedByteSerializer","e_12","input_3","input_3_1","fromCodePoint","e_12_1","domain","beStrict","setValidationErrorCallback","validationErrorCallback","newURL","cannotHaveAUsernamePasswordPort","urlParser","setTheUsername","username_1","username_1_1","setThePassword","password_1","password_1_1","resolveABlobURL","hostEquals","hostA","hostB","urlEquals","urlA","urlB","excludeFragmentsFlag","urlEncodedStringParser","urlEncodedSerializer","tuples","e_13","tuples_1","tuples_1_1","tuple","e_13_1","origin","parsedURL","OpaqueOrigin","domainToUnicode","asciiSerializationOfAnOrigin","Lazy","initFunc","_initialized","_value","_initFunc","NamedNodeMapImpl","element","_element","getNamedItem","element_getAnAttributeByName","getNamedItemNS","element_getAnAttributeByNamespaceAndLocalName","setNamedItem","element_setAnAttribute","setNamedItemNS","removeNamedItem","element_removeAnAttributeByName","NotFoundError","removeNamedItemNS","element_removeAnAttributeByNamespaceAndLocalName","CreateAlgorithm_1","CharacterDataAlgorithm_1","isTextNode","text_contiguousExclusiveTextNodes","text_descendantTextContent","contents","IndexSizeError","newData","characterData_substringData","newNode","create_text","mutation_insert","rangeList","range","characterData_replaceData","ObjectReader_1","JSONReader","apply","arguments","_parse","ObjectReader","BaseReader","storage","debug","process","env","DEBUG","log","console","Function","formatArgs","useColors","humanize","diff","color","lastC","save","namespaces","removeItem","window","documentElement","style","WebkitAppearance","firebug","exception","table","navigator","userAgent","RegExp","$1","chrome","local","localStorage","localstorage","colors","formatters","v","enable","HTMLCollectionImpl","_live","_root","_filter","Proxy","namedItem","_uniqueIdentifier","_namespace","_localName","_namespacePrefix","receiver","reservedNames","Reflect","Number","isNaN","mutation_replace","BaseCBWriter","builderOptions","_writerOptions","writers_1","interfaces_2","dom_1","readers_1","XMLBuilderImpl","domNode","_domNode","DefaultBuilderOptions","XMLReader","YAMLReader","_debugInfo","getValue","_extractNamespace","sanitizeInput","invalidCharReplacement","namespace_extractQName","lookupNamespaceURI","_doc","createElementNS","createElement","appendChild","builder","oldDocType","doctype","implementation","createDocumentType","replaceChild","isEmpty","remove","removeChild","isMap","forEachObject","attName","attValue","keepNullAttributes","elePrefix","eleNamespace","_updateNamespace","setAttributeNS","setAttribute","removeAtt","isSet","forEachArray","removeAttributeNS","removeAttribute","keepNullNodes","createTextNode","createComment","createCDATASection","insIndex","insTarget","insValue","createProcessingInstruction","pubID","sysID","insertBefore","hostNode","hostDoc","importedNode","isDocumentNode","elementNode","importNode","doc","_isFragment","nodeType","parentNode","prev","previousSibling","nextSibling","firstChild","last","lastChild","each","callback","recursive","thisArg","_getFirstDescendantNode","nextResult","reduce","initialValue","find","every","some","toArray","writerOptions","_serialize","toObject","XMLWriter","serialize","MapWriter","ObjectWriter","JSONWriter","YAMLWriter","atIndex","eleLocalName","newEle","create_element","attrQName","attrPrefix","newAttrNS","newChildNode","cloneNode","newChildNodePrefix","newChildNodeNS","docNode","ownerDocument","nodeName","parentName","_xmlBuilderOptions","MutationObserverAlgorithm_1","mutationObservers","observer_queueMutationRecord","dom_runChildTextContentChangeSteps","TraversalAlgorithm_1","nodeIterator_traverse","forward","_reference","beforeNode","_pointerBeforeReference","prevNode","traversal_filter","FilterResult","Accept","nodeIterator_iteratorList","YAML_FLOAT_PATTERN","SCIENTIFIC_WITHOUT_DOT","sign","base","digits","POSITIVE_INFINITY","NEGATIVE_INFINITY","NaN","forEach","unshift","parseFloat","isNegativeZero","res","_hasChildren","_additionalLevel","_comma","_beginLine","_sep","_key","convert","_val","selfClosing","voidElement","additionalOffset","prettyPrint","newline","_indent","indent","MutationRecordImpl","addedNodes","removedNodes","attributeName","oldValue","_type","_target","_addedNodes","_removedNodes","_attributeName","_attributeNamespace","_oldValue","traverser","_activeFlag","InvalidStateError","mask","whatToShow","Skip","Reject","acceptNode","compileList","exclude","includedSchema","currentType","previousType","previousIndex","definition","implicit","loadKind","compiledExplicit","scalar","sequence","mapping","fallback","collectType","compileMap","schemas","types","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","op","step","__spread","concat","append","listA","listB","prepend","conditionOrItem","newItem","list_1","list_1_1","oldItem","isFunction","insert","empty","contains","list_2","list_2_1","condition","list_3","list_3_1","list_4","list_4_1","bind","sortInAscendingOrder","lessThanAlgo","sort","itemA","itemB","sortInDescendingOrder","dom_2","setFeatures","createDocument","DOMImplementation","replacement","charAt","n2","_startNode","_startOffset","_endNode","_endOffset","_collapsed","AbortControllerImpl_1","AbortController","AbortSignalImpl_1","AbortSignal","AbortSignalImpl","AbstractRange","AttrImpl_1","Attr","AttrImpl","CDATASectionImpl_1","CDATASection","CDATASectionImpl","CharacterData","ChildNodeImpl_1","CommentImpl_1","CommentImpl","CustomEventImpl_1","CustomEvent","CustomEventImpl","DocumentFragmentImpl_1","DocumentFragmentImpl","DocumentImpl_1","DocumentImpl","DocumentOrShadowRootImpl_1","DocumentTypeImpl_1","DocumentTypeImpl","DOMImplementationImpl_1","DOMImplementationImpl","DOMTokenListImpl_1","DOMTokenList","DOMTokenListImpl","EventImpl_1","Event","EventImpl","EventTarget","HTMLCollectionImpl_1","HTMLCollection","MutationObserverImpl_1","MutationObserver","MutationObserverImpl","MutationRecordImpl_1","MutationRecord","NamedNodeMapImpl_1","NamedNodeMap","NodeFilterImpl_1","NodeFilter","NodeFilterImpl","NodeImpl_1","Node","NodeImpl","NodeIteratorImpl_1","NodeIterator","NodeIteratorImpl","NodeListImpl_1","NodeList","NodeListImpl","NodeListStaticImpl_1","NodeListStatic","NodeListStaticImpl","NonDocumentTypeChildNodeImpl_1","NonElementParentNodeImpl_1","ParentNodeImpl_1","ProcessingInstructionImpl_1","ProcessingInstructionImpl","RangeImpl_1","Range","RangeImpl","ShadowRootImpl_1","ShadowRoot","ShadowRootImpl","SlotableImpl_1","StaticRangeImpl_1","StaticRange","TextImpl_1","TraverserImpl_1","Traverser","TraverserImpl","TreeWalkerImpl_1","TreeWalker","TreeWalkerImpl","WindowImpl_1","Window","XMLDocumentImpl_1","XMLDocument","XMLDocumentImpl","applyMixin","ChildNodeImpl","DocumentOrShadowRootImpl","NonDocumentTypeChildNodeImpl","NonElementParentNodeImpl","ParentNodeImpl","SlotableImpl","ObjectCache","clear","k","values","entries","toStringTag","BaseWriter_1","_indentation","_lengthToLastNewline","headless","width","allowEmptyTags","indentTextOnlyNodes","spaceBeforeSlash","_refs","suppressPretty","emptyNode","serializeNode","_endLine","textOnlyNode","cdataCount","textCount","BaseWriter","URLAlgorithm_1","__childNodes","create_nodeList","_nodeDocumentOverride","__registeredObserverList","_htmlUppercasedQualifiedName","_URL","shadowTree_isConnected","getRootNode","composed","Attribute","_childNodes","attr_setAnExistingAttributeValue","node_stringReplaceAll","normalize","descendantNodes","textSiblings","sibling","cn","i_1","deep","NotSupportedError","node_clone","isEqualNode","node_equals","isSameNode","compareDocumentPosition","node1","node2","attr1","attr2","Position","ImplementationSpecific","Preceding","Following","Disconnected","compareCache","Contains","ContainedBy","lookupPrefix","node_locateANamespacePrefix","node_locateANamespace","isDefaultNamespace","newChild","refChild","mutation_preInsert","mutation_append","oldChild","mutation_preRemove","_getTheParent","event","isSlotable","shadowTree_isAssigned","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","EmptySet","eventTarget_flatten","isBoolean","capture","eventTarget_flattenMore","once","passive","eventTarget_addEventListener","eventTarget","_eventListenerList","entry","handleEvent","eventTarget_removeEventListener","removed","eventTarget_removeAllEventListeners","element_change","_attribute","_tokenSet","element_getAnAttributeValue","thisObj","_attributeChangeSteps","orderedSet_parse","dom_runAttributeChangeSteps","token","add","tokens","_i","tokens_1","tokens_1_1","SyntaxError","InvalidCharacterError","tokenList_updateSteps","tokens_2","tokens_2_1","toggle","force","newToken","supports","tokenList_validationSteps","tokenList_serializeSteps","element_setAnAttributeValue","_abortedFlag","_abortAlgorithms","event_getterEventHandlerIDLAttribute","event_setterEventHandlerIDLAttribute","DOMImpl","_features","slots","_window","_compareCache","_rangeList","create_window","_instance","instance","mapCopy","preferredPrefix","candidatesList","_toString","pair","pairKey","pairHasKey","objectKeys","__importStar","mod","__esModule","base64","queue","stack","string","parentNode_convertNodesIntoANode","nodes","create_documentFragment","nodes_1","nodes_1_1","TokenType","spawn","app","run","updateExe","dirname","execPath","detached","platform","cmd","argv","basename","quit","ObjectWriter_1","group","verbose","objectWriterOptions","_convertObject","isLeaf","_isLeafNode","len","obj_1","obj_1_1","len_1","objectLength","indentLevel","_descendantCount","selectors_scopeMatchASelectorsString","selectors","XMLParserImpl_1","DOMParserImpl","parseFromString","mimeType","XMLParserImpl","_contentType","errorNS","create_xmlDocument","DocumentAlgorithm_1","observer_queueAttributeMutationRecord","isCustomElementNode","element_append","_hasNamespaces","element_remove","element_replace","oldAttr","newAttr","element_has","InUseAttributeError","create_attr","synchronousCustomElementsFlag","_customElementDefinition","_is","customElement_lookUpACustomElementDefinition","customElement_upgrade","customElement_enqueueACustomElementUpgradeReaction","result_1","C","assert","create_htmlUnknownElement","create_htmlElement","customElement_isValidCustomElementName","element_insertAdjacent","where","container","setStart","range_setTheStart","setEnd","range_setTheEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","collapse","toStart","selectNode","range_select","selectNodeContents","compareBoundaryPoints","how","sourceRange","HowToCompare","StartToStart","StartToEnd","EndToEnd","EndToStart","range_root","WrongDocumentError","thisPoint","otherPoint","boundaryPoint_position","BoundaryPosition","Before","After","deleteContents","range_collapsed","originalStartNode","originalStartOffset","originalEndNode","originalEndOffset","newOffset","nodesToRemove","range_getContainedNodes","range_isContained","referenceNode","nodesToRemove_1","nodesToRemove_1_1","extractContents","range_extract","cloneContents","range_cloneTheContents","insertNode","range_insert","surroundContents","newParent","range_getPartiallyContainedNodes","mutation_replaceAll","cloneRange","create_range","detach","isPointInRange","bp","comparePoint","intersectsNode","START_TO_START","START_TO_END","END_TO_END","END_TO_START","ShadowTreeAlgorithm_1","event_createAnEvent","eventInterface","realm","event_innerEventCreationSteps","Date","_isTrusted","time","dictionary","_initializedFlag","_timeStamp","getTime","assign","dom_runEventConstructingSteps","event_dispatch","legacyTargetOverrideFlag","legacyOutputDidListenersThrowFlag","clearTargets","_dispatchFlag","targetOverride","activationTarget","relatedTarget","_relatedTarget","touchTargets","_touchTargetList","touchTarget","event_appendToAnEventPath","isActivationEvent","isMouseEvent","_activationBehavior","slotable","slotInClosedTree","isSlot","_mode","isWindow","_bubbles","clearTargetsStruct","_path","struct","shadowAdjustedTarget","touchTargetList","_legacyPreActivationBehavior","_eventPhase","EventPhase","AtTarget","Capturing","event_invoke","Bubbling","None","_currentTarget","_stopPropagationFlag","_stopImmediatePropagationFlag","_canceledFlag","_legacyCanceledActivationBehavior","invocationTarget","invocationTargetInShadowTree","rootOfClosedTree","phase","targetListeners","listeners","event_innerInvoke","originalEventType","found","impl","globalObject","currentEvent","_inPassiveListenerFlag","event_setTheCanceledFlag","_cancelable","event_initialize","bubbles","cancelable","event_fireAnEvent","eventConstructor","idlAttributes","event_createLegacyEvent","event_determineTheTargetOfAnEventHandler","event_getTheCurrentValueOfAnEventHandler","event_activateAnEventHandler","event_deactivateAnEventHandler","toRemove","map_1","map_1_1","toRemove_1","toRemove_1_1","map_2","map_2_1","map_3","map_3_1","map_4","map_4_1","ignoreConverters","sanitize","_decodeText","attrKey","attrVal","_decodeAttributeValue","WhatToShow","itResult","OrderedSetAlgorithm_1","tokenList","dom_hasSupportedTokens","dom_getSupportedTokens","hasAttribute","orderedSet_serialize","XMLStringLexer_1","lexer","XMLStringLexer","skipWhitespaceOnlyText","context","nextToken","Declaration","DocType","pubId","sysId","CDATA","PI","pi","nsDeclarations","attPrefix","attLocalName","_k","_l","attNamespace","ClosingTag","screenX","screenY","_assignedNodes","isEventListener","isRegisteredObserver","observer","isTransientRegisteredObserver","inputTokens","splitAStringOnASCIIWhitespace","orderedSet_sanitize","orderedSet_contains","set1","set2","caseSensitive","set2_1","set2_1_1","val2","set1_1","set1_1_1","val1","xml_isQName","colonFound","chars","shadowTree_signalASlotChange","slot","observer_queueAMutationObserverMicrotask","shadowTree_findASlot","openFlag","Cast","asNode","_shadowRoot","shadowTree_findSlotables","shadowTree_assignSlotables","slotables","nodesIdentical","slotables_2","slotables_2_1","shadowTree_findFlattenedSlotables","slotables_1","slotables_1_1","temporaryResult","shadowTree_assignSlotablesForATree","descendant","shadowTree_assignASlot","DOMException","DOMStringSizeError","NoDataAllowedError","NoModificationAllowedError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","DataCloneError","NotImplementedError","HierarchyRequestError","nonEntityAmpersandRegex","_whatToShow","All","parser_1","DOMParser","serializer_1","parser","_docType","_comment","_text","_instruction","_cdata","_sanitize","_match","_entityTable","hexStr","numStr","Guard_1","canonical","reference","pointerBeforeReference","_iteratorCollection","previousNode","__eventListenerList","__eventHandlerMap","addEventListener","listenerCallback","removeEventListener","dispatchEvent","byteLowercase","byteUppercase","byteCaseInsensitiveMatch","byteLessThan","NodeIteratorAlgorithm_1","mutation_ensurePreInsertionValidity","parentNodeType","nodeNodeType","childNodeType","eleCount","doctypeChild","_m","elementChild","referenceChild","suppressObservers","index_1","observer_queueTreeMutationRecord","_documentElement","dom_runInsertionSteps","customElement_tryToUpgrade","mutation_insert_single","e_14","dom_runNodeIteratorPreRemovingSteps","oldPreviousSibling","oldNextSibling","dom_runRemovingSteps","inclusiveAncestor","_registeredObserverList","registered","subtree","e_14_1","removedNodes_1","removedNodes_1_1","create_htmlCollection","querySelector","querySelectorAll","create_nodeListStatic","_currentList","_currentIndex","_listRegister","_process","items","namesSeen","hasNonUniqueNames","commentCount","instructionCount","defAttrKey","_getAttrKey","defTextKey","_getNodeKey","defCommentKey","defInstructionKey","defCdataKey","attrs","attrKeys","eleGroup","listOfLists","textId","commentId","instructionId","cdataId","attrName","_processSpecItem","i_2","defKey","id","item_1","item_1_1","subItem","childItems","lastItem","_isElementNode","_isAttrNode","_isCommentNode","_isTextNode","_isInstructionNode","_isCDATANode","x","cloneChildrenFlag","copyAttribute","_encoding","_origin","create_documentType","_publicId","_systemId","create_cdataSection","create_comment","create_processingInstruction","dom_runCloningSteps","childCopy","attrMap","attrA","attrB","itA","itB","resultA","resultB","node_listOfElementsWithQualifiedName","node_listOfElementsWithNamespace","node_listOfElementsWithClassNames","classNames","classes","eleClasses","classList","parentElement","loader","dumper","deprecated","FAILSAFE_SCHEMA","JSON_SCHEMA","CORE_SCHEMA","dump","safeDump","MINIMAL_SCHEMA","SAFE_SCHEMA","DEFAULT_SCHEMA","scan","compose","addConstructor","_lineLength","PotentialCustomElementName","NamesWithHyphen","ElementNames","VoidElementNames","ShadowHostNames","customElement_isValidElementName","customElement_isVoidElementName","customElement_isValidShadowHostName","callbackName","current","_current","treeWalker_traverseChildren","treeWalker_traverseSiblings","temporary","MapWriter_1","XMLWriter_1","JSONWriter_1","YAMLWriter_1","BACKGROUND_PROPERTIES_DIR","homedir","WALLPAPER_DIR","ipcMain","imagePaths","mkdir","validImagePaths","img","lightImage","darkImage","lightDest","darkDest","copyFile","xmlRoot","xmlString","xmlFileName","now","xmlPath","writeFile","success","createDynamicWallpaper","createWindow","mainWindow","BrowserWindow","height","frame","webPreferences","preload","contextIsolation","nodeIntegration","loadURL","whenReady","then","getAllWindows","YAML_DATE_REGEXP","YAML_TIMESTAMP_REGEXP","year","month","day","hour","minute","second","date","fraction","delta","UTC","setTime","instanceOf","toISOString","_1","formatBuilderOptions","isXMLBuilderCreateOptions","setOptions","isPlainObject","XMLBuilderOptionKeys","createOptions","isFragment","docWithSettings","builders","builder_1","builder_2","createDocumentFragment","convertOptions","constants_1","attributes_1","attributes_1_1","hasNamespaces","_serializeNodeNS","_serializeNode","_serializeElementNS","_serializeDocumentNS","_serializeComment","_serializeText","_serializeDocumentFragmentNS","_serializeDocumentType","_serializeProcessingInstruction","_serializeCData","_serializeElement","_serializeDocument","_serializeDocumentFragment","skipEndTag","_serializeAttributesNS","h","plural","ms","ceil","long","round","fmtShort","eventInit","_detail","detail","initCustomEvent","_nodeList","_recordQueue","_callback","observe","childList","attributeOldValue","attributeFilter","characterDataOldValue","characterData","isRegistered","coptions","_loop_1","this_1","ob","disconnect","takeRecords","records","writable","before","viablePreviousSibling","flag","after","viableNextSibling","replaceWith","createCB","fragmentCB","callbackfn","EmptySetIterator","EventAlgorithm_1","Promise","observer_notifyMutationObservers","notifySet","signalSet","mo","notifySet_1","notifySet_1_1","signalSet_1","signalSet_1_1","interestedObservers","interestedObservers_1","interestedObservers_1_1","mappedOldValue","record","create_mutationRecord","Surrogate","ScalarValue","NonCharacter","ASCIICodePoint","ASCIITabOrNewLine","C0Control","C0ControlOrSpace","Control","ASCIIUpperHexDigit","ASCIILowerHexDigit","ASCIIUpperAlpha","ASCIILowerAlpha","DOMParserImpl_1","abort_add","algorithm","signal","abort_remove","Cast_1","EmptySet_1","elementName","create_namedNodeMap","create_domTokenList","hasAttributes","getAttributeNames","names","getAttribute","getAttributeNS","toggleAttribute","hasAttributeNS","getAttributeNode","getAttributeNodeNS","setAttributeNode","setAttributeNodeNS","removeAttributeNode","attachShadow","disableShadow","create_shadowRoot","mode","closest","matches","webkitMatchesSelector","getElementsByTagName","getElementsByTagNameNS","getElementsByClassName","insertAdjacentElement","insertAdjacentText","namespacePrefix","yaml","suppressIndent","TYPE_CONSTRUCTOR_OPTIONS","YAML_NODE_KINDS","styleAliases","BoundaryPointAlgorithm_1","NodeAlgorithm_1","TextAlgorithm_1","range_isPartiallyContained","startCheck","endCheck","commonAncestor","firstPartiallyContainedChild","lastPartiallyContainedChild","children","containedChildren","subfragment","containedChildren_1","containedChildren_1_1","containedChildren_2","containedChildren_2_1","commonAncestorContainer","regexp","tail","modifiers","global","multiline","ignoreCase","__name","__assignedSlot","labels","_nodeDocumentOverwrite","_implementation","create_domImplementation","URL","adoptNode","createAttribute","createAttributeNS","createEvent","createRange","createNodeIterator","create_nodeIterator","create_nodeFilter","createTreeWalker","create_treeWalker","getElementById","elementId","isSubsetOf","subset","superset","subset_1","subset_1_1","setA","setB","cloned","newSet","set_1","set_1_1","set_2","set_2_1","set_3","set_3_1","set_4","set_4_1","set_5","set_5_1","set_6","set_6_1","isSupersetOf","intersection","setA_1","setA_1_1","union","tty","util","inspectOpts","stream","write","toUTCString","Boolean","isatty","fd","prop","DEBUG_FD","deprecate","stdout","stderr","binding","guessHandleType","WriteStream","_handle","unref","SyncWriteStream","autoClose","Socket","readable","read","_isStdio","createWritableStdioStream","inspect","trim","O","column","getSnippet","maxLength","head","snippet","compact","prevTime","createDebug","enabled","curr","coerce","formatter","hash","abs","selectColor","disable","skips","ByteSequence_1","Byte_1","isCodeUnitPrefix","aCodeUnit","bCodeUnit","isomorphicEncode","codePoints","str_1","str_1_1","isASCIIString","asciiLowercase","str_2","str_2_1","code","stripLeadingAndTrailingASCIIWhitespace","collectASequenceOfCodePoints","skipASCIIWhitespace","isCodeUnitLessThan","asciiUppercase","str_3","str_3_1","asciiCaseInsensitiveMatch","asciiEncode","asciiDecode","stripNewlines","normalizeNewlines","stripAndCollapseASCIIWhitespace","strictlySplit","delimiter","splitAStringOnCommas","concatenate","separator","col","_str","_index","skipIfStartsWith","openBracket","isWhiteSpaceToken","isSpace","seek","openTag","skipSpace","takeUntil2","quotedString","skipUntil","takeUntilStartsWith","takeUntil","startQuote","take","isQuote","strLength","startIndex","char","space","char1","char2","msg","firstNewLineIndex","lastNewlineIndex","relativeTo","offsetA","offsetB","Equal","ESCAPE_SEQUENCES","DEPRECATED_BOOLEANS_SYNTAX","encodeHex","character","noArrayIndent","skipInvalid","flowLevel","isNothing","styleMap","compileStyleMap","sortKeys","lineWidth","noRefs","noCompatMode","condenseFlow","explicitTypes","duplicates","usedDuplicates","indentString","spaces","ind","generateNextLine","isWhitespace","isPrintable","isPlainSafe","isNsChar","needIndentIndicator","writeScalar","iskey","singleLineOnly","indentPerLevel","testAmbiguousType","prev_char","hasLineBreak","hasFoldableLine","shouldTrackWidth","previousLineBreak","plain","chooseScalarStyle","testImplicitResolving","blockHeader","dropEndingNewline","moreIndented","nextLF","lineRe","foldLine","prevMoreIndented","foldString","nextChar","escapeSeq","escapeString","indentIndicator","clip","breakRe","detectType","typeList","writeNode","block","duplicateIndex","duplicate","objectOrArray","objectKey","objectValue","explicitPair","pairBuffer","objectKeyList","writeBlockMapping","writeFlowMapping","arrayLevel","writeBlockSequence","writeFlowSequence","getDuplicateReferences","objects","duplicatesIndexes","inspectNode","XMLBuilderImpl_1","XMLBuilderCBImpl_1","BuilderFunctionsCB_1","namespace_validate","createHTMLDocument","title","htmlElement","headElement","titleElement","textElement","bodyElement","hasFeature","serializeToString","_xmlSerialization","serializedDocument","_rootWritten","suppressArray","supportedTokens","removeNodeIterator","nodeIterator","toBeRemovedNode","updateASlotsName","updateASlotablesName","updateAnElementID","removedNode","oldParent","insertedNode","toBeRemoved","create_abortController","isHexCode","isOctCode","isDecCode","hasDigits","binary","octal","decimal","hexadecimal","FILTER_ACCEPT","FILTER_REJECT","FILTER_SKIP","SHOW_ALL","SHOW_ELEMENT","SHOW_ATTRIBUTE","SHOW_TEXT","SHOW_CDATA_SECTION","SHOW_ENTITY_REFERENCE","SHOW_ENTITY","SHOW_PROCESSING_INSTRUCTION","SHOW_COMMENT","SHOW_DOCUMENT","SHOW_DOCUMENT_TYPE","SHOW_DOCUMENT_FRAGMENT","SHOW_NOTATION","substringData","appendData","insertData","deleteData","replaceData","reason","mark","captureStackTrace","XMLAlgorithm_1","__export","subject","cycle","XMLReader_1","JSONReader_1","YAMLReader_1","FixedSizeSet_1","ObjectCache_1","CompareCache_1","Lazy_1","StringWalker_1","proto","getPrototypeOf","ctor","baseClass","mixinClass","overrides","getOwnPropertyNames","orgPropDesc","getOwnPropertyDescriptor","propDesc","defaults","overwrite","arr","arrayLength","getObjectValue","removeObjectValue","isIterable","valueOf","byteIndex","c2","_composedFlag","composedPath","currentTarget","currentTargetIndex","currentTargetHiddenSubtreeLevel","currentHiddenLevel","maxHiddenLevel","stopPropagation","stopImmediatePropagation","preventDefault","initEvent","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","BaseReader_1","js_yaml_1","html","xml","xmlns","mathml","svg","xlink","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","ab","__dirname","__webpack_exports__"],"sourceRoot":""}